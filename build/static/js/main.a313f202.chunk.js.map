{"version":3,"sources":["HomeButton.js","AppBar.js","ToolbarButton.js","MarxanDialog.js","LoadingDialog.js","LoginDialog.js","RegisterDialog.js","ResendPasswordDialog.js","Notification.js","Welcome.js","ToolsMenu.js","UserMenu.js","HelpMenu.js","UserSettingsDialog.js","ProfileDialog.js","MarxanTable.js","UsersDialog.js","AboutDialog.js","MenuItemWithButton.js","TargetIcon.js","LinearGauge.js","FeaturesList.js","SelectFeatures.js","InfoPanel.js","TransparencyControl.js","Legend.js","LogItem.js","Log.js","ResultsPanel.js","FeatureInfoDialog.js","ProjectsDialog.js","Metadata.js","SelectFieldMapboxLayer.js","PlanningUnitsDialog.js","SelectCostFeatures.js","FeaturesDialog.js","NewProjectDialog.js","NewProjectWizardDialog.js","FailedToDeleteDialog.js","MapContainer2.js","PlanningGridDialog.js","PlanningGridsDialog.js","NewPlanningGridDialog.js","ShapefileUpload.js","ImportPlanningGridDialog.js","FeatureDialog.js","NewFeatureDialog.js","ImportFeaturesDialog.js","CostsDialog.js","RunSettingsDialog.js","RendererSelector.js","ColorSelector.js","ClassificationDialog.js","MapContainer.js","ClumpingDialog.js","UploadFolder.js","UploadMarxanFiles.js","ImportProjectDialog.js","RunLogDialog.js","ServerDetailsDialog.js","AlertDialog.js","ChangePasswordDialog.js","Popup.js","PopupFeatureList.js","PopupPAList.js","TargetDialog.js","ShareableLinkDialog.js","MetChart.js","GapAnalysisDialog.js","UpdateWDPADialog.js","ImportGBIFDialog.js","App.js","registerServiceWorker.js","index.js","genericFunctions.js","images/iucn.png","images/wcmc.png","images/mapbox_small.png","images/biopama_small.png","images/jrc_logo_color_small.png"],"names":["HomeButton","tileset","this","map","getSource","bounds","zoomToBounds","_btn","document","createElement","className","title","type","onclick","zoom","bind","_container","appendChild","parentNode","removeChild","undefined","React","AppBar","props","state","adminMenuOpen","evt","openFeaturesDialog","Fragment","Toolbar","style","display","open","backgroundColor","height","padding","icon","faBookOpen","onClick","openProjectsDialog","fontSize","faStar","faThLarge","openPlanningGridsDialog","marginLeft","marginRight","infoPanelOpen","faArrowAltCircleLeft","a","toggleInfoPanel","resultsPanelOpen","faArrowAltCircleRight","b","toggleResultsPanel","faWrench","showToolsMenu","faUser","showUserMenu","user","userRole","faQuestionCircle","showHelpMenu","Component","ToolbarButton","_style1","_style2","show","minWidth","width","label","Object","assign","overlayStyle","lineHeight","buttonStyle","MarxanDialog","searchText","window","helpLink","setState","target","value","searchTextChanged","offsetX","rightX","right","left","offsetY","marginTop","cancelButton","showCancelButton","cancelLabel","primary","onCancel","disabled","cancelDisabled","okButton","hideOKButton","okLabel","onOk","okDisabled","contentStyle","contentWidth","onRequestClose","showOverlay","titleClassName","titleStyle","titleBarIcon","actions","children","position","top","key","showSearchBox","onChange","searchTextChange","border","borderRadius","fontFamily","fontWeight","color","paddingLeft","faSearch","loading","showSpinner","openDocumentation","LoadingDialog","modal","LoginDialog","e","nativeEvent","selectServer","marxanServers","password","marxanServer","offline","guestUserEnabled","corsEnabled","floatingLabelText","floatingLabelFixed","underlineShow","menuItemStyle","labelStyle","name","item","text","primaryText","innerDivStyle","leftIcon","faUnlink","faLock","host","description","id","event","changeUserName","inputStyle","onKeyPress","handleKeyPress","changePassword","RegisterDialog","validForm","email","validEmail","validateEmail","err","message","valid","test","String","toLowerCase","Error","c","newValue","errorText","createNewUser","ResendPasswordDialog","resendPassword","resending","changeEmail","Notification","faExclamationTriangle","paddingRight","faCloudDownloadAlt","faChalkboardTeacher","faNewspaper","dangerouslySetInnerHTML","__html","html","removeNotification","Welcome","checked","isInputChecked","saveOptions","openNewProjectDialog","notifications","filter","visible","notificationsPanel","autoDetectWindowHeight","bodyStyle","faDraftingCompass","verticalAlign","faSync","resetNotifications","bottom","onCheck","toggleShowWelcomeScreen","ToolsMenu","openUsersDialog","hideToolsMenu","openRunLogDialog","openGapAnalysisDialog","anchorEl","menuAnchor","desktop","onMouseLeave","listStyle","selectedMenuItemStyle","faUsers","faRunning","faChartBar","metadata","pu_country","UserMenu","anchorOrigin","horizontal","vertical","targetOrigin","hideUserMenu","openUserSettingsDialog","marginBottom","faCog","openProfileDialog","faEdit","openChangePasswordDialog","faUserLock","logout","white","HelpMenu","DOCS_ROOT","hideHelpMenu","openServerDetailsDialog","faServer","openAboutDialog","faInfoCircle","UserSettingsDialog","saveEnabled","options","payload","basemap","basemaps","changeBasemap","setOption","updateOptions","alias","userData","USEFEATURECOLORS","toggleUseFeatureColors","SHOWWELCOMESCREEN","ProfileDialog","updated","updateUser","EMAIL","closeProfileDialog","updateState","defaultValue","NAME","floatingLabelShrinkStyle","floatingLabelFocusStyle","MarxanTable","data","keys","some","searchColumns","includes","filteredData","filterData","pageSize","length","showPagination","minRows","columns","USER_ROLES","UsersDialog","selectedUser","oldRole","newRole","changeRole","deleteUser","desc","Date","slice","users","closeDialog","changeUser","Header","accessor","headerStyle","Cell","row","original","menuStyle","underlineStyle","iconStyle","ROLE","sortMethod","sortDate","getTrProps","rowInfo","column","background","indexOf","textContent","faTrashAlt","_delete","toggleEnableGuestUser","AboutDialog","marxanClientReleaseVersion","href","wdpaAttribution","rel","src","iucn","alt","wcmc","biopama_small","jrc_logo_color_small","mapbox_small","MenuItemWithButton","TargetIcon","editing","localTargetValue","startEditing","str","isNumber","Number","target_value","getElementById","interestFeature","focus","select","updateTargetValue","targetStatus","fontColor","blue300","size","userSelect","alignItems","justifyContent","onBlur","stopEditing","LinearGauge","alwaysShowPercent","showUnprotectedPercent","targetAsLine","protectedWidth","protectedHidden","scaleFactor","scaledWidth","targetPxOffset","Math","round","protected_percent","protNum","percentageProtectedText","targetShortfallWidth","unprotectedWidth","opacity","useFeatureColors","FeaturesList","feature","openFeatureMenu","targetIcon","updateFeature","ctrlKey","feature_puid_layer_loaded","toggleFeaturePUIDLayer","feature_layer_loaded","toggleFeatureLayer","List","maxHeight","maxheight","overflow","features","pu_area","protected_area","target_area","leftAvatar","simple","secondaryText","itemClick","rightIconButton","touch","tooltipPosition","iconClick","grey400","SelectFeatures","openTargetDialog","showTargetButton","faCrosshairs","leftmargin","OLDVERSION","InfoPanel","editingProjectName","editingDescription","prevProps","prevState","snapshot","project","DESCRIPTION","keyCode","blur","renameProject","then","renameDescription","puEditing","stopPuEditSession","startPuEditSession","changeIucnCategory","iucn_categories","checkedString","toggleProjectPrivacy","toggleCosts","stopProcess","pid","zDepth","startEditingProjectName","Tabs","contentContainerStyle","activeTab","onActive","project_tab_active","startEditingDescription","CREATEDATE","PRIVATE","features_tab_active","pu_tab_active","pu_alias","preprocessing","IUCN_CATEGORY","faUnlock","startStopPuEditSession","cursor","faEraser","clearManualEdits","faShareAlt","getShareableLink","showRunSettingsDialog","secondary","runMarxan","TransparencyControl","showSlider","old_opacity","layer","changeOpacity","onMouseEnter","mouseEnter","mouseLeave","faEyeSlash","faEye","toggleLayer","sliderStyle","margin","Legend","colorCode","legendItems","brew","breaks","numClasses","getNumClasses","colorSchemeLength","getMaxNumberOfClasses","colorScheme","colorSchemes","numClassesArray","Array","apply","call","classesToShow","range","suffix","legendLabel","resultsLayer","results_layer_opacity","pa_layer_visible","wdpaLayer","wdpa_layer_opacity","planning_units_legend_items","getPlanningUnitsLegend","protected_areas_legend_items","getProtectedAreasLegend","Log","status","faCheckCircle","hasOwnProperty","info","messages","index","replace","error","LogItem","runtime","ResultsPanel","showClipboard","selectedSolution","runtimeStr","objDiv","scrollTop","scrollHeight","solutions","resetSolution","startTimer","stopTimer","string","pad","join","timer","setInterval","minutes","floor","seconds","finalTime","str_pad_left","clearInterval","solution","loadSolution","owner","relatedTarget","node","body","createTextRange","moveToElementText","getSelection","selection","createRange","selectNodeContents","removeAllRanges","addRange","console","warn","selectText","execCommand","changeSolution","Run_Number","activeResultsTab","legend_tab_active","openClassificationDialog","solutions_tab_active","processing","thisRef","instance","noDataText","log_tab_active","copyLog","clearLog","FeatureInfoDialog","updateFeatureValue","roundedText","toFixed","getHTML","hint","currentTarget","innerHTML","isValidTargetValue","obj","alert","getAreaHTML","contentEditable","suppressContentEditableWarning","FEATURE_PROPERTIES","forEach","old_version","showForNew","showForOld","push","renderKeyCell","renderValueCell","ProjectsDialog","selectedProject","deleteProject","oldVersion","getAllFeatures","loadAndClose","loadProject","cloneProject","openImportProjectDialog","tableColumns","renderName","renderTitle","projects","load","changeProject","unauthorisedMethods","faPlusCircle","_new","Metadata","validName","setName","setDescription","paddingBottom","changeName","changeDescription","multiLine","rows","SelectFieldMapboxLayer","items","envelope","getLatLngLikeFromWKT","fitBounds","easing","num","addLayerToMap","feature_class_name","changeItem","wkt","returnVal","parse","require","coordinates","west","east","mapboxlayername","request","mapboxUser","MBAT_PUBLIC","parseUrlExists","res","statusCode","log","getStyle","layers","substr","removeLayer","removeSource","addSource","url","addLayer","selectedValue","PlanningUnitsDialog","planning_unit_grids_received","mapboxgl","Map","container","mapContainer","center","ref","el","pu","planning_unit_grids","SelectCostFeatures","selectedFeature","ListItem","defaultProps","disableTouchRipple","disableFocusRipple","iconButtonElement","rightIconMenu","selectedCosts","openCostsDialog","FeaturesDialog","previousRow","deleteFeature","newFeatureAnchor","showNewFeaturePopover","importFeatureAnchor","showImportFeaturePopover","openImportFeaturesDialog","initialiseDigitising","openImportGBIFDialog","addingRemovingFeatures","shiftKey","selectedIds","getFeaturesBetweenRows","selectFeatures","clickFeature","thisRow","selectedFeatureIds","idx1","idx2","allFeatures","splice","unselectFeature","feature_metadata","previewFeature","preview","renderPreview","getTdProps","newFeaturePopoverOpen","hideNewFeaturePopover","_newByDigitising","importFeaturePopoverOpen","hideImportFeaturePopover","_openImportFeaturesDialog","created_by","faCircle","clearAllFeatures","selectAllFeatures","NewProjectDialog","handleNext","stepIndex","handlePrev","steps","loadingFeatures","finished","featuresDialogOpen","JSON","stringify","gotoStart","selected","closeFeaturesDialog","removeFeature","addFeature","ids","arr","Promise","resolve","reject","createNewProject","planning_grid_name","maxWidth","textAlign","getPlanningUnitGrids","changePU","openImportPlanningGridDialog","updateSelectedFeatures","NewProjectWizardDialog","stepComplete","iso3","country","domain","shape","areakm2","worldEcosystems","allSpecies","endemicSpecies","endangeredSpecies","includeExistingPAs","iucn_category","complete","countries","name_iso31","getComplete","domains","shapes","areakm2s","createNewNationalProject","dropDownStyle","changeCountry","changeDomain","changeShape","changeAreaKm2","toggleWorldEcosystems","toggleAllSpecies","toggleEndemicSpecies","toggleEndangeredSpecies","toggleIncludeExistingPAs","closeNewProjectWizardDialog","FailedToDeleteDialog","deleteWhat","MapContainer2","attributionControl","on","outlineColor","planning_grid_metadata","tilesetid","getTilesetMetadata","catch","setSnackBar","remove","PlanningGridDialog","expanded","areaTD","_area","country_idTD","country_id","colSpan","planning_unit_count","creation_date","source","aoi_id","faAngleUp","faAngleDown","expand","PlanningGridsDialog","selectedPlanningGrid","deletePlanningGrid","openNewPlanningGridDialog","planningGrid","previewPlanningGrid","isNaN","renderCountry","renderArea","planningGrids","changePlanningGrid","openImportDialog","NewPlanningGridDialog","createNewPlanningUnitGrid","response","changeIso3","faArrowAltCircleUp","ShapefileUpload","active","fileUpload","files","requestEndpoint","formData","FormData","filename","append","post","withCredentials","SEND_CREDENTIALS","finishedLoading","checkForErrors","setFilename","parameter","htmlFor","accept","mandatory","spin","ImportPlanningGridDialog","zipFilename","_description","ex","setzipFilename","FeatureDialog","area","NewFeatureDialog","createNewFeature","INITIAL_STATE","fieldnames","splitField","ImportFeaturesDialog","unzipShapefile","shapefile","rootfilename","importFeatures","getShapefileFieldnames","deleteShapefile","_disabled","RadioButton","defaultSelected","resetFieldnames","changeSplitField","CostsDialog","RunSettingsDialog","updateEnabled","renderEditable","runParams","openParametersDialog","updateRunParams","cellInfo","float","onFocus","setUpdateEnabled","showClumpingDialog","RendererSelector","changeValue","values","toUpperCase","concat","toString","selectionRenderer","autoWidth","handleChange","property","ColorSelector","getSwatch","disableHighlight","divWidth","colorDivs","borderColor","_c","RENDERERS","COLORCODES","NUMCLASSES","TOPCLASSES","ClassificationDialog","dataBreaks","x","stroke","summaryStats","strokeDasharray","dataKey","tick","offset","angle","fill","changeColorCode","renderer","COLORCODE","changeRenderer","CLASSIFICATION","changeNumClasses","changeShowTopClasses","MapContainer","resultsRendered","mapCentre","mapZoom","interactive","RESULTS_LAYER_NAME","setCenter","setMapZoom","renderResults","paintProperty","setLayoutProperty","getLayer","setPaintProperty","fillColor","oulineColor","setZoom","selectBlm","blmValue","ClumpingDialog","blmValues","blmMin","blmMax","blmChanged","createProjectGroupAndRun","getBlmValues","min","max","increment","i","parseFloat","isFinite","setBlmValue","rerunProjects","clumpingRunning","map0_paintProperty","parseBlmValue","map1_paintProperty","map2_paintProperty","map3_paintProperty","map4_paintProperty","changeBlmMin","changeBlmMax","UploadFolder","folderUploadText","filesListed","directory","webkitdirectory","_addDirectory","UploadMarxanFiles","setZipFilename","setPlanningGridName","ImportProjectDialog","importProject","RunLogDialog","selectedRun","runningJobs","runLogs","runningLogs","stopMarxan","refreshRunLogs","clearRunLogs","getRunLogs","run","faTimesCircle","endtime","s","mins","secs","runTimeFormatted","renderUser","renderProject","renderEnded","renderRuntime","renderStatus","changeSelectedRun","stopRun","faRedoAlt","ServerDetailsDialog","newServerSoftware","server_version","SERVER_VERSION","newWDPAVersion","showUpdateWDPADialog","port","system","processor_count","disk_space","ram","wdpa_version","planning_grid_units_limit","renderWithIcon","AlertDialog","ChangePasswordDialog","currentPassword","newPassword1","newPassword2","checkPassword","PASSWORD","passwordsDontMatch","setCurrentPassword","setNewPassword1","setNewPassword2","Popup","active_pu","xy","y","PopupFeatureList","PopupPAList","wdpaid","iucn_cat","onMouseOver","TargetDialog","validTarget","validateTarget","_validTarget","updateTargetValueForFeatures","ShareableLinkDialog","navigator","clipboard","writeText","shareableLinkUrl","faClipboard","copyToClipboard","MetChart","rounded","current_protected_percent","country_area","getArea","units","current_protected_area","total_area","countryText","showCountryArea","titleText","colors","cx","cy","isAnimationActive","startAngle","endAngle","innerRadius","outerRadius","entry","_color","strokeWidth","clickable","CustomTooltip","GapAnalysisDialog","showChart","amount_under_protection_property","total_amount_property","sum","val","mean","_data","gapAnalysis","stats","projectFeatures","item2","_feature_class_name","sort","targetsMetCount","charts","_alias","score","getRepresentationScore","closeGapAnalysisDialog","textAnchor","interval","content","onToggle","toggleView","paddingTop","toggled","UpdateWDPADialog","WDPA","latest_version","metadataUrl","updateWDPA","ImportGBIFDialog","clicked","selectedItem","importGBIFData","gbifSpeciesSuggest","suggestions","scientificName","changeSearchText","MARXAN_CLIENT_VERSION","packageJson","version","ERRORS_PAGE","PLANNING_UNIT_STATUSES","IUCN_CATEGORIES","DOMAINS","SHAPES","AREAKM2S","PU_LAYER_NAME","STATUS_LAYER_NAME","PUVSPR_LAYER_NAME","timers","App","usersDialogOpen","alertDialogOpen","featureMenuOpen","profileDialogOpen","aboutDialogOpen","helpDialogOpen","importProjectDialogOpen","UserSettingsDialogOpen","CostsDialogOpen","welcomeDialogOpen","registerDialogOpen","clumpingDialogOpen","settingsDialogOpen","projectsDialogOpen","openInfoDialogOpen","importGBIFDialogOpen","newProjectDialogOpen","newProjectWizardDialogOpen","shareableLinkDialogOpen","classificationDialogOpen","resendPasswordDialogOpen","NewPlanningGridDialogOpen","importPlanningGridDialogOpen","FailedToDeleteDialogOpen","changePasswordDialogOpen","importFeaturesDialogOpen","serverDetailsDialogOpen","planningGridsDialogOpen","planningGridDialogOpen","updateWDPADialogOpen","NewFeatureDialogOpen","gapAnalysisDialogOpen","featureDialogOpen","runLogDialogOpen","targetDialogOpen","notificationsOpen","toolsMenuOpen","userMenuOpen","helpMenuOpen","failedToDeleteProjects","loggedIn","shareableLink","popup_point","snackbarOpen","snackbarMessage","tilesets","puFeatures","paFeatures","uploading","currentFeature","featureDatasetFilename","costs","planning_units","logMessages","lng","lat","location","search","getGlobalVariables","searchParams","URLSearchParams","openShareableLink","classyBrew","accessToken","MAPBOX_BASEMAPS","initialiseServers","MARXAN_SERVERS","has","serverData","find","server","get","switchToGuestUser","validateUser","params","timeout","jsonp","endpoint","promise","method","msgCallback","ws","WebSocket","websocketEndpoint","onmessage","onopen","onerror","onclose","wasClean","showSnackbar","networkError","responseIsTimeoutOrEmpty","serverError","isServerError","isError","trace","msg","warning","logMessage","newFeatureCreated","removeMessageFromLog","_messages","_message","silent","hosts","hostname","protocol","getAllServerCapabilities","promiseArray","getServerCapabilities","all","fetchJsonp","json","PERMITTED_DOMAINS","ENABLE_GUEST_USER","machine","MACHINE","client_version","MARXAN_SERVER_VERSION","NODE","processor","PROCESSOR","PROCESSOR_COUNT","RAM","release","RELEASE","SYSTEM","VERSION","WDPA_VERSION","PLANNING_GRID_UNITS_LIMIT","DISK_FREE_SPACE","SERVER_NAME","SERVER_DESCRIPTION","wdpa_vector_tile_layer","setWDPAVectorTilesLayerName","normalisedData","puids","_get","login","LASTPROJECT","dismissedNotifications","openWelcomeDialog","BASEMAP","setBasemap","resetResults","resendEmail","closeResendPasswordDialog","usersCopy","deleteProjectsForUser","role","enabled","updateProjectParameter","NOTIFICATIONS","addNotifications","showForRoles","CLIENT_VERSION","_notifications","allowedForRole","notDismissed","notExpired","expires","d","notification","_notification","dismissNotification","parseNotifications","parameters","removeKeys","appendToFormData","_post","newUserData","updateProjectParams","array","runParameters","PLANNING_UNIT_NAME","MAPBOX_USER","getResults","feature_preprocessing","protected_area_intersections","previousIucnCategory","initialiseInterestFeatures","tmpArr","outFeatures","projectFeature","getArrayItem","addFeatureAttributes","getSelectedFeatureIds","runMarxanResponse","hideFeatureLayer","hideLayer","closeRegisterDialog","interest_features","target_values","spf_values","getProjects","newName","newDesc","private","startLogging","resetProtectedAreas","updateSpecFile","updatePuFile","updatePuvsprFile","startMarxanJob","runFinished","marxanStopped","spf","preprocessAllFeatures","closeFeatureMenu","preprocessFeature","preprocessed","_ws","wsMessageCallback","pu_count","occurs_in_planning_grid","runCompleted","ssoln","renderSolution","summary","updateProtectedAmount","mvbest","mvData","mvbestItemIndex","findIndex","mvItem","setFeaturesState","uploadId","createImportProject","importZippedShapefileAsPu","uploadFiles","upgradeProject","formattedDate","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","OUTPUTDIR","pollMapbox","file","filepath","webkitRelativePath","split","uploadFile","getSolution","mv","paintProperties","getPaintProperties","projectName","clump","total","number","count","sampleSize","sample","ssolnLength","getssolncount","ceil","arrays","classification","getssolnSample","setSeries","brewCopy","newBrewColorScheme","setColorCode","setNumClasses","classify","getBreaks","rendererStateUpdated","setRenderer","fill_color_expression","initialiseFillColorExpression","fill_outline_color_expression","visibleValue","classifyData","getColorInRange","attribute","expression","cost_data","queryRenderedFeatures","point","puid","properties","vector_tile_properties","hidePopup","mapLoaded","mapError","mapClick","mouseEnterPA","mouseLeavePA","getCanvas","lngLat","abs","showProtectedAreasPopup","ms","setTimeout","timerCancelled","wdpaIds","addControl","ScaleControl","NavigationControl","mapboxDrawControls","MapboxDraw","displayControlsDefault","controls","polygon","trash","defaultMode","mouseMove","updateMapCentreAndZoom","polygonDrawn","getCenter","getZoom","sourceId","getPUFeatureList","styleUrl","fetch","TileJSON","sources","esri","tilesurl","tiles","scheme","tilejson","format","tileInfo","maxzoom","getValidStyle","loadMapStyle","addWDPASource","addWDPALayer","addPlanningGridLayers","filterWdpaByIucnCategory","provider","getESRIStyle","styleJson","setStyle","diff","createMap","getMetadata","removePlanningGridLayers","tilesetId","response2","beforeLayer","attribution","tilesUrl","layername","getLayoutProperty","layerId","getPlanningUnitsCostData","renderPuCostLayer","showLayer","pu_tab_inactive","reinstatePuvsprLayer","isLayerVisible","previousResultsOpacity","renderPuEditLayer","onClickRef","moveStatusUp","onContextMenu","resetStatus","off","updatePuDatFile","getPuidsFromIucnCategory","updatePlanningUnits","param_name","changeStatus","direction","getStatusLevel","next_status","getNextStatusLevel","statuses","removePuidFromArray","addPuidToArray","status_level","getPlanningUnitsByStatus","getStatusPosition","nextStatus","removePuidsFromArray","appPuidsToPlanningUnits","from","Set","new_array","openPlanningGridDialog","newPlanningGridCreated","closeNewPlanningGridDialog","closeImportPlanningGridDialog","deletePlanningUnitGrid","openFailedToDeleteDialog","records","mapbox_layer_name","uploadid","MBAT","_timer","showClearSelectAll","finaliseDigitising","zipname","newProps","element","removeControl","openNewFeatureDialog","digitisedFeatures","newFeatures","callback","openFeatureDialog","zipfile","spiltfield","uploadIds","q","coords","geometry","coordinate","closeNewFeatureDialog","getInterestFeature","addNewFeature","featuresCopy","_deleteFeature","removeFeatureFromAllFeatures","layerName","line_color_expression","unselectItem","nums","extent","preventDefault","getCountries","getUsers","runGapAnalysis","iucnCategory","_metadata","renderPAGridIntersections","iucnCategories","getIndividualIucnCategories","filterExpr","setFilter","hidePALegend","showPALegend","retValue","intersections_by_category","getIntersections","getPuidsFromNormalisedData","preprocessProtectedAreas","intersections","clashingPuids","previousPuids","newPuids","getNewPuids","oldPuids","_iucn_categories","downloadUrl","closeWDPAUpdateDialog","BOUNDNAME","currentFiles","preprocessBoundaryLengths","deleteProjects","resetPaintProperties","runProjects","projectNames","projectsRun","loadOtherSolution","newRunParams","openShareableLinkDialog","openRegisterDialog","openResendPasswordDialog","closeWelcomeDialog","openNewProjectWizardDialog","closeUserSettingsDialog","closeUsersDialog","closeAboutDialog","hideResults","closeInfoDialog","cancelTimer","closeProjectsDialog","closeNewProjectDialog","importPlanningUnitGrid","closeFeatureDialog","closeImportFeaturesDialog","setNewFeatureDatasetFilename","closeImportGBIFDialog","closePlanningGridsDialog","closeFailedToDeleteDialog","closePlanningGridDialog","closeCostsDialog","closeRunSettingsDialog","closeClassificationDialog","hideClumpingDialog","closeImportDialog","closeRunLogDialog","closeServerDetailsDialog","openWDPAUpdateDialog","closeChangePasswordDialog","closeAlertDialog","closeSnackbar","openInfoDialog","removeFromProject","zoomToFeature","preprocessSingleFeature","closeTargetDialog","closeShareableLinkDialog","isLocalhost","Boolean","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","render","URL","process","origin","addEventListener","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","module","exports","reduce","scale","minLng","maxLng"],"mappings":"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","file":"static/js/main.a313f202.chunk.js","sourcesContent":["import * as React from 'react';\nimport {zoomToBounds } from './genericFunctions.js';\n\nclass HomeButton extends React.Component {\n    zoom() {\n        let tileset = this.map.getSource(\"planning_units_source\");\n        if (tileset && tileset.bounds) zoomToBounds(this.map, tileset.bounds);\n    }\n    onAdd(map){\n        this.map = map;\n        this._btn = document.createElement(\"button\");\n        this._btn.className = \"mapboxgl-ctrl-icon homeIcon\";\n        this._btn.title = \"Zoom to the extent of the project\";\n        this._btn.type = \"button\";\n        this._btn[\"aria-label\"] = \"Toggle Pitch\";\n        this._btn.onclick = this.zoom.bind(this);\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl mapboxgl-ctrl-group\";\n        this._container.appendChild(this._btn);\n        return this._container;\n\t}\n\tonRemove(map){\n        this._container.parentNode.removeChild(this._container);\n        this.map = undefined;\n\t}\n\tgetDefaultPosition(){\n\t    return 'bottom-right';\n\t}\n}\n\nexport default HomeButton;\n","import React from 'react';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBookOpen} from '@fortawesome/free-solid-svg-icons';\nimport {faStar} from '@fortawesome/free-solid-svg-icons';\nimport {faWrench} from '@fortawesome/free-solid-svg-icons';\nimport {faThLarge} from '@fortawesome/free-solid-svg-icons';\nimport {faArrowAltCircleLeft} from '@fortawesome/free-solid-svg-icons';\nimport {faArrowAltCircleRight} from '@fortawesome/free-solid-svg-icons'; \nimport {faArrowAltCircleLeft as a} from '@fortawesome/free-regular-svg-icons';\nimport {faArrowAltCircleRight as b} from '@fortawesome/free-regular-svg-icons';\nimport {faQuestionCircle} from '@fortawesome/free-solid-svg-icons';\nimport {faUser} from '@fortawesome/free-solid-svg-icons';\nimport {Toolbar, ToolbarGroup, ToolbarSeparator} from 'material-ui/Toolbar';\n\nclass AppBar extends React.Component {\n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {adminMenuOpen: false};\n\t}\n\t//opens the features dialog without the ability to add/remove features (i.e. different from the dialog that is opened from a project)\n  openFeaturesDialog(evt) {\n    this.props.openFeaturesDialog(false);\n }\n  render() {\n    return (\n      <React.Fragment>\n        <Toolbar style={{display: (this.props.open) ? 'block' : 'none', backgroundColor: 'rgb(0, 188, 212)', height: '36px', padding: '0px 18px'}} className={'appBar'}>\n        \t<ToolbarGroup>\n            <FontAwesomeIcon icon={faBookOpen} onClick={this.props.openProjectsDialog} title=\"Projects\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <FontAwesomeIcon icon={faStar} onClick={this.openFeaturesDialog.bind(this)} title=\"Features\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <FontAwesomeIcon icon={faThLarge} onClick={this.props.openPlanningGridsDialog.bind(this)} title=\"Planning grids\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <ToolbarSeparator style={{marginLeft:'12px', marginRight:'12px'}}/>\n            <FontAwesomeIcon style={{fontSize: '20px'}} icon={(this.props.infoPanelOpen) ? faArrowAltCircleLeft : a} onClick={this.props.toggleInfoPanel} title={(this.props.infoPanelOpen) ? \"Hide the project window\" : \"Show the project window\"} className={'appBarIcon'}/>\n            <FontAwesomeIcon style={{fontSize: '20px'}} icon={(this.props.resultsPanelOpen) ? faArrowAltCircleRight : b} onClick={this.props.toggleResultsPanel} title={(this.props.resultsPanelOpen) ? \"Hide the results window\" : \"Show the results window\"} className={'appBarIcon'} />\n            <ToolbarSeparator style={{marginLeft:'12px', marginRight:'12px'}}/>\n            <FontAwesomeIcon icon={faWrench} onClick={this.props.showToolsMenu} title={\"Tools and analysis\"} className={'appBarIcon'} style={{fontSize: '19px'}}/>\n            <FontAwesomeIcon icon={faUser} onClick={this.props.showUserMenu} title={\"User: \" + this.props.user + \" (\" + this.props.userRole + \")\"} className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <FontAwesomeIcon icon={faQuestionCircle} onClick={this.props.showHelpMenu} title={\"Help and support\"} className={'appBarIcon'} style={{fontSize: '19px'}}/>\n          </ToolbarGroup>\n        </Toolbar>\n      </React.Fragment>\n      );\n }\n}\n\nexport default AppBar;\n","import React from 'react';\nimport RaisedButton from 'material-ui/RaisedButton';\n\nclass ToolbarButton extends React.Component {\n\trender() {\n\t\t//merge any user passed style\n\t\tlet _style1 = (this.props.style) ? this.props.style : {};\n\t\tlet _style2 = { display: (this.props.show !== false) ? 'inline-block' : 'none', marginLeft:'4px', marginRight:'4px',padding: '0px',minWidth: '30px',width: (this.props.label) ? '' :'24px', height: '24px'};\n\t\tObject.assign(_style1, _style2);\n\t\treturn (\n\t\t\t<RaisedButton \n\t\t\t\t{...this.props}  \n\t\t\t\tstyle={_style1}\n\t\t\t\toverlayStyle={{lineHeight:'24px',height:'24px'}}\n\t\t\t\tbuttonStyle={{lineHeight:'24px',height:'24px'}} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ToolbarButton;\n","import React from 'react';\nimport Dialog from 'material-ui/Dialog';\nimport ToolbarButton from './ToolbarButton';\nimport Sync from 'material-ui/svg-icons/notification/sync'; \nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {faQuestionCircle} from '@fortawesome/free-regular-svg-icons';\nimport {faSearch} from '@fortawesome/free-solid-svg-icons';\n \n//properties can be:\n//contentWidth - the width of the content area\n//offsetX - the distance from the left edge (mutually exclusive with rightX)\n//rightX - the distance from the right edge (mutually exclusive with offsetX)\n//offsetY - the distance from the top\n//onOk - fired when the OK button is clicked\n//onCancel - fired when the Cancel button is clicked or when the dialog needs to be closed\n//showCancelButton - set to true to show the cancel button\n//actions - an array of components to add to the actions array in the dialog\n//helpLink - a relative url to the bookmark in the user documentation that describes the particular dialog box\n//showSearchBox - true to show a search box\n\nlet DOCS_ROOT = \"https://andrewcottam.github.io/marxan-web/documentation/\";\n\nclass MarxanDialog extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {searchText: \"\"};\n\t}\n\topenDocumentation(){\n\t\twindow.open(DOCS_ROOT + this.props.helpLink);\n\t}\n\tsearchTextChange(evt){\n\t\tthis.setState({searchText: evt.target.value});\n\t\tif (this.props.searchTextChanged) this.props.searchTextChanged(evt.target.value);\n\t}\n\trender() {\n\t\t//if the offsetX or rightX is set, then make this into a style\n\t\tlet offsetX = (this.props.offsetX) ? {marginLeft: this.props.offsetX + 'px', width: '400px'} : (this.props.rightX) ? {right: this.props.rightX + 'px', width: '400px', left:null} : {};\n\t\tlet offsetY = (this.props.offsetY) ? {marginTop: this.props.offsetY - 60 + 'px'} : {};\n\t\tlet style = Object.assign(offsetX, offsetY);\n\t\tlet cancelButton = (this.props.showCancelButton) ? <ToolbarButton label={(this.props.cancelLabel) ? this.props.cancelLabel : \"Cancel\"} primary={true} onClick={this.props.onCancel} disabled={this.props.cancelDisabled}/> : null;\n\t\tlet okButton = (this.props.hideOKButton) ?  null : <ToolbarButton label={(this.props.okLabel) ? this.props.okLabel : \"OK\"} primary={true} onClick={this.props.onOk} disabled={this.props.okDisabled}/>;\n\t\tlet contentStyle = (this.props.contentStyle) ? this.props.contentStyle : (this.props.contentWidth) ? {width: this.props.contentWidth + 'px'} : {};\n\t\treturn (\n\t\t\t<Dialog      \n\t\t\t\t{...this.props} \n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\toverlayStyle={(this.props.showOverlay) ? {display:'block'} : {display:'none'}}\n\t\t\t\ttitleClassName={'dialogTitleStyle'}\n\t\t\t\tcontentStyle={contentStyle} \n\t\t\t\ttitleStyle={(this.props.titleBarIcon) ? {marginLeft: '27px'} : null}\n\t\t\t\tclassName={'dialogGeneric'}\n\t\t\t\tstyle={style} \n\t\t\t\tactions={[\n\t\t\t\t\tthis.props.actions,\n\t\t\t\t\tcancelButton, \n\t\t\t\t\tokButton,\n\t\t\t\t]} \n\t\t\t\tchildren={[\n\t\t\t\t\t(this.props.titleBarIcon) ? <FontAwesomeIcon icon={this.props.titleBarIcon} style={{position: 'absolute', top: '18px', left: '24px'}} key=\"k1\"/> : null,\n\t\t\t\t\t(this.props.showSearchBox) ? \n\t\t\t\t\t\t<div style={{right: '70px',position: \"absolute\",top: \"13px\"}} title={\"search\"} key=\"k27\">\n\t\t\t\t\t\t\t<input value={this.state.searchText} onChange={this.searchTextChange.bind(this)} style={{border: \"1px solid rgba(0,0,0,0.2)\", borderRadius: \"30px\", width:\"80px\", height: \"22px\",fontFamily:\"Roboto, sans-serif\",fontSize:\"12px\", fontWeight:\"400\",color:\"rgba(0,0,0,0.7)\",paddingLeft:\"10px\"}}/>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={faSearch} className={'appBarIcon docs'} style={{fontSize: \"13px\",position: \"absolute\",top: \"1px\",right: \"2px\", color: (this.state.searchText === \"\") ? \"rgba(0, 0, 0, 0.6)\" : \"rgb(255, 64, 129)\"}}/>\n\t\t\t\t\t\t</div> : null,\n\t\t\t\t\t<Sync className='spin' style={{display: (this.props.loading || this.props.showSpinner) ? \"inline-block\" : \"none\", color: 'rgb(255, 64, 129)', position: 'absolute', top: '15px', right: '41px',height:\"22px\",width:\"22px\"}} key={\"spinner\"}/>, this.props.children,\n\t\t\t\t\t(this.props.helpLink) ? <FontAwesomeIcon icon={faQuestionCircle} onClick={this.openDocumentation.bind(this)} title={\"Open documentation for this window\"} className={'appBarIcon docs'} style={{fontSize: '18px'}} key=\"helpLink\"/> : null\n\t\t\t\t]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default MarxanDialog;","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\n\nclass LoadingDialog extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tshowOverlay={true}\n\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\thideOKButton={true}\n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\ttitle=\"Loading..\" \n\t\t\t\t\tmodal={true} \n\t\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default LoadingDialog;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUnlink } from '@fortawesome/free-solid-svg-icons';\nimport { faLock } from '@fortawesome/free-solid-svg-icons';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass LoginDialog extends React.Component {\n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.props.onOk(); \n\t} \n\tselectServer(evt, key, value){\n\t\tthis.props.selectServer(this.props.marxanServers[key]);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tshowOverlay={true}\n\t\t\t\t\tokDisabled={(!this.props.user || !this.props.password || this.props.loading ||!this.props.marxanServer||(this.props.marxanServer&&this.props.marxanServer.offline)||(this.props.marxanServer&&!this.props.marxanServer.guestUserEnabled)) ? true : false} \n\t\t\t\t\tokLabel={(this.props.marxanServer&&!this.props.marxanServer.offline&&!this.props.marxanServer.corsEnabled&&this.props.marxanServer.guestUserEnabled) ? \"Login (Read-Only)\" : \"Login\"}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\tcancelLabel={\"Register\"}\n\t\t\t\t\tcancelDisabled={((this.props.marxanServer===undefined) || this.props.loading || (this.props.marxanServer&&this.props.marxanServer.offline) || (this.props.marxanServer&&!this.props.marxanServer.corsEnabled)) ? true : false} \n\t\t\t\t\thelpLink={\"docs_user.html#log-in-window\"}\n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\toffsetY={200}\n\t\t\t\t\tchildren={[\n\t\t\t\t\t<div key=\"21\">\n\t\t\t\t\t\t<SelectField  \n\t\t\t\t\t\t\tfloatingLabelText={'Marxan Server'} \n\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\tunderlineShow={false}\n\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\tstyle={{width:'320px'}}\n\t\t\t\t\t\t\tvalue={this.props.marxanServer&&this.props.marxanServer.name} \n\t\t\t\t\t\t\tonChange={this.selectServer.bind(this)}\n\t\t\t\t\t\t\tchildren= {this.props.marxanServers.map((item)=> {\n\t\t\t\t\t\t\t\t//if the server is offline - just put that otherwise: if CORS is enabled for this domain then it is read/write otherwise: if the guest user is enabled then put the domain and read only otherwise: put the domain and guest user disabled\n\t\t\t\t\t\t\t\tlet text = (item.offline) ? item.name  : (item.corsEnabled) ? item.name : (item.guestUserEnabled) ? item.name : item.name + \" (Guest user disabled)\";\n\t\t\t\t\t\t\t\treturn  <MenuItem \n\t\t\t\t\t\t\t\t\tvalue={item.name} \n\t\t\t\t\t\t\t\t\tkey={item.name} \n\t\t\t\t\t\t\t\t\tprimaryText={text} \n\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\tinnerDivStyle={{padding:'0px 10px 0px 52px'}}\n\t\t\t\t\t\t\t\t\tleftIcon={(item.offline) ? <FontAwesomeIcon style={{height: '12px', marginTop:'5px'}} icon={faUnlink}/> : (item.corsEnabled) ? null : <FontAwesomeIcon style={{height: '12px', marginTop:'5px'}} icon={faLock}/>}\n\t\t\t\t\t\t\t\t\ttitle={(item.offline) ? item.host + \" (offline)\\n\" + item.description  : (item.corsEnabled) ? item.host + \"\\n\" + item.description : (item.guestUserEnabled) ? item.host + \" (read-only)\\n\" + item.description : item.host + \" (guest user disabled)\\n\" + item.description}\n\t\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{height:'124px'}} id=\"logindiv\" key=\"logindiv\">\n\t\t\t\t\t\t\t<TextField \n\t\t\t\t\t\t\t\tfloatingLabelText=\"Username\" \n\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\tonChange = {(event, value)=>this.props.changeUserName(value)} \n\t\t\t\t\t\t\t\tinputStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\tvalue={this.props.user} \n\t\t\t\t\t\t\t\tclassName='loginUserField' \n\t\t\t\t\t\t\t\tdisabled = {(this.props.loading||(this.props.marxanServer&&!this.props.marxanServer.corsEnabled)) ? true : false} \n\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span><TextField \n\t\t\t\t\t\t\t\tfloatingLabelText=\"Password\" \n\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\t\t\tonChange = {(event, value)=>this.props.changePassword(value)} \n\t\t\t\t\t\t\t\tvalue={this.props.password} \n\t\t\t\t\t\t\t\tclassName='loginUserField' \n\t\t\t\t\t\t\t\tdisabled = {this.props.loading||(this.props.marxanServer&&!this.props.marxanServer.corsEnabled) ? true : false} \n\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress.bind(this)}\n\t\t\t\t\t\t\t/></span>\n\t\t\t\t\t\t\t{/*<span onClick={this.props.openResendPasswordDialog.bind(this)} className=\"forgotLink\" title=\"Click to resend password\">Forgot</span>*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t]} \n\t\t\t\t\tonRequestClose={this.props.onOk} \n\t\t\t\t\ttitle=\"Login\" \n\t\t\t\t\tmodal={true} \n\t\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default LoginDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass RegisterDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { validForm: false, user: undefined, name: undefined, email: undefined, validEmail: true};\n\t}\n\t//\n\tcreateNewUser() {\n\t\t//check the required FIELDS\n\t\ttry {\n\t\t\tthis.validateEmail();\n\t\t}\n\t\t//any errors will not create a new user\n\t\tcatch (err) {\n\t\t\tswitch (err.message) {\n\t\t\t\tdefault:\n\t\t\t\t\t// code\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t//create a new user\n\t\tthis.props.onOk(this.state.user, this.state.password, this.state.name, this.state.email);\n\t}\n\n\tvalidateEmail() {\n\t\tvar re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tlet valid = re.test(String(this.state.email).toLowerCase());\n\t\tthis.setState({ validEmail: valid });\n\t\tif (!valid) {\n\t\t\tthrow new Error(\"Invalid email address\");\n\t\t}\n\t}\n\n\trender() {\n\t\tlet c = [<div key=\"RegisterDialogDiv\">\n\t\t\t\t\t<TextField floatingLabelText=\"Username\" floatingLabelFixed={true} onChange = {(event,newValue) => this.setState({user:newValue})}/>\n\t\t\t\t\t<TextField floatingLabelText=\"Password\" floatingLabelFixed={true} type=\"password\" onChange = {(event,newValue) => this.setState({password:newValue})}/>\n\t\t\t\t\t<TextField floatingLabelText=\"Full name\" floatingLabelFixed={true} onChange = {(event,newValue) => this.setState({name:newValue})}/>\n\t\t\t\t\t<TextField floatingLabelText=\"Email address\" floatingLabelFixed={true} errorText={this.state.validEmail ?  '' : \"Invalid email address\"} onChange = {(event,newValue) => this.setState({email:newValue})}/>\n\t\t\t\t</div>];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={358}\n\t\t\t\tonOk={this.createNewUser.bind(this)}\n\t\t\t\tokDisabled={!(this.state.user && this.state.password && this.state.name && this.state.email) || this.props.loading} \n\t\t\t\tshowCancelButton={true}\n\t\t\t\tcancelDisabled={this.props.loading} \n\t\t\t\thelpLink={\"docs_user.html#new-user-registration\"}\n\t\t\t\ttitle=\"Register\" \n\t\t\t\tchildren={c} \n\t\t\t\tonRequestClose={this.props.onCancel} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default RegisterDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass ResendPasswordDialog extends React.Component {\n \n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.props.resendPassword();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\tokDisabled={!this.props.email || this.props.loading}\n\t\t\t\t\tcancelDisabled={this.props.resending}\n\t\t\t\t\ttitle=\"Resend password\" \n\t\t\t\t\tchildren={[<div key=\"resendDiv\">\n\t\t\t\t\t\t<TextField floatingLabelText=\"email address\" floatingLabelFixed={true} onChange = {(event, value)=>this.props.changeEmail(value)}  value={this.props.email} className='loginUserField' disabled = {this.props.loading} onKeyPress={this.handleKeyPress.bind(this)}/>\n\t\t\t\t</div>]}\n\t\t\t\t\tonRequestClose={this.props.onCancel} \n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ResendPasswordDialog;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faChalkboardTeacher } from '@fortawesome/free-solid-svg-icons';\nimport { faCloudDownloadAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faNewspaper } from '@fortawesome/free-solid-svg-icons';\n\nclass Notification extends React.Component {\n\trender() {\n\t\tvar icon;\n\t\tswitch (this.props.type) {\n\t\t\tcase 'Hardware Issue':\n\t\t\t\ticon = <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tcase 'Data Update':\n\t\t\tcase 'Software Update':\n\t\t\t\ticon = <FontAwesomeIcon icon={faCloudDownloadAlt} style={{color:'red', paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tcase 'Training':\n\t\t\t\ticon = <FontAwesomeIcon icon={faChalkboardTeacher} style={{paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tcase 'News':\n\t\t\t\ticon = <FontAwesomeIcon icon={faNewspaper} style={{paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ticon = null;\n\t\t\t\t// code\n\t\t}\n\t\treturn (\n\t\t\t<div className={\"notification\"}>\n\t\t\t\t<div className={\"notificationType\"} title={this.props.type}>{icon}<span dangerouslySetInnerHTML={{__html: this.props.html}} className={'notificationText'}></span><span className={\"removeNotification\"} onClick={this.props.removeNotification} title={\"Dismiss\"}>x</span></div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Notification;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport Notification from './Notification.js';\nimport FlatButton from 'material-ui/FlatButton';\nimport ToolbarButton from './ToolbarButton';\nimport Checkbox from 'material-ui/Checkbox';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSync } from '@fortawesome/free-solid-svg-icons';\nimport { faDraftingCompass } from '@fortawesome/free-solid-svg-icons';\nclass Welcome extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { checked: true };\n    }\n    toggleShowWelcomeScreen(evt, isInputChecked) {\n      this.setState({ checked: isInputChecked });\n    }\n    onOk() {\n      this.props.saveOptions({ \"SHOWWELCOMESCREEN\": this.state.checked });\n      this.props.onOk();\n    }\n    openNewProjectDialog() {\n      this.onOk();\n      this.props.openNewProjectDialog();\n    }\n    render() {\n        //get the visible notifications\n        let notifications = this.props.notifications && this.props.notifications.filter(item => item.visible);\n        notifications = notifications.map((item) => {\n          return <Notification html={item.html} type={item.type} key={item.id} removeNotification={this.props.removeNotification.bind(this, item)}></Notification>;\n        });\n        let notificationsPanel = <div className={\"notifications\"}>\n\t        {notifications}\n\t        <div className={\"notificationPointer\"}></div>\n\t    </div>;\n        return (\n            <MarxanDialog\n        {...this.props}\n        contentWidth={768}\n        offsetY={80}\n        title=\"Welcome\"\n        helpLink={\"docs_user.html#welcome\"}\n        onOk={this.onOk.bind(this)}\n        showCancelButton={false}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n        children={\n          <React.Fragment key={'welcomeKey'}>\n            <div className={'welcomeContent'}>\n                <div className={'tabTitle'}>What do you want to do?</div>\n                <div className={'task'}>\n                  <div className={'taskItem'}>\n                    <ToolbarButton icon={<FontAwesomeIcon icon={faDraftingCompass}/>}  title={\"Design a protected area network\"} onClick={this.openNewProjectDialog.bind(this)} className={\"resetNotifications\"}/>\n                    <span>Create a new protected area network for a country</span>\n                  </div>\n                  <div className={'taskItem'}>\n                    <ToolbarButton icon={<FontAwesomeIcon icon={faDraftingCompass}/>}  title={\"Extend a protected area network\"} onClick={this.openNewProjectDialog.bind(this)} className={\"resetNotifications\"}/>\n                    <span>Extend an existing protected area network for a country</span>\n                  </div>\n                  <div className={'taskItem'}>\n                    <ToolbarButton icon={<FontAwesomeIcon icon={faDraftingCompass}/>}  title={\"Do a gap analysis\"} onClick={this.openNewProjectDialog.bind(this)} className={\"resetNotifications\"}/>\n                    <span>Do a national gap analysis</span>\n                  </div>\n                </div>\n                <div style={{verticalAlign:'middle'}}>\n                    <FlatButton icon={<FontAwesomeIcon icon={faSync}/>}  title={\"Reset notifications\"} onClick={this.props.resetNotifications} style={{minWidth:'24px',height:'24px',lineHeight:'24px',color:'rgba(0,0,0,0.67)',position:'absolute',bottom:'10px'}}/>\n                  </div>\n                  <div className={'notifications'}>\n                    {notificationsPanel}\n                  </div>\n\t\t\t\t\t  <div className=\"welcomeToolbar\">\n\t\t\t\t\t\t  <Checkbox label=\"Show at startup\" style={{fontSize:'12px'}} checked={this.state.checked} onCheck={this.toggleShowWelcomeScreen.bind(this)} className={'showAtStartupChk'}/>\n            </div>\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default Welcome;\n","import React from 'react';\nimport Menu from 'material-ui/Menu'; \nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {faUsers} from '@fortawesome/free-solid-svg-icons';\nimport {faRunning} from '@fortawesome/free-solid-svg-icons';\nimport {faChartBar} from '@fortawesome/free-solid-svg-icons';\n\nclass ToolsMenu extends React.Component { \n openUsersDialog(){\n\t\tthis.props.openUsersDialog();\n\t\tthis.props.hideToolsMenu();\n }\n openRunLogDialog(){\n\t\tthis.props.openRunLogDialog();\n\t\tthis.props.hideToolsMenu();\n }\n openGapAnalysisDialog(){\n\t\tthis.props.openGapAnalysisDialog();\n\t\tthis.props.hideToolsMenu();\n }\n\trender() { \n\t\treturn (\n\t\t\t<React.Fragment> \n\t          <Popover open={this.props.open} anchorEl={this.props.menuAnchor} onRequestClose={this.props.hideToolsMenu}>\n\t            <Menu desktop={true} onMouseLeave={this.props.hideToolsMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}}>\n\t              <MenuItem style={{display: (this.props.userRole === 'Admin') ? 'inline-block' : 'none'}} leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faUsers} color={'white'}/>} onClick={this.openUsersDialog.bind(this)} title={\"Manage Users\"}>Users</MenuItem>\n\t              <MenuItem style={{display: (this.props.userRole === 'Admin') ? 'inline-block' : 'none'}} leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faRunning} color={'white'}/>} onClick={this.openRunLogDialog.bind(this)} title={\"View Run Log and stop runs\"}>Run log</MenuItem>\n\t              <MenuItem leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faChartBar} color={'white'}/>} onClick={this.openGapAnalysisDialog.bind(this)} title={\"Gap Analysis\"} disabled={this.props.metadata.pu_country===null}>{(this.props.metadata.pu_country===null) ? 'Gap Analysis (not available)' : 'Gap Analysis'}</MenuItem>\n\t            </Menu>\n\t          </Popover>   \n\t\t\t</React.Fragment>\n\t\t); \n\t}\n}\n\nexport default ToolsMenu;\n","import React from 'react';\nimport Menu from 'material-ui/Menu'; \nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport LogOut from 'material-ui/svg-icons/action/exit-to-app';\nimport {white} from 'material-ui/styles/colors';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport { faUserLock } from '@fortawesome/free-solid-svg-icons';\n\nclass UserMenu extends React.Component { \n\trender() { \n\t\treturn (\n\t\t\t<React.Fragment> \n\t\t\t\t<Popover\n\t\t\t\t\topen={this.props.open} \n\t\t\t\t\tanchorEl={this.props.menuAnchor}\n\t\t\t\t\tanchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\n\t\t\t\t\ttargetOrigin={{horizontal: 'left', vertical: 'top'}}\n\t\t\t\t\tonRequestClose={this.props.hideUserMenu}\n\t\t\t\t>\n\t\t\t\t\t<Menu desktop={true} onMouseLeave={this.props.hideUserMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}}>\n\t\t\t\t\t\t{/*<MenuItem primaryText={this.props.user + \" (\" + this.props.userRole + \")\"} style={{marginLeft:'40px'}}/>*/}\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Settings\" onClick={this.props.openUserSettingsDialog.bind(this)} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faCog} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Profile\" onClick={this.props.openProfileDialog} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faEdit} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Change password\" onClick={this.props.openChangePasswordDialog} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faUserLock} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem primaryText=\"Log out\" onClick={this.props.logout.bind(this)} leftIcon={<LogOut color={white}/>}/> \n\t\t\t\t\t</Menu>\n\t\t\t\t</Popover>\n\t\t\t</React.Fragment>\n\t\t); \n\t}\n}\n\nexport default UserMenu;\n","import React from 'react';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faServer} from '@fortawesome/free-solid-svg-icons';\nimport {faQuestionCircle} from '@fortawesome/free-solid-svg-icons';\nimport {faInfoCircle} from '@fortawesome/free-solid-svg-icons';\n\nclass HelpMenu extends React.Component {\n\topenDocumentation(){\n\t\twindow.open(this.props.DOCS_ROOT + \"docs_overview.html\");\n\t}\n\n  render() {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Popover\n\t\t\t\topen={this.props.open} \n\t\t\t\tanchorEl={this.props.menuAnchor}\n\t\t\t\tanchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\n\t\t\t\ttargetOrigin={{horizontal: 'left', vertical: 'top'}}\n\t\t\t\tonRequestClose={this.props.hideHelpMenu}\n\t\t\t\t>\n\t\t\t\t<Menu desktop={true} onMouseLeave={this.props.hideHelpMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}} width={'102px'}>\n\t\t\t\t\t<MenuItem primaryText=\"Documentation\" onClick={this.openDocumentation.bind(this)} leftIcon={<FontAwesomeIcon style={{height: '18px', marginTop:'4px',fontSize: '18px'}} icon={faQuestionCircle} color={'white'}/>}/>\n\t\t\t\t\t<MenuItem primaryText=\"Server Details\" onClick={this.props.openServerDetailsDialog} leftIcon={<FontAwesomeIcon style={{height: '18px', marginTop:'4px',fontSize: '18px'}} icon={faServer} color={'white'}/>}/>\n\t\t\t\t\t<MenuItem primaryText=\"About\" onClick={this.props.openAboutDialog} leftIcon={<FontAwesomeIcon style={{height: '18px', marginTop:'4px',fontSize: '18px'}} icon={faInfoCircle} color={'white'}/>}/>\n\t\t\t\t</Menu>\n\t\t\t</Popover>\n\t\t</React.Fragment>\n\t);\n  }\n}\n\nexport default HelpMenu;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport Checkbox from 'material-ui/Checkbox';\n\nclass UserSettingsDialog extends React.Component {\n        constructor(props){\n                super(props);\n                this.state = {saveEnabled: false};\n                this.options = {}; \n        }\n        setOption(key, value){\n                this.setState({saveEnabled: true});\n                this.options[key] = value;\n                this.props.saveOptions(this.options);\n        }\n        updateOptions(){\n                this.props.onOk();\n        }\n        changeBasemap(event, key, payload){\n                var basemap = this.props.basemaps[key];\n                this.props.changeBasemap(basemap);    \n                this.setOption(\"BASEMAP\", basemap.name);\n        }\n        toggleUseFeatureColors(evt, isInputChecked){\n        \tthis.setOption(\"USEFEATURECOLORS\", isInputChecked);\n        }\n        toggleShowWelcomeScreen(evt, isInputChecked){\n                this.setOption(\"SHOWWELCOMESCREEN\", isInputChecked);\n        }\n        render() {\n                return (\n                        <MarxanDialog \n                                {...this.props} \n                                contentWidth={370}\n                                offsetY={80}\n                                showCancelButton={false}\n                                onOk={this.updateOptions.bind(this)}\n                                helpLink={\"docs_user.html#settings\"}\n                                title=\"Settings\" \n                                children={\n                                        <div key=\"k14\">\n                                                <SelectField \n                                                        floatingLabelText={'Basemap style'} \n                                                        floatingLabelFixed={true} \n                                                        underlineShow={false}\n                                                        menuItemStyle={{fontSize:'12px'}}\n                                                        labelStyle={{fontSize:'12px'}} \n                                                        style={{width:'260px'}}\n                                                        value={this.props.basemap} \n                                                        onChange={this.changeBasemap.bind(this)}\n                                                        children= {this.props.basemaps.map((item)=> {\n                                                                return  <MenuItem \n                                                                        value={item.name} \n                                                                        key={item.name} \n                                                                        primaryText={item.alias}\n                                                                        style={{fontSize:'12px'}}\n                                                                        title={item.description}\n                                                                />;\n                                                        })}\n                                                />\n\t\t\t\t\t\t<Checkbox label=\"Use feature colours\" style={{fontSize:'12px'}} checked={this.props.userData.USEFEATURECOLORS} onCheck={this.toggleUseFeatureColors.bind(this)} />\n\t\t\t\t\t\t<Checkbox label=\"Show welcome screen at startup\" style={{fontSize:'12px'}} checked={this.props.userData.SHOWWELCOMESCREEN} onCheck={this.toggleShowWelcomeScreen.bind(this)} />\n                                        </div>\n                                } \n                        />\n                );\n        }\n}\n\nexport default UserSettingsDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass ProfileDialog extends React.Component {\n\tconstructor(props) { \n\t\tsuper(props);\n\t\tthis.state = { updated: false, validEmail: true };\n\t} \n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.updateUser();\n\t}\n\tupdateState(name, value) { \n\t\tthis.setState({\n\t\t\t[name]: value, updated: true });\n\t}\n\tvalidateEmail() {\n\t\tvar re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tlet email = this.state.EMAIL ? this.state.EMAIL : this.props.userData.EMAIL;\n\t\tlet valid = re.test(String(email).toLowerCase());\n\t\tthis.setState({ validEmail: valid });\n\t\tif (!valid) {\n\t\t\tthrow new Error(\"Invalid email address\");\n\t\t}\n\t}\n\tupdateUser() {\n\t\ttry {\n\t\t\tthis.validateEmail();\n\t\t}\n\t\t//any errors will not create a new user\n\t\tcatch (err) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.updateUser(this.state);\n\t\tthis.closeProfileDialog();\n\t}\n\tcloseProfileDialog() {\n\t\tthis.props.onOk();\n\t\tthis.setState({ updated: false, validEmail: true });\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props}  \n\t\t\t\tcontentWidth={330}\n\t\t\t\toffsetY={80}\n\t\t\t\tonCancel={this.closeProfileDialog.bind(this)}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonOk={this.updateUser.bind(this)}\n\t\t\t\thelpLink={\"docs_user.html#profile\"}\n\t\t\t\ttitle=\"Profile\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div key=\"k15\">\n\t\t\t\t\t\t<TextField floatingLabelText=\"Full name\" floatingLabelFixed={true} onChange = {(event,newValue) => this.updateState(\"NAME\",newValue)} defaultValue ={this.props.userData && this.props.userData.NAME} onKeyPress={this.handleKeyPress.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} />\n\t\t\t\t\t\t<TextField floatingLabelText=\"Email address\" floatingLabelFixed={true} errorText={this.state.validEmail ?  '' : \"Invalid email address\"} onChange = {(event,newValue) => this.updateState(\"EMAIL\",newValue)} defaultValue={this.props.userData && this.props.userData.EMAIL} onKeyPress={this.handleKeyPress.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} />\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ProfileDialog;\n","import React from 'react';\nimport ReactTable from \"react-table\";\n\nclass MarxanTable extends React.Component {\n    //filters the data in the table\n    filterData(){\n        if (this.props.searchText === \"\") return this.props.data;\n        return this.props.data.filter(item => {\n            return Object.keys(item).some(key => (this.props.searchColumns.includes(key))&&(item[key] && item[key].includes(this.props.searchText)));\n        });\n    }\n    render() {\n        let filteredData = this.filterData();\n        return (\n            <ReactTable \n                {...this.props}\n                pageSize={filteredData.length} \n                className={'projectsReactTable noselect'} \n                showPagination={false} \n                minRows={0} \n                data={filteredData}\n                columns={this.props.columns} \n            />\n        );\n    }\n}\n\nexport default MarxanTable;\n","import React from 'react';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\nimport Checkbox from 'material-ui/Checkbox';\n\nlet USER_ROLES = [\"User\",\"ReadOnly\",\"Admin\"];\nclass UsersDialog extends React.Component { \n\t\t\tconstructor(props) {\n\t\t\t\t\tsuper(props);\n\t\t\t\t\tthis.state = {searchText: \"\", selectedUser: undefined };\n\t\t\t}\n\t\t\tchangeRole(user, oldRole, evt, key, newRole){\n\t\t\t\tthis.props.changeRole(user, newRole);\n\t\t\t}\n\t\t\t_delete() {\n\t\t\t\t\tthis.props.deleteUser(this.state.selectedUser.user);\n\t\t\t\t\tthis.setState({ selectedUser: false });\n\t\t\t}\n\t\t\tchangeUser(event, user) {\n\t\t\t\t\tthis.setState({ selectedUser: user });\n\t\t\t}\n\t\t\t  sortDate(a, b, desc) {\n\t\t\t    return (new Date(a.slice(6,8),a.slice(3,5)-1,a.slice(0,2),a.slice(9,11),a.slice(12,14),a.slice(15,17)) > new Date(b.slice(6,8),b.slice(3,5)-1,b.slice(0,2),b.slice(9,11),b.slice(12,14),b.slice(15,17))) ? 1 : -1;\n\t\t\t  }\n\t\t\tcloseDialog() {\n\t\t\t\t\tthis.setState({ selectedUser: undefined });\n\t\t\t\t\tthis.props.onOk();\n\t\t\t}\n\t\t    searchTextChanged(value){\n\t\t      this.setState({searchText: value});\n\t\t    }\n\t\t\trender() {\n\t\t\t\t\tif (this.props.users) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\t\t\t\tonRequestClose={this.closeDialog.bind(this)}\n\t\t\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\t\t\thelpLink={\"docs_user.html#the-users-window-admin-users-only\"}\n\t\t\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\t\t\ttitle=\"Users\"   \n\t\t\t\t\t\t\tshowSearchBox={true} \n\t\t\t\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\t\t\t\tchildren={\n\t\t\t\t\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"usersTable\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(this.props.users&&this.props.users.length>0) ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata={this.props.users}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedUser={this.state.selectedUser}\n\t\t\t\t\t\t\t\t\t\t                            searchColumns={['user','NAME','EMAIL','ROLE']}\n\t\t\t\t\t\t\t\t\t\t                            searchText={this.state.searchText}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeUser={this.changeUser.bind(this)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns={[{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Name', accessor: 'NAME', width: 173, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'email', accessor: 'EMAIL', width: 135, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Role', accessor: 'ROLE', width: 180, headerStyle: { 'textAlign': 'left' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCell: row => \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(row.original.user === 'guest') ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>ReadOnly</div> :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: 130,height: 15,lineHeight: 15,position: 'relative',fontSize: '12px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmenuStyle={{position: 'absolute',top: -22}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunderlineStyle={{position: 'relative',top: 20}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonStyle={{lineHeight:'24px',height:'24px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={row.original.ROLE}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.changeRole.bind(this, row.original.user, row.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{USER_ROLES.map(item => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Date', accessor: 'CREATEDATE', width: 115, headerStyle: { 'textAlign': 'left' }, sortMethod: this.sortDate.bind(this) },]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.user === (state.selectedUser&&state.selectedUser.user)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (USER_ROLES.indexOf(e.target.textContent)===-1) state.changeUser(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:null}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"projectsToolbar\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete user\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedUser || this.props.loading || (this.props.user === this.state.selectedUser.user)||(this.state.selectedUser.user === 'guest')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Enable guest user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px',paddingLeft: '10px', width:'200px',display:'inline-block',verticalAlign:'bottom'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.toggleEnableGuestUser}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={this.props.guestUserEnabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t} \n\t\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default UsersDialog;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport iucn from './images/iucn.png';\nimport wcmc from './images/wcmc.png';\nimport mapbox_small from './images/mapbox_small.png';\nimport biopama_small from './images/biopama_small.png';\nimport jrc_logo_color_small from './images/jrc_logo_color_small.png';\n\nclass AboutDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"About\"\n        helpLink={\"docs_user.html#about-window\"}\n        children={\n          <div key=\"k5\">\n            <div className={\"aboutTitle\"}>Software development</div>\n            <div className={\"aboutText\"}>\n              Marxan Web {this.props.marxanClientReleaseVersion} Feedback:{\" \"}\n              <a href=\"mailto:andrew.cottam@ec.europa.eu\" className=\"email\">\n                Andrew Cottam\n              </a>\n            </div>\n            <div className={\"aboutText\"}>\n              Marxan 2.4.3 - Ian Ball, Matthew Watts &amp; Hugh Possingham\n            </div>\n            <div className={\"aboutTitle\"}>Data providers</div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}} dangerouslySetInnerHTML={{__html: this.props.wdpaAttribution}}></div>\n            <div className={\"aboutTitle\"}>Funding and in-kind contributions</div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}}>\n              Marxan Web funded by the BIOPAMA project of the European Commission. With in-kind contributions from Mapbox. \n            </div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}}>\n              Marxan funded by a range of donors - see <a href='http://marxan.org/credits.html' target='_blank' rel=\"noopener noreferrer\">here</a>.\n            </div>\n           <div className={\"logos\"}>\n            <a href=\"https://www.iucn.org/\">\n\t            <img\n\t              src={iucn}\n\t              alt=\"IUCN logo\"\n\t              title={\"IUCN logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n            </a>\n            <a href=\"https://www.unep-wcmc.org/\">\n\t            <img\n\t              src={wcmc}\n\t              alt=\"UN Environment WCMC logo\"\n\t              title={\"UN Environment WCMC logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n            </a>\n            <a href=\"https://www.biopama.org\">\n\t            <img\n\t              src={biopama_small}\n\t              alt=\"BIOPAMA logo\"\n\t              title={\"BIOPAMA logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n\t            </a>\n\t            <a href=\"https://ec.europa.eu/jrc/en\">\n\t            <img\n\t              src={jrc_logo_color_small}\n\t              alt=\"Joint Research Centre of the European Commission logo\"\n\t              title={\"Joint Research Centre of the European Commission logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n\t            </a>\n              <a href=\"https://www.mapbox.com\">\n  \t            <img\n  \t              src={mapbox_small}\n  \t              alt=\"Mapbox logo\"\n  \t              title={\"Mapbox logo\"}\n  \t              className={\"aboutLogo\"}\n  \t            />\n              </a>\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AboutDialog;\n","import React from 'react';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass MenuItemWithButton extends React.Component {\n\trender() {\n\t\treturn <MenuItem className={'smallMenuItem'} {...this.props} innerDivStyle={{paddingLeft:'40px'}}/>;\n\t}\n}\n\nexport default MenuItemWithButton;\n","import * as React from 'react';\nimport { blue300} from 'material-ui/styles/colors';\n\nclass TargetIcon extends React.PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { editing: false, localTargetValue: undefined };\n\t}\n\tonClick(event) {\n\t\tthis.startEditing();\n\t}\n\tisNumber(str) {\n\t\tvar pattern = /^\\d+$/;\n\t\treturn pattern.test(str); // returns a boolean\n\t}\n\tonChange(event) {\n\t\tlet newValue = event.nativeEvent.target.value;\n\t\tif (newValue > 100) return;\n\t\tif (this.isNumber(newValue) || (newValue === \"\")) {\n\t\t\tnewValue = (newValue === \"\") ? 0 : Number(newValue); \n\t\t\tthis.setState({localTargetValue:newValue});\n\t\t}\n\t}\n\tonKeyPress(event) {\n\t\tif (event.nativeEvent.key === \"Enter\") this.setState({ editing: false }); //will trigger the onBlur event of the input box\n\t}\n\tstartEditing() {\n\t\tthis.setState({ editing: true, localTargetValue: this.props.target_value });\n\t\tdocument.getElementById(\"input_\" + this.props.interestFeature.id).focus();\n\t\tdocument.getElementById(\"input_\" + this.props.interestFeature.id).select();\n\t}\n\tstopEditing() {\n\t\tthis.setState({ editing: false });\n\t\tthis.props.updateTargetValue(this, this.state.localTargetValue); \n\t}\n\trender() {\n\t\tlet backgroundColor = (this.props.targetStatus === \"Does not occur in planning area\") ? \"lightgray\" : (this.props.targetStatus === \"Unknown\") ? \"white\" : (this.props.targetStatus === \"Target achieved\") ? \"white\" : \"rgb(255, 64, 129)\";\n\t\tlet fontColor = (this.props.targetStatus === \"Does not occur in planning area\") ? \"white\" : (this.props.targetStatus === \"Unknown\") ? blue300 : (this.props.targetStatus === \"Target achieved\") ? blue300 : \"white\";\n\t\t return (\n\t\t\t<div onClick={(this.props.userRole === \"ReadOnly\") ? null : this.onClick.bind(this)} style={{position:'absolute',left:'8px',top:'17px', display: (this.props.visible) ? 'block' : 'none'}}>\n\t\t\t\t<div title={this.props.targetStatus} style={{'display': (this.state.editing) ? 'none' : 'inline-flex', backgroundColor: backgroundColor, size:'0', color:fontColor, userSelect:'none', alignItems:'center', justifyContent:'center', fontSize:'12px', borderRadius:'50%', height:'33px', width:'33px', left:'8px', border:'1px lightgray solid'}}\n\t\t\t\t>{this.props.target_value}%</div>\n\t\t\t\t<div style={{'display': (this.state.editing) ? 'inline-flex' : 'none',size:'30','backgroundColor':'#2F6AE4','userSelect':'none','alignItems':'center','justifyContent':'center','borderRadius':'50%',height:'33px',width:'33px',left:'8px'}}>\n\t\t\t\t\t<input id={\"input_\" + this.props.interestFeature.id} onBlur={this.stopEditing.bind(this)} onKeyPress={this.onKeyPress.bind(this)} onChange={this.onChange.bind(this)} style={{'backgroundColor':'transparent','border':'0px',height:'33px',width:'33px','fontSize':'13px',display:'inline-flex','textAlign':'center',color:blue300}} value={this.state.localTargetValue}/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TargetIcon;\n","import * as React from 'react';\n\nclass LinearGauge extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t//alwaysShowPercent - set to false then if the percent protected is smaller than 30 pixels it will not be shown\n\t\t//showUnprotectedPercent - set to false to not show the unprotected percent\n\t\t//targetAsLine - shows the target as a line - otherwise it is a grey rectangle\n\t\tthis.state = { alwaysShowPercent: false, showUnprotectedPercent: false,targetAsLine:false };\n\t} \n\trender() {\n\t\tlet protectedWidth = 0; \n\t\tlet protectedHidden = true; \n\t\t//the scaledWidth is the desired width of the LinearGauge\n\t\tlet scaleFactor = this.props.scaledWidth / 100;\n\t\t//the number of pixels from the left hand side to offset the target line\n\t\tlet targetPxOffset = (this.props.target_value * scaleFactor);\n\t\t//the number of pixels from the left hand side to the protected line\n\t\tprotectedWidth = Math.round((this.props.protected_percent === -1) ? 0 : (this.props.protected_percent * scaleFactor));\n\t\t//protected percent text - if protected_percent < target_value then if the rounded protected_percent is the same as the rounded target_value, show the protected_percent to 1dp\n\t\tlet protNum = this.props.protected_percent;\n\t\tlet percentageProtectedText = (protNum < Number(this.props.target_value)) ? (Math.round(protNum)===Number(this.props.target_value)) ? String(protNum).slice(0,String(protNum).indexOf(\".\") + 2) : Math.round(protNum) : Math.round(protNum);\n\t\t//get whether or not the % protected should be visible or hidden\n\t\tprotectedHidden = (protectedWidth < 26 && !(this.state.alwaysShowPercent));\n\t\t//get the width of the target shortfall\n\t\tlet targetShortfallWidth = (this.props.protected_percent >= this.props.target_value) ? 0 : (targetPxOffset - protectedWidth);\n\t\t//if targetShortfallWidth is less than zero if causes the linear guage to go off-scale\n\t\ttargetShortfallWidth = (targetShortfallWidth<0) ? 0 : targetShortfallWidth;\n\t\t//get the width of the rest of the bar\n\t\tlet unprotectedWidth = (100 * scaleFactor) - protectedWidth - targetShortfallWidth;\n\t\treturn (\n\t\t\t<div className={(this.props.visible) ? 'linearGauge' : 'linearGaugeNoBorder'} style={{opacity: (this.props.protected_percent === -1) ? '0.3' : 1}}>\n\t\t\t\t<div title={percentageProtectedText + '% protected'} className={'percentBar'} style={{width: protectedWidth + 'px', backgroundColor: (this.props.useFeatureColors) ? this.props.color : 'rgb(0, 188, 212)'}}>{protectedHidden ? <span>&nbsp;</span> : percentageProtectedText + '%'}</div>\n\t\t\t\t<div title={'Target of ' + this.props.target_value + '%'} className={'percentBar targetShortfall'} style={{width: (this.props.visible) ? targetShortfallWidth + 'px' : '0px'}}></div>\n\t\t\t\t<div className={'percentBar totalShortFall'} style={{width: unprotectedWidth + 'px', color:'rgba(0,0,0,0.7)', 'textAlign': (this.props.visible) ? null : 'left', 'fontStyle': (this.props.visible) ? null : 'italic'}}>{(this.props.visible) ? null : 'Does not occur'}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LinearGauge;\n","import * as React from 'react';\nimport { List, ListItem } from 'material-ui/List';\nimport TargetIcon from './TargetIcon';\nimport { grey400 } from 'material-ui/styles/colors';\nimport IconButton from 'material-ui/IconButton';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport LinearGauge from './LinearGauge';\n \nclass FeaturesList extends React.Component { \n\ticonClick(feature, evt){\n\t\tthis.props.openFeatureMenu(evt, feature);\n\t}\n\tupdateTargetValue(targetIcon, newValue) {\n\t\tthis.props.updateFeature(targetIcon.props.interestFeature, {target_value: newValue});\n\t}\n\titemClick(feature, evt){\n\t\tif (evt.ctrlKey){\n\t\t\t//toggle the layers puid visibility\n\t\t\tfeature.feature_puid_layer_loaded = !feature.feature_puid_layer_loaded;\n\t\t\t//add/remove it from the map\n\t\t\tthis.props.toggleFeaturePUIDLayer(feature);\n\t\t}else{\n\t\t\t//toggle the layers visibility\n\t\t\tfeature.feature_layer_loaded = !feature.feature_layer_loaded;\n\t\t\t//add/remove it from the map\n\t\t\tthis.props.toggleFeatureLayer(feature);\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<List style={{padding:'0px !important', maxHeight: this.props.maxheight, overflow: 'auto'}}>\n\t\t\t\t\t{this.props.features.map((item)=>{\n\t\t\t\t\t\t//get the total area of the feature in the planning unit\n\t\t\t\t\t\tlet pu_area = item.pu_area;\n\t\t\t\t\t\t//TODO: This needs to be done differently when we are using the old version of Marxan because it does not have a value for the pu_area\n\t\t\t\t\t\t\n\t\t\t\t\t\t//get the protected percent\n\t\t\t\t\t\tlet protected_percent = (item.protected_area === -1) ? -1 : (pu_area >= 0) ? (item.protected_area > 0) ? (item.protected_area / pu_area) * 100 : 0 : 0;\n\t\t\t\t\t\t//this is a hack to round the protected percent as there are some bugs in Marxan that calculate the target area required wrongly\n\t\t\t\t\t\t//TODO - sort out \n\t\t\t\t\t\t// protected_percent = Math.round(protected_percent);\n\t\t\t\t\t\tlet targetStatus = (pu_area === 0) ? \"Does not occur in planning area\" : (protected_percent === -1) ? \"Unknown\" : (item.protected_area >= item.target_area) ? \"Target achieved\" : \"Target missed\";\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem \n\t\t\t\t\t\t\t\tleftAvatar={this.props.simple ? \n\t\t\t\t\t\t\t\t\t<span/> \n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t  <TargetIcon \n\t\t\t\t\t\t\t\t\t  style={{left: 8}} \n\t\t\t\t\t\t\t\t\t  target_value={item.target_value} \n\t\t\t\t\t\t\t\t\t  updateTargetValue={this.updateTargetValue.bind(this)} \n\t\t\t\t\t\t\t\t\t  interestFeature={item}\n\t\t\t\t\t\t\t\t\t  targetStatus={targetStatus}\n\t\t\t\t\t\t\t\t\t  visible={(item.pu_area!==0)}\n\t\t\t\t\t\t\t\t\t  userRole={this.props.userRole}\n\t\t\t\t\t\t\t\t  /> \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\t\t\t\tsecondaryText={this.props.simple ? \n\t\t\t\t\t\t\t\t\t<span />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<LinearGauge \n\t\t\t\t\t\t\t\t\t\tscaledWidth={220}\n\t\t\t\t\t\t\t\t\t\ttarget_value={item.target_value} \n\t\t\t\t\t\t\t\t\t\tprotected_percent={protected_percent}\n\t\t\t\t\t\t\t\t\t\tvisible={(item.pu_area!==0)}\n\t\t\t\t\t\t\t\t\t\tcolor={item.color}\n\t\t\t\t\t\t\t\t\t\tuseFeatureColors={this.props.useFeatureColors}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\tkey={item.id} \n\t\t\t\t\t\t\t\tvalue={item.alias}\n\t\t\t\t\t\t\t\tonClick={this.props.simple ? null : this.itemClick.bind(this, item)}\n\t\t\t\t\t\t\t\trightIconButton={this.props.simple ?\n\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<IconButton touch={true} tooltipPosition=\"bottom-left\" onClick={this.iconClick.bind(this, item)}>\n\t\t\t\t\t\t\t\t\t\t<MoreVertIcon color={grey400} />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tinnerDivStyle={{padding: (this.props.simple) ? '5px 5px 5px 5px' : '9px 5px 11px 53px' }}\n\t\t\t\t\t\t\t\tstyle={{borderRadius:'3px',fontSize:'14px', color: 'rgba(0,0,0,0.8)'}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</List>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default FeaturesList;\n","import React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport FeaturesList from './FeaturesList';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faCrosshairs } from '@fortawesome/free-solid-svg-icons';\n\nclass SelectFeatures extends React.Component {\n\topenFeaturesDialog(evt){\n\t\tthis.props.openFeaturesDialog(true);\n\t}\n\trender() { \n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>   \n\t\t\t\t\t<FeaturesList \n\t\t\t\t\t\tfeatures={this.props.features}  \n\t\t\t\t\t\topenFeatureMenu={this.props.openFeatureMenu}\n\t\t\t\t\t\tsimple={this.props.simple} \n\t\t\t\t\t\tmaxheight={'387px'}\n\t\t\t\t\t\tupdateFeature={this.props.updateFeature}\n\t\t\t\t\t\tuserRole={this.props.userRole}\n\t\t\t\t\t\ttoggleFeatureLayer={this.props.toggleFeatureLayer}\n\t\t\t\t\t\ttoggleFeaturePUIDLayer={this.props.toggleFeaturePUIDLayer}\n\t\t\t\t\t\tuseFeatureColors={this.props.useFeatureColors}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton onClick={this.props.openTargetDialog} show={(this.props.userRole!==\"ReadOnly\")&&(this.props.showTargetButton)}  icon={ <FontAwesomeIcon icon={ faCrosshairs }/>} style={{marginLeft:this.props.leftmargin,width:'30px', marginTop:'5px'}} title={'Set a target for all features'}/>\n\t\t\t\t\t<ToolbarButton label=\"+/-\" onClick={this.openFeaturesDialog.bind(this)} show={!((this.props.metadata && this.props.metadata.OLDVERSION)||(this.props.userRole === \"ReadOnly\"))} style={{marginLeft:this.props.leftmargin,width:'30px', marginTop:'5px'}} title={'Add/remove features from the project'}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n} \n\nexport default SelectFeatures;\n","import React from 'react';\nimport 'react-table/react-table.css';\nimport Paper from 'material-ui/Paper';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport SelectField from 'material-ui/SelectField';\nimport SelectFeatures from './SelectFeatures';\nimport MenuItem from 'material-ui/MenuItem';\nimport Settings from 'material-ui/svg-icons/action/settings';\nimport ToolbarButton from './ToolbarButton';\nimport Checkbox from 'material-ui/Checkbox';\nimport Textarea from 'react-textarea-autosize';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLock } from '@fortawesome/free-solid-svg-icons';\nimport { faUnlock } from '@fortawesome/free-solid-svg-icons';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport { faShareAlt } from '@fortawesome/free-solid-svg-icons';\n\nclass InfoPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {editingProjectName:false, editingDescription: false};\n\t}\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\t//if the input box for renaming the project has been made visible and it has no value, then initialise it with the project name and focus it\n\t\tif (prevState.editingProjectName === false && this.state.editingProjectName) {\n\t\t\tdocument.getElementById(\"projectName\").value = this.props.project;\n\t\t\tdocument.getElementById(\"projectName\").focus();\n\t\t}\n\t\t//if the input box for renaming the description has been made visible and it has no value, then initialise it with the description and focus it\n\t\tif (prevState.editingDescription === false && this.state.editingDescription) {\n\t\t\tdocument.getElementById(\"descriptionEdit\").value = this.props.metadata.DESCRIPTION;\n\t\t\tdocument.getElementById(\"descriptionEdit\").focus();\n\t\t}\n\t}\n\n\tonKeyPress(e) {\n\t\tif (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n\t\t\tdocument.getElementById(e.nativeEvent.target.id).blur(); //call the onBlur event which will call the REST service to rename the project\n\t\t}\n\t}\n\n\tonBlur(e) {\n\t\tif (e.nativeEvent.target.id === 'projectName') {\n\t\t\tthis.props.renameProject(e.target.value).then(()=> {\n\t\t\t    this.setState({ editingProjectName: false });\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.props.renameDescription(e.target.value).then(()=> {\n\t\t\t\tthis.setState({ editingDescription: false });\n\t\t\t});\n\t\t}\n\t}\n\n\tstartEditingProjectName() {\n\t\tif (this.props.project) { //a project may not be loaded\n\t\t\tthis.setState({editingProjectName: true});\n\t\t}\n\t}\n\tstartEditingDescription() {\n\t\tif (this.props.project) { //a project may not be loaded\n\t\t\tthis.setState({editingDescription: true});\n\t\t}\n\t}\n\tstartStopPuEditSession(evt) {\n\t\t(this.props.puEditing) ? this.stopPuEditSession(): this.startPuEditSession();\n\t}\n\tstartPuEditSession() {\n\t\tthis.setState({ puEditing: true });\n\t\tthis.props.startPuEditSession();\n\t}\n\n\tstopPuEditSession() { \n\t\tthis.setState({ puEditing: false});\n\t\tthis.props.stopPuEditSession();\n\t}\n\t\n\tchangeIucnCategory(event,key,payload){\n\t\tthis.props.changeIucnCategory(this.props.iucn_categories[key]);\n\t}\n\ttoggleProjectPrivacy(evt, isInputChecked){\n\t\tlet checkedString = (isInputChecked) ? \"True\" : \"False\";\n\t\tthis.props.toggleProjectPrivacy(checkedString);\n\t}\n\ttoggleCosts(event, isInputChecked){\n\t\tthis.props.toggleCosts(isInputChecked);\n\t}\n\tstopProcess(){\n\t\tthis.props.stopProcess(this.props.pid);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>  \n\t\t\t\t<div className={'infoPanel'} style={{display: this.props.open ? 'block' : 'none'}}>\n\t\t\t\t\t<Paper zDepth={2} className=\"InfoPanelPaper\"> \n\t\t\t\t\t\t<Paper zDepth={2} className=\"titleBar\">\n\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? <span className={'projectNameEditBox'} title={this.props.project + \" (Read-only)\"}><FontAwesomeIcon style={{color: 'white', height: '16px', marginTop:'4px',marginBottom: '2px', marginRight: '5px'}} icon={faLock}/>{this.props.project}</span> : <span onClick={this.startEditingProjectName.bind(this)} className={'projectNameEditBox'} title=\"Click to rename the project\">{this.props.project}</span>}\n\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? null : <input id=\"projectName\" style={{position:'absolute', 'display': (this.state.editingProjectName) ? 'block' : 'none',left:'39px',top:'32px',width:'365px', border:'1px lightgray solid'}} className={'projectNameEditBox'} onKeyPress={this.onKeyPress.bind(this)} onBlur={this.onBlur.bind(this)}/>}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<Tabs contentContainerStyle={{'margin':'20px'}} className={'tabs'} value={this.props.activeTab}>\n\t\t\t\t\t\t\t<Tab label=\"Project\" onActive={this.props.project_tab_active} value=\"project\" disabled={(this.props.puEditing) ? true : false}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Description</div>\n\t\t\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? null : <Textarea minRows='5' id=\"descriptionEdit\" style={{'display': (this.state.editingDescription) ? 'block' : 'none'}} className={'descriptionEditBox'} onKeyPress={this.onKeyPress.bind(this)} onBlur={this.onBlur.bind(this)}/>}\n\t\t\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? <div className={'description'} title={this.props.metadata.DESCRIPTION} dangerouslySetInnerHTML={{__html: this.props.metadata.DESCRIPTION}}/> : <div className={'description'} onClick={this.startEditingDescription.bind(this)} style={{'display': (!this.state.editingDescription) ? 'block' : 'none'}} title=\"Click to edit\" dangerouslySetInnerHTML={{__html: this.props.metadata.DESCRIPTION}}/>}\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>Created</div>\n\t\t\t\t\t\t\t\t\t<div className={'createDate'}>{this.props.metadata.CREATEDATE}</div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>{(this.props.metadata.OLDVERSION) ? \"Imported project\" : \"\"}</div>\n\t\t\t\t\t\t\t\t\t<div style={{position:'absolute', top:'413px', display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Private\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\t\t\tchecked={this.props.metadata.PRIVATE}\n\t\t\t\t\t\t\t\t\t\t\tonCheck={this.toggleProjectPrivacy.bind(this)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Features\" onActive={this.props.features_tab_active} value=\"features\" disabled={(this.props.puEditing) ? true : false}>\n\t\t\t\t\t\t\t\t<SelectFeatures\n\t\t\t\t\t\t\t\t\tfeatures={this.props.features}\n\t\t\t\t\t\t\t\t\topenFeatureMenu={this.props.openFeatureMenu}\n\t\t\t\t\t\t\t\t\topenFeaturesDialog={this.props.openFeaturesDialog} \n\t\t\t\t\t\t\t\t\tmetadata={this.props.metadata}\n\t\t\t\t\t\t\t\t\tupdateFeature={this.props.updateFeature}\n\t\t\t\t\t\t\t\t\tleftmargin={'10px'}\n\t\t\t\t\t\t\t\t\tsimple={false}\n\t\t\t\t\t\t\t\t\tshowTargetButton={true}\n\t\t\t\t\t\t\t\t\topenTargetDialog={this.props.openTargetDialog}\n\t\t\t\t\t\t\t\t\tuserRole={this.props.userRole}\n\t\t\t\t\t\t\t\t\ttoggleFeatureLayer={this.props.toggleFeatureLayer}\n\t\t\t\t\t\t\t\t\ttoggleFeaturePUIDLayer={this.props.toggleFeaturePUIDLayer}\n\t\t\t\t\t\t\t\t\tuseFeatureColors={this.props.useFeatureColors}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Planning units\" onActive={this.props.pu_tab_active} value=\"planning_units\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Planning grid</div>\n\t\t\t\t\t\t\t\t\t<div className={'description'}>{this.props.metadata.pu_alias}</div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>Protected areas</div>\n\t\t\t\t\t\t\t\t\t<SelectField \n\t\t\t\t\t\t\t\t\t\tfloatingLabelText={'Include'} \n\t\t\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\t\t\tunderlineShow={false}\n\t\t\t\t\t\t\t\t\t\tdisabled={(this.props.preprocessing)||(this.props.userRole === \"ReadOnly\")}\n\t\t\t\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tstyle={{marginTop:'-15px',width:'140px'}}\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.metadata.IUCN_CATEGORY} \n\t\t\t\t\t\t\t\t\t\tonChange={this.changeIucnCategory.bind(this)}\n\t\t\t\t\t\t\t\t\t\tchildren= {this.props.iucn_categories.map((item)=> {\n\t\t\t\t\t\t\t\t\t\t\treturn  <MenuItem \n\t\t\t\t\t\t\t\t\t\t\t\tvalue={item} \n\t\t\t\t\t\t\t\t\t\t\t\tkey={item} \n\t\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>; \n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t\t<div style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Statuses</div>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={(this.props.puEditing) ? faUnlock : faLock} onClick={this.startStopPuEditSession.bind(this)} title={(this.props.puEditing) ? \"Save\" : \"Click to edit\"} style={{cursor:'pointer', marginRight: '10px', color: 'rgba(255, 64, 129, 0.7)'}}/>\n\t\t\t\t\t\t\t\t\t\t<div className={'description'} style={{display: 'inline-block'}}>{(this.props.puEditing) ? \"Click on the map to change the status\" : \"Click to edit\"}</div>\n\t\t\t\t\t\t\t\t\t\t<div style={{display: (this.props.puEditing) ? \"block\" : \"none\"}}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={\"statusRow\"}><div className={\"statusSwatch\"} style={{ border: '1px rgba(63, 63, 191, 1) solid'}}></div><div className={\"puStatus\"}>Locked in the reserve system</div></div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={\"statusRow\"}><div className={\"statusSwatch\"} style={{ border: '1px rgba(191, 63, 63, 1) solid'}}></div><div className={\"puStatus\"}>Locked out of the reserve system</div></div>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Clear all manual edits\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.clearManualEdits.bind(this)} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle'} style={{display:'none'}}>Costs</div>\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tlabel=\"Show costs\"\n\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px',display:'none'}}\n\t\t\t\t\t\t\t\t\t\tonCheck={this.toggleCosts.bind(this)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>  \n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t</Tabs>     \n\t\t\t\t\t\t<Paper className={'lowerToolbar'}>\n\t\t\t\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faShareAlt}/>} \n\t\t\t\t\t\t\t\t\ttitle={\"Get a shareable link to this project\"}\n\t\t\t\t\t\t\t\t\tonClick={this.props.getShareableLink} \n\t\t\t\t\t\t\t\t\tshow={(this.props.marxanServer.type ==='remote')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\t\t\t\ticon={<Settings style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Run Settings\"\n\t\t\t\t\t\t\t\t\tonClick={this.props.showRunSettingsDialog} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='toolbarSpacer'/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tlabel=\"Stop\" \n\t\t\t\t\t\t\t\t\ttitle=\"Click to stop the current run\"  \n\t\t\t\t\t\t\t\t\tshow={this.props.userRole !== \"ReadOnly\"}\n\t\t\t\t\t\t\t\t\tstyle={{marginLeft: '194px'}}\n\t\t\t\t\t\t\t\t\tonClick={this.stopProcess.bind(this)} \n\t\t\t\t\t\t\t\t\tdisabled={this.props.pid===0}  \n\t\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t\t/>  \n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tlabel=\"Run\" \n\t\t\t\t\t\t\t\t\ttitle=\"Click to run this project\"  \n\t\t\t\t\t\t\t\t\tshow={this.props.userRole !== \"ReadOnly\"}\n\t\t\t\t\t\t\t\t\tonClick={this.props.runMarxan} \n\t\t\t\t\t\t\t\t\tdisabled={this.props.preprocessing || (this.props.features.length === 0) || this.props.puEditing}  \n\t\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t\t/>  \n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default InfoPanel;\n","import React from \"react\";\nimport Slider from 'material-ui/Slider';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEye } from '@fortawesome/free-regular-svg-icons';\nimport { faEyeSlash } from '@fortawesome/free-regular-svg-icons';\n\nclass TransparencyControl extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshowSlider: false\n\t\t};\n\t\tthis.old_opacity = 0.5;\n\t}\n\tonChange(evt, newValue) {\n\t\tif (this.props.layer) {\n\t\t\t//set a local property to capture the old opacity\n\t\t\tthis.old_opacity = this.props.opacity;\n\t\t\tthis.props.changeOpacity(this.props.layer.id, newValue);\n\t\t}\n\t}\n\n\ttoggleLayer() {\n\t\tif (this.props.layer) {\n\t\t\t//see if the layer is currently visible\n\t\t\tif (this.props.opacity > 0) {\n\t\t\t\t//hide the layer\n\t\t\t\tthis.onChange(undefined, 0);\n\t\t\t} else {\n\t\t\t\t//show the layer\n\t\t\t\tthis.onChange(undefined, this.old_opacity);\n\t\t\t}\n\t\t}\n\t}\n\tmouseEnter(event) {\n\t\tthis.setState({\n\t\t\tshowSlider: true\n\t\t});\n\t}\n\n\tmouseLeave(event) {\n\t\tthis.setState({\n\t\t\tshowSlider: false\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div style={ this.props.style }>\n\t\t\t\t<div onMouseEnter={ this.mouseEnter.bind(this) } onMouseLeave={ this.mouseLeave.bind(this) } style={ { position: 'absolute', width: '132px', height: '23px' } } title={ \"Change transparency - click to toggle layer\" }>\n\t\t\t\t\t<FontAwesomeIcon icon={(this.props.opacity === 0 ) ? faEyeSlash : faEye } style={ { color: 'gainsboro' } } onClick={ this.toggleLayer.bind(this) } />\n\t\t\t\t\t<Slider value={ this.props.opacity } onChange={ this.onChange.bind(this) } style={ { display: (this.state.showSlider) ? \"inline-block\" : \"none\", width: '100px', position: 'absolute', top: '2px', left: '26px' } } sliderStyle={ { margin: '0px' } } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t);\n\t}\n}\n\nexport default TransparencyControl;\n","import * as React from 'react';\nimport TransparencyControl from './TransparencyControl';\nimport { getMaxNumberOfClasses } from './genericFunctions.js';\n\nclass Legend extends React.Component {\n\t getPlanningUnitsLegend(colorCode) {\n\t\tlet legendItems;\n\t\t//get the data value for the highest break in the data to see if we are viewing the sum solutions or an individual solution\n\t\tlet summed = (this.props.brew.breaks[this.props.brew.breaks.length - 1] === 1) ? false : true;\n\t\tif (summed) {\n\t\t\t//get the number of classes the user currently has selected\n\t\t\tlet numClasses = this.props.brew.getNumClasses();\n\t\t\t//get the maximum number of colors in this scheme\n\t\t\tlet colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n\t\t\t//get the color scheme\n\t\t\tlet colorScheme = this.props.brew.colorSchemes[colorCode];\n\t\t\t//get the number of colors to show as an array\n\t\t\tlet numClassesArray = (numClasses <= colorSchemeLength) ? Array.apply(null, {\n\t\t\t\tlength: numClasses\n\t\t\t}).map(Number.call, Number) : Array.apply(null, {\n\t\t\t\tlength: colorSchemeLength\n\t\t\t}).map(Number.call, Number);\n\t\t\tlet classesToShow = numClassesArray.length;\n\t\t\tlegendItems = numClassesArray.map((item) => {\n\t\t\t\t//see if the data is a range - if the difference in the number of solutions is only 1, then it is not a range\n\t\t\t\tlet range = (this.props.brew.breaks[item + 1] - this.props.brew.breaks[item] > 1) ? true : false;\n\t\t\t\tlet suffix = (this.props.brew.breaks[item + 1] === 1) ? \" solution\" : \" solutions\";\n\t\t\t\tlet legendLabel = (range) ? (this.props.brew.breaks[item] + 1) + ' - ' + this.props.brew.breaks[item + 1] + suffix : this.props.brew.breaks[item + 1] + suffix;\n\t\t\t\treturn <div key={ item }>\n\t\t\t\t\t <div key={ 'swatch' + item } style={ { backgroundColor: colorScheme[classesToShow][item], width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }>\n\t\t\t\t\t </div>\n\t\t\t\t\t <div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '7px', fontSize: '12px' } } key={ 'label' + item }>\n\t\t\t\t\t\t { legendLabel }\n\t\t\t\t\t </div>\n\t\t\t\t </div>;\n\t\t\t});\n\t\t} else {\n\t\t\tlegendItems = <div>\n\t\t\t\t<div style={ { backgroundColor: 'rgba(255, 0, 136,1)', width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }>\n\t\t\t\t</div>\n\t\t\t\t<div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '3px', fontSize: '12px' } }>\n\t\t\t\t\tProposed network\n\t\t\t\t</div>\n\t\t\t</div>;\n\t\t}\n\t\tlegendItems = <div>\n\t\t\t<div className={ \"tabTitle\" }>Planning units</div>\n\t\t\t<div>{  legendItems }</div>\n\t\t\t<TransparencyControl layer={ this.props.resultsLayer } changeOpacity={this.props.changeOpacity} opacity={this.props.results_layer_opacity}/>\n\t\t\t</div>;\n\t\treturn  legendItems;\n\t}\n\t\n\tgetProtectedAreasLegend(){\n\t\tlet legend_items = (this.props.pa_layer_visible) ?\n\t\t<div>\n\t\t\t<div className={ \"tabTitle\" }>Protected areas</div>\n\t\t\t<div key={'marine'} style={ { backgroundColor: 'rgba(63,127,191)', width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }></div>\n\t\t\t<div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '7px', fontSize: '12px' } } key={ 'label_marine'}>Marine</div>\n\t\t\t<div>\n\t\t\t\t<div key={'terrestrial'} style={ { backgroundColor: 'rgba(99,148,69)', width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }></div>\n\t\t\t\t<div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '7px', fontSize: '12px' } } key={ 'label_terrestrial'}>Terrestrial</div>\n\t\t\t</div>\n\t\t\t<TransparencyControl layer={ this.props.wdpaLayer } changeOpacity={this.props.changeOpacity} opacity={this.props.wdpa_layer_opacity}/>\n\t\t</div>\n\t\t:\n\t\tnull;\n\t\treturn legend_items;\n\t}\n\t\n\trender() {\n\t\tlet planning_units_legend_items = (this.props.brew && this.props.brew.breaks && this.props.brew.colorCode) ? this.getPlanningUnitsLegend(this.props.brew.colorCode) : <div/> ;\n\t\tlet protected_areas_legend_items = this.getProtectedAreasLegend();\n\t\treturn <div>\n\t\t\t<div>{planning_units_legend_items}</div>\n\t\t\t<div style={{marginTop:'32px'}}>{protected_areas_legend_items}</div>\n\t\t</div>;\n\t}\n}\n\nexport default Legend;\n","import * as React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faArrowAltCircleRight } from '@fortawesome/free-solid-svg-icons';\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nclass Log extends React.Component {\n\t\n\trender() {\n    \treturn (\n    \t    <div className={this.props.className}>\n    \t    \t<Sync className='spin' style={{display: (this.props.message.status === \"Preprocessing\") ? 'inline' : 'none', height: '16px', width: '16px', verticalAlign: 'sub', color: 'rgb(255, 64, 129)', marginRight:'6px'}} title={'Preprocessing..'}/>\n    \t        <div style={{display: (this.props.message.status === \"Preprocessing\") ? 'inline' : 'none'}}>Preprocessing..</div>\n    \t    \t<FontAwesomeIcon icon={faCheckCircle} style={{display: ((this.props.message.status === 'Finished')&&(!this.props.message.hasOwnProperty('error'))) ? 'inline' : 'none', color:'green', marginRight:'6px'}} title={'Preprocessing completed'}/>\n    \t    \t<FontAwesomeIcon icon={faArrowAltCircleRight} style={{display: (this.props.message.status === 'UploadComplete') ? 'inline' : 'none', color:'green', marginRight:'6px'}} title={'Upload complete'}/>\n    \t        <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display:(this.props.message.hasOwnProperty('error') ? 'inline' : 'none'), marginRight:'6px'}} title={this.props.message.info}/>\n    \t        <div style={{display:'inline'}} dangerouslySetInnerHTML={{__html: this.props.message.info}}/>\n    \t    </div>\n    \t);\n\t}\n}\n\nexport default Log;","import * as React from 'react';\nimport LogItem from './LogItem';\n\nclass Log extends React.Component {\n\trender() {\n\t\tlet children = this.props.messages.map((message, index) => {\n\t\t\tlet className = '';\n\t\t\t//message cleaning and formatting\n\t\t\tswitch (message.status) {\n\t\t\t\tcase 'RunningMarxan': //from marxan runs - remove all the double line endings\n\t\t\t\t\tclassName = 'logItem logMessage';\n\t\t\t\t\tObject.assign(message, { info: message.info.replace(/(\\n\\n {2}Init)/gm, \"\\n  Init\").replace(/(\\n\\n {2}ThermalAnnealing)/gm, \"\\n  ThermalAnnealing\").replace(/(\\n\\n {2}Iterative)/gm, \"\\n  Iterative\").replace(/(\\n\\n {2}Best)/gm, \"\\n  Best\") });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Started':\n\t\t\t\tcase 'Uploading':\n\t\t\t\t\tclassName = 'logItem logStart';\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Preprocessing\":\n\t\t\t\tcase \"Downloading\":\n\t\t\t\tcase \"Updating WDPA\":\n\t\t\t\tcase \"Downloaded\":\n\t\t\t\tcase \"FeatureCreated\":\n\t\t\t\t\tclassName = 'logItem logMessageBlock';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Finished':\n\t\t\t\tcase 'UploadComplete':\n\t\t\t\t\tclassName = 'logItem logFinish';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tclassName = 'logItem logNone';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//if there is an error, then set that as the message\n\t\t\tif (message.hasOwnProperty('error')) Object.assign(message, { info: message.error });\n\t\t\treturn <LogItem message={message} key={index} preprocessing={this.props.preprocessing} className={className}/>;\n\t\t});\n\t\treturn (\n\t\t\t<div id=\"log\" onMouseEnter={this.props.mouseEnter} onMouseLeave={this.props.mouseLeave}>{children}</div>\n\t\t);\n\t}\n}\n\nexport default Log;\n","import React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport ReactTable from \"react-table\";\nimport Paper from 'material-ui/Paper';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport Legend from './Legend';\nimport Log from './Log'; \nimport Settings from 'material-ui/svg-icons/action/settings';\nimport Clipboard from 'material-ui/svg-icons/action/assignment';\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nlet runtime=0;\n\nclass ResultsPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { showClipboard: false, selectedSolution: undefined,runtimeStr:'00:00s' };\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t//scroll the log div to the bottom\n\t\t// if (this.props.messages.length !== prevProps.messages.length) {\n\t\t// \tvar objDiv = document.getElementById(\"log\");\n\t\t// \tif (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n\t\t// }\n\t\t\tvar objDiv = document.getElementById(\"log\");\n\t\t\tif (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n\t\tif (this.props.solutions !== prevProps.solutions) {\n\t\t\tthis.resetSolution();//unselect a solution\n\t\t}\n\t\tif (this.props && this.props.preprocessing && prevProps && !prevProps.preprocessing) this.startTimer();\n\t\tif (prevProps && prevProps.preprocessing && this.props && !this.props.preprocessing) this.stopTimer();\n\t}\n\tstr_pad_left(string,pad,length) {\n\t    return (new Array(length+1).join(pad)+string).slice(-length);\n\t}\n\tstartTimer(){\n\t\truntime = 0;\n\t    this.timer = setInterval(() => {\n\t    \tvar minutes = Math.floor(runtime / 60);\n\t    \tvar seconds = runtime - (minutes * 60);\n\t\t\tvar finalTime = this.str_pad_left(minutes,'0',2)+':'+this.str_pad_left(seconds,'0',2);\n\t\t\tthis.setState({runtimeStr: finalTime });\n\t\t\truntime = runtime + 1;\n\t    }, 1000);\n\t}\n\tstopTimer(){\n    //clear the timer\n    clearInterval(this.timer);\n    this.timer = null;\n\t}\n\tloadSolution(solution) { //loads the solution using the projects owner\n\t\tthis.props.loadSolution(solution, this.props.owner);\n\t}\n\n\tmouseEnter(event) {\n\t\tthis.setState({ showClipboard: true });\n\t}\n\n\tmouseLeave(event) {\n\t\tif (event.relatedTarget.id !== 'buttonsDiv') this.setState({ showClipboard: false });\n\t}\n\n\tselectText(node) {\n\t\tnode = document.getElementById(node);\n\t\tif (document.body.createTextRange) {\n\t\t\tconst range = document.body.createTextRange();\n\t\t\trange.moveToElementText(node);\n\t\t\trange.select();\n\t\t}\n\t\telse if (window.getSelection) {\n\t\t\tconst selection = window.getSelection();\n\t\t\tconst range = document.createRange();\n\t\t\trange.selectNodeContents(node);\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t}\n\t\telse {\n\t\t\tconsole.warn(\"Could not select text in node: Unsupported browser.\");\n\t\t}\n\t}\n\n\tcopyLog(evt) {\n\t\tthis.selectText(\"log\");\n\t\tevt.target.focus();\n\t\tdocument.execCommand('copy');\n\t}\n\n\t//resets the currently selected solution\n\tresetSolution(){\n\t\tif (this.state.selectedSolution) this.changeSolution(undefined, undefined); \n\t}\n\t\n\t//fired in the onClick event handler of the react table\n\tchangeSolution(event, solution) {\n\t\tthis.setState({ selectedSolution: solution });\n\t\tif (solution) this.loadSolution(solution.Run_Number);\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{width:'300px',height:'400px', position:'absolute',right:'140px','display': (this.props.open ? 'block' : 'none')}}>\n\t\t\t\t\t<Paper zDepth={2} className='ResultsPanelPaper'>\n\t\t\t\t\t\t<div className=\"resultsTitle\">Results</div>\n\t\t\t\t\t\t<Tabs contentContainerStyle={{'margin':'20px'}} className={'resultsTabs'} value={this.props.activeResultsTab} id='resultsTabs'>\n\t\t\t\t\t\t\t<Tab label=\"Legend\" value=\"legend\" onActive={this.props.legend_tab_active} >\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Legend\n\t\t\t\t\t\t\t\t\t\tbrew={this.props.brew}\n\t\t\t\t\t\t\t\t\t\tresultsLayer={ this.props.resultsLayer }\n\t\t\t\t\t\t\t\t\t\twdpaLayer={ this.props.wdpaLayer }\n\t\t\t\t\t\t\t\t\t\tpa_layer_visible={this.props.pa_layer_visible}\n\t\t\t\t\t\t\t\t\t\tchangeOpacity={this.props.changeOpacity}\n\t\t\t\t\t\t\t\t\t\tresults_layer_opacity={this.props.results_layer_opacity}\n\t\t\t\t\t\t\t\t\t\twdpa_layer_opacity={this.props.wdpa_layer_opacity}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\ticon={<Settings style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Legend Settings\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.openClassificationDialog} \n\t\t\t\t\t\t\t\t\t\tstyle={{ top:'447px', position:'absolute', marginLeft:'-7px'}}\n\t\t\t\t\t\t\t\t\t\tshow={(this.props.resultsLayer !== undefined)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Solutions\" value=\"solutions\" onActive={this.props.solutions_tab_active} >\n\t\t\t\t\t\t\t\t<div id=\"solutionsPanel\" style={{'display': (!this.props.processing ? 'block' : 'none')}}>\n\t\t\t\t\t\t\t\t{(this.props.solutions&&this.props.solutions.length>0) ? \n\t\t\t\t\t\t\t\t\t<ReactTable\n\t\t\t\t\t\t\t\t\t\tthisRef={this}\n\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column, instance) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn { \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.thisRef.changeSolution(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: { \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.Run_Number === (state.thisRef.state.selectedSolution&&state.thisRef.state.selectedSolution.Run_Number)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Click to show on the map'\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName={'solutions_infoTable -highlight'}\n\t\t\t\t\t\t\t\t\t\tshowPagination={false}\n\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\tpageSize={this.props.solutions.length} \n\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\tdata={this.props.solutions}\n\t\t\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Run', \n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Run_Number',\n\t\t\t\t\t\t\t\t\t\t\t width:40,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}                             \n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Score',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Score',\n\t\t\t\t\t\t\t\t\t\t\t width:80,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Cost',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Cost' ,\n\t\t\t\t\t\t\t\t\t\t\t width:80,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Planning Units', \n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Planning_Units' ,\n\t\t\t\t\t\t\t\t\t\t\t width:50,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'} \n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Missing Values',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Missing_Values' ,\n\t\t\t\t\t\t\t\t\t\t\t width:105,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Log\" value=\"log\" onActive={this.props.log_tab_active} style={{ display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t<Log messages={this.props.messages} id=\"log\" mouseEnter={this.mouseEnter.bind(this)} mouseLeave={this.mouseLeave.bind(this)} preprocessing={this.props.preprocessing}/>\n\t\t\t\t\t\t\t\t<div className={\"runtime\"} style={{'display': (this.props.preprocessing ? 'block' : 'none')}}>Runtime: {this.state.runtimeStr}s</div>\n\t\t\t\t\t\t\t\t<div id='buttonsDiv' style={{position:'absolute',top:'430px',right:'16px',padding:'10px'}}>\n\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\ticon={<Clipboard style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Copy to clipboard\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.copyLog.bind(this)} \n\t\t\t\t\t\t\t\t\t\tshow={this.state.showClipboard}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Clear log\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.clearLog.bind(this)} \n\t\t\t\t\t\t\t\t\t\tshow={this.state.showClipboard}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t</Tabs>     \n\t\t\t\t\t\t<div className=\"processingDiv\" style={{display:(this.props.preprocessing) ? 'block' : 'none'}} title=\"Processing..\">\n\t\t\t\t\t\t\t<Paper zDepth={2}>\n\t\t\t\t\t\t\t\t<div className=\"processingText\"></div>\n\t\t\t\t\t\t\t\t<Sync className='spin processingSpin' style={{color: 'rgb(255, 64, 129)'}}/>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ResultsPanel;","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\nimport {isNumber, isValidTargetValue} from './genericFunctions.js'; \n\nclass FeatureInfoDialog extends React.Component {\n\tonKeyPress(key, e) {\n\t\tif (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n\t\t\t//update the feature\n\t\t\tthis.updateFeatureValue(key,e);\n\t\t\t//closes this window\n\t\t\tthis.props.onOk();\n\t\t}\n\t}\n\tgetHTML(value, title = ''){\n\t\treturn <div title={(title !== '') ? title : value}>{value}</div>;\n\t}\n\t//adds Kms to the area values and rounds to 1 decimal place \n\tgetAreaHTML(props){\n\t\t//set the font color to red if the area protected is less than the target area\n\t\tlet color = (this.props.feature.protected_area < this.props.feature.target_area) && (props.row.key === 'Area protected') ? \"red\" : \"rgba(0, 0, 0, 0.6)\";\n\t\t//rounded to 1 dp\n\t\tlet roundedText = ((Number(props.row.value/1000000).toFixed(1) === \"0.0\") && (props.row.value > 0)) ? \" (approx.)\" : \"\";\n\t\tlet html = <div title={props.row.value/1000000 + ' Km2'} style={{color:color}}>{String(Number(props.row.value/1000000).toFixed(1)).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")} Km<span style={{verticalAlign: 'super', fontSize: 'smaller'}}>2</span>{roundedText}</div>;\n\t\treturn html;   \n\t}\n\trenderKeyCell(props){\n\t\treturn this.getHTML(props.row.key, props.original.hint);\n\t}\n\t//called when the user moves away from an editable property, e.g. target percent or spf\n\tupdateFeatureValue(key, evt){\n\t\tvar value = evt.currentTarget.innerHTML;\n\t\tif (((key === \"target_value\") && (isValidTargetValue(value))) || ((key === \"spf\") && (isNumber(value)))) {\n\t\t\tvar obj = {};\n\t\t\tobj[key] = value;\n\t\t\tthis.props.updateFeature(this.props.feature, obj);      \n\t\t}else{\n\t\t\talert(\"Invalid value\");\n\t\t}\n\t}\n\trenderValueCell(props){\n\t\tlet html;\n\t\tswitch (props.row.key) {\n\t\t\tcase 'ID':\n\t\t\tcase 'Alias':\n\t\t\tcase 'Feature class name':\n\t\t\t\thtml = this.getHTML(props.row.value, props.original.hint);\n\t\t\t\tbreak;\n\t\t\tcase 'Description':\n\t\t\t\thtml = this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Creation date': \n\t\t\t\thtml = this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Mapbox ID':\n\t\t\t\thtml = ((props.row.value === \"\")||(props.row.value === null)) ? this.getHTML(\"Not available\", \"The feature was not uploaded to Mapbox\") : this.getHTML(props.row.value, \"The feature was uploaded to Mapbox with this identifier\");\n\t\t\t\tbreak;\n\t\t\tcase 'Total area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Total areas are not available for imported projects\") : this.getAreaHTML(props, props.original.hint);\n\t\t\t\tbreak;\n\t\t\tcase 'Target percent':\n\t\t\t\thtml = (this.props.userRole === \"ReadOnly\") ? <div>{props.row.value}</div> : <div contentEditable suppressContentEditableWarning title=\"Click to edit\" onBlur={this.updateFeatureValue.bind(this, \"target_value\")} onKeyPress={this.onKeyPress.bind(this, \"target_value\")}>{props.row.value}</div>;\n\t\t\t\tbreak;\n\t\t\tcase 'Species Penalty Factor':\n\t\t\t\thtml = (this.props.userRole === \"ReadOnly\") ? <div>{props.row.value}</div> : <div contentEditable suppressContentEditableWarning title=\"Click to edit\" onBlur={this.updateFeatureValue.bind(this, \"spf\")} onKeyPress={this.onKeyPress.bind(this, \"spf\")}>{props.row.value}</div>;\n\t\t\t\tbreak;\n\t\t\tcase 'Preprocessed':\n\t\t\t\thtml = (props.row.value) ? this.getHTML(\"Yes\", \"The feature has been intersected with the planning units\") : this.getHTML(\"No\", \"The feature has not yet been intersected with the planning units\");\n\t\t\t\tbreak;\n\t\t\tcase 'Planning grid area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tcase 'Planning unit count':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\") : this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Target area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tcase 'Area protected':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn html;\n\t} \n\t\trender(){\n\t\t\tif (this.props.feature){\n\t\t\t\tlet data =[];\n\t\t\t\t//iterate through the feature properties and set the data to bind to the table - if it is a feature from the old version of marxan then showForOld must be true for that property to be shown\n\t\t\t\tthis.props.FEATURE_PROPERTIES.forEach((item)=>{\n\t\t\t\t\tif ((!this.props.feature.old_version && item.showForNew) || (this.props.feature.old_version && item.showForOld)){\n\t\t\t\t\t\tdata.push({key: item.key, value: this.props.feature[item.name], hint: item.hint});\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog title=\"Properties\" \n\t\t\t\t\t\t{...this.props}  \n\t\t\t\t\t\tcontentWidth={380}\n\t\t\t\t\t\thelpLink={\"docs_user.html#feature-properties-window\"}\n\t\t\t\t\t\toffsetX={135}\n\t\t\t\t\t\toffsetY={250}\n\t\t\t\t\t\tchildren={\n\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\tclassName={(this.props.feature.old_version) ? 'infoTableOldVersion' : 'infoTable'}\n\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\tpageSize={data.length}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t Header: 'Key', \n\t\t\t\t\t\t\t\t\t accessor: 'key',\n\t\t\t\t\t\t\t\t\t width:150,\n\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t\t\t Cell: props => this.renderKeyCell(props)\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t Header: 'Value',\n\t\t\t\t\t\t\t\t\t accessor: 'value',\n\t\t\t\t\t\t\t\t\t width:185,\n\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t\t\t Cell: props => this.renderValueCell(props)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t key=\"k9\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>);\n\t\t\t}else{\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default FeatureInfoDialog;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport Clone from 'material-ui/svg-icons/content/content-copy';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\n\nclass ProjectsDialog extends React.Component { \n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = { searchText: \"\",selectedProject: undefined };\n\t\t}\n\t\t_delete() {\n\t\t\tthis.props.deleteProject(this.state.selectedProject.user, this.state.selectedProject.name);\n\t\t\tthis.setState({ selectedProject: false });\n\t\t}\n\t\tload() {\n\t\t\tif ((this.props.oldVersion === true) && (this.state.selectedProject.oldVersion === false)) {\n\t\t\t\t//get all the features again otherwise the allFeatures state will be bound to the old versions features\n\t\t\t\tthis.props.getAllFeatures().then(function() {\n\t\t\t\t\tthis.loadAndClose();\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.loadAndClose();\n\t\t\t}\n\t\t}\n\t\tloadAndClose() {\n\t\t\t//load the project\n\t\t\tthis.props.loadProject(this.state.selectedProject.name, this.state.selectedProject.user);\n\t\t\tthis.closeDialog();\n\t\t}\n\t\t_new() {\n\t\t\t//get all the features again otherwise the allFeatures state may be bound to an old version of marxans features\n\t\t\tthis.props.getAllFeatures().then(function() {\n\t\t\t\tthis.props.openNewProjectDialog();\n\t\t\t\tthis.closeDialog();\n\t\t\t}.bind(this));\n\t\t}\n\t\tcloneProject() {\n\t\t\tthis.props.cloneProject(this.state.selectedProject.user, this.state.selectedProject.name);\n\t\t}\n\t\topenImportProjectDialog() {\n\t\t\tthis.props.openImportProjectDialog();\n\t\t\tthis.closeDialog();\n\t\t}\n\t\tchangeProject(event, project) {\n\t\t\tthis.setState({ selectedProject: project });\n\t\t}\n\t\tcloseDialog() {\n\t\t\tthis.setState({ selectedProject: undefined });\n\t\t\tthis.props.onOk(); \n\t\t}\n\t\tsortDate(a, b, desc){\n\t\t\treturn (new Date(a.slice(6,8),a.slice(3,5)-1,a.slice(0,2),a.slice(9,11),a.slice(12,14),a.slice(15,17)) > new Date(b.slice(6,8),b.slice(3,5)-1,b.slice(0,2),b.slice(9,11),b.slice(12,14),b.slice(15,17))) ? 1 : -1;\n\t\t}\n\t\trenderTitle(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;        \n\t\t}\n\t\trenderName(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.name}>{row.original.name}</div>;        \n\t\t}\n\t    searchTextChanged(value){\n\t      this.setState({searchText: value});\n\t    }\n\t\trender() {\n\t\t\t\tlet tableColumns = [];\n\t\t\t\tif (['Admin', 'ReadOnly'].includes(this.props.userRole)) {\n\t\t\t\t\ttableColumns = [{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, { Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, { Header: 'Description', accessor: 'description', width: 315, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, { Header: 'Date', accessor: 'createdate', width: 115, headerStyle: { 'textAlign': 'left' }, sortMethod: this.sortDate.bind(this)}];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttableColumns = [{ Header: 'Name', accessor: 'name', width: 170, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, { Header: 'Description', accessor: 'description', width: 330, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, { Header: 'Date', accessor: 'createdate', width: 220, headerStyle: { 'textAlign': 'left' }, sortMethod: this.sortDate.bind(this) }];\n\t\t\t\t}\n\t\t\t\tif (this.props.projects) {\n\t\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\t\tokLabel={(this.props.userRole === \"ReadOnly\") ? \"Open (Read-only)\" : \"Open\"}\n\t\t\t\t\tonOk={this.load.bind(this)}\n\t\t\t\t\tonCancel={this.closeDialog.bind(this)}\n\t\t\t\t\tokDisabled={!this.state.selectedProject}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\thelpLink={\"docs_user.html#the-projects-window\"}\n\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\ttitle=\"Projects\"  \n\t\t\t\t\tshowSearchBox={true} \n\t\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\t\tchildren={\n\t\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\t\tdata={this.props.projects}\n\t\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t                            searchColumns={['user','name','description']}\n\t\t\t                            searchText={this.state.searchText}\n\t\t\t                            selectedProject={this.state.selectedProject}\n\t\t\t                            changeProject={this.changeProject.bind(this)}\n\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: ((rowInfo.original.user === (state.selectedProject&&state.selectedProject.user))&&(rowInfo.original.name === (state.selectedProject&&state.selectedProject.name))) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.changeProject(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t  <div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createProject\")}\n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faPlusCircle} />} \n\t\t\t\t\t\t\t\t\ttitle=\"New project\" \n\t\t\t\t\t\t\t\t\tonClick={this._new.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"New\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createImportProject\")}\n\t\t\t\t\t\t\t\t\ticon={<Import style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Import an existing Marxan project from the local machine\"\n\t\t\t\t\t\t\t\t\tonClick={this.openImportProjectDialog.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"Import\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"cloneProject\")}\n\t\t\t\t\t\t\t\t\ticon={<Clone style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Duplicate project\" \n\t\t\t\t\t\t\t\t\tonClick={this.cloneProject.bind(this)} \n\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedProject || this.props.loading}\n\t\t\t\t\t\t\t\t\tlabel={\"Duplicate\"}\n\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"deleteProject\")}\n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Delete project\" \n\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedProject || this.props.loading}\n\t\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t} \n\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default ProjectsDialog;\n","import * as React from 'react';\nimport TextField from 'material-ui/TextField';\n\nclass Metadata extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props); \n\t\tthis.state = {\n\t\t\tvalidName: undefined\n\t\t};\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.props.setName(newValue);\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.props.setDescription(newValue);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{marginBottom:this.props.paddingBottom}}> \n\t\t\t\t\t<TextField errorText={this.state.validName === false ? 'Required field' : ''} value={this.props.name} onChange={this.changeName.bind(this)} floatingLabelText=\"Enter a name for the project\" floatingLabelFixed={true} />\n\t\t\t\t\t<TextField value={this.props.description} onChange={this.changeDescription.bind(this)} multiLine={true} rows={3} floatingLabelText=\"Enter a description for the project\" floatingLabelFixed={true} />\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Metadata;\n","import * as React from 'react';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\n\n//this is a generic component for selecting and dynamically displaying a layer from mapbox on a mapbox map\n//the following are property requirements:\n// map:         the mapbox map where the layer will be displayed\n// mapboxUser   the mapbox user id where the tilesets are stored, e.g. blished\n// items:       the items that you want to display in the select box. these must contain the following properties: \n//  alias               - a string for the text that will be shown in the select box\n//  feature_class_name  - the actual value that determines which item is selected - this should be the tileset name, e.g. pupng_terrestrial_hexagon_50\n//  envelope            - a well-known-text representation of the bounds of the mapbox layer, e.g. \"POLYGON((60.4758290002083 29.3772500001874,60.4758290002083 38.4906960004201,74.8898619998315 38.4906960004201,74.8898619998315 29.3772500001874,60.4758290002083 29.3772500001874))\" (optional)\n// selectedValue the value that is selected (controlled from the controlling component)\n//prerequisitives:\n// request library\n\nclass SelectFieldMapboxLayer extends React.Component {\n\tchangeItem(event, newValue) {\n\t\t//get the selected item\n\t\tlet item = this.props.items[newValue];\n\t\t//zoom to the layer\n\t\tif (item.envelope !== null){\n\t\t\tvar envelope = this.getLatLngLikeFromWKT(item.envelope);\n\t\t\tthis.props.map.fitBounds(envelope, { easing: function(num) { return 1; } });\n\t\t}\n\t\t// this.props.map.setPitch(60);\n\t\t//add the layer to the map\n\t\tthis.addLayerToMap(item.feature_class_name);\n\t\t//update the state in the owner\n\t\tthis.props.changeItem(item.feature_class_name);\n\t}\n\n\tgetLatLngLikeFromWKT(wkt) {\n\t\tlet envelope, returnVal;\n\t\tvar parse = require('wellknown');\n\t\tvar geometry = parse(wkt);\n\t\t//see if the envelope spans the dateline\n\t\tif (geometry.coordinates.length>1){\n\t\t\t//if the envelope spans the dateline then the first polygon is in the western hemisphere\n\t\t\tlet west = parse(wkt).coordinates[0];\n\t\t\tlet east = parse(wkt).coordinates[1];\n\t\t\treturnVal= [[east[0][1][0],east[0][1][1]],[west[0][1][0]+360,west[0][1][1]]];\n\t\t}else{\n\t\t\tenvelope = parse(wkt).coordinates[0];\n\t\t\treturnVal= [[envelope[0][0], envelope[0][1]],[envelope[2][0], envelope[2][1]]];\n\t\t}\n\t\treturn returnVal;\n\t}\n\n\t//check the layer exists\n\taddLayerToMap(mapboxlayername) {\n\t\tthis.mapboxlayername = mapboxlayername;\n\t\tvar request = require('request');\n\t\trequest('https://api.mapbox.com/v4/' + this.props.mapboxUser + '.' + mapboxlayername + '.json?access_token=' + window.MBAT_PUBLIC + '&secure', this.parseUrlExists.bind(this));\n\t}\n\n\tparseUrlExists(err, res) {\n\t\tlet exists = (res && res.statusCode === 200) ? true : false;\n\t\tif (exists) {\n\t\t\t//remove the previous planning unit layer\n\t\t\tlet previousLayerId = this.props.map.getStyle().layers[this.props.map.getStyle().layers.length - 1].id;\n\t\t\t//check it is a planning unit layer\n\t\t\tif (previousLayerId.substr(0, 3) === \"pu_\") {\n\t\t\t\tthis.props.map.removeLayer(this.props.map.getStyle().layers[this.props.map.getStyle().layers.length - 1].id);\n\t\t\t}\n\t\t\t//remove the source if it already exists\n\t\t\tif (this.props.map.getSource(this.props.mapboxUser)) {\n\t\t\t\tthis.props.map.removeSource(this.props.mapboxUser);\n\t\t\t}\n\t\t\t//add the source for this layer\n\t\t\tthis.props.map.addSource('blishten', {\n\t\t\t\ttype: 'vector',\n\t\t\t\turl: \"mapbox://\" + this.props.mapboxUser + \".\" + this.mapboxlayername\n\t\t\t});\n\t\t\t//add the layer\n\t\t\tthis.props.map.addLayer({\n\t\t\t\t'id': this.mapboxlayername,\n\t\t\t\t'type': \"fill\",\n\t\t\t\t'source': this.props.mapboxUser,\n\t\t\t\t'source-layer': this.mapboxlayername, \n\t\t\t\t'paint': {\n\t\t\t\t\t'fill-color': '#f08',\n\t\t\t\t\t'fill-opacity': 0.4\n\t\t\t\t}\n\t\t\t});\n\t\t} \n\t\telse {\n\t\t\tconsole.log(\"The MapBox layer does not exist\"); \n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<SelectField \n\t\t\t\tonChange={this.changeItem.bind(this)} \n\t\t\t\tvalue={this.props.selectedValue} \n\t\t\t\tmenuItemStyle={{fontSize:'12px'}} \n\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\tfloatingLabelText=\"Select the planning units\" \n\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\tstyle={{width:this.props.width, verticalAlign:'middle'}}>\n\t\t\t\t\t{this.props.items.map((item)=>{\n\t\t\t\t\treturn <MenuItem \n\t\t\t\t\tvalue={item.feature_class_name} \n\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\tkey={item.feature_class_name}\n\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t/>;\n\t\t\t\t\t})}\n\t\t\t\t</SelectField>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default SelectFieldMapboxLayer;\n","import * as React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport SelectFieldMapboxLayer from './SelectFieldMapboxLayer';\n\nclass PlanningUnitsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { planning_unit_grids_received: false };\n\t} \n\tcomponentDidMount() {\n\t\tlet map = new mapboxgl.Map({\n\t\t\tcontainer: this.mapContainer,\n\t\t\tstyle: 'mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd', //north star + marine PAs in pacific\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 2\n\t\t});\n\t\tthis.setState({map: map});\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" style={{width:'352px',height:'300px', marginTop: '50px',marginLeft: '24px'}}/>\n\t\t\t\t\t\t<div style={{position: 'absolute', top:'380px', verticalAlign: 'middle'}}>\n\t\t\t\t\t\t\t<SelectFieldMapboxLayer \n\t\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\tselectedValue={this.props.pu} \n\t\t\t\t\t\t\t\tmap={this.state.map} \n\t\t\t\t\t\t\t\tmapboxUser={'blishten'} \n\t\t\t\t\t\t\t\titems={this.props.planning_unit_grids} \n\t\t\t\t\t\t\t\tchangeItem={this.props.changeItem} \n\t\t\t\t\t\t\t\tdisabled={!this.state.planning_unit_grids_received}\n\t\t\t\t\t\t\t\twidth={'352px'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default PlanningUnitsDialog;\n","import React from 'react';\nimport { List, ListItem} from 'material-ui/List';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport { grey400 } from 'material-ui/styles/colors';\nimport IconButton from 'material-ui/IconButton';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport ToolbarButton from './ToolbarButton';\n\nclass SelectCostFeatures extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { selectedFeature: undefined };\n\t}\n\tcomponentWillMount() {\n\t\tListItem.defaultProps.disableTouchRipple = true;\n\t\tListItem.defaultProps.disableFocusRipple = true;\n\t}\n\tchangeFeature(event, feature) {\n\t\tthis.setState({ selectedFeature: feature });\n\t} \n\tclickListItem(event) {\n\t}\n\trender() {\n\t\tconst iconButtonElement = (\n\t\t\t<IconButton\n\t\t\t\ttouch={true}\n\t\t\t\ttooltipPosition=\"bottom-left\"\n\t\t\t>\n\t\t\t<MoreVertIcon color={grey400} />\n\t\t\t</IconButton>\n\t\t);\n\n\t\tconst rightIconMenu = (\n\t\t\t<IconMenu iconButtonElement={iconButtonElement}>\n\t\t\t<MenuItem>Info</MenuItem>\n\t\t\t<MenuItem title=\"Not implemented\">View</MenuItem>\n\t\t\t<MenuItem title=\"Not implemented\">Prioritise</MenuItem>\n\t\t</IconMenu>\n\t\t);\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>\n\t\t\t\t\t<div>Select the costs</div>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t{this.props.selectedCosts.map((item)=>{\n\t\t\t\t\t\t\treturn <ListItem \n\t\t\t\t\t\t\t  disableFocusRipple={true}\n\t\t\t\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\t\t\t\tsecondaryText={item.description} \n\t\t\t\t\t\t\t\tkey={item.id} \n\t\t\t\t\t\t\t\tvalue={item.alias}\n\t\t\t\t\t\t\t\trightIconButton={rightIconMenu}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</List>\n\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\tlabel=\"Select\" \n\t\t\t\t\t\tonClick={this.props.openCostsDialog}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default SelectCostFeatures;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\nimport { faCheckCircle } from '@fortawesome/free-regular-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\nimport Popover from 'material-ui/Popover';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\n//import gbif_logo from './gbif.jpg';\n//import FontIcon from 'material-ui/FontIcon';\n// add this to the gbif item: leftIcon={<FontIcon className=\"gbifLogo\"/> \n\nclass FeaturesDialog extends React.Component {\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        selectedFeature: undefined,\n        previousRow: undefined,\n        searchText: \"\",\n      };\n    }\n    _delete() {\n      this.props.deleteFeature(this.state.selectedFeature);\n      this.setState({ selectedFeature: undefined });\n    }\n    showNewFeaturePopover(event) {\n      this.setState({ newFeatureAnchor: event.currentTarget });\n      this.props.showNewFeaturePopover();\n    }\n    showImportFeaturePopover(event) {\n      this.setState({ importFeatureAnchor: event.currentTarget });\n      this.props.showImportFeaturePopover();\n    }\n    _openImportFeaturesDialog() {\n      //close the dialog\n      this.props.onCancel();\n      //show the new feature dialog\n      this.props.openImportFeaturesDialog(\"import\");\n    }\n    _newByDigitising() {\n      //hide this dialog\n      this.onOk();\n      //show the drawing controls\n      this.props.initialiseDigitising();\n    }\n    openImportGBIFDialog() {\n      this.props.openImportGBIFDialog();\n      this.props.onCancel();\n    }\n    clickFeature(event, rowInfo) {\n      //if adding or removing features from a project\n      if (this.props.addingRemovingFeatures) {\n        //if the shift key is pressed then select/deselect the features in between\n        if (event.shiftKey) {\n          //get the selected feature ids\n          let selectedIds = this.getFeaturesBetweenRows(this.state.previousRow, rowInfo);\n          //update the selected ids\n          this.props.selectFeatures(selectedIds);\n        }\n        else { //single feature has been clicked\n          this.props.clickFeature(rowInfo.original, event.shiftKey, this.state.previousRow);\n        }\n        this.setState({ previousRow: rowInfo });\n      }\n      else {\n        this.setState({ selectedFeature: rowInfo.original });\n      }\n    }\n\n    //gets the features ids between the two passed rows and toggles their selection state\n    getFeaturesBetweenRows(previousRow, thisRow) {\n      let selectedIds = this.props.selectedFeatureIds;\n      let idx1 = (previousRow.index < thisRow.index) ? previousRow.index + 1 : thisRow.index;\n      let idx2 = (previousRow.index < thisRow.index) ? thisRow.index + 1 : previousRow.index;\n      //get the features between the two indices\n      let spannedFeatures = this.props.allFeatures.slice(idx1, idx2);\n      //iterate through the spanned features and toggle their selected state\n      spannedFeatures.forEach((feature) => {\n        if (selectedIds.includes(feature.id)) {\n          selectedIds.splice(selectedIds.indexOf(feature.id), 1);\n        }\n        else {\n          selectedIds.push(feature.id);\n        }\n      });\n      return selectedIds;\n    }\n    onOk(evt) {\n      if (this.props.addingRemovingFeatures) {\n        this.props.onOk();\n      }\n      else {\n        this.unselectFeature();\n      }\n    }\n    unselectFeature(evt) {\n      this.setState({\n        selectedFeature: undefined\n      });\n      this.props.onCancel();\n    }\n    sortDate(a, b, desc) {\n      return (new Date(a.slice(6, 8), a.slice(3, 5) - 1, a.slice(0, 2), a.slice(9, 11), a.slice(12, 14), a.slice(15, 17)) > new Date(b.slice(6, 8), b.slice(3, 5) - 1, b.slice(0, 2), b.slice(9, 11), b.slice(12, 14), b.slice(15, 17))) ? 1 : -1;\n    }\n    preview(feature_metadata) {\n      this.props.previewFeature(feature_metadata);\n    }\n    renderTitle(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;\n    }\n    renderPreview(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title='Click to preview'>..</div>;\n    }\n    searchTextChanged(value){\n      this.setState({searchText: value});\n    }\n    render() {\n        if (this.props.allFeatures) {\n          return (\n              <MarxanDialog {...this.props} autoDetectWindowHeight={ false } bodyStyle={ { padding: '0px 24px 0px 24px' } } title=\"Features\" onOk={ this.onOk.bind(this) } showCancelButton={this.props.addingRemovingFeatures} helpLink={\"docs_user.html#the-features-window\"} showSearchBox={true} searchTextChanged={this.searchTextChanged.bind(this)}\n          children={ <React.Fragment key=\"k10\">\n                        <div id=\"projectsTable\">\n                          <MarxanTable \n                            data={this.props.allFeatures} \n                            searchColumns={['alias','description']}\n                            searchText={this.state.searchText}\n                            addingRemovingFeatures={this.props.addingRemovingFeatures}\n                            selectedFeatureIds={this.props.selectedFeatureIds}\n                            selectedFeature={this.state.selectedFeature}\n                            clickFeature={this.clickFeature.bind(this)}\n                            preview={this.preview.bind(this)}\n                            columns={[{Header: 'Name', accessor: 'alias', width: 215, headerStyle: {'textAlign': 'left'}},  {Header: 'Description', accessor: 'description', width: 355, headerStyle: {'textAlign': 'left'}, Cell: this.renderTitle.bind(this)}, {Header: 'Date', accessor: 'creation_date', width: 115, headerStyle: {'textAlign': 'left'}, sortMethod: this.sortDate.bind(this)},{Header: '', width: 8, headerStyle: {'textAlign': 'center'}, Cell: this.renderPreview.bind(this)}]}\n                            getTrProps={(state, rowInfo, column) => {\n                              return {\n                                style: {background: ((state.addingRemovingFeatures && state.selectedFeatureIds.includes(rowInfo.original.id)) || (!state.addingRemovingFeatures && state.selectedFeature && state.selectedFeature.id === rowInfo.original.id)) ? \"aliceblue\" : \"\"},\n                                onClick: (e) => {\n                                  state.clickFeature(e, rowInfo);\n                                }\n                              };\n                            }}\n                            getTdProps={(state, rowInfo,column) => {\n                              return {\n                                onClick: (e) => {\n                                  if (column.Header === \"\") state.preview(rowInfo.original);\n                                }\n                              };\n                            }}\n                          />\n                       </div>\n                       <div id=\"projectsToolbar\">\n                         <div style={ { display: (this.props.metadata.OLDVERSION) ? \"block\" : \"none\" } } className={ 'tabTitle' }>This is an imported project. Only features from this project are shown.</div>\n                         <ToolbarButton show={ (this.props.userRole !== \"ReadOnly\") && (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) } icon={ <FontAwesomeIcon icon={ faPlusCircle } /> } title=\"New feature\" disabled={ this.props.loading } onClick={ this.showNewFeaturePopover.bind(this) } label={ \"New\" }/>\n                         <Popover open={ this.props.newFeaturePopoverOpen} anchorEl={ this.state.newFeatureAnchor } anchorOrigin={ { horizontal: 'left', vertical: 'bottom' } } targetOrigin={ { horizontal: 'left', vertical: 'top' } } onRequestClose={ this.props.hideNewFeaturePopover }>\n                           <Menu desktop={ true }>\n                             <MenuItem primaryText=\"Draw on screen\" title=\"Create a new feature by digitising it on the screen\" onClick={ this._newByDigitising.bind(this) } />\n                           </Menu>\n                         </Popover>\n                         <ToolbarButton show={ (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) && (this.props.userRole !== \"ReadOnly\") } icon={<Import style={{height:'20px',width:'20px'}}/>} title=\"Create new features from existing data\" disabled={ this.props.loading }  onClick={ this.showImportFeaturePopover.bind(this) } label={ \"Import\" }/>\n                         <Popover open={ this.props.importFeaturePopoverOpen } anchorEl={ this.state.importFeatureAnchor } anchorOrigin={ { horizontal: 'left', vertical: 'bottom' } } targetOrigin={ { horizontal: 'left', vertical: 'top' } } onRequestClose={ this.props.hideImportFeaturePopover }>\n                           <Menu desktop={ true }>\n                             <MenuItem primaryText=\"From a shapefile\" title=\"Import one or more features from a shapefile\" onClick={this._openImportFeaturesDialog.bind(this)} />\n                             <MenuItem primaryText=\"From the Global Biodiversity Information Facility\" title=\"The worlds largest provider of species observations\" onClick={ this.openImportGBIFDialog.bind(this) } />\n                             <MenuItem primaryText=\"From the IUCN Red List of Threatened Species\" disabled={ true } />\n                           </Menu>\n                         </Popover>\n                         <ToolbarButton show={ (this.props.userRole === \"Admin\") && (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) } icon={ <FontAwesomeIcon icon={ faTrashAlt } color='rgb(255, 64, 129)' /> } title=\"Delete feature\" disabled={ this.state.selectedFeature === undefined || this.props.loading  || (this.state.selectedFeature && this.state.selectedFeature.created_by === 'global admin')} onClick={ this._delete.bind(this) } label={ \"Delete\" }/>\n                         <ToolbarButton show={ this.props.addingRemovingFeatures } icon={ <FontAwesomeIcon icon={ faCircle } /> } title=\"Clear all features\" onClick={ this.props.clearAllFeatures } label={ \"Clear all\" } />\n                         <ToolbarButton show={ this.props.addingRemovingFeatures } icon={ <FontAwesomeIcon icon={ faCheckCircle } /> } title=\"Select all features\" onClick={ this.props.selectAllFeatures } label={ \"Select all\" } />\n                       </div>\n                     </React.Fragment> } />\n        );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default FeaturesDialog;\n","import React from 'react';\nimport Metadata from './Metadata';\nimport PlanningUnitsDialog from './PlanningUnitsDialog';\nimport SelectFeatures from './SelectFeatures';\nimport SelectCostFeatures from './SelectCostFeatures';\nimport MarxanDialog from './MarxanDialog';\nimport FeaturesDialog from './FeaturesDialog';\nimport ToolbarButton from './ToolbarButton';\n\nclass NewProjectDialog extends React.Component {\n\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\t\tsteps: ['Info', 'Planning units', 'Features', 'Costs'],\n\t\t\t\t\tloadingFeatures: false,\n\t\t\t\t\tfinished: false,\n\t\t\t\t\tstepIndex: 0,\n\t\t\t\t\tname: '',\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tpu: '',\n\t\t\t\t\tfeaturesDialogOpen: false,\n\t\t\t\t\tallFeatures: [],\n\t\t\t\t\tselectedFeatureIds: []\n\t\t\t};\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t\tif (prevProps.features !== this.props.features) { //this is probably an unreliable check but it seems to work!\n\t\t\t\t\tthis.setState({ allFeatures: JSON.parse(JSON.stringify(this.props.features)) }); //a copy of all the features\n\t\t\t}\n\t}\n\thandleNext = () => {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tthis.setState({\n\t\t\t\t\tstepIndex: stepIndex + 1\n\t\t\t});\n\t};\n\thandlePrev = () => {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tif (stepIndex > 0) {\n\t\t\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t\t}\n\t};\n\topenFeaturesDialog() {\n\t\t\tthis.setState({ featuresDialogOpen: true });\n\t}\n\tsetName(value) {\n\t\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\t\tthis.setState({ description: value });\n\t}\n\tchangePU(value) {\n\t\t\tthis.setState({ pu: value });\n\t}\n\tonOk(evt) {\n\t\t\tthis.gotoStart();\n\t\t\tthis.props.onOk();\n\t}\n\tgotoStart() {\n\t\t\t//reset to the beginning\n\t\t\tthis.setState({ stepIndex: 0 });\n\t}\n\tcloseFeaturesDialog() {\n\t\t\tthis.setState({ featuresDialogOpen: false });\n\t}\n\t//updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog\n\tupdateSelectedFeatures() {\n\t\t\tlet allFeatures = this.state.allFeatures;\n\t\t\tallFeatures.forEach((feature) => { \n\t\t\t\t\tif (this.state.selectedFeatureIds.includes(feature.id)) {\n\t\t\t\t\t\t\tObject.assign(feature, { selected: true });\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\tObject.assign(feature, { selected: false });\n\t\t\t\t\t}\n\t\t\t}, this);\n\t\t\t//update allFeatures to reflect those that are selected\n\t\t\tthis.setState({ allFeatures: allFeatures});\n\t\t\tthis.closeFeaturesDialog();\n\t}\n\n\tclickFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\tif (ids.includes(feature.id)) {\n\t\t\t\t\t//remove the feature if it is already selected\n\t\t\t\t\tthis.removeFeature(feature);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\t//add the feautre to the selected feature array\n\t\t\t\t\tthis.addFeature(feature);\n\t\t\t}\n\t}\n\t//selects all the features\n\tselectAllFeatures() {\n\t\t\tlet ids = [];\n\t\t\tthis.state.allFeatures.forEach((feature) => {\n\t\t\t\t\tids.push(feature.id);\n\t\t\t});\n\t\t\tthis.selectFeatures(ids);\n\t}\n\n\t//clears all the Conservation features\n\tclearAllFeatures() {\n\t\t\tthis.setState({ selectedFeatureIds: [] });\n\t}\n\n\tselectFeatures(ids){\n\t\tthis.setState({ selectedFeatureIds: ids });\n\t}\n\n\t//removes a feature from the selectedFeatureIds array\n\tremoveFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\t//remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n\t\t\tids = ids.filter(function(value, index, arr) { return value !== feature.id });\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tthis.setState({ selectedFeatureIds: ids }, function() {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t}.bind(this));\n\t}\n\n\t//adds a feature to the selectedFeatureIds array\n\taddFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\t//add the feautre to the selected feature array\n\t\t\tids.push(feature.id);\n\t\t\tthis.setState({ selectedFeatureIds: ids });\n\t}\n\n\tcreateNewProject() {\n\t\t\tthis.props.createNewProject({ name: this.state.name, description: this.state.description, planning_grid_name: this.state.pu, features: this.state.allFeatures.filter((item) => { return item.selected }) });\n\t\t\tthis.onOk();\n\t}\n\n\trender() {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tconst contentStyle = { margin: '0 16px' };\n\t\t\tconst actions = [\n\t\t\t\t\t<div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t\t\t\t{/*dynamically create the stepper\n\t\t\t\t\t\t\t<Stepper activeStep={stepIndex}>\n\t\t\t\t\t\t\t\t\t{this.state.steps.map((item) => {return <Step key={item}><StepLabel>{item}</StepLabel></Step>})}\n\t\t\t\t\t\t\t</Stepper> */}\n\t\t\t\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Back\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={stepIndex === 0}  \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handlePrev} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={stepIndex === (this.state.steps.length-1) ? this.createNewProject.bind(this) : this.handleNext} \n\t\t\t\t\t\t\t\t\t\t\t\t\tprimary={true} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t];\n\t\t\tlet c = <div key=\"k3\">\n\t\t\t\t\t\t\t\t\t{stepIndex === 0 ? <Metadata name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)} paddingBottom={'198px'}/> : null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 1 ? <PlanningUnitsDialog \n\t\t\t\t\t\t\t\t\t\tgetPlanningUnitGrids={this.props.getPlanningUnitGrids} \n\t\t\t\t\t\t\t\t\t\tplanning_unit_grids={this.props.planning_unit_grids} \n\t\t\t\t\t\t\t\t\t\tchangeItem={this.changePU.bind(this)} pu={this.state.pu} \n\t\t\t\t\t\t\t\t\t\topenImportPlanningGridDialog={this.props.openImportPlanningGridDialog}/> : null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 2 ? \n\t\t\t\t\t\t\t\t\t\t<div style={{height:'390px'}}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Select the features</div>\n\t\t\t\t\t\t\t\t\t\t\t<SelectFeatures \n\t\t\t\t\t\t\t\t\t\t\t\tfeatures={this.state.allFeatures.filter((item)=>{return item.selected;})}\n\t\t\t\t\t\t\t\t\t\t\t\topenFeaturesDialog={this.openFeaturesDialog.bind(this)}  \n\t\t\t\t\t\t\t\t\t\t\t\tsimple={true}\n\t\t\t\t\t\t\t\t\t\t\t\tshowTargetButton={false}\n\t\t\t\t\t\t\t\t\t\t\t\tleftmargin={'0px'}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 3 ? <SelectCostFeatures\n\t\t\t\t\t\t\t\t\t\t\topenCostsDialog={this.props.openCostsDialog}\n\t\t\t\t\t\t\t\t\t\t\tselectedCosts={this.props.selectedCosts}\n\t\t\t\t\t\t\t\t\t/> : null}\n\t\t\t\t\t\t\t</div>;\n\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\t\ttitle={'New project'}\n\t\t\t\t\t\t\tcontentWidth={400}\n\t\t\t\t\t\t\tchildren={c} \n\t\t\t\t\t\t\tactions={actions} \n\t\t\t\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\t\t\t\tonCancel={this.onOk.bind(this)}\n\t\t\t\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\t\t\t\thelpLink={\"docs_user.html#creating-new-projects\"}\n\t\t\t\t\t/>\n\t\t\t\t\t\t<FeaturesDialog\n\t\t\t\t\t\t\topen={this.state.featuresDialogOpen}\n\t\t\t\t\t\t\tonOk={this.updateSelectedFeatures.bind(this)}\n\t\t\t\t\t\t\tonCancel={this.closeFeaturesDialog.bind(this)}\n\t\t\t\t\t\t\tloadingFeatures={this.state.loadingFeatures}\n\t\t\t\t\t\t\tallFeatures={this.state.allFeatures}\n\t\t\t\t\t\t\tselectAllFeatures={this.selectAllFeatures.bind(this)}\n\t\t\t\t\t\t\tclearAllFeatures={this.clearAllFeatures.bind(this)}\n\t\t\t\t\t\t\tselectFeatures={this.selectFeatures.bind(this)}\n\t\t\t\t\t\t\tclickFeature={this.clickFeature.bind(this)}\n\t\t\t\t\t\t\taddingRemovingFeatures={true}\n\t\t\t\t\t\t\tselectedFeatureIds={this.state.selectedFeatureIds}\n\t\t\t\t\t\t\tmetadata={{OLDVERSION:false}}\n\t\t\t\t\t\t\tuserRole={\"User\"}\n            \t\t\t\tpreviewFeature={this.props.previewFeature} \n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t);\n\t}\n}\n\nexport default NewProjectDialog;\n","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport Checkbox from 'material-ui/Checkbox';\n\nclass NewProjectWizardDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {steps: ['Country', 'Planning units', 'Habitats','Species', 'Existing PAs'],  stepIndex: 0, stepComplete: false, iso3:'', country: '', domain:'', shape:'Hexagon', areakm2: 50, worldEcosystems:false, allSpecies:false, endemicSpecies:false, endangeredSpecies:false,includeExistingPAs:false, iucn_category:'None'};\n    }\n    //moves to the next step of the wizard\n\thandleNext = () => {\n\t\tthis.setState({stepIndex: this.state.stepIndex + 1});\n\t};\n    //moves to the previous step of the wizard\n\thandlePrev = () => {\n\t\tthis.setState({stepIndex: this.state.stepIndex - 1});\n\t};\n\tgetComplete(){\n\t    let complete = false;\n\t    switch (this.state.stepIndex) {\n\t        case 0:\n                complete = (this.state.country !=='' && this.state.domain !=='');\t            \n\t            break;\n\t        case 1:\n                complete = (this.state.shape !=='' && this.state.areakm2 !==0);\t            \n\t            break;\n\t        default:\n\t            // code\n\t    }\n\t    this.setState({stepComplete: complete});\n\t}\n\tchangeCountry(evt, value) {\n\t\tthis.setState({iso3: this.props.countries[value].iso3, country: this.props.countries[value].name_iso31}, () => this.getComplete());\n\t}\n\tchangeDomain(evt, value) {\n\t\tthis.setState({domain: this.props.domains[value]}, () => this.getComplete());\n\t}\n\tchangeShape(evt, value) {\n\t\tthis.setState({shape: this.props.shapes[value]}, () => this.getComplete());\n\t}\n\tchangeAreaKm2(evt, value) {\n\t\tthis.setState({areakm2: this.props.areakm2s[value]}, () => this.getComplete());\n\t}\n    toggleWorldEcosystems(evt, isInputChecked){\n        this.setState({worldEcosystems: isInputChecked});\n    }\n    toggleAllSpecies(evt, isInputChecked){\n        this.setState({allSpecies: isInputChecked});\n    }\n    toggleEndemicSpecies(evt, isInputChecked){\n        this.setState({endemicSpecies: isInputChecked});\n    }\n    toggleEndangeredSpecies(evt, isInputChecked){\n        this.setState({endangeredSpecies: isInputChecked});\n    }\n    toggleIncludeExistingPAs(evt, isInputChecked){\n        this.setState({includeExistingPAs: isInputChecked});\n    }\n    changeIucnCategory(evt, value){\n\t\tthis.setState({iucn_category: this.props.iucn_categories[value]});\n    }\n    //create a new national project\n\tcreateNewNationalProject(){\n\t    this.props.createNewNationalProject(this.state);\n\t}\n    render() {\n        let dropDownStyle = {width: \"240px\"};\n        const actions = [\n            <div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={{margin: '0 16px'}}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={this.state.stepIndex === 0}  onClick={this.handlePrev} />\n\t\t\t\t\t\t<ToolbarButton label={this.state.stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.state.stepIndex === (this.state.steps.length-1) ? this.createNewNationalProject.bind(this) : this.handleNext} primary={true} disabled={!this.state.stepComplete}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n        ];\n        const children =    <div className={'newNationalProjectContent'}>\n                                {this.state.stepIndex === 0 ? \n                                <React.Fragment key={'_wiz01'}>\n                                    <div>Choose a country and domain</div>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeCountry.bind(this)} value={this.state.iso3} floatingLabelText=\"Country\" floatingLabelFixed={true}>\n        \t\t\t\t\t\t\t\t{this.props.countries.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item.iso3} primaryText={item.name_iso31} key={item.iso3} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField> \n        \t\t\t\t\t\t\t<br/>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeDomain.bind(this)} value={this.state.domain} style={dropDownStyle} floatingLabelText=\"Domain\" floatingLabelFixed={true}>\n        \t\t\t\t\t\t\t\t{this.props.domains.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 1 ? \n                                <React.Fragment key={'_wiz02'}>\n                                    <div>Choose the shape and size of the planning units</div>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeShape.bind(this)} value={this.state.shape} style={dropDownStyle} floatingLabelText=\"Planning unit shape\" floatingLabelFixed={true}>\n        \t\t\t\t\t\t\t\t{this.props.shapes.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField>\n        \t\t\t\t\t\t\t<br/>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeAreaKm2.bind(this)} value={this.state.areakm2} style={dropDownStyle} floatingLabelText=\"Area of each planning unit\" floatingLabelFixed={true}>\n        \t\t\t\t\t\t\t\t{this.props.areakm2s.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item + \" Km2\"} key={item} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 2 ? \n                                <React.Fragment key={'_wiz03'}>\n                                    <div>What habitats do you want to include in your project?</div>\n                                    <div className={'habitatsList'}>\n                                        <Checkbox label=\"World Ecosystems\" style={{fontSize:'12px'}} onCheck={this.toggleWorldEcosystems.bind(this)} />\n                                    </div>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 3 ? \n                                <React.Fragment key={'_wiz04'}>\n                                    <div>What species do you want to include in your project?</div>\n                                    <div className={'speciesList'}>\n                                        <Checkbox label={\"All species that occur in \" + this.state.country} style={{fontSize:'12px'}} onCheck={this.toggleAllSpecies.bind(this)} />\n                                        <Checkbox label={\"All species that are endemic to \" + this.state.country} style={{fontSize:'12px'}} onCheck={this.toggleEndemicSpecies.bind(this)} />\n                                        <Checkbox label={\"All endangered species that occur in \" + this.state.country} style={{fontSize:'12px'}} onCheck={this.toggleEndangeredSpecies.bind(this)} />\n                                    </div>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 4 ? \n                                <React.Fragment key={'_wiz05'}>\n                                    <div>Do you want to include existing protected areas?</div>\n                                    <div className={'speciesList'}>\n                                        <Checkbox label={\"Include existing protected areas\"} style={{fontSize:'12px'}} onCheck={this.toggleIncludeExistingPAs.bind(this)} />\n            \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeIucnCategory.bind(this)} value={this.state.iucn_category} style={dropDownStyle} floatingLabelText=\"IUCN Category\" floatingLabelFixed={true} disabled={!this.state.includeExistingPAs}>\n            \t\t\t\t\t\t\t\t{this.props.iucn_categories.map((item)=> {\n    \t\t\t\t\t\t\t\t\t\t\treturn  <MenuItem value={item} key={item} primaryText={item} style={{fontSize:'12px'}} />; \n    \t\t\t\t\t\t\t\t\t\t})}\n            \t\t\t\t\t\t\t</SelectField>\n            \t\t\t\t\t\t</div>\n                                </React.Fragment>\n                                : null}\n                            </div>;\n        return (\n            <MarxanDialog \n            \t{...this.props} \n\t\t\t\ttitle={'New national project'}\n\t\t\t\tcontentWidth={600}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonCancel={this.props.closeNewProjectWizardDialog}\n\t\t\t\tonRequestClose={this.props.closeNewProjectWizardDialog} \n\t\t\t\thelpLink={\"docs_user.html#creating-new-projects\"}\n\t\t\t\tactions={actions}\n\t\t\t\tchildren={children}\n\t\t\t/>\n        );\n    }\n}\n\nexport default NewProjectWizardDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\n\nclass FailedToDeleteDialog extends React.Component { \n\t\trenderName(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.name}>{row.original.name}</div>;        \n\t\t}\n\t\trender() {\n\t\t\t\tlet tableColumns = [];\n\t\t\t\tif (['Admin'].includes(this.props.userRole)) {\n\t\t\t\t\ttableColumns = [{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, { Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttableColumns = [{ Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }];\n\t\t\t\t}\n\t\t\t\tif (this.props.projects) {\n\t\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\ttitle= {\"Failed to delete \" + this.props.deleteWhat} \n\t\t\t\t\tcontentWidth={500}\n\t\t\t\t\thelpLink={\"docs_user.html#deleting-features\"}\n\t\t\t\t\tchildren={\n\t\t\t\t\t\t<React.Fragment key=\"k24\">\n\t\t\t\t\t\t\t<div style={{marginBottom:'5px'}}>{\"The \" + this.props.deleteWhat + \" is used in the following projects:\"}</div>\n\t\t\t\t\t\t\t\t<div id=\"failedProjectsTable\">\n\t\t\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\t\t  pageSize={ this.props.projects.length }\n\t\t\t\t\t\t\t\t\t\tclassName={'projectsReactTable'}\n\t\t\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\tdata={this.props.projects}\n\t\t\t\t\t\t\t\t\t\tthisRef={this} \n\t\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t} \n\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default FailedToDeleteDialog;\n","import * as React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport {zoomToBounds } from './genericFunctions.js';\n//TODO: Combine this with MapContainer.js as they do similar things\nclass MapContainer2 extends React.Component {\n\tcomponentDidMount() {\n\t\tthis.map = new mapboxgl.Map({\n\t\t\tcontainer: this.mapContainer,\n\t\t\tstyle: 'mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd', //north star + marine PAs in pacific\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 2,\n            attributionControl: false,\n\t\t});\n        this.map.on(\"load\", (evt) => {\n            let color = (this.props.color) ? this.props.color : \"rgba(255, 0, 0, 0.4)\";\n            let outlineColor = (this.props.outlineColor) ? this.props.outlineColor : \"rgba(255, 0, 0, 0.5)\";\n            evt.target.addLayer({\n                'id': 'planning_grid',\n                'type': \"fill\",\n                'source': {\n                    'type': \"vector\",\n                    'url': \"mapbox://\" + this.props.planning_grid_metadata.tilesetid\n                },\n                'source-layer': this.props.planning_grid_metadata.feature_class_name,\n                'paint': {\n                    'fill-color': color, \n                    'fill-opacity': 0.9,\n                    'fill-outline-color': outlineColor\n                }\n            });\n        });\n        this.props.getTilesetMetadata(this.props.planning_grid_metadata.tilesetid).then((tileset)=>{\n            if (tileset.bounds != null) zoomToBounds(this.map, tileset.bounds);\n        }).catch((error) => {\n            this.props.setSnackBar(error);\n        });\n\t}\n\t\n    componentWillUnmount() {\n        //remove the map and free all resources\n        if (this.map) this.map.remove();\n    }\n    \n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'floatLeft mapContainer2'}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" style={{width:'352px',height:'300px', marginTop: '50px',marginLeft: '24px'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default MapContainer2;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MapContainer2 from './MapContainer2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons';\nimport { faAngleUp } from '@fortawesome/free-solid-svg-icons';\n\nclass PlanningGridDialog extends React.Component { \n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\texpand(){\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\trender() {\n\t\tlet areaTD = (this.props.planning_grid_metadata._area) ? <td className='metadataItemValue'>{this.props.planning_grid_metadata._area}Km<span className='superscript'>2</span></td> : <td/>;\n\t\tlet country_idTD = (this.props.planning_grid_metadata.country_id) ? <td className='metadataItemValue'>{this.props.planning_grid_metadata.country_id}</td> : <td/>;\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\ttitle={this.props.planning_grid_metadata.alias}\n\t\t\t\thelpLink={\"docs_user.html#the-planning-grid-details-window\"}\n\t\t\t\tcontentWidth={768}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k26\">\n\t\t\t\t\t\t<MapContainer2\n\t\t\t\t\t\t\tplanning_grid_metadata={this.props.planning_grid_metadata}\n\t\t\t\t\t\t\tgetTilesetMetadata={this.props.getTilesetMetadata}\n\t\t\t\t\t\t\tsetSnackBar={this.props.setSnackBar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"metadataPanel\">\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemTitle'>Description:</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemValue2'>{this.props.planning_grid_metadata.description}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Country:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.country}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Domain:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.domain}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Area:</td>\n\t\t\t\t\t\t\t\t\t\t{areaTD}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Unit count:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.planning_unit_count}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Author:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.created_by}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.creation_date}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Source:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.source}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>aoi_id:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.aoi_id}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>country_id:</td>\n\t\t\t\t\t\t\t\t\t\t{country_idTD}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>guid:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.feature_class_name}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>tilesetid:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.tilesetid}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={(this.state.expanded) ? faAngleUp : faAngleDown} onClick={this.expand.bind(this)} title={(this.state.expanded) ? \"Show less details\" : \"Show more details\"} className={'appBarIcon'} style={{fontSize: '20px'}}/>\n\t\t\t\t\t\t\t<div>You may need to zoom in to see the planning grid units</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default PlanningGridDialog;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\n\nclass PlanningGridsDialog extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {searchText: \"\", selectedPlanningGrid: undefined};\n\t}\n\t_delete() {\n\t\tthis.props.deletePlanningGrid(this.state.selectedPlanningGrid.feature_class_name);\n\t\tthis.setState({ selectedPlanningGrid: false });\n\t}\n\t_new() {\n\t\tthis.props.openNewPlanningGridDialog();\n\t\tthis.closeDialog();\n\t}\n\topenImportDialog() {\n\t\tthis.props.openImportPlanningGridDialog();\n\t\tthis.closeDialog();\n\t}\n\tchangePlanningGrid(event, planningGrid) {\n\t\tthis.setState({ selectedPlanningGrid: planningGrid });\n\t}\n\tcloseDialog() {\n\t\tthis.setState({ selectedPlanningGrid: undefined });\n\t\tthis.props.onOk(); \n\t}\n\tpreview(planning_grid_metadata){\n\t\tthis.props.previewPlanningGrid(planning_grid_metadata);\n\t}\n\trenderName(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.alias + \" (\" + row.original.feature_class_name + \")\"}>{row.original.alias}</div>;        \n\t}\n\trenderTitle(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;        \n\t}\n\trenderCountry(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.country}>{row.original.country}</div>;        \n\t}\n\trenderArea(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{(isNaN(row.original._area)) ? '' : row.original._area}</div>;        \n\t}\n\trenderPreview(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title='Click to preview'>..</div>;        \n\t}\n    searchTextChanged(value){\n      this.setState({searchText: value});\n    }\n\trender() {\n\t\tlet tableColumns = [];\n\t\ttableColumns = [\n\t\t\t{ Header: 'Name', accessor: 'alias', width: 215, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, \n\t\t\t{ Header: 'Description', accessor: 'description', width: 258, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, \n\t\t\t{ Header: 'Country', accessor: 'country', width: 70, headerStyle: { 'textAlign': 'left' }, Cell: this.renderCountry.bind(this)}, \n\t\t\t{ Header: 'Domain', accessor: 'domain', width: 70, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'Area (Km2)', accessor: '_area', width: 73, headerStyle: { 'textAlign': 'left' }, Cell: this.renderArea.bind(this) },\n\t\t\t{ Header: '', width: 8, headerStyle: { 'textAlign': 'center' }, Cell: this.renderPreview.bind(this) }\n\t\t];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"docs_user.html#the-planning-grids-window\"}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\ttitle=\"Planning grids\"  \n\t\t\t\tshowSearchBox={true} \n\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\tdata={this.props.planningGrids}\n\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t                            searchColumns={['country','domain','alias','description']}\n\t\t                            searchText={this.state.searchText}\n\t\t                            selectedPlanningGrid={this.state.selectedPlanningGrid}\n\t\t                            changePlanningGrid={this.changePlanningGrid.bind(this)}\n\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.alias === (state.selectedPlanningGrid && state.selectedPlanningGrid.alias)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tstate.changePlanningGrid(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tgetTdProps={(state, rowInfo,column) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (column.Header === \"\") this.preview(rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createPlanningUnitGrid\")} \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faPlusCircle} />} \n\t\t\t\t\t\t\t\ttitle=\"New planning grid\"\n\t\t\t\t\t\t\t\tonClick={this._new.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"New\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"importPlanningUnitGrid\")}\n\t\t\t\t\t\t\t\ticon={<Import style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\ttitle=\"Import an existing planning grid from the local machine\"\n\t\t\t\t\t\t\t\tonClick={this.openImportDialog.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Import\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"deletePlanningUnitGrid\")}\n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\ttitle=\"Delete planning grid\" \n\t\t\t\t\t\t\t\tdisabled={!this.state.selectedPlanningGrid || this.props.loading || (this.state.selectedPlanningGrid && this.state.selectedPlanningGrid.created_by === 'global admin')}\n\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default PlanningGridsDialog;\n","import * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowAltCircleUp } from '@fortawesome/free-regular-svg-icons';\n\nclass NewPlanningGridDialog extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {iso3: '', domain:'', shape:'', areakm2: undefined};\n\t}\n\tchangeIso3(evt, value) {\n\t\tlet iso3 = this.props.countries[value].iso3;\n\t\tif (['FJI','KIR','NZL','RUS','TUV','USA','WLF'].includes(iso3)){ //no support currently for countries that span the meridian\n\t\t\t// this.setState({iso3: undefined});\n\t\t\t// this.props.setSnackBar(\"Countries that span the meridian are currently not supported. See <a href='\" + this.props.ERRORS_PAGE + \"#planning-grids-cannot-be-created-for-countries-that-span-the-meridian' target='blank'>here</a>\");\n\t\t\tthis.setState({iso3: this.props.countries[value].iso3});\n\t\t}else{\n\t\t\tthis.setState({iso3: this.props.countries[value].iso3});\n\t\t}\n\t}\n\tchangeDomain(evt, value) {\n\t\tthis.setState({domain: this.props.domains[value]});\n\t}\n\tchangeShape(evt, value) {\n\t\tthis.setState({shape: this.props.shapes[value]});\n\t}\n\tchangeAreaKm2(evt, value) {\n\t\tthis.setState({areakm2: this.props.areakm2s[value]});\n\t}\n\tonOk(){\n\t\t//create the new planning grid\n\t\tthis.props.createNewPlanningUnitGrid(this.state.iso3, this.state.domain, this.state.areakm2, this.state.shape).then(function(response){\n\t\t\t//close the dialog\n\t\t\tthis.props.onCancel();\n\t\t}.bind(this));\n\t}\n\trender() {\n\t\tlet dropDownStyle = { width: \"240px\" };\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tokDisabled={ !this.state.iso3 ||!this.state.domain ||!this.state.areakm2 ||this.props.loading}\n\t\t\t\tcancelLabel={\"Cancel\"}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\thelpLink={\"docs_user.html#creating-new-planning-grids-using-marxan-web\"}\n\t\t\t\ttitle=\"New planning grid\"\n\t\t\t\tcontentWidth={358}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k13\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeIso3.bind(this)} value={this.state.iso3} floatingLabelText=\"Area of interest\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{this.props.countries.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.iso3}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item.name_iso31}\n\t\t\t\t\t\t\t\t\t\t\tkey={item.iso3}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t\t\t<ToolbarButton icon={<FontAwesomeIcon icon={faArrowAltCircleUp} />} title=\"Load a custom area of interest from a shapefile (not currently implemented)\" style={{position: 'absolute', top: '83px', right: '32px'}}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeDomain.bind(this)} value={this.state.domain} style={dropDownStyle} floatingLabelText=\"Domain\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{this.props.domains.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeShape.bind(this)} value={this.state.shape} style={dropDownStyle} floatingLabelText=\"Planning unit shape\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{this.props.shapes.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeAreaKm2.bind(this)} value={this.state.areakm2} style={dropDownStyle} floatingLabelText=\"Area of each planning unit\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{this.props.areakm2s.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item + \" Km2\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default NewPlanningGridDialog;\n","import React from 'react';\n/*eslint-disable no-unused-vars*/\nimport axios, { post } from 'axios';\n/*eslint-enable no-unused-vars*/\nimport FontAwesome from 'react-fontawesome';\n\n//From AshikNesin https://gist.github.com/AshikNesin/e44b1950f6a24cfcd85330ffc1713513\n\nclass ShapefileUpload extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { loading: false,active:false };\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.fileUpload = this.fileUpload.bind(this);\n\t}\n \n\tonClick(e){\n\t\tthis.setState({active:true});\n\t}\n\tonChange(e) {\n\t\tif (e.target.files.length) {\n\t\t\tthis.fileUpload(e.target.files[0]);\n\t\t\t//reset the file selector\n\t\t\tdocument.getElementById(this.id).value = \"\";\n\t\t}\n\t}\n\n\tfileUpload(value) {\n\t\tthis.setState({ loading: true });\n\t\tconst url = this.props.requestEndpoint + \"uploadShapefile\";\n\t\tconst formData = new FormData();\n\t\tthis.filename = value['name']; //from the open file dialog\n\t\tformData.append('value', value); \n\t\tformData.append('filename', this.filename);\n\t\tformData.append('name', this.props.name);\n\t\tformData.append('description', this.props.description); \n\t\tpost(url, formData, {withCredentials: this.props.SEND_CREDENTIALS}).then(function(response){\n\t\t\tthis.finishedLoading(response);\n\t\t}.bind(this));\n\t}\n\n\tfinishedLoading(response) {\n\t\tif (!this.props.checkForErrors(response.data)){\n\t\t\tthis.setState({ loading: false });\n\t\t\tthis.props.setFilename(this.filename);\n\t\t}\n\t\tthis.setState({active:false});\n\t} \n\trender() {\n\t\tthis.id = \"upload\" + this.props.parameter;\n\t\treturn (\n\t\t\t<form >\n\t\t\t\t<div className='uploadLabel' style={{color: (this.state.active) ? 'rgb(0, 188, 212)' : 'rgba(0, 0, 0, 0.3)'}}>{this.props.label}</div> \n\t\t\t\t<div className='uploadFileField'>\n\t\t\t\t\t<div className='uploadFileFieldIcon'>\n\t\t\t\t\t\t<label htmlFor={this.id}><FontAwesome name='file' title='Click to upload a file' style={{'cursor':'pointer'}}/></label>\n\t\t\t\t\t\t<input type=\"file\" onChange={this.onChange} onClick={this.onClick.bind(this)} accept=\".zip\" style={{'display':'none', 'width':'10px'}} id={this.id} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='mandatoryIcon'>\n\t\t\t\t\t\t<FontAwesome name='exclamation-circle' title='Required field' style={{ color: 'darkslateblue', 'display': (this.props.filename  === '' && this.props.mandatory) ? 'block' : 'none'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='uploadFileFieldLabel' style={{width:'168px'}}>{this.props.filename}</div>\n\t\t\t\t</div>\n\t\t\t\t<FontAwesome name='sync' spin style={{'display': (this.state.loading ? 'inline-block' : 'none'), 'marginLeft':'6px'}}/>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nexport default ShapefileUpload;\n","import * as React from 'react';\nimport TextField from 'material-ui/TextField';\nimport MarxanDialog from \"./MarxanDialog\";\nimport ShapefileUpload from './ShapefileUpload';\n\nclass ImportPlanningGridDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {planning_grid_name:'', zipFilename: '', description:\"\"}; \n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({planning_grid_name: newValue});\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({ description: newValue });\n\t}\n\tsetzipFilename(filename) { \n\t\tthis.setState({ zipFilename: filename }); \n\t} \n\tonOk(){\n\t\tlet _description = (this.state.description === \"\") ? 'Imported using the import planning grid dialog' : this.state.description;\n\t\tthis.props.onOk(this.state.zipFilename, this.state.planning_grid_name, _description).then(function(response){\n\t\t\t//reset the state\n\t\t\tthis.setState({planning_grid_name:'', zipFilename: '', description:\"\"});\n\t\t}).catch(function(ex) {\n\t\t\t//error uploading the shapefile\n\t  });\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import planning grid'}\n\t\t\t\tcontentWidth={420}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"22\">\n\t\t\t\t\t\t<ShapefileUpload \n\t\t\t\t\t\t\trequestEndpoint={this.props.requestEndpoint} \n\t\t\t\t\t\t\tSEND_CREDENTIALS={this.props.SEND_CREDENTIALS} \n\t\t\t\t\t\t\tmandatory={true} \n\t\t\t\t\t\t\tfilename={this.state.zipFilename} \n\t\t\t\t\t\t\tsetFilename={this.setzipFilename.bind(this)} \n\t\t\t\t\t\t\tcheckForErrors={this.props.checkForErrors} \n\t\t\t\t\t\t\tlabel=\"Shapefile\" \n\t\t\t\t\t\t/> \n\t\t\t\t\t\t<TextField value={this.state.planning_grid_name} onChange={this.changeName.bind(this)} floatingLabelText=\"Name\" floatingLabelFixed={true} />\n\t\t\t\t\t\t<TextField value={this.state.description} onChange={this.changeDescription.bind(this)} style={{display:'block'}} multiLine={true} rows={2} floatingLabelText=\"Enter a description\" floatingLabelFixed={true}/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tokDisabled={this.props.loading}\n\t\t\t\tonRequestClose={this.props.onCancel.bind(this)} \n\t\t\t\thelpLink={\"docs_user.html#importing-existing-planning-grids\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportPlanningGridDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MapContainer2 from './MapContainer2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons';\nimport { faAngleUp } from '@fortawesome/free-solid-svg-icons';\n\nclass FeatureDialog extends React.Component { \n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\texpand(){\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\ttitle={this.props.feature_metadata.alias}\n\t\t\t\thelpLink={\"docs_user.html#the-feature-details-window\"}\n\t\t\t\tcontentWidth={768}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k26\">\n\t\t\t\t\t\t<MapContainer2\n\t\t\t\t\t\t\tplanning_grid_metadata={this.props.feature_metadata}\n\t\t\t\t\t\t\tgetTilesetMetadata={this.props.getTilesetMetadata}\n\t\t\t\t\t\t\tsetSnackBar={this.props.setSnackBar}\n\t\t\t\t\t\t\tcolor={this.props.feature_metadata.color}\n\t\t\t\t\t\t\toutlineColor={\"rgba(0, 0, 0, 0.2)\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"metadataPanel\">\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemTitle'>Description:</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemValue2'>{this.props.feature_metadata.description}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Area:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.area}m<span className='superscript'>2</span></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Author:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.created_by}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.creation_date}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Source:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.source}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>id:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.id}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>guid:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.feature_class_name}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>tileset:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.tilesetid}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={(this.state.expanded) ? faAngleUp : faAngleDown} onClick={this.expand.bind(this)} title={(this.state.expanded) ? \"Show less details\" : \"Show more details\"} className={'appBarIcon'} style={{fontSize: '20px'}}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default FeatureDialog;\n","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass NewFeatureDialog extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {name:\"\",description:\"\"};\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({name:newValue});\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({description: newValue});\n\t}\n\tcreateNewFeature(){\n\t\tthis.props.createNewFeature(this.state.name, this.state.description);\n\t}\n\trender() {\n\t\tlet c = \n\t\t\t<React.Fragment key=\"k12\">\n\t\t\t\t<div> \n\t\t\t\t\t<TextField value={this.state.name} onChange={this.changeName.bind(this)} style={{display:'block'}} floatingLabelText=\"Enter a name\" floatingLabelFixed={true}/>\n\t\t\t\t\t<TextField value={this.state.description} onChange={this.changeDescription.bind(this)} style={{display:'block'}} multiLine={true} rows={2} floatingLabelText=\"Enter a description\" floatingLabelFixed={true}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog  \n\t\t\t\t{...this.props} \n\t\t\t\tonOk={this.createNewFeature.bind(this)}\n\t\t\t\tokDisabled={!(this.state.name!=='' && this.state.description!=='' && this.props.loading===false)}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tcontentWidth={420}\n\t\t\t\ttitle=\"Create new feature\" \n\t\t\t\tchildren={c} \n\t\t\t\tonRequestClose={this.props.onOk} \n\t\t\t\thelpLink={\"docs_user.html#drawing-features-on-screen\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default NewFeatureDialog;","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport ShapefileUpload from './ShapefileUpload.js';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from './ToolbarButton';\nimport { RadioButton, RadioButtonGroup } from 'material-ui/RadioButton';\n\nlet INITIAL_STATE = { steps: ['shapefile', 'single_or_multiple', 'metadata'], stepIndex: 0, fieldnames: [], splitField: \"\", name: \"\", description: \"\" };\nclass ImportFeaturesDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = INITIAL_STATE;\n\t}\n\thandleNext(){\n\t\tconst { stepIndex } = this.state;\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\t//unzip the shapefile on the server\n\t\t\t\tthis.props.unzipShapefile(this.props.filename).then((response) => {\n\t\t\t\t\t//get the name of the shapefile in the zip file\n\t\t\t\t\tthis.shapefile = response.rootfilename + \".shp\";\n\t\t\t\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase (this.state.steps.length - 1):\n\t\t\t\tthis.importFeatures();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t\t}\n\t}\n\thandlePrev(){\n\t\tconst { stepIndex } = this.state;\n\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({ name: newValue });\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({ description: newValue });\n\t}\n\tchangeSplitField(event, index) {\n\t\tthis.setState({ splitField: this.state.fieldnames[index] });\n\t}\n\tgetShapefileFieldnames() {\n\t\t//get the field names from the unzipped shapefile on the server\n\t\tthis.props.getShapefileFieldnames(this.shapefile).then((response) => {\n\t\t\t//set the fieldnames in local state\n\t\t\tthis.setState({ fieldnames: response.fieldnames });\n\t\t});\n\t}\n\tresetFieldnames() {\n\t\tthis.setState({ fieldnames: [] });\n\t}\n\timportFeatures() {\n\t\tthis.props.importFeatures(this.props.filename, this.state.name, this.state.description, this.shapefile, this.state.splitField).then((response) => {\n\t\t\tthis.closeDialog();\n\t\t});\n\t}\n\tcloseDialog() {\n\t\t//delete the zip file and shapefile\n\t\tthis.props.deleteShapefile(this.props.filename, this.shapefile);\n\t\tthis.setState(INITIAL_STATE);\n\t\tthis.shapefile = \"\";\n\t\tthis.props.setFilename(\"\");\n\t\tthis.props.onCancel();\n\t}\n\trender() {\n\t\tlet _disabled = false;\n\t\tconst { stepIndex } = this.state;\n\t\tconst contentStyle = { margin: '0 16px' };\n\t\t//get the disabled state for the next/finish button\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\t_disabled = (this.props.filename === \"\");\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t_disabled = (this.props.loading);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// code\n\t\t}\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0 || this.props.loading} onClick={this.handlePrev.bind(this)} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} disabled={_disabled || this.props.loading} primary={true}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet children =\n\t\t\t<div key=\"k12\" style={{height:'120px',maxHeight:'120px'}}>\n\t\t\t\t{stepIndex === 0 ? \n\t\t\t\t\t<div className={'importFeaturesContent'}>\n\t\t\t\t\t\t<ShapefileUpload SEND_CREDENTIALS={this.props.SEND_CREDENTIALS} requestEndpoint={this.props.requestEndpoint} checkForErrors={this.props.checkForErrors} mandatory={true} filename={this.props.filename} setFilename={this.props.setFilename} label=\"Shapefile\" style={{'paddingTop':'10px'}}/> \n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{stepIndex === 1 ? \n\t\t\t\t\t<div className={'importFeaturesContent'}>\n\t\t\t\t\t    <RadioButtonGroup name=\"createFeatureType\" defaultSelected=\"single\">\n\t\t\t\t\t      <RadioButton value=\"single\" label=\"Create single feature\" style={{padding:'10px'}} onClick={this.resetFieldnames.bind(this)}/>\n\t\t\t\t\t      <RadioButton value=\"multiple\" label=\"Split into multiple features\" style={{padding:'10px'}} onClick={this.getShapefileFieldnames.bind(this)}/>\n\t\t\t\t\t    </RadioButtonGroup>\n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{(stepIndex === 2) ? \n\t\t\t\t(this.state.fieldnames.length === 0) ?\n\t\t\t\t\t<div className={'importFeaturesContent'}> \n\t\t\t\t\t\t<TextField value={this.state.name} onChange={this.changeName.bind(this)} style={{display:'block'}} floatingLabelText=\"Enter a name\" floatingLabelFixed={true}/>\n\t\t\t\t\t\t<TextField value={this.state.description} onChange={this.changeDescription.bind(this)} style={{display:'block'}} multiLine={true} rows={2} floatingLabelText=\"Enter a description\" floatingLabelFixed={true}/>\n\t\t\t\t\t</div> :\n\t\t\t\t\t<div className={'importFeaturesContent'}> \n\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeSplitField.bind(this)} value={this.state.splitField} floatingLabelText=\"Split features by\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t{this.state.fieldnames.map(item => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t</div> \n\t\t\t\t: null}\n\t\t\t</div>;\n\t\treturn (\n\t\t\t<MarxanDialog  \n\t\t\t\t{...this.props} \n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tcontentWidth={420}\n\t\t\t\ttitle= {\"Import features\"}\n\t\t\t\tchildren={children} \n\t\t\t\tactions={actions}  \n\t\t\t\tonRequestClose={this.closeDialog.bind(this)} \n\t\t\t\thelpLink={\"docs_user.html#importing-existing-features\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportFeaturesDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\n\nclass CostsDialog extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t{...this.props} \n\t\t\tcontentWidth={370}\n\t\t\toffsetY={80}\n\t\t\ttitle=\"Costs\" \n\t\t\tchildren={            \n\t\t\t<React.Fragment key=\"k8\">\n\t\t\t\t<div>\n\t\t\t\t\tNot yet implemented \n\t\t\t\t</div>\n\t\t\t</React.Fragment>}/>\n\t\t);\n\t}\n}\n\nexport default CostsDialog;\n","import React from 'react';\nimport 'react-table/react-table.css';\nimport ReactTable from \"react-table\";\nimport FontAwesome from 'react-fontawesome';\nimport MarxanDialog from './MarxanDialog';\n\nclass RunSettingsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { data: [], updateEnabled: false };\n\t\tthis.renderEditable = this.renderEditable.bind(this); \n\t}\n\tcomponentDidUpdate(prevProps) {\n\t\tif (prevProps.runParams !== this.props.runParams) {\n\t\t\tthis.setState({ data: this.props.runParams });\n\t\t}\n\t}\n\topenParametersDialog(){\n\t\tthis.props.openParametersDialog();\n\t}\n\t//posts the results back to the server\n\tupdateRunParams() {\n\t\t//ui feedback \n\t\tthis.setState({ updateEnabled: false });\n\t\tif (this.props.userRole !== \"ReadOnly\")this.props.updateRunParams(this.state.data);\n\t\tthis.props.onOk();\n\t}\n\tsetUpdateEnabled() {\n\t\tthis.setState({ updateEnabled: true });\n\t}\n\trenderEditable(cellInfo) {\n\t\treturn (\n\t\t\t(this.props.userRole === \"ReadOnly\") ? \n\t\t\t<React.Fragment>\n\t\t\t\t<div>{this.state.data[cellInfo.index][\"value\"]}</div>\n\t\t\t</React.Fragment> \n\t\t\t: \n\t\t\t<React.Fragment>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{ backgroundColor: \"#fafafa\", float: ([...this.state.data][cellInfo.index]['key'] === 'BLM') ? 'left' : 'none'}}\n\t\t\t\t\tcontentEditable\n\t\t\t\t\tsuppressContentEditableWarning\n\t\t\t\t\tonFocus={this.setUpdateEnabled.bind(this)}\n\t\t\t\t\tonBlur={e => {\n\t\t\t\t\t  const data = [...this.state.data];\n\t\t\t\t\t  data[cellInfo.index][cellInfo.column.id] = e.target.innerHTML;\n\t\t\t\t\t  this.setState({ data }); \n\t\t\t\t\t}}\n\t\t\t\t  >{this.state.data[cellInfo.index][\"value\"]}</div>\n\t\t\t\t  <FontAwesome name='external-link-alt' onClick={this.props.showClumpingDialog} title='Click to open the BLM comparison dialog' style={{display: ([...this.state.data][cellInfo.index]['key'] === 'BLM') ? 'block' : 'none', 'cursor':'pointer', 'paddingTop':'6px', 'paddingLeft':'35px'}}/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={400}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={260}\n\t\t\t\tonOk={this.updateRunParams.bind(this)}\n\t\t\t\thelpLink={\"docs_user.html#run-settings\"}\n\t\t\t\ttitle=\"Run settings\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div style={{height:'275px'}} key=\"k16\">\n\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\tclassName={'summary_infoTable'}\n\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\tpageSize={this.state.data.length}\n\t\t\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t   Header: 'Parameter', \n\t\t\t\t\t\t\t   accessor: 'key',\n\t\t\t\t\t\t\t   width:165,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t   Header: 'Value',\n\t\t\t\t\t\t\t   accessor: 'value',\n\t\t\t\t\t\t\t   width:193,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t   Cell: this.renderEditable\n\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t  />\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t   />\n\t\t);\n\t}\n}\n\nexport default RunSettingsDialog;\n","import React from 'react';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass RendererSelector extends React.Component {\n\thandleChange(event, index, value) {\n\t\tthis.props.changeValue(value);\n\t}\n\trender() {\n\t\tlet primaryText;\n\t\tlet c = this.props.values.map((item) => {\n\t\t\tif (typeof(item) === 'string') {\n\t\t\t\tprimaryText = item.substr(0, 1).toUpperCase().concat(item.replace(\"_\", \" \").substr(1)); // sentence case and replace _ with space\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprimaryText = item.toString();\n\t\t\t}\n\t\t\treturn <MenuItem value={item} key={item} primaryText={primaryText}/>;\n\t\t});\n\t\treturn (\n\t\t\t<SelectField selectionRenderer={this.props.selectionRenderer} menuItemStyle={{fontSize:'12px'}} labelStyle={{fontSize:'12px'}} listStyle={{fontSize:'12px'}} style={{width:'150px', margin: '0px 10px'}} autoWidth={true} floatingLabelText={this.props.floatingLabelText} floatingLabelFixed={true} children={c} onChange={this.handleChange.bind(this)} value={this.props.property}/>\n\t\t);\n\t}\n}\n\nexport default RendererSelector;\n","import React from 'react';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport { getMaxNumberOfClasses } from './genericFunctions.js';\n\nclass ColorSelector extends React.Component {\n\thandleChange(event, index, value) {\n\t\tthis.props.changeValue(value);\n\t}\n\tselectionRenderer() {\n\t\tlet c = this.getSwatch(this.props.property, true);\n\t\treturn c;\n\t}\n\tgetSwatch(colorCode, disableHighlight) {\n\t\t//get the number of classes the user currently has selected\n\t\tlet numClasses = this.props.brew.getNumClasses();\n\t\t//get the maximum number of colors in this scheme\n\t\tlet colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n\t\t//get the color scheme\n\t\tlet colorScheme = this.props.brew.colorSchemes[colorCode];\n\t\t//get the number of colors to show as an array\n\t\tlet numClassesArray = (numClasses <= colorSchemeLength) ? Array.apply(null, { length: numClasses }).map(Number.call, Number) : Array.apply(null, { length: colorSchemeLength }).map(Number.call, Number);\n\t\tlet classesToShow = numClassesArray.length;\n\t\tlet divWidth = 112 / classesToShow;\n\t\tlet colorDivs = numClassesArray.map((item) => {\n\t\t\treturn <div key={item} style={{backgroundColor: colorScheme[classesToShow][item], width: divWidth, height:'16px', display: 'inline-block'}}/>;\n\t\t});\n\t\tlet borderColor = ((colorCode === this.props.property) && !disableHighlight) ? 'rgb(255, 64, 129)' : 'lightgray';\n\t\tcolorDivs = <div style={{display:'inline-flex', marginTop:'12px', border:'1px solid ' + borderColor}}>{colorDivs}</div>;\n\t\treturn colorDivs;\n\t}\n\trender() {\n\t\tlet primaryText;\n\t\tlet c = this.props.values.map(function(colorCode) {\n\t\t\t(colorCode !== 'opacity') ? primaryText = '': primaryText = \"Opacity\";\n\t\t\tlet _c = (colorCode !== 'opacity') ? this.getSwatch(colorCode, false) : null;\n\t\t\treturn <MenuItem value={colorCode} primaryText={primaryText} key={colorCode} children={_c} title={colorCode}/>;\n\t\t}, this);\n\t\treturn (\n\t\t\t<SelectField selectionRenderer={this.selectionRenderer.bind(this)} menuItemStyle={{fontSize:'12px'}} labelStyle={{fontSize:'12px'}} listStyle={{fontSize:'12px'}} style={{width:'150px', margin: '0px 10px'}} autoWidth={true} floatingLabelText={this.props.floatingLabelText} floatingLabelFixed={true} children={c} onChange={this.handleChange.bind(this)} value={this.props.property}/>\n\t\t);\n\t}\n}\n\nexport default ColorSelector;\n","import React from 'react';\nimport 'react-table/react-table.css';\nimport MarxanDialog from './MarxanDialog';\nimport RendererSelector from './RendererSelector.js'; \nimport ColorSelector from './ColorSelector.js';\nimport { BarChart, ReferenceLine, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Label } from 'recharts';\n\nlet RENDERERS = [\"equal_interval\", \"jenks\", \"std_deviation\", \"quantile\"];\nlet COLORCODES = [\"opacity\", \"OrRd\", \"PuBu\", \"BuPu\", \"Oranges\", \"BuGn\", \"YlOrBr\", \"YlGn\", \"Reds\", \"RdPu\", \"Greens\", \"YlGnBu\", \"Purples\", \"GnBu\", \"Greys\", \"YlOrRd\", \"PuRd\", \"Blues\", \"PuBuGn\", \"Spectral\", \"RdYlGn\", \"RdBu\", \"PiYG\", \"PRGn\", \"RdYlBu\", \"BrBG\", \"RdGy\", \"PuOr\", \"Set2\", \"Accent\", \"Set1\", \"Set3\", \"Dark2\", \"Paired\", \"Pastel2\", \"Pastel1\"];\nlet NUMCLASSES = [\"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\nlet TOPCLASSES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n\nclass ClassificationDialog extends React.Component {\n\n\trender() { \n\t\tlet breaks = this.props.dataBreaks.map((item, index) => {\n\t\t\t//dont include the bottom line as we will use the y axis\n\t\t\treturn <ReferenceLine x={item} key={index} stroke=\"#00BCD4\" />;\n\t\t});\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={390}\n\t\t\t\trightX={0}\n\t\t\t\toffsetY={80}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"docs_user.html#changing-how-the-results-are-displayed\"}\n\t\t\t\ttitle=\"Classification\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div style={{height:'275px'}} key=\"k6\">\n\t\t\t\t\t\t<BarChart width={250} height={150} data={this.props.summaryStats}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"1\" stroke=\"#f4f4f4\"/>\n\t\t\t\t\t\t\t<XAxis dataKey=\"number\" tick={{fontSize:11}} type={'number'}>\n\t\t\t\t\t\t\t\t<Label value=\"Sum solutions\" offset={0} position=\"insideBottom\" style={{fontSize:'11px',color:'#222222'}} />\n\t\t\t\t\t\t\t</XAxis> \n\t\t\t\t\t\t\t<YAxis tick={{fontSize:11}}>\n\t\t\t\t\t\t\t\t<Label value='Count' angle={-90} position='insideLeft' style={{fontSize:'11px',color:'#222222'}}/>\n\t\t\t\t\t\t\t</YAxis>\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Bar dataKey=\"count\" fill=\"#E14081\" />\n\t\t\t\t\t\t\t{breaks}\n\t\t\t\t\t\t</BarChart>\n\t\t\t\t\t\t<div className={'renderers'}>\n\t\t\t\t\t\t\t<ColorSelector values={COLORCODES} changeValue={this.props.changeColorCode} property={this.props.renderer.COLORCODE} floatingLabelText={\"Colour scheme\"} brew={this.props.brew} />\n\t\t\t\t\t\t\t<RendererSelector values={RENDERERS} changeValue={this.props.changeRenderer} property={this.props.renderer.CLASSIFICATION} floatingLabelText={\"Classification\"}/>\n\t\t\t\t\t\t\t<RendererSelector values={NUMCLASSES} changeValue={this.props.changeNumClasses} property={this.props.renderer.NUMCLASSES} floatingLabelText={\"Number of classes\"} />\n\t\t\t\t\t\t\t<RendererSelector values={TOPCLASSES} changeValue={this.props.changeShowTopClasses} property={this.props.renderer.TOPCLASSES} floatingLabelText={\"Show top n classes\"}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ClassificationDialog;\n","import React from 'react';\nimport mapboxgl from 'mapbox-gl';\n\nclass MapContainer extends React.Component {\n    constructor(props){\n        super(props);\n        this.resultsRendered = false;\n    }\n    componentDidMount() {\n        this.map = new mapboxgl.Map({\n            container: this.mapContainer,\n            style: 'mapbox://styles/mapbox/light-v9',\n            center: this.props.mapCentre,\n            zoom: this.props.mapZoom,\n            attributionControl: false,\n            interactive: false\n        });\n        this.map.on(\"load\", (evt) => {\n            evt.target.addLayer({\n                'id': this.props.RESULTS_LAYER_NAME,\n                'type': \"fill\",\n                'source': {\n                    'type': \"vector\",\n                    'url': \"mapbox://\" + this.props.tileset.id\n                },\n                'source-layer': this.props.tileset.name,\n                \"layout\": {\n                    \"visibility\": \"none\"\n                },\n            });\n            this.map.setCenter(this.props.mapCentre);\n            this.setMapZoom();\n            if (!this.resultsRendered) this.renderResults();\n            // this.map.setCenter(this.props.tileset.center);\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.paintProperty !== prevProps.paintProperty) {\n            if (this.props.paintProperty.length === 0) {\n                //resetting the layout property\n                this.map.setLayoutProperty(this.props.RESULTS_LAYER_NAME, 'visibility', 'none');\n            }\n            else {\n                //the solution has been loaded and the paint properties have been calculated - if the results layer (i.e. the planning unit grid layer) is loaded then render the results\n                if (this.map.getLayer(this.props.RESULTS_LAYER_NAME)) {\n                    this.renderResults();\n                }\n                else {\n                    this.resultsRendered = false;\n                }\n            }\n        }\n        if (this.props.mapCentre !== prevProps.mapCentre) {\n            this.map.setCenter(this.props.mapCentre);\n        }\n        if (this.props.mapZoom !== prevProps.mapZoom) {\n            this.setMapZoom();\n        }\n    }\n\n    //the results layer has been loaded and so the results can be rendered\n    renderResults() {\n        if (this.props.paintProperty.length === 0) return;\n        this.map.setLayoutProperty(this.props.RESULTS_LAYER_NAME, 'visibility', 'visible');\n        this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-color\", this.props.paintProperty.fillColor);\n        this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-outline-color\", this.props.paintProperty.oulineColor);\n        this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-opacity\", 0.5);\n        this.resultsRendered = true;\n    }\n    componentWillUnmount() {\n        //remove the map and free all resources\n        if (this.map) this.map.remove();\n    }\n\n    setMapZoom() {\n        // this.map.setZoom(this.props.mapZoom - 3);\n        this.map.setZoom(this.props.mapZoom);\n    }\n\n    render() {\n        return (\n            <div style={{display:'inline-block', margin:'5px'}} onClick={(this.props.disabled) ? null : this.props.selectBlm.bind(this, this.props.blmValue)}>\n                <div style={{'fontSize':'14px'}}>BLM: {this.props.blmValue}</div>\n                <div ref={el => this.mapContainer = el} style={{width:'200px',height:'200px', cursor: (this.props.disabled) ? 'default' : 'pointer'}} className={'hoverMapContainer'} title={(this.props.disabled) ? '': 'Click to select this BLM value'}/>\n            </div>\n        );\n    }\n}\n\nexport default MapContainer;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport MapContainer from './MapContainer.js';\nimport TextField from 'material-ui/TextField';\n\nlet CLUMP_COUNT = 5;\n\nclass ClumpingDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { blmValues: [0.001, 0.01, 0.1, 1, 10], blmMin: 0.001, blmMax: 10, blmChanged: false };\n\t}\n\n\t//when the dialog is shown, create the project group and run the projects with different blm values\n\tcomponentDidUpdate(prevProps, prevState){\n\t\tif ((this.props.open !== prevProps.open)&&(this.props.open)) {\n\t\t\t//create the project group and run\n\t\t\tthis.props.createProjectGroupAndRun(this.state.blmValues);\n\t\t}\n\t}\n\tchangeBlmMin(event, newValue) {\n\t\t//get the new blmValues\n\t\tthis.getBlmValues(newValue, this.state.blmMax);\n\t\t//set the new blmMin\n\t\tthis.setState({ blmMin: newValue });\n\t}\n\n\tchangeBlmMax(event, newValue) {\n\t\t//get the new blmValues\n\t\tthis.getBlmValues(this.state.blmMin, newValue);\n\t\t//set the new blmMax\n\t\tthis.setState({ blmMax: newValue });\n\t}\n\n\t//calculates the 5 blm values based on the min and max\n\tgetBlmValues(min, max) {\n\t\tvar blmValues = [];\n\t\t//get the increment\n\t\tvar increment = (max - min) / (CLUMP_COUNT - 1);\n\t\t//make the array of blmValues\n\t\tfor (var i = 0; i < CLUMP_COUNT; i++) {\n\t\t\tblmValues[i] = (i * increment) + Number(min);\n\t\t}\n\t\tthis.setState({ blmValues: blmValues });\n\t\t//flag that the blmValues have changed\n\t\tthis.setState({blmChanged: true});\n\t}\n\n\tparseBlmValue(value) {\n\t\tif (!isNaN(parseFloat(value)) && isFinite(value)) {\n\t\t\treturn value;\n\t\t}\n\t\telse {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tselectBlm(blmValue) {\n\t\t//set the blmValue for the project\n\t\tthis.props.setBlmValue(blmValue);\n\t\t//close the dialog\n\t\tthis.props.onOk();\n\t}\n\n\trerunProjects(){\n\t\tthis.props.rerunProjects(this.state.blmChanged, this.state.blmValues);\n\t\tthis.setState({blmChanged: false});\n\t}\n\tonRequestClose() {\n\t\tif (!this.props.clumpingRunning) this.props.onOk();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tshowSpinner={this.props.clumpingRunning}\n\t\t\t\tcontentWidth={680}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={80}\n\t\t\t\tonOk={this.onRequestClose.bind(this)}\n\t\t\t\tokDisabled={this.props.clumpingRunning}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\thelpLink={\"docs_user.html#clumping-window\"}\n\t\t\t\tactions={[\n\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\tlabel=\"Refresh\" \n\t\t\t\t\t\tprimary={true} \n\t\t\t\t\t\tonClick={this.rerunProjects.bind(this)} \n\t\t\t\t\t\tdisabled={this.props.clumpingRunning || (!this.state.blmChanged)}\n\t\t\t\t\t/>]\n\t\t\t\t}\n\t\t\t\ttitle = \"Clumping\"\n\t\t\t\tchildren = {\n\t\t\t\t\t<div key=\"k7\">\n\t\t\t\t\t\t<MapContainer key={0} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={this.props.RESULTS_LAYER_NAME} paintProperty={this.props.map0_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[0])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={1} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={this.props.RESULTS_LAYER_NAME} paintProperty={this.props.map1_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[1])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={2} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={this.props.RESULTS_LAYER_NAME} paintProperty={this.props.map2_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[2])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={3} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={this.props.RESULTS_LAYER_NAME} paintProperty={this.props.map3_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[3])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={4} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={this.props.RESULTS_LAYER_NAME} paintProperty={this.props.map4_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[4])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<div style={{display:'inline-block', margin:'5px','verticalAlign':'top','paddingTop':'60px','textAlign':'center','fontSize':'14px',width:'200px', height:'224px'}}>\n\t\t\t\t\t\t\t\t<div>Move and zoom the main map to preview the clumping</div>\n\t\t\t\t\t\t\t\t<div style={{'paddingTop':'30px'}}>\n\t\t\t\t\t\t\t\t\t<span>BLM from </span>\n\t\t\t\t\t\t\t\t\t<TextField value={this.state.blmMin} onChange={this.changeBlmMin.bind(this)} style={{width:'36px'}} inputStyle={{'textAlign':'center', 'fontSize':'14px'}} id=\"blmmin\" disabled={this.props.clumpingRunning}/>\n\t\t\t\t\t\t\t\t\t<span> to </span>\n\t\t\t\t\t\t\t\t\t<TextField value={this.state.blmMax} onChange={this.changeBlmMax.bind(this)} style={{width:'36px'}} inputStyle={{'textAlign':'center', 'fontSize':'14px'}} id=\"blmmax\" disabled={this.props.clumpingRunning}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ClumpingDialog;","import React from 'react';\nimport FontAwesome from 'react-fontawesome';\n\nclass UploadFolder extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {folderUploadText : '', active: false};\n\t}\n\tonClick(e){\n\t\tthis.setState({active: true});\n\t}\n\tonChange(e) {\n\t\t\n\t\tthis.props.filesListed(e.target.files); \n\t\tthis.setState({folderUploadText: e.target.files.length + \" files\"});\n\t\tthis.setState({active: false});\n\t}\n\t_addDirectory(node) {\n\t\tif (node) { \n\t\t\tnode.directory = true;\n\t\t\tnode.webkitdirectory = true;\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className='uploadLabel' style={{color: (this.state.active) ? 'rgb(0, 188, 212)' : 'rgba(0, 0, 0, 0.3)'}}>{this.props.label}</div>\n\t\t\t\t<div className='uploadFileField'>\n\t\t\t\t\t<div className='uploadFileFieldIcon'>\n\t\t\t\t\t\t<div style={{display: 'inline-flex'}}>\n\t\t\t\t\t\t\t<label htmlFor={'folderSelector'}>\n\t\t\t\t\t\t\t\t<FontAwesome name='folder' title='Click to select a Marxan project folder' style={{'cursor':'pointer', display: 'inline-flex'}}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input id='folderSelector' ref={node => this._addDirectory(node)} type='file' onChange={this.onChange.bind(this)} onClick={this.onClick.bind(this)} style={{'display':'none', 'width':'10px'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='uploadFileFieldLabel'>{this.state.folderUploadText}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default UploadFolder;\n","import * as React from 'react';\nimport UploadFolder from './UploadFolder';\nimport ShapefileUpload from './ShapefileUpload';\nimport TextField from 'material-ui/TextField';\n\nclass UploadMarxanFiles extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {planning_grid_name:'', zipFilename: ''}; \n\t}\n\tsetzipFilename(filename) { \n\t\tthis.setState({ zipFilename: filename });\n\t\tthis.props.setZipFilename(filename); \n\t} \n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{marginTop:'14px'}}>\n\t\t\t\t\t<UploadFolder label=\"Marxan project folder\" filesListed={this.props.filesListed}/> \n\t\t\t\t\t<ShapefileUpload requestEndpoint={this.props.requestEndpoint} SEND_CREDENTIALS={this.props.SEND_CREDENTIALS} mandatory={true} filename={this.state.zipFilename} setFilename={this.setzipFilename.bind(this)} checkForErrors={this.props.checkForErrors} label=\"Planning grid zipped shapefile\" style={{'paddingTop':'20px'}}/> \n\t\t\t\t\t<TextField value={this.props.planning_grid_name} onChange={this.props.setPlanningGridName} floatingLabelText=\"Planning grid name\" floatingLabelFixed={true} style={{marginTop:'20px'}}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default UploadMarxanFiles;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport Metadata from './Metadata';\nimport UploadMarxanFiles from './UploadMarxanFiles'; \n\n//some of the code in this component should be moved up to app.js like the POSTs but I have limited time\n\nclass ImportProjectDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { steps: ['Files and planning grid','Info' ], loading: false, stepIndex: 0, name: '', description: '', zipFilename: '', files:[], planning_grid_name:'' };\n\t}\n\thandleNext = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex === 1) {\n\t\t\tthis.setState({loading: true});\n\t\t\t//create the new project \n\t\t\tthis.props.importProject(this.state.name, this.state.description, this.state.zipFilename, this.state.files, this.state.planning_grid_name).then((response) => {\n\t\t\t\t//close the import wizard\n\t\t\t\tthis.onOk();\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.setState({loading: false});\n\t\t\t\tthis.props.log(error + \"Import stopped\");\n\t\t\t\tthis.props.setSnackBar(error);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t};\n\thandlePrev = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex > 0) {\n\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t}\n\t};\n\tfilesListed(files){\n\t\t//TODO filter the files to exclude all of the output files - these are unnecessary and will be creating on the first run anyway\n\t\tthis.setState({files: files});\n\t}\n\tsetZipFilename(filename){\n\t\tthis.setState({zipFilename: filename});\n\t}\n\tsetPlanningGridName(event, planning_grid_name){\n\t\tthis.setState({planning_grid_name: planning_grid_name});\n\t}\n\tsetName(value) {\n\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\tthis.setState({ description: value });\n\t}\n\tonOk(){\n\t\t//return the wizard back to zero\n\t\tthis.setState({loading: false, stepIndex: 0 });\n\t\tthis.props.onOk();\n\t}\n\trender() {\n\t\tconst { stepIndex } = this.state; \n\t\tconst contentStyle = { margin: '0 16px' };\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: 700, margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0} onClick={this.handlePrev} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} primary={true} disabled={this.state.loading} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet c = <React.Fragment key=\"k4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{stepIndex === 0 ? <UploadMarxanFiles \n\t\t\t\t\t\t\tfilesListed={this.filesListed.bind(this)}\n\t\t\t\t\t\t\tsetZipFilename={this.setZipFilename.bind(this)}\n\t\t\t\t\t\t\trequestEndpoint={this.props.requestEndpoint}  \n\t\t\t\t\t\t\tSEND_CREDENTIALS={this.props.SEND_CREDENTIALS}\n\t\t\t\t\t\t\tcheckForErrors={this.props.checkForErrors} \n\t\t\t\t\t\t\tsetPlanningGridName={this.setPlanningGridName.bind(this)}\n\t\t\t\t\t\t\tplanning_grid_name={this.state.planning_grid_name}\n\t\t\t\t\t\t/> : null}\n\t\t\t\t\t\t{stepIndex === 1 ? <Metadata name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)} paddingBottom={'50px'}/> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import existing Marxan project'}\n\t\t\t\tcontentWidth={390}\n\t\t\t\tchildren={c} \n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tactions={actions} \n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\thelpLink={\"docs_user.html#importing-existing-marxan-projects\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportProjectDialog;\n","import React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faRedoAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport Sync from 'material-ui/svg-icons/notification/sync';\nimport MarxanTable from \"./MarxanTable\";\n\nclass RunLogDialog extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {searchText: \"\",selectedRun: undefined, runningJobs: false};\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t//if this browser isnt running a marxan job (i.e. this.props.preprocessing === false) but there are jobs which are running then we still want to be able to stop those jobs - here we set a flag to allow the STOP button to be enabled even if this.props.preprocessing === false\n\t\tif (this.props.runLogs !== prevProps.runLogs){\n\t\t\t//see of any of the run logs are running\n\t\t\tlet runningLogs = this.props.runLogs.filter((item) => {return item.status === 'Running'});\n\t\t\tthis.setState({runningJobs: (runningLogs.length > 0)});\n\t\t}\n\t}\n\tcloseDialog() {\n\t\tthis.setState({ selectedRun: undefined });\n\t\tthis.props.onOk(); \n\t}\n\tstopRun(evt){\n\t\t//stop the run\n\t\tthis.props.stopMarxan(\"m\" + this.state.selectedRun.pid);\n\t\t//refresh the run log - this may be done when the process stops on the server and it sends the results back in the websocket - but in case the client is not connected to the server explicitly request it\n\t\tthis.refreshRunLogs();\n\t}\n\tclearRunLogs(evt){\n\t\tthis.props.clearRunLogs();\n\t}\n\trefreshRunLogs(evt){\n\t\tthis.props.getRunLogs();\n\t\t//unselect the selected run\n\t\tthis.setState({ selectedRun: undefined });\n\t}\n\tchangeSelectedRun(event, run) {\n\t\tthis.setState({ selectedRun: run });\n\t}\n\trenderUser(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.user}>{row.original.user}</div>;        \n\t}\n\trenderProject(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.project}>{row.original.project}</div>;        \n\t}\n\trenderStatus(row){\n\t\tvar icon;\n    switch (row.original.status) {\n      case 'Completed': \n      \ticon = <FontAwesomeIcon icon={faCheckCircle} style={{color:'green'}} title={'Run completed'}/>;\n        break;\n      case 'Stopped': \n      \ticon = <FontAwesomeIcon icon={faTimesCircle} style={{color:'darkgray'}} title={'Run stopped by the user'}/>;\n        break;\n      case 'Killed': \n      \ticon = <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red'}} title={'Run stopped by the operating system'}/>;\n        break;\n      case 'Running': \n      \ticon = <Sync className='spin' style={{height: '16px', width: '16px', verticalAlign: 'sub', color: 'rgb(255, 64, 129)'}}/>;\n        break;\n      default:\n        break;\n    }\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.status}>{icon}{\"  \" + row.original.status}</div>;        \n\t}\n\trenderEnded(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{(row.original.endtime) ? row.original.endtime : ''}</div>;        \n\t}\n\trenderRuntime(row){\n\t\tif ((row.original.runtime)){\n\t\t\tlet s = Number(row.original.runtime.substr(0,row.original.runtime.length-1));\n\t\t\tlet mins = Math.floor(s/60);\n\t\t\tlet secs = (s%60) + \"s\";\n\t\t\tlet runTimeFormatted = (mins !== 0) ? mins + \"m \" + secs : secs;\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{runTimeFormatted}</div>;        \n\t\t}else{\n\t\t\treturn '';\n\t\t}\n\t}\n    searchTextChanged(value){\n      this.setState({searchText: value});\n    }\n\trender() {\n\t\tlet tableColumns = [];\n\t\ttableColumns = [\n\t\t\t{ Header: 'pid', accessor: 'pid', width: 60, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'User', accessor: 'user', width: 60, headerStyle: { 'textAlign': 'left' }, Cell: this.renderUser.bind(this)}, \n\t\t\t{ Header: 'Project', accessor: 'project', width: 150, headerStyle: { 'textAlign': 'left' }, Cell: this.renderProject.bind(this)}, \n\t\t\t{ Header: 'Started', accessor: 'starttime', width: 112, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'Ended', accessor: 'endtime', width: 112, headerStyle: { 'textAlign': 'left' }, Cell: this.renderEnded.bind(this)}, \n\t\t\t{ Header: 'Runtime', accessor: 'runtime', width: 60, headerStyle: { 'textAlign': 'right' }, className: 'table_column_right_align', Cell: this.renderRuntime.bind(this)}, \n\t\t\t{ Header: 'Runs', accessor: 'runs', width: 60, headerStyle: { 'textAlign': 'right' }, className: 'table_column_right_align'}, \n\t\t\t{ Header: 'Status', accessor: 'status', width: 80, headerStyle: { 'textAlign': 'left' }, Cell: this.renderStatus.bind(this) }\n\t\t];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tonCancel={this.closeDialog.bind(this)}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"docs_user.html#the-run-log\"}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\ttitle=\"Runs\"  \n\t\t\t\tshowSearchBox={true} \n\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\tdata={this.props.runLogs}\n\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t                            searchColumns={['user','project','status','runs','runtime']}\n\t\t                            searchText={this.state.searchText}\n\t\t                            selectedRun={this.state.selectedRun}\n\t\t                            changeSelectedRun={this.changeSelectedRun.bind(this)}\n\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.pid === (state.selectedRun && state.selectedRun.pid)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tstate.changeSelectedRun(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"stopMarxan\")}\n\t\t\t\t\t\t\t\ttitle=\"Stop run\" \n\t\t\t\t\t\t\t\tdisabled={(this.state.selectedRun === undefined) ? true : (!this.props.preprocessing && !this.state.runningJobs) ? true : (this.state.selectedRun.status !== 'Running')}\n\t\t\t\t\t\t\t\tonClick={this.stopRun.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Stop\"}\n\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"getRunLogs\")}\n\t\t\t\t\t\t\t\ttitle=\"Refresh run logs\" \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faRedoAlt}/>} \n\t\t\t\t\t\t\t\tonClick={this.refreshRunLogs.bind(this)} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"clearRunLogs\")}\n\t\t\t\t\t\t\t\ttitle=\"Clear run logs\" \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\tonClick={this.clearRunLogs.bind(this)} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default RunLogDialog;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ReactTable from \"react-table\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\n\nclass ServerDetailsDialog extends React.Component {\n\trenderWithIcon(cellInfo) {\n\t  let newServerSoftware = ((cellInfo.row.key === 'Marxan Server version')&&(this.props.marxanServer.server_version !== window.SERVER_VERSION));\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{ float: 'left' }}>{cellInfo.row.value}</div>\n\t\t\t\t<FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display: ((cellInfo.row.key === 'Disk space')&&(cellInfo.row.value.substr(0,1) === '0')) ? 'inline' : 'none', right: '5px', position: 'absolute', marginTop: '5px'}} title={'Disk space running low'}/>\n\t\t\t\t<FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display: (newServerSoftware) ? 'inline' : 'none', right: '5px', position: 'absolute', marginTop: '5px'}} title={'A new version of Marxan Server is available (' + window.SERVER_VERSION + ')'}/>\n\t\t\t  <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red',display: ((cellInfo.row.key === 'WDPA version')&&(this.props.newWDPAVersion)) ? 'inline' : 'none', position: 'absolute', right:'5px', marginTop: '5px'}} title={'A new version of the WDPA is available - click for details'} onClick={this.props.showUpdateWDPADialog}/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n  render() {\n    let data = this.props.marxanServer ? \n    [\n      {key:'Name',value:this.props.marxanServer.name},\n      {key:'Description',value:this.props.marxanServer.description},\n      {key:'Host',value:this.props.marxanServer.host},\n      {key:'Port',value:this.props.marxanServer.port},\n      {key:'System',value:this.props.marxanServer.system},\n      {key:'Processors',value:this.props.marxanServer.processor_count},\n      {key:'Disk space',value:this.props.marxanServer.disk_space},\n      {key:'RAM',value:this.props.marxanServer.ram},\n      {key:'Marxan Server version',value:this.props.marxanServer.server_version},\n      {key:'WDPA version',value:this.props.marxanServer.wdpa_version},\n      {key:'Planning grid units limit',value:this.props.marxanServer.planning_grid_units_limit},\n    ] \n    : [];\n    // add the following if necessary\n    // <div className=\"tabTitle\">Release: {this.props.marxanServer&&this.props.marxanServer.release}</div>\n    // <div className=\"tabTitle\">Version: {this.props.marxanServer&&this.props.marxanServer.version}</div>\n    // <div className=\"tabTitle\">Processor: {this.props.marxanServer&&this.props.marxanServer.processor}</div>\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={445}\n        offsetY={80}\n        title=\"Server Details\"\n        helpLink={\"docs_user.html#server-details\"}\n        children={[\n\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\tclassName={'server_details_infoTable'}\n\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\tpageSize={data.length}\n\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\tkey='k27'\n\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t   Header: 'Parameter', \n\t\t\t\t\t\t\t   accessor: 'key',\n\t\t\t\t\t\t\t   width:144,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t   Header: 'Value',\n\t\t\t\t\t\t\t   accessor: 'value',\n\t\t\t\t\t\t\t   width:252,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t   Cell: this.renderWithIcon.bind(this)\n\t\t\t\t\t\t\t}]}\n\t\t\t\t\t  />\n        ]}\n      />\n    );\n  }\n}\n\nexport default ServerDetailsDialog;\n","//a dialog box that is shown when the user first logs in to alert them to anything, e.g. A new version of the WDPA is available for admin users\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\n\nclass AlertDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"Alert\"\n        children={\n          <div key=\"k23\">\n              <div className={'description'}>A new version of the WDPA is available. <br/>Click on Help | Server Details for more information.</div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AlertDialog;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport TextField from 'material-ui/TextField';\n\nclass ChangePasswordDialog extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {currentPassword: '', newPassword1: '', newPassword2: '', };\n  }\n  setCurrentPassword(event, newValue){\n    this.setState({currentPassword: newValue});\n  }\n  setNewPassword1(event, newValue){\n    this.setState({newPassword1: newValue});\n  }\n  setNewPassword2(event, newValue){\n    this.setState({newPassword2: newValue});\n  }\n  onOk(evt){\n    if (this.state.newPassword2 !== this.state.newPassword1) {\n      this.passwordsDontMatch();\n      return;\n    }\n    this.props.checkPassword(this.props.user, this.state.currentPassword).then((response) => {\n      this.props.updateUser({PASSWORD: this.state.newPassword1}).then((response) => {\n        this.props.setSnackBar(\"Password updated\");\n        this.props.onOk();\n      }).catch((error) =>{\n        this.props.setSnackBar(\"Password not updated\");\n      });\n    }).catch((response) => {\n      this.props.setSnackBar(\"Invalid password\");\n    });\n  }\n  passwordsDontMatch(){\n    this.props.setSnackBar(\"Passwords don't match\");\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.onOk.bind(this)}\n        showCancelButton={true}\n        onCancel={this.props.onOk}\n        helpLink={\"docs_user.html#change-password\"}\n        contentWidth={358}\n        offsetY={80}\n        title=\"Change Password\"\n        children={\n          <div key=\"k5\">\n\t\t\t\t\t\t<TextField floatingLabelText=\"Current password\" floatingLabelFixed={true} onChange = {this.setCurrentPassword.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} type=\"password\"/>\n\t\t\t\t\t\t<TextField floatingLabelText=\"New password\" floatingLabelFixed={true} onChange = {this.setNewPassword1.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} type=\"password\"/>\n\t\t\t\t\t\t<TextField floatingLabelText=\"Repeat password\" floatingLabelFixed={true} onChange = {this.setNewPassword2.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} type=\"password\"/>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default ChangePasswordDialog;\n","import React from 'react';\nimport ReactTable from \"react-table\";\n\nclass Popup extends React.Component {\n\t\trender() {\n\t\t\t\tlet data = this.props.active_pu ? Object.keys(this.props.active_pu).map(key => ({ key, value: this.props.active_pu[key] })) : [];\n\t\t\t\tlet left = this.props.xy.x + 25 + 'px';\n\t\t\t\tlet top = this.props.xy.y - 25 + 'px';\n\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{'display': data.length>0 ? 'block' : 'none','left': left,'top':top}} id=\"popup\">\n\t\t\t\t\t\t\t\t<div className={'popupHeader'}>Planning unit properties</div>\n\t\t\t\t\t\t\t\t<ReactTable\n\t\t\t\t\t\t\t\t\tshowPagination={false}\n\t\t\t\t\t\t\t\t\tpageSize={data.length}\n\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t\t Header: 'Property',\n\t\t\t\t\t\t\t\t\t\t accessor: 'key' \n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t Header: 'Value',\n\t\t\t\t\t\t\t\t\t\t accessor: 'value' \n\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t}\n}\n\nexport default Popup;\n","import React from 'react';\nimport ReactTable from \"react-table\";\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nclass PopupFeatureList extends React.Component {\n\trender() {\n\t\tlet left = this.props.xy.x + 25 + 'px';\n\t\tlet top = this.props.xy.y - 25 + 'px';\n\t\treturn (\n\t\t\t<div style={{'display': this.props.features && this.props.features.length > 0 ? 'block' : 'none', 'left': left,'top':top}} id=\"popup\">\n\t\t\t\t<div className={'popupHeader'}>Features</div>\n\t\t\t\t<Sync className='spin' style={{display: this.props.loading ? \"inline-block\" : \"none\", color: 'rgb(255, 64, 129)', position: 'absolute', top: '5px', right: '7px'}} key={\"spinner\"}/>\n\t\t\t\t<ReactTable\n\t\t\t\t\tshowPagination={false}\n\t\t\t\t\tpageSize={(this.props.loading) ? 0 : this.props.features && this.props.features.length}\n\t\t\t\t\tminRows={0}\n\t\t\t\t\tnoDataText=''\n\t\t\t\t\tdata={this.props.features}\n\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t Header: 'Feature',\n\t\t\t\t\t\t accessor: 'alias',\n\t\t\t\t\t\t width: 220,\n\t\t\t\t\t\t headerStyle: { display:'none'}\n\t\t\t\t\t}]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PopupFeatureList;\n","import React from 'react';\n\nclass PopupPAList extends React.Component {\n\trender() {\n\t\tlet left = this.props.xy.x + 25 + 'px';\n\t\tlet top = this.props.xy.y - 25 + 'px';\n\t\tlet children = this.props.features.map((item)=>{\n\t\t\treturn <div className={'wdpaPopup'} key={item.wdpaid}><a href={\"https://www.protectedplanet.net/\" + item.wdpaid} target='_blank'  rel=\"noopener noreferrer\" title='Click to open the protected area in the Protected Planet website'>{item.name}<span style={{paddingRight:'5px'}}/>({item.iucn_cat})</a></div>;\n\t\t});\n\t\treturn (\n\t\t\t<div style={{'display': this.props.features && this.props.features.length > 0 ? 'block' : 'none', 'left': left,'top':top}} id=\"popup\" onMouseOver={this.props.onMouseEnter} onMouseLeave={this.props.onMouseLeave}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PopupPAList;","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport { isValidTargetValue } from './genericFunctions.js';\n\nclass TargetDialog extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = { target_value: 17, validTarget: true };\n    }\n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.validateTarget(); \n\t} \n    validateTarget() {\n        let _validTarget = isValidTargetValue(this.state.target_value);\n        this.setState({ validTarget: _validTarget });\n        if (_validTarget) {\n            this.props.updateTargetValueForFeatures(this.state.target_value);\n            this.props.onOk();\n        }\n    }\n    onOk() {\n        this.validateTarget();\n    }\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={240}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={260}\n                title=\"Target for all features\"\n                onOk={this.onOk.bind(this)}\n                children={\n                <React.Fragment>\n                    <TextField \n                        id={\"commonTarget\"}\n                        floatingLabelFixed={true} \n                        onChange = {(event,newValue) => this.setState({\"target_value\":newValue})} \n                        defaultValue ={this.state.target_value} \n                        onKeyPress={this.handleKeyPress.bind(this)}\n                        floatingLabelShrinkStyle={{fontSize:'16px'}} \n                        floatingLabelFocusStyle={{fontSize:'16px'}} \n                        style={{fontSize:'13px',width:'70px'}} \n                        errorText={this.state.validTarget ?  '' : \"Invalid target\"} \n                    /> \n                </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default TargetDialog;\n","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport ToolbarButton from './ToolbarButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faClipboard } from '@fortawesome/free-solid-svg-icons';\n\nclass ShareableLinkDialog extends React.PureComponent {\n    copyToClipboard(evt){\n        window.navigator.clipboard.writeText(this.props.shareableLinkUrl).then(function() {\n            \n        }, function() {\n            alert(\"Browser not supported\");\n        });\n\t}\n\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={600}\n                height={100}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={360}\n                title=\"Shareable link\"\n                children={\n                <React.Fragment>\n                    <TextField \n                        multiLine={true} rows={2} \n                        floatingLabelFixed={true} \n                        onChange = {(event,newValue) => this.setState({\"target_value\":newValue})} \n                        defaultValue ={this.props.shareableLinkUrl} \n                        floatingLabelShrinkStyle={{fontSize:'16px'}} \n                        floatingLabelFocusStyle={{fontSize:'16px'}} \n                        style={{fontSize:'13px',width:'550px'}} \n                    /> \n\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faClipboard}/>} \n\t\t\t\t\t\ttitle=\"Copy\"\n\t\t\t\t\t\tonClick={this.copyToClipboard.bind(this)} \n\t\t\t\t\t/>\n            </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default ShareableLinkDialog;\n","import * as React from 'react';\nimport { PieChart, Pie, Cell } from 'recharts';\nimport Divider from 'material-ui/Divider';\nimport { getArea } from './genericFunctions.js';\n// import star from './images/star.png';\n\nclass MetChart extends React.Component {\n    render() {\n        let rounded = Number(this.props.current_protected_percent.toFixed(1));\n        let country_area = getArea(this.props.country_area, this.props.units);\n        let protected_area = getArea(this.props.current_protected_area, this.props.units);\n        let total_area = getArea(this.props.total_area, this.props.units);\n        let countryText = (this.props.showCountryArea) ? \"\\nCountry area: \" + country_area + ' ' + this.props.units : \"\";\n        let titleText = \"Area: \" +  total_area + ' ' + this.props.units + countryText + \"\\nProtected area: \" + protected_area + ' ' + this.props.units;\n        const data = (this.props.showCountryArea) ? [{ name: 'Protected area', value: protected_area},{ name: 'Country area', value: (country_area - protected_area) }, { name: 'Total area', value: (total_area - country_area) }] : [{ name: 'Protected area', value: protected_area}, { name: 'Total area', value: (total_area - protected_area) }];\n        const colors = ['#D9D9D9', this.props.color];\n        return (\n            <React.Fragment>\n                <div className=\"MetChart\">\n                    <div className=\"MetChartTitle\">{this.props.title}</div>\n                    <Divider/>\n                    <div className='MetChartInner'>\n                        <PieChart width={120} height={120}>\n                          <Pie data={data} cx=\"50%\" cy=\"50%\" isAnimationActive={false} startAngle={90} endAngle={450} innerRadius={30} outerRadius={50}>\n                            {\n                              data.map((entry, index) => {\n                              let _color;\n                                switch (index) {\n                                    case 0:\n                                        _color = this.props.color;\n                                        break;\n                                    case 1:\n                                        _color = (this.props.showCountryArea) ? \"#bbbbbb\" : \"#dddddd\";\n                                        break;\n                                    default:\n                                        _color = \"#dddddd\";\n                                        break;\n                                }\n                                return <Cell key={index} fill={_color} strokeWidth={2}/>;\n                              })\n                            }\n                          </Pie>\n                        </PieChart>\n                        <div style={{color:colors[1]}} className=\"MetChartPercentLabel\">\n                            {rounded}%\n                        </div>\n                        <div className=\"MetChartDiv\" style={this.props.clickable!==false ? {cursor: 'pointer'} : null} title={titleText} />\n                        {/*<span style={{display: (this.props.endemic && (this.props.created_by === \"global admin\")) ? 'inline' : 'none'}}><img src={star} alt=\"Endemic\" title={\"Endemic\"} className={\"endemicImg\"}/></span>*/}\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default MetChart;","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MetChart from \"./MetChart\";\nimport { Cell, ReferenceLine, ComposedChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Label } from 'recharts';\nimport Toggle from 'material-ui/Toggle';\nimport { getArea } from './genericFunctions.js';\n\nconst CustomTooltip = ({ active, payload, label }) => {\n\tif (active && payload) {\n\t\treturn (\n\t\t\t<div className=\"custom-tooltip\">\n        <div className=\"tooltip\">Area: {getArea(payload[0].payload.total_area,'km2')} km2</div>\n        <div className=\"tooltip\">Protected area: {getArea(payload[0].payload.current_protected_area,'km2')} km2</div>\n      </div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\nclass GapAnalysisDialog extends React.PureComponent {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = { showChart: false };\n\t\t}\n\t\tgetRepresentationScore(features) {\n\t\t\tlet sum = 0,\n\t\t\t\tamount_under_protection_property, total_amount_property;\n\t\t\t//get the names of the properties that we will use to calculate the representation scores\n\t\t\tif (features.length) {\n\t\t\t\tif (features[0].hasOwnProperty('current_protected_area')) {\n\t\t\t\t\tamount_under_protection_property = 'current_protected_area';\n\t\t\t\t\ttotal_amount_property = 'country_area';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tamount_under_protection_property = 'protected_area';\n\t\t\t\t\ttotal_amount_property = 'pu_area';\n\t\t\t\t}\n\t\t\t}\n\t\t\t//iterate through the features and get the value for each feature\n\t\t\tfeatures.forEach(item => {\n\t\t\t\tlet val = ((item[amount_under_protection_property] / item[total_amount_property]) / (item.target_value / 100));\n\t\t\t\tif (!isNaN(val)) sum = sum + ((val > 1) ? 1 : val);\n\t\t\t});\n\t\t\t//get the mean value\n\t\t\tlet mean = (sum / features.length);\n\t\t\treturn Number(mean * 100).toFixed(1);\n\t\t}\n\t\ttoggleView(event, isInputChecked) {\n\t\t\tthis.setState({ showChart: isInputChecked });\n\t\t}\n\t\trenderTooltip(a, b, c) {\n\t\t\treturn 'wibble';\n\t\t}\n\t\trender() {\n\t\t\t\t//join the data from the gap analysis onto the feature data\n\t\t\t\tlet _data = this.props.gapAnalysis.map(item => {\n\t\t\t\t\t//get the matching projectFeatures item\n\t\t\t\t\tvar stats = this.props.projectFeatures.filter(item2 => {\n\t\t\t\t\t\treturn (item2.feature_class_name === item._feature_class_name);\n\t\t\t\t\t})[0];\n\t\t\t\t\tif (stats) {\n\t\t\t\t\t\treturn Object.assign(item, { target_value: stats.target_value, color: stats.color });\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//sort the data by current protection\n\t\t\t\t_data.sort((a, b) => {\n\t\t\t\t\tlet returnval = (a.current_protected_percent < b.current_protected_percent) ? -1 : 1;\n\t\t\t\t\treturn returnval;\n\t\t\t\t});\n\t\t\t\t//get the data only for those features which occur in the country\n\t\t\t\t_data = _data.filter(item => item.country_area >0);\n\t\t\t\t//create the charts and get the count of features that have met the target\n\t\t\t\tlet targetsMetCount = 0;\n\t\t\t\tlet charts = _data.map((item, index) => {\n\t\t\t\t\tif (item.country_area > 0) {\n\t\t\t\t\t\tif (item.current_protected_percent >= item.target_value) targetsMetCount = targetsMetCount + 1;\n\t\t\t\t\t\treturn <MetChart {...item} title={item._alias} color={item.color} key={item._feature_class_name} units={'km2'} showCountryArea={false} dataKey={item._feature_class_name}/>;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//get the representation score\n\t\t\t\tlet score = (this.props.gapAnalysis.length) ? this.getRepresentationScore(_data) : 'Calcuating..';\n\t\t\t\treturn (\n\t\t\t\t\t\t<MarxanDialog\n\t\t\t\tshowSpinner={this.props.preprocessing}\n\t\t\t\tautoDetectWindowHeight={false}\n                {...this.props}\n                contentWidth={680}\n                title=\"Gap Analysis\"\n                helpLink={\"docs_user.html#gap-analysis-window\"}\n                onRequestClose={this.props.closeGapAnalysisDialog}\n                showCancelButton={false}\n                children={\n                <React.Fragment key={'gapAnalysiskey'}>\n\t\t\t\t\t<div className=\"analysisReport\">\n\t\t\t\t\t\t<div>Gap Analysis for {this.props.metadata.pu_country} using the {this.props.marxanServer.wdpa_version} version of the WDPA</div>\n\t\t\t\t\t\t<div className={'analysisReportInner'} style={{display: (this.props.gapAnalysis.length) ? 'block' : ' none'}}>\n\t\t\t\t\t\t\t<div className={'analysisChartsDiv'} style={{display: (this.state.showChart) ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t{charts}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ComposedChart  width={550} height={350} data={_data} margin={{bottom:80, top:20}} style={{display: (this.state.showChart) ? 'block' : 'none', margin:'auto'}}>\n\t\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"1\" stroke=\"#f4f4f4\"/>\n\t\t\t\t\t\t\t\t<XAxis dataKey=\"_alias\" angle={-45} textAnchor=\"end\" interval={0}>\n\t\t\t\t\t\t\t\t</XAxis> \n\t\t\t\t\t\t\t\t<YAxis tick={{fontSize:11}} >\n\t\t\t\t\t\t\t\t\t<Label value='Percent Protected' angle={-90} position='insideBottomLeft' style={{fontSize:'11px',color:'#222222'}} offset={30}/>\n\t\t\t\t\t\t\t\t</YAxis>\n    \t\t\t\t\t\t\t<Tooltip content={<CustomTooltip />} />\n\t\t\t\t\t\t\t\t<Bar dataKey=\"current_protected_percent\" fill=\"#8884d8\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t_data.map((entry, index) => {\n\t\t\t\t\t\t\t\t\t\treturn <Cell fill={entry.color} key={entry.color}/>;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Bar>\n    \t\t\t\t\t\t\t<ReferenceLine y={(_data.length) ? _data[0].target_value : 0} stroke=\"#7C7C7C\" strokeDasharray=\"3 3\" style={{display: (_data.length) ? 'inline' : 'none'}}/>\n\t\t\t\t\t\t\t</ComposedChart >\n\t\t\t\t\t\t\t<div className={'gapAnalysisStatsPanel'}>\n\t\t\t\t\t\t\t\t<table><tbody><tr>\n\t\t\t\t\t\t\t\t\t<td>Features meeting targets:</td><td className={'score'}>{targetsMetCount}/{charts.length}</td></tr><tr>\n\t\t\t\t\t\t\t\t\t<td>Representation score:</td><td className={'score'}>{score}</td></tr>\n\t\t\t\t\t\t\t\t</tbody></table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Toggle label=\"Show as a chart\" onToggle={this.toggleView.bind(this)} style={{width:'unset',float:'right',paddingTop:'2px'}} labelStyle={{fontSize:'14px',width:'100px',color:'rgba(0, 0, 0, 0.6)'}} toggled={this.state.showChart}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default GapAnalysisDialog;\n","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\n\nclass UpdateWDPADialog extends React.PureComponent {\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={380}\n\t\t\t\toffsetY={260}\n                title=\"Update WDPA\"\n                children={\n                <React.Fragment>\n                    <div style={{display: (this.props.newWDPAVersion ? 'block' : 'none')}}>\n                      <br/>\n                      <div dangerouslySetInnerHTML={{ __html: window.WDPA.latest_version + \" is available. Details <a href='\" + window.WDPA.metadataUrl + \"' target='_blank'>here</a>. Click below to update. \"}}/>\n    \t\t\t\t\t<br/>\n    \t\t\t\t\t<ToolbarButton title=\"Update WDPA\" onClick={this.props.updateWDPA} label=\"Update\" disabled={this.props.loading}/>\n                    </div>\n                </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default UpdateWDPADialog;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport TextField from 'material-ui/TextField';\n\nclass ImportGBIFDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { searchText: '','gbifID': 0, 'suggestions':[], clicked:false, selectedItem: {} };\n    }\n    onOk() {\n        this.props.importGBIFData(this.state.selectedItem).then(response => {\n            this.props.onCancel();\n        }).catch(error => {\n            this.props.onCancel();\n        });\n    }\n    changeSearchText(event, value){\n        if (this.state.searchText.length>2 && !this.state.clicked){\n            //get the gbif suggested names\n            this.props.gbifSpeciesSuggest(this.state.searchText).then((response)=>{\n                this.setState({suggestions: response});\n            });\n        }\n        this.setState({searchText: value, clicked: false});\n    }\n    onClick(item, evt){\n        this.setState({clicked: true}, ()=>{\n            this.setState({searchText: item.scientificName, selectedItem: item});            \n        });\n    }\n    render() {\n        let suggestions = this.state.suggestions.map((item)=>{\n            return <div key={item.key} className={'suggestion'} onClick={this.onClick.bind(this, item)}>{item.scientificName}</div>;\n        });\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={540}\n                offsetY={80}\n                title=\"Import GBIF data\"\n                helpLink={\"docs_user.html#import-gbif-data\"}\n                onOk={this.onOk.bind(this)}\n                showCancelButton={false}\n        \t\tautoDetectWindowHeight={false}\n                children={\n                  <React.Fragment key={'importGBIFKey'}>\n                    <div className={'importGBIFContent'}>\n                        <TextField value={this.state.searchText} onChange={this.changeSearchText.bind(this)} floatingLabelText=\"Search\" floatingLabelFixed={true} style={{width:'350px'}}/>\n                        <div className={'suggestions'} style={{display:(this.state.searchText.length>2 && !this.state.clicked) ? 'block' : 'none'}}>{suggestions}</div>\n                    </div>\n                    </React.Fragment>\n                }\n            />\n        );\n    }\n}\n\nexport default ImportGBIFDialog;\n","/*global fetch*/\n/*global URLSearchParams*/\nimport React from 'react';\nimport packageJson from '../package.json';\nimport fetchJsonp from 'fetch-jsonp';\n/*eslint-disable no-unused-vars*/ \nimport axios, { post } from 'axios';\n/*eslint-enable no-unused-vars*/\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\n//mapbox imports\nimport MapboxDraw from '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.js';\nimport mapboxgl from 'mapbox-gl';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport HomeButton from './HomeButton.js'; \nimport jsonp from 'jsonp-promise';\nimport classyBrew from 'classybrew';\nimport { getMaxNumberOfClasses,zoomToBounds } from './genericFunctions.js';\n//material-ui components and icons\nimport Popover from 'material-ui/Popover'; \nimport Menu from 'material-ui/Menu';\nimport Snackbar from 'material-ui/Snackbar';\nimport Properties from 'material-ui/svg-icons/alert/error-outline';\nimport RemoveFromProject from 'material-ui/svg-icons/content/remove';\nimport AddToMap from 'material-ui/svg-icons/action/visibility';\nimport RemoveFromMap from 'material-ui/svg-icons/action/visibility-off';\nimport ZoomIn from 'material-ui/svg-icons/action/zoom-in';\nimport Preprocess from 'material-ui/svg-icons/action/autorenew';\n//project components\nimport AppBar from './AppBar';\nimport LoadingDialog from './LoadingDialog';\nimport LoginDialog from './LoginDialog';\nimport RegisterDialog from './RegisterDialog.js';\nimport ResendPasswordDialog from './ResendPasswordDialog.js';\nimport Welcome from './Welcome.js';\nimport ToolsMenu from './ToolsMenu';\nimport UserMenu from './UserMenu';\nimport HelpMenu from './HelpMenu';\nimport UserSettingsDialog from './UserSettingsDialog';\nimport ProfileDialog from './ProfileDialog';\nimport UsersDialog from './UsersDialog';\nimport AboutDialog from './AboutDialog';\nimport MenuItemWithButton from './MenuItemWithButton';\nimport InfoPanel from './InfoPanel';\nimport ResultsPanel from './ResultsPanel';\nimport FeatureInfoDialog from './FeatureInfoDialog';\nimport ProjectsDialog from './ProjectsDialog';\nimport NewProjectDialog from './NewProjectDialog';\nimport NewProjectWizardDialog from './NewProjectWizardDialog';\nimport FailedToDeleteDialog from './FailedToDeleteDialog';\nimport PlanningGridDialog from './PlanningGridDialog';\nimport PlanningGridsDialog from './PlanningGridsDialog';\nimport NewPlanningGridDialog from './NewPlanningGridDialog';\nimport ImportPlanningGridDialog from './ImportPlanningGridDialog';\nimport FeatureDialog from './FeatureDialog';\nimport FeaturesDialog from './FeaturesDialog';\nimport NewFeatureDialog from './NewFeatureDialog';\nimport ImportFeaturesDialog from './ImportFeaturesDialog';\nimport CostsDialog from './CostsDialog';\nimport RunSettingsDialog from './RunSettingsDialog';\nimport ClassificationDialog from './ClassificationDialog';\nimport ClumpingDialog from './ClumpingDialog';\nimport ImportProjectDialog from './ImportProjectDialog';\nimport RunLogDialog from './RunLogDialog';\nimport ServerDetailsDialog from './ServerDetailsDialog';\nimport AlertDialog from './AlertDialog';\nimport ChangePasswordDialog from './ChangePasswordDialog';\nimport Popup from './Popup';\nimport PopupFeatureList from './PopupFeatureList';\nimport PopupPAList from './PopupPAList';\nimport TargetDialog from './TargetDialog';\nimport ShareableLinkDialog from './ShareableLinkDialog';\nimport GapAnalysisDialog from './GapAnalysisDialog';\nimport UpdateWDPADialog from './UpdateWDPADialog';\nimport ImportGBIFDialog from './ImportGBIFDialog';\n\n//CONSTANTS\nlet MARXAN_CLIENT_VERSION = packageJson.version; //TODO UPDATE PACKAGE.JSON WHEN THERE IS A NEW VERSION\nlet DOCS_ROOT = \"https://andrewcottam.github.io/marxan-web/documentation/\";\nlet ERRORS_PAGE = DOCS_ROOT + \"docs_errors.html\";\nlet SEND_CREDENTIALS = true; //if true all post requests will send credentials\nlet TORNADO_PATH = \"/marxan-server/\";\nlet TIMEOUT = 0; //disable timeout setting\nlet MAPBOX_USER = \"blishten\";\nlet MAPBOX_STYLE_PREFIX = 'mapbox://styles/';\nlet PLANNING_UNIT_STATUSES = [1, 2, 3];\nlet IUCN_CATEGORIES = ['None','IUCN I-II','IUCN I-IV','IUCN I-V','IUCN I-VI','All'];\n//constants for creating new planning grids\nlet DOMAINS = [\"Marine\", \"Terrestrial\"];\nlet SHAPES = ['Hexagon', 'Square'];\nlet AREAKM2S = [10, 20, 30, 40, 50];\n//layer source names\nlet PLANNING_UNIT_SOURCE_NAME = \"planning_units_source\";\nlet WDPA_SOURCE_NAME = \"wdpa_source\";\n//layer names\nlet PU_LAYER_NAME = \"planning_units_layer\"; //layer showing the planning units\nlet STATUS_LAYER_NAME = \"planning_units_status_layer\"; //layer showing the status of planning units \nlet COSTS_LAYER_NAME = \"costs_layer\"; //layer showing the cost of planning units\nlet PUVSPR_LAYER_NAME = \"planning_units_puvspr_layer\"; //layer showing the planning units for a particular feature\nlet RESULTS_LAYER_NAME = \"results_layer\"; //layer for either the sum of solutions or the individual solutions\nlet WDPA_LAYER_NAME = \"wdpa\"; //layer showing the protected areas from the WDPA\n//layer default styles\nlet PU_LAYER_OPACITY = 0.4;\nlet STATUS_LAYER_LINE_WIDTH = 1.5;\nlet PUVSPR_LAYER_LINE_WIDTH = 1.5;\nlet RESULTS_LAYER_FILL_OPACITY_ACTIVE = 0.9;\nlet RESULTS_LAYER_FILL_OPACITY_INACTIVE = 0;\nlet WDPA_FILL_LAYER_OPACITY = 0.2;\nlet timers = []; //array of timers for seeing when asynchronous calls have finished\n\n//an array of feature property information that is used in the Feature Information dialog box - showForOld sets whether that property is shown for old versions of marxan\nlet FEATURE_PROPERTIES = [{ name: 'id', key: 'ID',hint: 'The unique identifier for the feature', showForOld: false, showForNew: false},\n  { name: 'alias', key: 'Alias',hint: 'A human readable name for the feature', showForOld: false, showForNew: false},\n  { name: 'feature_class_name', key: 'Feature class name',hint: 'The internal name for the feature in the PostGIS database', showForOld: false, showForNew: false},\n  { name: 'description', key: 'Description',hint: 'Full description of the feature', showForOld: false, showForNew: false},\n  { name: 'creation_date', key: 'Creation date',hint: 'The date the feature was created or imported', showForOld: false, showForNew: false},\n  { name: 'tilesetid', key: 'Mapbox ID',hint: 'The unique identifier of the feature tileset in Mapbox', showForOld: false, showForNew: false},\n  { name: 'area', key: 'Total area',hint: 'The total area for the feature in Km2 (i.e. globally)', showForOld: false, showForNew: false},\n  { name: 'target_value', key: 'Target percent',hint: 'The target percentage for the feature within the planning grid', showForOld: true, showForNew: true},\n  { name: 'spf', key: 'Species Penalty Factor',hint: 'The species penalty factor is used to weight the likelihood of getting a species in the results', showForOld: true, showForNew: true},\n  { name: 'preprocessed', key: 'Preprocessed',hint: 'Whether or not the feature has been intersected with the planning units', showForOld: false, showForNew: true},\n  { name: 'pu_count', key: 'Planning unit count',hint: 'The number of planning units that intersect the feature (calculated during pre-processing)', showForOld: true, showForNew: true},\n  { name: 'pu_area', key: 'Planning grid area',hint: 'The area of the feature within the planning grid in Km2 (calculated during pre-processing)', showForOld: true, showForNew: true},\n  { name: 'target_area', key: 'Target area',hint: 'The total area that needs to be protected to achieve the target percentage in Km2 (calculated during a Marxan Run)', showForOld: true, showForNew: true},\n  { name: 'protected_area', key: 'Area protected',hint: 'The total area protected in the current solution in Km2 (calculated during a Marxan Run)', showForOld: true, showForNew: true}];\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      marxanServers: [],\n      marxanServer: {},\n      usersDialogOpen: false,\n      alertDialogOpen: false,\n      featureMenuOpen: false,\n      profileDialogOpen: false,\n      aboutDialogOpen: false,\n      helpDialogOpen: false,\n      importProjectDialogOpen: false,\n      UserSettingsDialogOpen: false,\n      CostsDialogOpen: false,\n      welcomeDialogOpen: false,\n      registerDialogOpen: false,\n      clumpingDialogOpen: false,\n      settingsDialogOpen: false,\n      projectsDialogOpen: false,\n      openInfoDialogOpen: false,\n      importGBIFDialogOpen: false,\n      newProjectDialogOpen: false, \n      newProjectWizardDialogOpen: false, \n      shareableLinkDialogOpen: false,\n      classificationDialogOpen: false,\n      resendPasswordDialogOpen: false,\n      NewPlanningGridDialogOpen: false, \n      importPlanningGridDialogOpen: false,\n      FailedToDeleteDialogOpen: false,\n      changePasswordDialogOpen: false,\n      importFeaturesDialogOpen: false,\n      serverDetailsDialogOpen: false,\n      planningGridsDialogOpen: false,\n      planningGridDialogOpen: false,\n      updateWDPADialogOpen: false,\n      NewFeatureDialogOpen: false,\n      featuresDialogOpen: false,\n      gapAnalysisDialogOpen: false,\n      featureDialogOpen: false,\n      runLogDialogOpen: false,\n      infoPanelOpen: false,\n      resultsPanelOpen: false,\n      targetDialogOpen: false,\n      notificationsOpen: false,\n      guestUserEnabled: true,\n      toolsMenuOpen: false,\n      userMenuOpen: false,\n      helpMenuOpen: false,\n      users: [],\n      user: '', \n      password: '',\n      project: '',\n      failedToDeleteProjects: [],\n      owner: '', // the owner of the project - may be different to the user, e.g. if logged on as guest (user) and accessing someone elses project (owner)\n      loggedIn: false,\n      shareableLink: false,\n      userData: {'SHOWWELCOMESCREEN': true},\n      unauthorisedMethods: [],\n      metadata: {},\n      renderer: {},\n      runParams: [],\n      files: {},\n      popup_point: { x: 0, y: 0 },\n      snackbarOpen: false,\n      snackbarMessage: '',\n      tilesets: [],\n      puFeatures: [],\n      paFeatures: [],\n      loading: false, //true when GET/POST requests are ongoing\n      preprocessing: false, //true when a WebSocket is ongoing\n      uploading: false, //true when an upload to Mapbox is ongoing\n      pa_layer_visible: false,\n      currentFeature:{},\n      featureDatasetFilename: '',\n      dataBreaks: [],\n      allFeatures: [], //all of the interest features in the metadata_interest_features table\n      projectFeatures: [], //the features for the currently loaded project\n      selectedFeatureIds :[],\n      addingRemovingFeatures: false,\n      results_layer_opacity: RESULTS_LAYER_FILL_OPACITY_ACTIVE, //initial value\n      wdpa_layer_opacity: WDPA_FILL_LAYER_OPACITY, //initial value\n      costs: [],\n      selectedCosts: [],\n      countries: [],\n      planning_units: [],\n      planning_unit_grids: [],\n      planning_grid_metadata:{},\n      feature_metadata:{},\n      activeTab: \"project\",\n      activeResultsTab: \"legend\",\n      logMessages: [],\n      map0_paintProperty: [],\n      map1_paintProperty: [],\n      map2_paintProperty: [],\n      map3_paintProperty: [],\n      map4_paintProperty: [],\n      clumpingRunning: false,\n      deleteWhat:'',\n      pid: 0,\n      basemaps: [],\n      basemap: 'North Star',\n      mapCentre: {lng: 0, lat: 0},\n      mapZoom: 12,\n      runLogs:[],\n      puEditing: false,\n      wdpaAttribution: \"\",\n      shareableLinkUrl: \"\",\n      notifications:[],\n      gapAnalysis: []\n    };\n  }\n\n  componentDidMount() {\n    //if this is a shareable link, then dont show the login form\n    if (window.location.search !== \"\") this.setState({loggedIn:true, shareableLink:true});\n    //parse the application level variables from the Marxan Registry\n    this.getGlobalVariables().then(()=>{\n      //automatically login if this is a shareable link\n      if (window.location.search !== \"\") {\n        //get the query parameters\n        var searchParams = new URLSearchParams(window.location.search);\n        //open the shareable link\n        this.openShareableLink(searchParams);\n      }\n    });\n    //instantiate the classybrew to get the color ramps for the renderers\n    this.setState({ brew: new classyBrew() });\n  }\n  \n  //gets various global variables from the marxan registry\n  getGlobalVariables(){\n    return new Promise((resolve, reject) => {\n      mapboxgl.accessToken = window.MBAT_PUBLIC; //this is my public access token \n      //initialise the basemaps\n      this.setState({basemaps: window.MAPBOX_BASEMAPS});\n      //get all the information for the marxan servers by polling them\n      this.initialiseServers(window.MARXAN_SERVERS).then((response)=>{\n        resolve(response);\n      });\n    });\n  }\n  \n  //automatically logs in and loads a project as a guest user\n  openShareableLink(searchParams){\n    try {\n      if (searchParams.has(\"server\") && searchParams.has(\"user\") && searchParams.has(\"project\")){\n        //get the server data from the servers object\n        let serverData = this.state.marxanServers.find(server => server.name === searchParams.get(\"server\"));\n        if (serverData === undefined) throw new Error(\"Invalid server parameter on shareable link\");\n        if (serverData && serverData.offline) throw new Error(\"Server is offline\");\n        if (serverData && !serverData.guestUserEnabled) throw new Error(\"Guest user is not enabled on the server\");\n        //set the server\n        this.selectServer(serverData);\n        //switch to the guest user\n        this.switchToGuestUser().then(()=>{\n          //login\n          this.validateUser().then((response)=>{\n            this.loadProject(searchParams.get(\"project\"),searchParams.get(\"user\")).then(()=>{\n              //hide the loading dialog\n              this.setState({shareableLink:false});\n            });\n          });\n        });\n      }else{\n        throw new Error(\"Invalid query parameters on shareable link\");\n      }\n    }\n\t\tcatch (err) {\n\t\t  alert(err);\n\t\t}\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// REQUEST HELPERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //makes a GET request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _get(params, timeout = TIMEOUT){\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({loading: true});\n      jsonp(this.state.marxanServer.endpoint + params, { timeout: timeout }).promise.then((response) => {\n        this.setState({loading: false});\n        if (!this.checkForErrors(response)) {\n          resolve(response);\n        }\n        else {\n          reject(response.error);\n        }\n      }, (err) => {\n        this.setState({loading: false});\n        this.setSnackBar(\"Request timeout - See <a href='\" + ERRORS_PAGE + \"#request-timeout' target='blank'>here</a>\");\n        reject(err);\n      });\n    });\n  }\n \n  //makes a POST request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _post(method, formData, timeout = TIMEOUT, withCredentials = SEND_CREDENTIALS){\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({loading: true});\n      post(this.state.marxanServer.endpoint + method, formData, {withCredentials: withCredentials}).then((response) => {\n        if (!this.checkForErrors(response.data)) {\n          this.setState({loading: false});\n          resolve(response.data);\n        }\n        else {\n          this.setState({loading: false});\n          reject(response.data.error);\n        }\n      }, (err) => {//TODO - If the request is unauthorised it returns the Status Code of 200 with the error: \"HTTP 403: Forbidden (The 'ReadOnly' role does not have permission to access the 'updateSpecFile' service)\" - but for some reason this error handling is used\n        this.setState({loading: false});\n        this.setSnackBar(err.message);\n        reject(err);\n      });\n    });\n  }\n \n  //web socket requests\n  _ws(params, msgCallback){\n    return new Promise((resolve, reject) => {\n      let ws = new WebSocket(this.state.marxanServer.websocketEndpoint + params);\n      //get the message and pass it to the msgCallback function\n      ws.onmessage = (evt) => {\n        let message = JSON.parse(evt.data);\n        //check for errors\n        if (!this.checkForErrors(message)){\n          if (message.status === \"Finished\"){\n            //pass the message back to the callback\n            msgCallback(message);\n            //reset state\n            this.setState({preprocessing: false});\n            //if the web socket has finished then resolve the promise\n            resolve(message);\n          }else{\n            msgCallback(message);\n          }\n        }else{\n          //pass the message back to the callback\n          msgCallback(message);\n          //reset state\n          this.setState({preprocessing: false});\n          reject(message.error);\n        }\n      };\n      ws.onopen = (evt) => {\n        //do something if necessary\n      };\n      ws.onerror = (evt) => {\n        //reset state\n        this.setState({preprocessing: false});\n        reject(evt);\n      };\n      ws.onclose = (evt) => {\n        //reset state\n        this.setState({preprocessing: false});\n        if (!evt.wasClean) {\n          msgCallback({status:'SocketClosedUnexpectedly'});\n        }else{\n          reject(evt);\n        }\n      };\n    });\n  }\n  \n  //checks the reponse for errors\n  checkForErrors(response, showSnackbar = true) {\n    let networkError = this.responseIsTimeoutOrEmpty(response, showSnackbar);\n    //check the response from the server for an error property - if it has one then show it in the snackbar\n    let serverError = this.isServerError(response, showSnackbar);\n    let isError = (networkError || serverError);\n    if (isError) {\n      //write the full trace to the console if available\n      let error = (response.hasOwnProperty('trace')) ? response.trace : (response.hasOwnProperty('error')) ? response.error : \"No error message returned\";\n      console.error(\"Error message from server: \" + error);\n    }\n    return isError;\n  }\n\n  //checks the response from a REST call for timeout errors or empty responses\n  responseIsTimeoutOrEmpty(response, showSnackbar = true) {\n    if (!response) {\n      let msg = \"No response received from server\";\n      if (showSnackbar) this.setSnackBar(msg);\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  //checks to see if the rest server raised an error and if it did then show in the snackbar\n  isServerError(response, showSnackbar) {\n    //errors may come from the marxan server or from the rest server which have slightly different json responses\n    if ((response && response.error) || (response && response.hasOwnProperty('metadata') && response.metadata.hasOwnProperty('error') && response.metadata.error != null)) {\n      var err = (response.error) ? (response.error) : response.metadata.error;\n      if (showSnackbar) this.setSnackBar(err);\n      return true;\n    }\n    else {\n      //some server responses are warnings and will not stop the function from running as normal\n      if (response.warning) {\n        if (showSnackbar) this.setSnackBar( response.warning);\n      }\n      return false;\n    }\n  }\n\n  //called when any websocket message is received - this logic removes duplicate messages\n  wsMessageCallback(message){\n    //dont log any clumping projects\n    if (this.state.clumpingRunning) return;\n    //log the message if necessary\n    this.logMessage(message);\n    switch (message.status) {\n      case 'Started': //from asynchronous queries, marxan runs and feature imports\n      case \"Updating WDPA\":\n        //set the processing state when the websocket starts\n        this.setState({preprocessing: true});\n        break;\n      case 'pid': //from marxan runs and preprocessing - the pid is an identifer and the pid, e.g. m1234 is a marxan run process with a pid of 1234\n        this.setState({pid: message.pid});\n        break;\n      case \"FeatureCreated\":\n        this.newFeatureCreated(message.id);\n        break;\n      case 'Finished': //from asynchronous queries, marxan runs and feature imports\n        //reset the pid\n        this.setState({pid: 0});\n        //remove the Preprocessing messages which show the processing spinner\n        this.removeMessageFromLog(\"Preprocessing\");\n        break;\n      default:\n        break;\n    }\n  }\n  \n  //logs the message if necessary - this removes duplicates\n  logMessage(message){\n    //log the message from the websocket\n    if (message.status === 'SocketClosedUnexpectedly'){ //server closed WebSocket unexpectedly - uncaught server error, server crash or WebSocket timeout)\n      this.log({method:message.method, status:'Finished', error:\"The WebSocket connection closed unexpectedly\"});\n    }else{\n      //see if the message has a pid and if it does then see if the status has changed from the last message - if it has then log the message\n      if (message.hasOwnProperty('pid')) {\n        //get the existing status\n        let _messages = this.state.logMessages.filter((_message) => {\n          if (_message.hasOwnProperty('pid')) {\n            return _message.pid === message.pid;\n          }else{\n            return false;\n          }\n        });\n        //if there is already a message for that pid\n        if (_messages.length > 0){\n          //compare with the latest status\n          if (message.status !== _messages[_messages.length-1].status) {\n            //if the new status is different and the message status is finished, then remove the processing message\n            if (message.status === 'Finished') this.removeMessageFromLog('RunningQuery', message.pid);\n            this.log(message);\n          }\n        }else{ //log the first message for that pid\n          this.log(message);\n        }\n      }else{\n        //for downloading we dont want to show every downloading message\n        if (message.status === 'Downloading'){\n          //see if we already have a message which is downloading \n          let _messages = this.state.logMessages.filter((_message) => {\n            return (_message.status === 'Downloading');\n          });\n          if (_messages.length === 0) this.log(message);\n        }else{\n          //if the message is downloaded then remove the downloading message\n          if (message.status === 'Downloaded') this.removeMessageFromLog('Downloading');\n          //log all other messages\n          this.log(message);\n        }\n      }\n    }\n  }\n  \n  //removes a message from the log by matching on the status and if it is passed, the pid\n  removeMessageFromLog(status, pid){\n    let _messages = this.state.logMessages;\n    //filter the messages to remove those that match on status (and pid)\n    _messages = _messages.filter((_message) => {\n      if (pid !== undefined){\n        if (_message.hasOwnProperty('pid')) {\n          return (!(_message.pid === pid && _message.status === status));\n        }else{\n          return true;\n        }\n      }else{ //match just on the status\n        return (!(_message.status === status));\n      }\n    });\n    this.setState({logMessages: _messages});\n  }\n  \n  //can be called from other components\n  setSnackBar(message, silent = false){\n    if (!silent) this.setState({snackbarOpen: true, snackbarMessage: message});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING MARXAN SERVERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //initialises the servers by requesting their capabilities and then filtering the list of available servers\n  initialiseServers(marxanServers){\n    return new Promise((resolve, reject) => {\n      //get a list of server hosts from the marxan.js registry\n      let hosts = marxanServers.map((server) => {\n        return server.host;  \n      });\n      //add the current domain - this may be a local/local network install\n      let name = (window.location.hostname === \"localhost\") ? \"localhost\" : window.location.hostname;\n      marxanServers.push(({name: name, protocol: window.location.protocol, host: window.location.hostname, port: 8080, description:'Local machine', type:'local', }));\n      //get all the server capabilities - when all the servers have responded, finalise the marxanServer array\n      this.getAllServerCapabilities(marxanServers).then((server) => {\n        //remove the current domain if either the marxan server is not installed, or it is already in the list of servers from the marxan registry\n        marxanServers = marxanServers.filter((item) => {\n          return (item.type===\"remote\" || (item.type===\"local\" && !item.offline && hosts.indexOf(item.host) === -1) || (item.host === 'localhost'));\n        });\n        //sort the servers by the name \n        marxanServers.sort((a, b) => {\n          if ((a.name.toLowerCase() < b.name.toLowerCase())||(a.type === \"local\"))\n            return -1;\n          if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n          return 0;\n        });\n        this.setState({marxanServers: marxanServers}, ()=>{\n          resolve(\"ServerData retrieved\");\n        });\n      });\n    });\n  }  \n\n  //gets the capabilities of all servers\n  getAllServerCapabilities(marxanServers){\n    let promiseArray = [];\n    //iterate through the servers and get their capabilities\n    for (var i = 0; i < marxanServers.length; ++i) {\n      promiseArray.push(this.getServerCapabilities(marxanServers[i]));\n    }\n    //return a promise\n    return Promise.all(promiseArray);\n  }\n\n  //gets the capabilities of the server by making a request to the getServerData method\n  getServerCapabilities(server){\n    return new Promise((resolve, reject) => {\n      //get the endpoint for all http/https requests\n      let endpoint = server.protocol + \"//\" + server.host + \":\" + server.port + TORNADO_PATH;\n      //get the WebService endpoint\n      let websocketEndpoint = (server.protocol ==='http:') ? \"ws://\" + server.host + \":\" + server.port + TORNADO_PATH : \"wss://\" + server.host + \":\" + server.port + TORNADO_PATH;\n      //set the default properties for the server - by default the server is offline, has no guest access and CORS is not enabled\n      server = Object.assign(server, {endpoint: endpoint, websocketEndpoint: websocketEndpoint, offline: true, guestUserEnabled: false, corsEnabled: false});\n      //poll the server to make sure tornado is running - this uses fetchJsonp which can catch http errors\n      fetchJsonp(endpoint + \"getServerData\",{timeout: 1000}).then((response) => {\n        return response.json();\n      }).then((json) => {\n        if (json.hasOwnProperty('info')){\n          //see if CORS is enabled from this domain - either the domain has been added as an allowable domain on the server, or the client and server are on the same machine\n          let corsEnabled = ((json.serverData.PERMITTED_DOMAINS.indexOf(window.location.hostname)>-1)||(server.host === window.location.hostname)) ? true : false;\n          //set the flags for the server capabilities\n          server = Object.assign(server, {guestUserEnabled: json.serverData.ENABLE_GUEST_USER, corsEnabled: corsEnabled, offline: false, machine: json.serverData.MACHINE, client_version: json.serverData.MARXAN_CLIENT_VERSION, server_version: json.serverData.MARXAN_SERVER_VERSION, node: json.serverData.NODE, processor: json.serverData.PROCESSOR, processor_count: json.serverData.PROCESSOR_COUNT,ram: json.serverData.RAM, release: json.serverData.RELEASE, system:json.serverData.SYSTEM, version: json.serverData.VERSION, wdpa_version: json.serverData.WDPA_VERSION, planning_grid_units_limit: Number(json.serverData.PLANNING_GRID_UNITS_LIMIT), disk_space: json.serverData.DISK_FREE_SPACE});\n          //if the server defines its own name then set it \n          if(json.serverData.SERVER_NAME!==\"\") {\n            server = Object.assign(server, {name:json.serverData.SERVER_NAME});\n          }\n          //if the server defines its own description then set it \n          if(json.serverData.SERVER_DESCRIPTION!==\"\") {\n            server = Object.assign(server, {description:json.serverData.SERVER_DESCRIPTION});\n          }\n        }\n        //return the server capabilities\n        resolve(server);\n        }).catch((ex) => {\n          //the server does not exist or did not respond before the timeout - return the default properties\n          resolve(server);\n      });\n    });\n  }\n  \n  //sets the layer name for the WDPA vector tiles based on the WDPA version\n  setWDPAVectorTilesLayerName(wdpa_version){\n    //get the short version of the wdpa_version, e.g. August 2019 to aug_2019\n    let version = wdpa_version.toLowerCase().substr(0,3) + \"_\" + wdpa_version.substr(-4);\n    //set the value of the vector_tile_layer based on which version of the wdpa the server has in the PostGIS database\n    this.wdpa_vector_tile_layer = \"wdpa_\" + version + \"_polygons\";\n  }\n  //called when the user selects a server\n  selectServer(value){\n    this.setState({marxanServer: value});\n    //set the link to the WDPA vector tiles based on the version that is included in the server in the PostGIS database\n    this.setWDPAVectorTilesLayerName(value.wdpa_version);\n    //if the server is ready only then change the user/password to the guest user\n    if (!value.offline && !value.corsEnabled && value.guestUserEnabled){\n      this.switchToGuestUser();\n    }\n  }\n  \n  closeSnackbar() {\n    this.setState({ snackbarOpen: false });\n  }\n\n  startLogging(clearLog = false){\n    //switches the results pane to the log tab\n    this.log_tab_active();\n    //clear the log if needs be\n    if (clearLog) this.clearLog();\n  }\n\n  //clears the log\n  clearLog(){\n    this.setState({logMessages: []});\n  }\n  \n  //can be called from components to update the log\n  log(message){\n    let _messages = this.state.logMessages;\n    _messages.push(message);\n    this.setState({logMessages: _messages});\n  }\n\n  //utiliy method for getting all puids from normalised data, e.g. from [[\"VI\", [7, 8, 9]], [\"IV\", [0, 1, 2, 3, 4]], [\"V\", [5, 6]]]\n  getPuidsFromNormalisedData(normalisedData) {\n    let puids = [];\n    normalisedData.forEach((item) => {\n      puids = puids.concat(item[1]);\n    });\n    return puids;\n  }\n\n  changeUserName(user) {\n    this.setState({ user: user });\n  }\n\n  changePassword(password) {\n    this.setState({ password: password });\n  }\n  \n  //checks the users credentials\n  checkPassword(user, password) {\n    return new Promise((resolve, reject) => {\n      this._get(\"validateUser?user=\" +user + \"&password=\" + password, 10000).then((response) => {\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n  //validates the user and then logs in if successful\n  validateUser() {\n    return new Promise((resolve, reject) => {\n      this.checkPassword(this.state.user, this.state.password).then(() => {\n        //user validated - log them in\n        this.login().then((response)=>{\n          resolve(\"User validated\");\n        });\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  //the user is validated so login\n  login() {\n    return new Promise((resolve, reject) => {\n      this._get(\"getUser?user=\" + this.state.user).then((response) => {\n        this.setState({userData: response.userData, unauthorisedMethods: response.unauthorisedMethods, project: response.userData.LASTPROJECT, dismissedNotifications: (response.dismissedNotifications ? response.dismissedNotifications : [])}, ()=>{\n          //show the welcome dialog\n          this.openWelcomeDialog();\n        });\n        //set the basemap\n        var basemap = this.state.basemaps.filter((item) => {return (item.name === response.userData.BASEMAP);})[0];\n        this.setBasemap(basemap).then(() => {\n          //get all features\n          this.getAllFeatures().then(() => {\n            //get the users last project and load it \n            this.loadProject(response.userData.LASTPROJECT, this.state.user).then((response)=>{\n              resolve(\"Logged in\");\n            });\n          });\n          //get all planning grids\n          this.getPlanningUnitGrids();\n        });\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  //log out and reset some state \n  logout() {\n    this.hideUserMenu();\n    this.setState({ loggedIn: false, user: '', password: '', project: '',owner: '', runParams: [], files: {}, metadata: {}, renderer: {}, planning_units: [], projectFeatures:[], infoPanelOpen: false, resultsPanelOpen: false, brew: new classyBrew(), notifications:[]  });\n    this.resetResults();\n    //clear the currently set cookies\n    this._get(\"logout\").then((response) => {\n        //do something\n    });\n  }\n  \n  switchToGuestUser(){\n    return new Promise((resolve, reject) => {\n      this.setState({user: \"guest\", password:\"password\"}, ()=> {\n        resolve(\"Switched to guest user\");\n      });\n    });\n  }\n  \n  changeEmail(value) { \n      this.setState({ resendEmail: value });\n  }\n\n  resendPassword() {\n    this._get(\"resendPassword?user=\" + this.state.user).then((response) => {\n      //ui feedback\n      this.setSnackBar(response.info);\n      //close the resend password dialog\n      this.closeResendPasswordDialog();\n    }).catch((error) => {\n      //do something\n  \t});\n  }\n\n  //gets data for all users\n  getUsers() {\n    this._get(\"getUsers\").then((response) => {\n      this.setState({ users: response.users });\n    }).catch((error) => {\n      this.setState({ users: [] });\n    });\n  }\n\n  //deletes a user\n  deleteUser(user) {\n    this._get(\"deleteUser?user=\" + user).then((response) => {\n      this.setSnackBar(\"User deleted\");\n      //remove it from the users array\n      let usersCopy = this.state.users;\n      //remove the user \n      usersCopy = usersCopy.filter((item) => {return item.user !== user});\n      //update the users state   \n      this.setState({users: usersCopy});\n      //see if the current project belongs to the deleted user\n      if (this.state.owner === user) {\n        this.setSnackBar(\"Current project no longer exists. Loading next available.\");\n        //load the next available project\n        this.state.projects.some((project) => {\n          if (project.user !== user) this.loadProject(project.name, project.user);\n          return project.name !== this.state.project;\n        });\n        //delete all the projects belonging to that user\n        this.deleteProjectsForUser(user);\n      }\n    });\n  }\n  \n  //deletes all of the projects belonging to the passed user from the state\n  deleteProjectsForUser(user){\n    let projects = this.state.projects.map((project) => {\n      return (project.user !== user);\n    });\n    this.setState({projects: projects});\n  }\n  \n  //changes a users role\n  changeRole(user, role){\n    this.updateUser({ROLE: role}, user);\n    //copy the users state\n    let usersCopy = this.state.users;\n    //change the users role\n    usersCopy = usersCopy.map((item) => {\n      if (item.user === user){\n        return Object.assign(item, {'ROLE': role});\n      }else{\n        return item;\n      }      \n    });\n    //update the users state   \n    this.setState({users: usersCopy});\n  }\n\n  //toggles if the guest user is enabled on the server or not\n  toggleEnableGuestUser(){\n    this._get(\"toggleEnableGuestUser\").then((response) => {\n      //if succesfull set the state\n      this.setState({ guestUserEnabled: response.enabled });\n    });\n  }\n  \n  //toggles the projects privacy\n  toggleProjectPrivacy(newValue){\n    this.updateProjectParameter(\"PRIVATE\", newValue).then((response) => {\n      this.setState({ metadata: Object.assign(this.state.metadata, { PRIVATE: (newValue === \"True\") })});\n    });\n  }\n  \n  //parse the notifications \n  parseNotifications(){\n    //see if there are any new notifications from the marxan-registry\n    if (window.NOTIFICATIONS.length>0){\n      this.addNotifications(window.NOTIFICATIONS);\n    }\n    //see if there is a new version of the wdpa data - this comes from the Marxan Registry WDPA object - if there is then show a notification to admin users\n    if (this.state.marxanServer.wdpa_version !== window.WDPA.latest_version) {\n      this.setState({newWDPAVersion: true});\n      this.addNotifications([{id:'wdpa_update_' + window.WDPA.latest_version, html:\"A new version of the WDPA is available. Go to Help | Server Details for more information.\", type:\"Data Update\", showForRoles: [\"Admin\"]}]);\n    }else{\n      this.setState({newWDPAVersion: false});\n    }\n    //see if there is a new version of the marxan-client software\n    if (MARXAN_CLIENT_VERSION !== window.CLIENT_VERSION) this.addNotifications([{id:'marxan_client_update_' + window.CLIENT_VERSION, html:\"A new version of marxan-client is available (\" + window.CLIENT_VERSION + \"). Go to Help | About for more information.\", type:\"Software Update\", showForRoles: [\"Admin\"]}]);\n    //see if there is a new version of the marxan-server software\n    if (this.state.marxanServer.server_version !== window.SERVER_VERSION) this.addNotifications([{id:'marxan_server_update_' + window.SERVER_VERSION, html:\"A new version of marxan-server is available (\" + window.SERVER_VERSION + \"). Go to Help | Server Details for more information.\", type:\"Software Update\", showForRoles: [\"Admin\"]}]);\n    //check that there is enough disk space\n    if (this.state.marxanServer.disk_space < 1000)  {\n      this.addNotifications([{id:'hardware_1000', html:\"Disk space < 1Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n    }else{\n      if (this.state.marxanServer.disk_space < 2000)  {\n        this.addNotifications([{id:'hardware_2000', html:\"Disk space < 2Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n      }else{\n        if (this.state.marxanServer.disk_space < 3000) this.addNotifications([{id:'hardware_3000', html:\"Disk space < 3Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n      }\n    }\n  }\n  \n  //hides the notifications from the UI\n  hideNotifications(){\n    this.setState({notificationsOpen: false});\n  }\n  \n  //add the passed notifications to the notifications state\n  addNotifications(notifications){\n    let _notifications = this.state.notifications;\n    //set the visibility of the notifications based on the users role, whether they have already been dismissed or if it has expired\n    notifications = notifications.map(item => {\n      let allowedForRole = (item.showForRoles.indexOf(this.state.userData.ROLE)>-1);\n      let notDismissed = (this.state.dismissedNotifications.indexOf(String(item.id)) === -1);\n      let notExpired = true;\n      //if an expiry date is set, then get this as a Date\n      if ((item.hasOwnProperty(\"expires\")) && (item.hasOwnProperty(\"expires\") && (item.expires !== \"\"))){\n    \t\ttry {\n          var d = Date.parse(item.expires); \n          if (new Date() > d) notExpired = false;\n    \t\t}\n    \t\tcatch (err) {\n    \t\t\t//invalid date so not expiry date\n    \t\t}\n      }\n      let visible = allowedForRole && notDismissed && notExpired;\n      return Object.assign(item, {visible: visible});  \n    });\n    _notifications.push.apply(_notifications, notifications);\n    this.setState({notifications: _notifications});\n  }\n  \n  //removes a notification\n  removeNotification(notification){\n    //remove the notification from the state\n    let _notifications  = this.state.notifications.filter(_notification => _notification.id !== notification.id);\n    //remove it in the users notifications.dat file\n    this.dismissNotification(notification);\n    //set the state\n    this.setState({notifications: _notifications});\n  }\n  \n  //dismisses a notification on the server\n  dismissNotification(notification){\n    this._get(\"dismissNotification?user=\" + this.state.user + \"&notificationid=\" + notification.id);\n  }\n  \n  //clears all of the dismissed notifications on the server\n  resetNotifications(){\n    this._get(\"resetNotifications?user=\" + this.state.user).then(()=>{\n      this.setState({notifications:[], dismissedNotifications:[]});\n      this.parseNotifications();  \n    });\n  }\n  \n  appendToFormData(formData, obj) {\n    //iterate through the object and add each key/value pair to the formData to post to the server\n    for (var key in obj) {\n      //only add non-prototype objects\n      if (obj.hasOwnProperty(key)) {\n        formData.append(key, obj[key]);\n      }\n    }\n    return formData;\n  }\n\n  //removes the keys from the object\n  removeKeys(obj, keys) {\n    keys.map((key) => {\n      delete obj[key];\n      return null;\n    });\n    return obj;\n  }\n\n  //updates all parameter in the user.dat file then updates the state (in userData)\n  updateUser(parameters, user = this.state.user) {\n    return new Promise((resolve, reject) => {\n      //remove the keys that are not part of the users information\n      parameters = this.removeKeys(parameters, [\"updated\", \"validEmail\"]);\n      //initialise the form data\n      let formData = new FormData();\n      //add the current user\n      formData.append(\"user\", user);\n      //append all the key/value pairs\n      this.appendToFormData(formData, parameters);\n      //post to the server\n      this._post(\"updateUserParameters\", formData).then((response) => {\n        // if succesfull write the state back to the userData key\n        if (this.state.user === user) this.setState({ userData: this.newUserData});\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n      //if we have updated the current user then save a local property so that if the changes are saved to the server then we can update the local state\n      if (this.state.user === user) this.newUserData = Object.assign(this.state.userData, parameters);\n    });\n  }\n\n  //saveOptions - the options are in the users data so we use the updateUser REST call to update them\n  saveOptions(options) {\n    this.updateUser(options);\n  }\n  //updates the project from the old version to the new version\n  upgradeProject(project){\n    return this._get(\"upgradeProject?user=\" + this.state.user + \"&project=\" + project);\n  }\n  \n  //updates the project parameters back to the server (i.e. the input.dat file)\n  updateProjectParams(project, parameters) {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", project);\n    //append all the key/value pairs\n    this.appendToFormData(formData, parameters);\n    //post to the server and return a promise\n    return this._post(\"updateProjectParameters\", formData);\n  }\n\n  //updates a single parameter in the input.dat file directly\n  updateProjectParameter(parameter, value) {\n    let obj = {};\n    obj[parameter] = value;\n    //update the parameter and return a promise\n    return this.updateProjectParams(this.state.project, obj);\n  }\n\n  //updates the run parameters for the current project\n  updateRunParams(array) {\n    //convert the run parameters array into an object\n    let parameters = {};\n    array.map((obj) => { parameters[obj.key] = obj.value; return null; });\n    //update the project parameters\n    this.updateProjectParams(this.state.project, parameters).then((response) => {\n      //if succesfull write the state back \n      this.setState({ runParams: this.runParams});\n    });\n    //save the local state to be able to update the state on callback\n    this.runParams = array;\n  }\n\n  //gets the planning unit grids\n  getPlanningUnitGrids() {\n    this._get(\"getPlanningUnitGrids\").then((response) => {\n      this.setState({ planning_unit_grids: response.planning_unit_grids });\n    });\n  }\n\n  //loads a project\n  loadProject(project, user) {\n    return new Promise((resolve, reject) => {\n      //reset the results from any previous projects\n      this.resetResults();\n      this._get(\"getProject?user=\" + user + \"&project=\" + project).then((response) => {\n        //set the state for the app based on the data that is returned from the server\n        this.setState({ loggedIn: true, project: response.project, owner: user, runParams: response.runParameters, files: Object.assign(response.files), metadata: response.metadata, renderer: response.renderer, planning_units: response.planning_units, infoPanelOpen: true, resultsPanelOpen: true  });\n        //if there is a PLANNING_UNIT_NAME passed then change to this planning grid and load the results if there are any available\n        if (response.metadata.PLANNING_UNIT_NAME) {\n          this.changePlanningGrid(MAPBOX_USER + \".\" + response.metadata.PLANNING_UNIT_NAME).then(()=>{\n            //poll the server to see if results are available for this project - if there are these will be loaded\n            this.getResults(user, response.project).then((response)=> {\n              resolve(\"Project loaded\");\n            });\n          });\n        }\n        //set a local variable for the feature preprocessing - this is because we dont need to track state with these variables as they are not bound to anything\n        this.feature_preprocessing = response.feature_preprocessing;\n        //set a local variable for the protected area intersections - this is because we dont need to track state with these variables as they are not bound to anything\n        this.protected_area_intersections = response.protected_area_intersections;\n        //set a local variable for the selected iucn category\n        this.previousIucnCategory = response.metadata.IUCN_CATEGORY;\n        //initialise all the interest features with the interest features for this project\n        this.initialiseInterestFeatures(response.metadata.OLDVERSION, response.features);\n      }).catch((error) => {\n          if (error.indexOf('Logged on as read-only guest user')>-1){\n            this.setState({loggedIn: true});\n            resolve(\"No project loaded - logged on as read-only guest user'\");\n          }\n          if (error.indexOf(\"does not exist\")>-1){\n            //probably the last loaded project has been deleted - send some feedback and load another project\n            this.setSnackBar(\"Loading first available project\");\n            //passing an empty project to loadProject will load the first project\n            this.loadProject('', this.state.user);\n          }\n      });\n    });\n  }\n\n  //matches and returns an item in an object array with the passed id - this assumes the first item in the object is the id identifier\n  getArrayItem(arr, id) {\n    let tmpArr = arr.filter((item) => { return item[0] === id });\n    let returnValue = (tmpArr.length > 0) ? tmpArr[0] : undefined;\n    return returnValue;\n  }\n\n  //initialises the interest features based on the currently loading project\n  initialiseInterestFeatures(oldVersion, projectFeatures) {\n    //if the project is from an old version of marxan then the interest features can only come from the list of features in the current project\n    let features = (oldVersion) ? JSON.parse(JSON.stringify(projectFeatures)) : this.state.allFeatures; //make a copy of the projectFeatures\n    //get a list of the ids for the features that are in this project\n    var ids = projectFeatures.map((item) => {\n      return item.id;\n    });\n    //iterate through features to add the required attributes to be used in the app and to populate them based on the current project features\n    var outFeatures = features.map((item) => {\n      //see if the feature is in the current project\n      var projectFeature = (ids.indexOf(item.id) > -1) ? projectFeatures[ids.indexOf(item.id)] : null;\n      //get the preprocessing for that feature from the feature_preprocessing.dat file\n      let preprocessing = this.getArrayItem(this.feature_preprocessing, item.id);\n      //add the required attributes to the features - these will be populated in the function calls preprocessFeature (pu_area, pu_count) and pollResults (protected_area, target_area)\n      this.addFeatureAttributes(item, oldVersion);\n      //if the interest feature is in the current project then populate the data from that feature\n      if (projectFeature) {\n        item['selected'] = true;\n        item['preprocessed'] = preprocessing ? true : false;\n        item['pu_area'] = preprocessing ? preprocessing[1] : -1;\n        item['pu_count'] = preprocessing ? preprocessing[2] : -1;\n        item['spf'] = projectFeature['spf'];\n        item['target_value'] = projectFeature['target_value'];\n        item['occurs_in_planning_grid'] = item['pu_count'] > 0;\n      }\n      return item;\n    });\n    //get the selected feature ids\n    this.getSelectedFeatureIds();\n    //set the state\n    this.setState({ allFeatures: outFeatures, projectFeatures: outFeatures.filter((item) => { return item.selected }) });\n  }\n\n  //adds the required attributes for the features to work in the marxan web app - these are the default values\n  addFeatureAttributes(item, oldVersion){\n      // the -1 flag indicates that the values are unknown\n      item['selected'] = false; //if the feature is currently selected (i.e. in the current project)\n      item['preprocessed'] = false; //has the feature already been intersected with the planning grid to populate the puvspr.dat file\n      item['pu_area'] = -1; //the area of the feature within the planning grid\n      item['pu_count'] = -1; //the number of planning units that the feature intersects with\n      item['spf'] = 40; //species penalty factor\n      item['target_value'] = 17; //the target value for the feature to protect as a percentage\n      item['target_area'] = -1; //the area of the feature that must be protected to meet the targets percentage\n      item['protected_area'] = -1; //the area of the feature that is protected\n      item['feature_layer_loaded'] = false; //is the features distribution currently visible on the map\n      item['feature_puid_layer_loaded'] = false; //are the planning units that intersect the feature currently visible on the map\n      item['old_version'] = oldVersion; //true if the current project is an project imported from marxan for DOS\n      item['occurs_in_planning_grid'] = false; //does the feature occur in the planning grid\n      item['color'] = window.colors[item.id % window.colors.length]; //color for the map layer and analysis outputs\n      item['in_filter'] = true; //true if the feature is currently visible in the features dialog\n  }\n\n  //resets various variables and state in between users\n  resetResults() {\n    this.runMarxanResponse = {};\n    this.setState({ solutions: []});\n    //reset any feature layers that are shown\n    this.hideFeatureLayer();\n    //reset the puvspr layer\n    this.hideLayer(PUVSPR_LAYER_NAME);\n  }\n\n  //create a new user on the server\n  createNewUser(user, password, name, email) {\n    let formData = new FormData();\n    formData.append('user', user);\n    formData.append('password', password);\n    formData.append('fullname', name);\n    formData.append('email', email);\n    this._post(\"createUser\", formData).then((response) => {\n      //ui feedback\n      this.setSnackBar(response.info);\n      //close the register dialog\n      this.closeRegisterDialog();\n      //enter the new users name in the username box and a blank password\n      this.setState({user: user, password:''});\n    });\n  }\n\n  //REST call to create a new project from the wizard\n  createNewProject(project) {\n    let formData = new FormData();\n    formData.append('user', this.state.user);\n    formData.append('project', project.name);\n    formData.append('description', project.description);\n    formData.append('planning_grid_name', project.planning_grid_name);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    project.features.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(17);\n      spf_values.push(40);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append('interest_features', interest_features.join(\",\"));\n    formData.append('target_values', target_values.join(\",\"));\n    formData.append('spf_values', spf_values.join(\",\"));\n    this._post(\"createProject\", formData).then((response) => {\n      this.setSnackBar(response.info);\n      this.setState({projectsDialogOpen: false });\n      this.loadProject(response.name, response.user);\n    });\n  }\n\n  createNewNationalProject(params){\n    return new Promise((resolve, reject) => {\n      //first create the planning grid\n      this.createNewPlanningUnitGrid(params.iso3, params.domain, params.areakm2, params.shape).then((response) => {\n        console.log(response);\n      }).catch((error) => {\n        console.log(error);\n      });\n      //create the features from\n      // world ecosystems\n      // species from gbif\n      // species from the red list\n    });\n  }\n  \n  //REST call to create a new import project from the wizard\n  createImportProject(project) {\n    let formData = new FormData();\n    formData.append('user', this.state.user);\n    formData.append('project', project);\n    return this._post(\"createImportProject\", formData);\n  }\n\n  //REST call to delete a specific project\n  deleteProject(user, project, silent = false) {\n    this._get(\"deleteProject?user=\" + user + \"&project=\" + project).then((response) => {\n      //refresh the projects list\n      this.getProjects();\n      //ui feedback\n      this.setSnackBar(response.info, silent); //we may not want to show the snackbar if we are deleting a project silently, e.g. on a rollback after an unsuccesful import\n      //see if the user deleted the current project\n      if (response.project === this.state.project) {\n        //ui feedback\n        this.setSnackBar(\"Current project deleted - loading first available\");\n        //load the next available project\n        this.state.projects.some((project) => {\n          if (project.name !== this.state.project) this.loadProject(project.name, this.state.user);\n          return project.name !== this.state.project;\n        });\n      }\n    });\n  }\n\n  cloneProject(user, project) {\n    this._get(\"cloneProject?user=\" + user + \"&project=\" + project).then((response) => {\n      //refresh the projects list\n      this.getProjects();\n      //ui feedback\n      this.setSnackBar(response.info);\n    }).catch((error) => {\n        //do something\n    });\n  }\n\n  //rename a specific project on the server\n  renameProject(newName) {\n    return new Promise((resolve, reject) => {\n      if (newName !== '' && newName !== this.state.project) {\n        this._get(\"renameProject?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&newName=\" + newName).then((response) => {\n          this.setState({ project: newName});\n          this.setSnackBar(response.info);\n          resolve(\"Project renamed\");\n        }).catch((error) => {\n          //do something\n        });\n      }\n    });\n  }\n  //rename the description for a specific project on the server\n  renameDescription(newDesc) {\n    return new Promise((resolve, reject) => {\n      this.updateProjectParameter(\"DESCRIPTION\", newDesc).then((response) => {\n        this.setState({ metadata: Object.assign(this.state.metadata, { DESCRIPTION: newDesc })});\n        resolve(\"Description renamed\");\n      });\n    });\n  }\n\n  getProjects() {\n    this._get(\"getProjects?user=\" + this.state.user).then((response) => {\n      let projects = [];\n      //filter the projects so that private ones arent shown\n      response.projects.forEach((project) => {\n        if (!(project.private && project.user !== this.state.user && this.state.userData.ROLE !== \"Admin\")) projects.push(project);\n      });\n      this.setState({ projects: projects});\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////CODE TO PREPROCESS AND RUN MARXAN\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //run a marxan job on the server\n  runMarxan(e) {\n    //start the logging\n    this.startLogging();\n    //reset all of the protected and target areas for all features\n    this.resetProtectedAreas();\n    //update the spec.dat file with any that have been added or removed or changed target or spf\n    this.updateSpecFile().then((value)=> {\n      //when the species file has been updated, update the planning unit file \n      this.updatePuFile();\n      //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using websockets\n      this.updatePuvsprFile().then((value) => {\n        //start the marxan job\n        this.startMarxanJob(this.state.owner, this.state.project).then((response) => {\n          //update the run log\n          this.getRunLogs();\n          if (!this.checkForErrors(response)) {\n            //run completed - get the results\n            this.getResults(response.user, response.project);\n          }else{\n            //set state with no solutions\n            this.runFinished([]);\n          }\n        }).catch((error) => {\n            //reset the running state\n            this.marxanStopped(error);\n        }); //startMarxanJob\n      }).catch((error) => { //updatePuvsprFile error\n        console.error(error);\n      }); \n    }).catch((error) => { //updateSpecFile error\n      console.error(error);\n    });\n  }\n\n  //stops a process running on the server\n  stopProcess(pid) {\n    this._get(\"stopProcess?pid=\" + pid, 10000).catch((error) => {\n      //if the pid no longer exists then the state needs to be reset anyway\n      this.getRunLogs();\n    });\n  }\n\n  //ui feedback when marxan is stopped by the user\n  marxanStopped(error){\n    //update the run log\n    this.getRunLogs();\n  }\n  \n  resetProtectedAreas() {\n    //reset all of the results for allFeatures to set their protected_area and target_area to -1\n    this.state.allFeatures.forEach((feature) => {\n      feature.protected_area = -1;\n      feature.target_area = -1;\n    });\n  }\n\n  //updates the species file with any target values that have changed\n  updateSpecFile() {\n    let formData = new FormData();\n    formData.append('user', this.state.owner);\n    formData.append('project', this.state.project);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    this.state.projectFeatures.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(item.target_value);\n      spf_values.push(item.spf);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append('interest_features', interest_features.join(\",\"));\n    formData.append('target_values', target_values.join(\",\"));\n    formData.append('spf_values', spf_values.join(\",\"));\n    return this._post(\"updateSpecFile\", formData);\n  }\n\n  //updates the planning unit file with any changes - not implemented yet\n  updatePuFile() {\n\n  }\n\n  updatePuvsprFile() {\n    //preprocess the features to create the puvspr.dat file on the server - this is done on demand when the project is run because the user may add/remove Conservation features willy nilly\n    let promise = this.preprocessAllFeatures();\n    return promise;\n  }\n\n  //preprocess a single feature\n  async preprocessSingleFeature(feature){\n    this.closeFeatureMenu();\n    this.startLogging();\n    this.preprocessFeature(feature);\n  }\n  \n  //preprocess synchronously, i.e. one after another\n  async preprocessAllFeatures() {\n    var feature;\n    //iterate through the features and preprocess the ones that need preprocessing\n    for (var i = 0; i < this.state.projectFeatures.length; ++i) {\n      feature = this.state.projectFeatures[i];\n      if (!feature.preprocessed){\n        await this.preprocessFeature(feature);\n      }else{\n        //\n      }\n    }\n  }\n\n  //preprocesses a feature using websockets - i.e. intersects it with the planning units grid and writes the intersection results into the puvspr.dat file ready for a marxan run - this will have no server timeout as its running using websockets\n  preprocessFeature(feature) {\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.log_tab_active();\n      //call the websocket \n      this._ws(\"preprocessFeature?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&planning_grid_name=\" + this.state.metadata.PLANNING_UNIT_NAME + \"&feature_class_name=\" + feature.feature_class_name + \"&alias=\" + feature.alias + \"&id=\" + feature.id, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished\n        this.updateFeature(feature, {preprocessed: true, pu_count: Number(message.pu_count), pu_area: Number(message.pu_area), occurs_in_planning_grid: (Number(message.pu_count) >0)});\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //calls the marxan executeable and runs it getting the output streamed through websockets\n  startMarxanJob(user, project) {\n    return new Promise((resolve, reject) => {\n      //update the ui to reflect the fact that a job is running\n      this.setState({active_pu: undefined});\n      //make the request to get the marxan data\n      this._ws(\"runMarxan?user=\" + user + \"&project=\" + project, this.wsMessageCallback.bind(this)).then((message) => {\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //gets the results for a project\n  getResults(user, project){\n    return new Promise((resolve, reject) => {\n      this._get(\"getResults?user=\" + user + \"&project=\" + project).then((response) => {\n        this.runCompleted(response);\n        resolve(\"Results retrieved\");\n      }).catch((error) => {\n        reject(\"Unable to get results\");\n      });\n    });\n  }\n  \n  //run completed\n  runCompleted(response) {\n    var solutions;\n    //get the response and store it in this component\n    this.runMarxanResponse = response;\n    //if we have some data to map then set the state to reflect this\n    if (this.runMarxanResponse.ssoln && this.runMarxanResponse.ssoln.length > 0) {\n      this.setSnackBar(response.info);\n      //render the sum solution map\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //create the array of solutions to pass to the InfoPanels table\n      solutions = response.summary;\n      //the array data are in the format \"Run_Number\",\"Score\",\"Cost\",\"Planning_Units\" - so create an array of objects to pass to the outputs table\n      solutions = solutions.map((item) => {\n        return { \"Run_Number\": item[0], \"Score\": Number(item[1]).toFixed(1), \"Cost\": Number(item[2]).toFixed(1), \"Planning_Units\": item[3], \"Missing_Values\": item[12] };\n      });\n      //add in the row for the summed solutions\n      solutions.splice(0, 0, { 'Run_Number': 'Sum', 'Score': '', 'Cost': '', 'Planning_Units': '', 'Missing_Values': '' });\n      //select the first row in the solutions table\n      \n      //update the amount of each target that is protected in the current run from the output_mvbest.txt file\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n    }else{\n      solutions = [];\n    }\n    //set state\n    this.runFinished(solutions);\n  }\n\n  runFinished(solutions){\n    this.setState({ solutions: solutions });\n  }\n  \n  //gets the protected area information in m2 from the marxan run and populates the interest features with the values\n  updateProtectedAmount(mvData) {\n    //copy the current project features state\n    let features = this.state.allFeatures;\n    //iterate through the features and set the protected amount\n    features.forEach((feature) => {\n      //get the matching item in the mvbest data\n      let mvbestItemIndex = mvData.findIndex((item) => { return item[0] === feature.id; });\n      if (mvbestItemIndex>-1){ //the mvbest file may not contain the data for the feature if the project has not been run since the feature was added\n        //get the missing values item for the specific feature\n        let mvItem = mvData[mvbestItemIndex];\n        Object.assign(feature, {target_area: mvItem[2], protected_area: mvItem[3]});\n      }\n    });\n    //update allFeatures and projectFeatures with the new value\n    this.setFeaturesState(features);\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////IMPORT PROJECT ROUTINES\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  importProject(project, description, zipFilename, files, planning_grid_name){\n    return new Promise((resolve, reject) => {\n      let feature_class_name = \"\", uploadId;\n      //start the logging\n      this.startLogging();\n      //set the spinner and lot states\n      this.log({method:'importProject',status:'Importing',info:'Starting import..'});\n      //create a new project\n      //TODO: SORT OUT ROLLING BACK IF AN IMPORT FAILS - AND DONT PROVIDE REST CALLS TO DELETE PLANNING UNITS\n      this.createImportProject(project).then((response) => {\n        this.log({method:'importProject',status:'Importing',info:\"Project '\" + project + \"' created\"});\n        //create the planning unit file\n        this.importZippedShapefileAsPu(zipFilename, planning_grid_name, \"Imported with the project '\" + project + \"'\").then((response) => {\n          //get the planning unit feature_class_name\n          feature_class_name = response.feature_class_name;\n          //get the uploadid\n          uploadId = response.uploadId;\n          this.log({method:'importProject',status:'Importing',info:\"Planning grid imported\"});\n          //upload all of the files from the local system\n          this.uploadFiles(files, project).then((response) => {\n            this.log({method:'importProject',status:'Importing',info:\"All files uploaded\"});\n            //upgrade the project to the new version of Marxan - this adds the necessary settings in the project file and calculates the statistics for species in the puvspr.dat and puts them in the feature_preprocessing.dat file\n            this.upgradeProject(project).then((response) => {\n              this.log({method:'importProject',status:'Importing',info:\"Project updated to new version\"});\n              //update the project file with the new settings - we also have to set the OUTPUTDIR to the standard 'output' as some imported projects may have set different output folders, e.g. output_BLMBEST\n              let d = new Date();\n              let formattedDate = (\"00\" + d.getDate()).slice(-2) + \"/\" + (\"00\" + (d.getMonth() + 1)).slice(-2) + \"/\" + d.getFullYear().toString().slice(-2) + \" \" + (\"00\" + d.getHours()).slice(-2) + \":\" + (\"00\" + d.getMinutes()).slice(-2) + \":\" + (\"00\" + d.getSeconds()).slice(-2);\n              this.updateProjectParams(project, {DESCRIPTION: description + \" (imported from an existing Marxan project)\", CREATEDATE: formattedDate, OLDVERSION: 'True', PLANNING_UNIT_NAME: feature_class_name, OUTPUTDIR: 'output'}).then((response) => {\n                // wait for the tileset to upload to mapbox\n                this.pollMapbox(uploadId).then((response) => {\n                  //refresh the planning grids\n                  this.getPlanningUnitGrids();\n                  this.log({method:'importProject',status:'Finished',info:\"Import complete\"});\n                  //now open the project\n                  this.loadProject(project, this.state.user);\n                  resolve(\"Import complete\");\n                });\n              }).catch((error) => { //updateProjectParams error\n                  reject(error);\n              });\n            }).catch((error) => { //upgradeProject error\n              reject(error);\n            }); \n          }).catch((error) => { //uploadFiles error\n              reject(error);\n          }); \n        }).catch((error) => { //importZippedShapefileAsPu error - delete the project\n          this.deleteProject(this.state.user, project, true);\n          reject(error);\n        });\n      }).catch((error) => { //createImportProject failed - the project already exists\n        reject(error);\n      });\n    });\n  }\n  \n  //uploads a list of files\n  async uploadFiles(files, project) {\n    var file, filepath;\n    for (var i = 0; i < files.length; i++) {\n      file = files.item(i);\n      //see if it is a marxan data file\n      if (file.name.slice(-4) === '.dat'){\n        const formData = new FormData();\n        formData.append('user', this.state.owner);\n        formData.append('project', project);\n        //the webkitRelativePath will include the folder itself so we have to remove this, e.g. 'Marxan project/input/puvspr.dat' -> '/input/puvspr.dat'\n        filepath = file.webkitRelativePath.split(\"/\").slice(1).join(\"/\");\n        formData.append('filename', filepath);\n        formData.append('value', file);\n        this.log({method:'uploadFiles',status:'Uploading',info:\"Uploading: \" + file.webkitRelativePath});\n        await this.uploadFile(formData);\n      }\n    }\n    return 'All files uploaded';\n  }\n  \n  //uploads a single file\n  uploadFile(formData){\n    return this._post(\"uploadFile\", formData);\n  }\n  \n  //pads a number with zeros to a specific size, e.g. pad(9,5) => 00009\n  pad(num, size) {\n    var s = num + \"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n  }\n\n  //load a specific solution for the current project\n  loadSolution(solution) {\n    if (solution === \"Sum\") {\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n      //load the sum of solutions which will already be loaded\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n    }\n    else {\n      this.getSolution(this.state.owner, this.state.project, solution).then((response) => {\n          this.updateProtectedAmount(response.mv);\n          this.renderSolution(response.solution, false);\n      });\n    }\n  }\n\n  //load a solution from another project - used in the clumping dialog - when the solution is loaded the paint properties are set on the individual maps through state changes\n  loadOtherSolution(user, project, solution) {\n    this.getSolution(user, project, solution).then((response) => {\n      var paintProperties = this.getPaintProperties(response.solution, false, false);\n      //get the project that matches the project name from the this.projects property - this was set when the projectGroup was created\n      if (this.projects){\n        var _projects = this.projects.filter((item) => {return item.projectName === project});\n        //get which clump it is\n        var clump = _projects[0].clump;\n        switch (clump) {\n          case 0:\n            this.setState({map0_paintProperty: paintProperties});\n            break;\n          case 1:\n            this.setState({map1_paintProperty: paintProperties});\n            break;\n          case 2:\n            this.setState({map2_paintProperty: paintProperties});\n            break;\n          case 3:\n            this.setState({map3_paintProperty: paintProperties});\n            break;\n          case 4:\n            this.setState({map4_paintProperty: paintProperties});\n            break;\n          default:\n            break;\n        }\n      }\n    });\n  }\n  \n  //gets a solution and returns a promise\n  getSolution(user, project, solution){\n    return this._get(\"getSolution?user=\" + user + \"&project=\" + project + \"&solution=\" + solution);\n  }\n  \n  //gets the total number of planning units in the ssoln and outputs the statistics of the distribution to state, e.g. 2 PUs with a value of 1, 3 with a value of 2 etc.\n  getssolncount(data) {\n    let total = 0;\n    let summaryStats = [];\n    data.map((item) => {\n      summaryStats.push({ number: item[0], count: item[1].length });\n      total += item[1].length;\n      return null;\n    });\n    this.setState({ summaryStats: summaryStats });\n    return total;\n  }\n  //gets a sample of the data to be able to do a classification, e.g. natural breaks, jenks etc.\n  getssolnSample(data, sampleSize) {\n    let sample = [],\n      num = 0;\n    let ssolnLength = this.getssolncount(data);\n    data.map((item) => {\n      //use the ceiling function to force outliers to be in the classification, i.e. those planning units that were only selected in 1 solution\n      num = Math.ceil((item[1].length / ssolnLength) * sampleSize);\n      sample.push(Array(num, ).fill(item[0]));\n      return null;\n    });\n    return [].concat.apply([], sample);\n  }\n\n  //get all data from the ssoln arrays\n  getSsolnData(data) {\n    let arrays = data.map((item) => {\n      return item[1];\n    });\n    return [].concat.apply([], arrays);\n  }\n  //gets the classification and colorbrewer object for doing the rendering\n  classifyData(data, numClasses, colorCode, classification) {\n    //get a sample of the data to make the renderer classification\n    let sample = this.getssolnSample(data, 1000); //samples dont work\n    // let sample = this.getSsolnData(data); //get all the ssoln data\n    //set the data \n    this.state.brew.setSeries(sample);\n    //if the colorCode is opacity then calculate the rgba values dynamically and add them to the color schemes\n    if (colorCode === 'opacity') {\n      //see if we have already created a brew color scheme for opacity with NUMCLASSES\n      if ((this.state.brew.colorSchemes.opacity === undefined)  || (this.state.brew.colorSchemes.opacity && !this.state.brew.colorSchemes.opacity[this.state.renderer.NUMCLASSES])) {\n        //get a copy of the brew state\n        let brewCopy = this.state.brew;\n        let newBrewColorScheme = Array(Number(this.state.renderer.NUMCLASSES)).fill(\"rgba(255,0,136,\").map((item, index) => { return item + ((1 / this) * (index + 1)) + \")\"; }, this.state.renderer.NUMCLASSES);\n        //add the new color scheme\n        if (brewCopy.colorSchemes.opacity === undefined) brewCopy.colorSchemes.opacity = [];\n        brewCopy.colorSchemes.opacity[this.state.renderer.NUMCLASSES] = newBrewColorScheme;\n        //set the state\n        this.setState({brew: brewCopy});\n      }\n    }\n    //set the color code - see the color theory section on Joshua Tanners page here https://github.com/tannerjt/classybrew - for all the available colour codes\n    this.state.brew.setColorCode(colorCode);\n    //get the maximum number of colors in this scheme\n    let colorSchemeLength = getMaxNumberOfClasses(this.state.brew, colorCode);\n    //check the color scheme supports the passed number of classes\n    if (numClasses > colorSchemeLength) {\n      //set the numClasses to the max for the color scheme\n      numClasses = colorSchemeLength;\n      //reset the renderer\n      this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: numClasses }) });\n    }\n    //set the number of classes\n    this.state.brew.setNumClasses(numClasses);\n    //set the classification method - one of equal_interval, quantile, std_deviation, jenks (default)\n    this.state.brew.classify(classification);\n    this.setState({ dataBreaks: this.state.brew.getBreaks()});\n  }\n\n  //called when the renderer state has been updated - renders the solution and saves the renderer back to the server\n  rendererStateUpdated(parameter, value) {\n    this.renderSolution(this.runMarxanResponse.ssoln, true);\n    if (this.state.userData.ROLE !== \"ReadOnly\") this.updateProjectParameter(parameter, value);\n  }\n  //change the renderer, e.g. jenks, natural_breaks etc.\n  changeRenderer(renderer) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { CLASSIFICATION: renderer }) }, () => {\n      this.rendererStateUpdated(\"CLASSIFICATION\", renderer);\n    });\n  }\n  //change the number of classes of the renderer\n  changeNumClasses(numClasses) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: numClasses }) }, () => {\n      this.rendererStateUpdated(\"NUMCLASSES\", numClasses);\n    });\n  }\n  //change the color code of the renderer\n  changeColorCode(colorCode) {\n    //set the maximum number of classes that can be selected in the other select boxes\n    if (this.state.renderer.NUMCLASSES > this.state.brew.getNumClasses()) {\n      this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: this.state.brew.getNumClasses() }) });\n    }\n    this.setState({ renderer: Object.assign(this.state.renderer, { COLORCODE: colorCode }) }, () => {\n      this.rendererStateUpdated(\"COLORCODE\", colorCode);\n    });\n  }\n  //change how many of the top classes only to show\n  changeShowTopClasses(numClasses) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { TOPCLASSES: numClasses }) }, () => {\n      this.rendererStateUpdated(\"TOPCLASSES\", numClasses);\n    });\n  }\n  //renders the solution - data is the REST response and sum is a flag to indicate if the data is the summed solution (true) or an individual solution (false)\n  renderSolution(data, sum) {\n    if (!data) return;\n    var paintProperties = this.getPaintProperties(data, sum, true);\n    //set the render paint property\n    this.map.setPaintProperty(RESULTS_LAYER_NAME, \"fill-color\", paintProperties.fillColor);\n    this.map.setPaintProperty(RESULTS_LAYER_NAME, \"fill-outline-color\", paintProperties.oulineColor);\n    this.map.setPaintProperty(RESULTS_LAYER_NAME, \"fill-opacity\", this.state.results_layer_opacity);\n  }\n\n  //gets the various paint properties for the planning unit layer - if setRenderer is true then it will also update the renderer in the Legend panel\n  getPaintProperties(data, sum, setRenderer){\n    //build an expression to get the matching puids with different numbers of 'numbers' in the marxan results\n    var fill_color_expression = this.initialiseFillColorExpression(\"puid\");\n    var fill_outline_color_expression = this.initialiseFillColorExpression(\"puid\");\n    if (data.length>0) {\n      var color, visibleValue, value;\n      //create the renderer using Joshua Tanners excellent library classybrew - available here https://github.com/tannerjt/classybrew\n      if (setRenderer) this.classifyData(data, Number(this.state.renderer.NUMCLASSES), this.state.renderer.COLORCODE, this.state.renderer.CLASSIFICATION);\n      //if only the top n classes will be rendered then get the visible value at the boundary\n      if (this.state.renderer.TOPCLASSES < this.state.renderer.NUMCLASSES) {\n        let breaks = this.state.brew.getBreaks();\n        visibleValue = breaks[this.state.renderer.NUMCLASSES - this.state.renderer.TOPCLASSES + 1];\n      }\n      else {\n        visibleValue = 0;\n      }\n      // the rest service sends the data grouped by the 'number', e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      data.forEach((row, index) => {\n        if (sum) { //multi value rendering\n          value = row[0];\n          //for each row add the puids and the color to the expression, e.g. [35,36,37],\"rgba(255, 0, 136,0.1)\"\n          color = this.state.brew.getColorInRange(value);\n          //add the color to the expression - transparent if the value is less than the visible value\n          if (value >= visibleValue) {\n            fill_color_expression.push(row[1], color);\n            fill_outline_color_expression.push(row[1], \"rgba(150, 150, 150, 0.6)\"); //gray outline\n          }\n          else {\n            fill_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n            fill_outline_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n          }\n        }\n        else { //single value rendering\n          fill_color_expression.push(row[1], \"rgba(255, 0, 136,1)\");\n          fill_outline_color_expression.push(row[1], \"rgba(150, 150, 150, 0.6)\"); //gray outline\n        }\n      });\n      // Last value is the default, used where there is no data\n      fill_color_expression.push(\"rgba(0,0,0,0)\");\n      fill_outline_color_expression.push(\"rgba(0,0,0,0)\");\n    }else{\n      fill_color_expression = \"rgba(0, 0, 0, 0)\";\n      fill_outline_color_expression = \"rgba(0, 0, 0, 0)\";\n    }\n    return {fillColor: fill_color_expression, oulineColor: fill_outline_color_expression};\n  }\n  \n  //initialises the fill color expression for matching on attributes values\n  initialiseFillColorExpression(attribute){\n    return [\"match\", [\"get\", attribute]];\n  }\n  \n  //renders the planning units edit layer according to the type of layer and pu status \n  renderPuEditLayer() {\n    let expression;\n    if (this.state.planning_units.length > 0) {\n      //build an expression to get the matching puids with different statuses in the planning units data\n      expression = [\"match\", [\"get\", \"puid\"]];\n      // the rest service sends the data grouped by the status, e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      this.state.planning_units.forEach((row, index) => {\n        var color;\n        //get the status\n        switch (row[0]) {\n          // case 1: //The PU will be included in the initial reserve system but may or may not be in the final solution.\n          //   color = \"rgba(63, 191, 63, 1)\";\n          //   break;\n          case 2: //The PU is fixed in the reserve system (“locked in”). It starts in the initial reserve system and cannot be removed.\n            color = \"rgba(63, 63, 191, 1)\";\n            break;\n          case 3: //The PU is fixed outside the reserve system (“locked out”). It is not included in the initial reserve system and cannot be added.\n            color = \"rgba(191, 63, 63, 1)\";\n            break;\n          default:\n            break;\n        }\n        //add the color to the expression \n        expression.push(row[1], color);\n      });\n      // Last value is the default, used where there is no data - i.e. for all the planning units with a status of 0\n      expression.push(\"rgba(150, 150, 150, 0)\");\n    }\n    else {\n      //there are no statuses apart from the default 0 status so have a single renderer\n      expression = \"rgba(150, 150, 150, 0)\";\n    }\n    //set the render paint property\n    this.map.setPaintProperty(STATUS_LAYER_NAME, \"line-color\", expression);\n    this.map.setPaintProperty(STATUS_LAYER_NAME, \"line-width\", STATUS_LAYER_LINE_WIDTH);\n  }\n\n  //renders the planning units cost layer according to the cost for each planning unit\n  renderPuCostLayer(cost_data) {\n    let expression;\n    if (cost_data.length > 0) {\n      //build an expression to get the matching puids with different costs\n      expression = [\"match\", [\"get\", \"puid\"]];\n      // the rest service sends the data grouped by the cost, e.g. [2000000,[23,34,36,43,98]],[4744616,[16,19]],[4932674,[21,233]]\n      cost_data.forEach((row, index) => {\n        var color;\n        //get the status\n        switch (row[0]) {\n          case 2000000: \n            color = \"rgba(63, 191, 63, 1)\";\n            break;\n          case 4744616: \n            color = \"rgba(63, 63, 191, 1)\";\n            break;\n          case 4932674: \n            color = \"rgba(191, 63, 63, 1)\";\n            break;\n          default:\n            color = \"rgba(191, 63, 63, 0)\";\n            break;\n        }\n        //add the color to the expression \n        expression.push(row[1], color);\n      });\n      // Last value is the default\n      expression.push(\"rgba(150, 150, 150, 0)\");\n    }\n    else {\n      //there are no costs apart from the default 0 status so have a single renderer\n      expression = \"rgba(150, 150, 150, 0.7)\";\n    }\n    //set the render paint property\n    this.map.setPaintProperty(COSTS_LAYER_NAME, \"fill-color\", expression);\n    // this.map.setPaintProperty(COSTS_LAYER_NAME, \"fill-outline-color\", STATUS_LAYER_LINE_WIDTH);\n  }\n\n  mouseMove(e) {\n    //hide the popup feature list if it is visible\n    if (this.state.puFeatures && this.state.puFeatures.length > 0) this.setState({puFeatures:[]});\n    //get the features under the mouse\n    var features = this.map.queryRenderedFeatures(e.point, { layers: [RESULTS_LAYER_NAME] });\n    //see if there are any features under the mouse\n    if (features.length) {\n      //set the location for the popup\n      if (!this.state.active_pu || (this.state.active_pu && this.state.active_pu.puid !== features[0].properties.puid)) this.setState({ popup_point: e.point });\n      //get the properties from the vector tile\n      let vector_tile_properties = features[0].properties;\n      //get the properties from the marxan results - these will include the number of solutions that that planning unit is found in\n      let marxan_results = this.runMarxanResponse && this.runMarxanResponse.ssoln ? this.runMarxanResponse.ssoln.filter(item => item[1].indexOf(vector_tile_properties.puid) > -1)[0] : {};\n      if (marxan_results) {\n        //convert the marxan results from an array to an object\n        // let marxan_results_dict = { \"puid\": vector_tile_properties.puid, \"Number\": marxan_results[0] };\n        //combine the 2 sets of properties\n        // let active_pu = Object.assign(marxan_results_dict, vector_tile_properties);\n        //set the state to re-render the popup\n        // this.setState({ active_pu: active_pu });\n      }\n      else {\n        this.hidePopup();\n      }\n    }\n    else {\n      this.hidePopup();\n    }\n  }\n\n  hidePopup() {\n    this.setState({ active_pu: undefined });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///MAP INSTANTIATION, LAYERS ADDING/REMOVING AND INTERACTION\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //instantiates the mapboxgl map\n  createMap(url){\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: url,\n      center: [0, 0],\n      zoom: 2\n    });\n    //add event handlers for the load and error events\n    this.map.on(\"load\", this.mapLoaded.bind(this));\n    this.map.on(\"error\", this.mapError.bind(this));\n    this.map.on(\"click\", this.mapClick.bind(this));\n    this.map.on('mouseenter', WDPA_LAYER_NAME, this.mouseEnterPA.bind(this));\n    this.map.on('mouseleave', WDPA_LAYER_NAME, this.mouseLeavePA.bind(this,2500));\n  }\n  mouseEnterPA(e) {\n    this.map.getCanvas().style.cursor = 'pointer';\n    var coordinates = e.lngLat;\n    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n      coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n    }\n    this.showProtectedAreasPopup(e.features, e);\n  }\n\n mouseLeavePA(ms, e) {\n    setTimeout(()=>{\n      if (!this.timerCancelled){\n        this.map.getCanvas().style.cursor = '';\n        this.setState({paFeatures:[]});\n      }\n    }, ms);            \n  }\n\n  cancelTimer(e){\n    this.timerCancelled = true;  \n  }\n  \n  startTimer(e){\n    this.timerCancelled = false;  \n    this.mouseLeavePA(5);\n  }\n  \n  //shows the list of protected areas that the user is mousing over\n  showProtectedAreasPopup(features, e){\n    let paFeatures =[];\n    let wdpaIds = [];\n    features.forEach((feature) => {\n      //to get unique protected areas\n      if (wdpaIds.indexOf(feature.properties.wdpaid) < 0){\n         paFeatures.push(feature.properties);\n         wdpaIds.push(feature.properties.wdpaid);\n      }\n    });  \n    this.setState({paFeatures: paFeatures, popup_point: e.point});\n  }\n\n  mapLoaded(e) {\n    // this.map.addControl(new mapboxgl.FullscreenControl(), 'bottom-right'); // currently full screen hides the info panel and setting position:absolute and z-index: 10000000000 doesnt work properly\n    this.map.addControl(new mapboxgl.ScaleControl());\n    this.map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');\n    this.map.addControl(new HomeButton());\n    //create the draw controls for the map\n    this.mapboxDrawControls = new MapboxDraw({\n      displayControlsDefault: false,\n      controls: {\n        polygon: true,\n        trash: true\n      },\n      defaultMode: 'draw_polygon'\n    });\n    this.map.on(\"mousemove\", this.mouseMove.bind(this));\n    this.map.on(\"moveend\", (evt) => {\n      if (this.state.clumpingDialogOpen) this.updateMapCentreAndZoom(); //only update the state if the clumping dialog is open\n    });\n    this.map.on('draw.create', this.polygonDrawn.bind(this));\n  }\n\n  updateMapCentreAndZoom(){\n    this.setState({mapCentre: this.map.getCenter(), mapZoom: this.map.getZoom()}); \n  }\n\n  //catch all event handler for map errors\n  mapError(e){\n    var message = \"\";\n    switch (e.error.message) {\n      case 'Not Found':\n        message = \"The tileset '\" + e.source.url + \"' was not found\";\n        break;\n      case \"Bad Request\":\n        message = \"The tileset from source '\" + e.sourceId + \"' was not found. See <a href='\" + ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\";\n        break;\n      default:\n        message = e.error.message;\n        break;\n    }\n    if (message!==\"http status 200 returned without content.\"){\n      this.setSnackBar(\"MapError: \" + message);\n      console.error(message);\n    }  \n  }\n  \n  //\n  mapClick(e){\n    if ((!this.state.puEditing)&&(!this.map.getSource('mapbox-gl-draw-cold'))){ //if the user is not editing planning units or creating a new feature then show what features were in the planning unit for the clicked point\n      var features = this.map.queryRenderedFeatures(e.point, { layers: [RESULTS_LAYER_NAME] });\n      //set the popup point\n      this.setState({ popup_point: e.point });\n      //see if there are any planning unit features under the mouse\n      if (features.length && features[0].properties.puid) this.getPUFeatureList(features[0].properties.puid);\n    }\n  }\n  \n  //gets a list of features for the planning unit\n  getPUFeatureList(puid){\n    this._get(\"getPUSpeciesList?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&puid=\" + puid).then((response) => {\n      this.setState({puFeatures: response.data});\n    });\n  }\n  \n  //gets a Mapbox Style Specification JSON object from the passed ESRI style endpoint\n  getESRIStyle(styleUrl){\n    return new Promise((resolve, reject) => {\n      fetch(styleUrl) //fetch the style json\n        .then(response => {\n          return response.json()\n            .then(style => {\n              // next fetch metadata for the raw tiles\n              const TileJSON = style.sources.esri.url;\n              fetch(TileJSON)\n                .then(response => {\n                    return response.json()\n                    .then(metadata => {\n                      let tilesurl = (metadata.tiles[0].substr(0,1) === \"/\") ? TileJSON + metadata.tiles[0] : TileJSON + '/' + metadata.tiles[0];\n                      style.sources.esri = {\n                        type: 'vector',\n                        scheme: 'xyz',\n                        tilejson: metadata.tilejson || '2.0.0',\n                        format: (metadata.tileInfo && metadata.tileInfo.format) || 'pbf',\n                        /* mapbox-gl-js does not respect the indexing of esri tiles because we cache to different zoom levels depending on feature density, in rural areas 404s will still be encountered. more info: https://github.com/mapbox/mapbox-gl-js/pull/1377*/\n                        // index: metadata.tileMap ? style.sources.esri.url + '/' + metadata.tileMap : null,\n                        maxzoom: 15,  \n                        tiles: [\n                          tilesurl\n                        ],\n                        description: metadata.description,\n                        name: metadata.name\n                      };\n                      resolve(style);\n                    });\n                });\n            });\n        });\n    });\n  }\n\n  //sets the basemap\n  setBasemap(basemap){\n    return new Promise((resolve, reject) => {\n      //change the state\n      this.setState({basemap: basemap.name});\n      //get a valid map style\n      this.getValidStyle(basemap).then((style)=>{\n        //load the style\n        this.loadMapStyle(style).then((evt) => {\n          //add the WDPA layer \n          this.addWDPASource();\n          this.addWDPALayer();\n          //add the planning unit layers (if a project has already been loaded)\n          if (this.state.tileset) {\n            this.addPlanningGridLayers(this.state.tileset);\n            //get the results, if any\n            this.getResults(this.state.owner, this.state.project);\n            //filter the wdpa vector tiles\n            this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n            //turn on/off layers depending on which tab is selected\n            if (this.state.activeTab === \"planning_units\") this.pu_tab_active();\n            resolve();\n          }else{\n            resolve();\n          }\n        });\n      });\n    });\n  }\n\n  //gets the style JSON either as a valid TileJSON object or as a url to a valid TileJSON object\n  getValidStyle(basemap){\n    return new Promise((resolve, reject) => {\n      if (basemap.provider !== 'esri'){ // the style is a url - just return the url\n        resolve(MAPBOX_STYLE_PREFIX + basemap.id);\n      }else{ //the style json will be loaded dynamically from an esri endpoint and parsed to produce a valid TileJSON object\n        this.getESRIStyle(basemap.id).then((styleJson)=>{\n          resolve(styleJson);\n        });  \n      }\n    });\n  }\n  \n  //loads the maps style using either a url to a Mapbox Style Specification file or a JSON object\n  loadMapStyle(style){\n    return new Promise((resolve, reject) => {\n      if (!this.map) {\n        this.createMap(style);\n      }else{\n        //request the style\n        this.map.setStyle(style, {diff:false});\n      }\n      this.map.on('style.load', (evt) => {\n        resolve(\"Map style loaded\");\n      });\n    });\n  }\n  \n  //called when the planning grid layer has changed, i.e. the project has changed\n  changePlanningGrid(tilesetid) {\n    return new Promise((resolve, reject) => {\n      //get the tileset metadata\n      this.getMetadata(tilesetid).then((tileset) => {\n        //remove the results layer, planning unit layer etc.\n        this.removePlanningGridLayers();\n        //add the results layer, planning unit layer etc.\n        this.addPlanningGridLayers(tileset);\n        //zoom to the layers extent\n        if (tileset.bounds != null) zoomToBounds(this.map, tileset.bounds);\n        //set the state\n        this.setState({ tileset: tileset });\n        //filter the wdpa vector tiles as the map doesn't respond to state changes\n        this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n        resolve();\n      }).catch((error) => {\n        this.setSnackBar(error);\n        reject(error);\n      });\n    });\n  }\n\n  //gets all of the metadata for the tileset\n  getMetadata(tilesetId) {\n    return new Promise((resolve, reject) => {\n      fetch(\"https://api.mapbox.com/v4/\" + tilesetId + \".json?secure&access_token=\" + window.MBAT_PUBLIC)\n      .then(response => response.json())\n      .then((response2) => {\n        if ((response2.message != null) && (response2.message.indexOf('does not exist') > 0)){\n          reject(\"The tileset '\" + tilesetId + \"' was not found. See <a href='\" + ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\");\n        }else{\n          resolve(response2);\n        }\n      });\n    });\n  }\n\n  //adds the results, planning unit, planning unit edit etc layers to the map\n  addPlanningGridLayers(tileset) {\n    var beforeLayer = (this.state.basemap === \"North Star\" ? \"\" : \"\");\n    //add the source for the planning unit layers\n    this.map.addSource(PLANNING_UNIT_SOURCE_NAME,{\n        'type': \"vector\",\n        'url': \"mapbox://\" + tileset.id\n      }\n    );\n    //add the results layer\n    this.map.addLayer({\n      'id': RESULTS_LAYER_NAME,\n      'type': \"fill\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(0, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(0, 0, 0, 0)\"\n      }\n    }, beforeLayer);\n    //set the result layer in app state so that it can update the Legend component and its opacity control\n    this.setState({resultsLayer: this.map.getLayer(RESULTS_LAYER_NAME)});\n    //add the planning unit layer \n    this.map.addLayer({\n      'id': PU_LAYER_NAME,\n      'type': \"fill\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(0, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(150, 150, 150, \" + PU_LAYER_OPACITY + \")\"\n      }\n    }, beforeLayer);\n    //add the planning units manual edit layer - this layer shows which individual planning units have had their status changed\n    this.map.addLayer({\n      'id': STATUS_LAYER_NAME,\n      'type': \"line\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'line-color': \"rgba(150, 150, 150, 0)\",\n        'line-width': STATUS_LAYER_LINE_WIDTH\n      }\n    }, beforeLayer);\n    //add the planning units costs layer\n    this.map.addLayer({\n      'id': COSTS_LAYER_NAME,\n      'type': \"fill\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(255, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(150, 150, 150, 0)\"\n      }\n    }, beforeLayer);\n    //add the puvspr planning unit layer - this layer shows the planning unit distribution of a feature from the puvspr file\n    this.map.addLayer({\n      'id': PUVSPR_LAYER_NAME,\n      'type': \"line\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'line-color': \"rgba(255, 255, 255, 1)\",\n        'line-width': PUVSPR_LAYER_LINE_WIDTH\n      }\n    }, beforeLayer);\n  }\n\n  removePlanningGridLayers() {\n    let layers = this.map.getStyle().layers;\n    //get the dynamically added layers\n    let dynamicLayers = layers.filter((item) => {\n      return (item.source === PLANNING_UNIT_SOURCE_NAME);\n    });\n    //remove them from the map\n    dynamicLayers.forEach((item) => {\n      this.map.removeLayer(item.id);\n    });\n    //remove the sources if present\n    if (this.map.getSource(PLANNING_UNIT_SOURCE_NAME) !== undefined) this.map.removeSource(PLANNING_UNIT_SOURCE_NAME);\n  }\n  \n  //adds the WDPA vector tile layer source - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPASource(){\n    //add the source for the wdpa\n    let yr = this.state.marxanServer.wdpa_version.substr(-4); //get the year from the wdpa_version\n    let attribution = \"IUCN and UNEP-WCMC (\" + yr + \"), The World Database on Protected Areas (WDPA) \" + this.state.marxanServer.wdpa_version + \", Cambridge, UK: UNEP-WCMC. Available at: <a href='http://www.protectedplanet.net'>www.protectedplanet.net</a>\";\n    let tiles = [window.WDPA.tilesUrl + \"layer=marxan:\" + this.wdpa_vector_tile_layer + \"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}\"];\n    this.setState({wdpaAttribution: attribution});\n    this.map.addSource(WDPA_SOURCE_NAME,{\n        \"attribution\": attribution,\n        \"type\": \"vector\",\n        \"tiles\": tiles \n      }\n    ); \n  }\n  \n  //adds the WDPA vector tile layer - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPALayer(){\n    this.map.addLayer({\n      \"id\": WDPA_LAYER_NAME,\n      \"type\": \"fill\",\n      \"source\": WDPA_SOURCE_NAME,\n      \"source-layer\": this.wdpa_vector_tile_layer,\n      \"layout\": {\n        \"visibility\": \"visible\"\n      },\n      \"filter\": [\"==\", \"wdpaid\", -1],\n      \"paint\": {\n        \"fill-color\": {\n          \"type\": \"categorical\",\n          \"property\": \"marine\",\n          \"stops\": [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"]\n          ]\n        },\n        \"fill-outline-color\": {\n          \"type\": \"categorical\",\n          \"property\": \"marine\",\n          \"stops\": [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"]\n          ]\n        },\n        \"fill-opacity\": this.state.wdpa_layer_opacity\n      }\n    });\n    //set the wdpa layer in app state so that it can update the Legend component and its opacity control\n    this.setState({wdpaLayer: this.map.getLayer(WDPA_LAYER_NAME)});\n  }\n  \n  showLayer(id) {\n    if (this.map&&this.map.getLayer(id)) this.map.setLayoutProperty(id, 'visibility', 'visible');\n  }\n  hideLayer(id) {\n    if (this.map&&this.map.getLayer(id)) this.map.setLayoutProperty(id, 'visibility', 'none');\n  }\n\n  isLayerVisible(layername){\n    return (this.map && this.map.getLayer(layername) && this.map.getLayoutProperty(layername, 'visibility') === 'visible');\n  }\n  \n  //changes the layers opacity\n  changeOpacity(layerId, opacity){\n    if (this.map && this.map.getLayer(layerId)){\n      this.map.setPaintProperty(layerId, 'fill-opacity', opacity);\n      //set the state\n      if (layerId === RESULTS_LAYER_NAME) this.setState({results_layer_opacity: opacity});\n      if (layerId === WDPA_LAYER_NAME) this.setState({wdpa_layer_opacity: opacity});\n    }\n  }\n\n\n  toggleCosts(show){\n    //show/hide the planning units cost layer \n    if (show){\n      this.getPlanningUnitsCostData().then((cost_data)=>{\n        this.renderPuCostLayer(cost_data);\n        this.showLayer(COSTS_LAYER_NAME);\n      })\n    }else{\n      this.hideLayer(COSTS_LAYER_NAME);\n    }\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///ACTIVATION/DEACTIVATION OF TABS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //fired when the projects tab is selected\n  project_tab_active() {\n    this.setState({ activeTab: \"project\" });\n    this.pu_tab_inactive();\n  }\n\n  //fired when the features tab is selected\n  features_tab_active() {\n    if (this.state.activeTab !== \"features\"){\n      this.setState({ activeTab: \"features\" });\n      //render the sum solution map\n      // this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //hide the planning unit layers\n      this.pu_tab_inactive();\n    }\n  }\n\n  //fired when the planning unit tab is selected\n  pu_tab_active() {\n    this.setState({ activeTab: \"planning_units\" });\n    //set a flag to capture if the outlined planning units layer needs to be reshown when switching back to any other tab\n    this.reinstatePuvsprLayer = this.isLayerVisible(PUVSPR_LAYER_NAME);\n    //hide the outlined planning units layer\n    this.hideLayer(PUVSPR_LAYER_NAME);\n    //show the planning units layer \n    this.showLayer(PU_LAYER_NAME);\n    //hide the results layer\n    this.changeOpacity(RESULTS_LAYER_NAME, RESULTS_LAYER_FILL_OPACITY_INACTIVE);\n    //store the values for the result layers opacities\n    this.previousResultsOpacity = this.state.results_layer_opacity;\n    //show the planning units status layer \n    this.showLayer(STATUS_LAYER_NAME);\n    //render the planning units status layer_edit layer\n    this.renderPuEditLayer(STATUS_LAYER_NAME);\n  }\n\n  //fired whenever another tab is selected\n  pu_tab_inactive() {\n    //reinstate the outlined planning units layer if needs be\n    if (this.reinstatePuvsprLayer) this.showLayer(PUVSPR_LAYER_NAME);\n    //change the opacity on the results layer to back to what it was\n    this.changeOpacity(RESULTS_LAYER_NAME, (this.previousResultsOpacity) ? this.previousResultsOpacity : RESULTS_LAYER_FILL_OPACITY_ACTIVE);\n    //hide the planning units layer \n    this.hideLayer(PU_LAYER_NAME);\n    //hide the planning units edit layer \n    this.hideLayer(STATUS_LAYER_NAME);\n  }\n\n  //fired when the legend tab is selected\n  legend_tab_active() {\n    this.setState({activeResultsTab: \"legend\" });\n  }\n\n  //fired when the solutions tab is selected\n  solutions_tab_active() {\n    this.setState({activeResultsTab: \"solutions\" });\n  }\n\n  //fired when the log tab is selected\n  log_tab_active() {\n    this.setState({activeResultsTab: \"log\" });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///PLANNING UNIT WORKFLOW AND FUNCTIONS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  startPuEditSession() {\n    //set the state\n    this.setState({puEditing: true});\n    //set the cursor to a crosshair\n    this.map.getCanvas().style.cursor = \"crosshair\";\n    //add the left mouse click event to the planning unit layer\n    this.onClickRef = this.moveStatusUp.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"click\", PU_LAYER_NAME, this.onClickRef); \n    //add the mouse right click event to the planning unit layer \n    this.onContextMenu = this.resetStatus.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"contextmenu\", PU_LAYER_NAME, this.onContextMenu); \n  }\n\n  stopPuEditSession() {\n    //set the state\n    this.setState({puEditing: false});\n    //reset the cursor\n    this.map.getCanvas().style.cursor = \"pointer\";\n    //remove the mouse left click event\n    this.map.off(\"click\", PU_LAYER_NAME, this.onClickRef);\n    //remove the mouse right click event\n    this.map.off(\"contextmenu\", PU_LAYER_NAME, this.onContextMenu);\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n\n  //clears all of the manual edits from the pu edit layer (except the protected area units)\n  clearManualEdits(){\n    //clear all the planning unit statuses\n      this.setState({ planning_units: [] }, () => {\n        //get the puids for the current iucn category\n        let puids = this.getPuidsFromIucnCategory(this.state.metadata.IUCN_CATEGORY);\n        //update the planning units\n        this.updatePlanningUnits([], puids);\n      });\n  }\n  \n  //sends a list of puids that should be excluded from the run to upddate the pu.dat file\n  updatePuDatFile() {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", this.state.project);\n    //add the planning unit manual exceptions\n    if (this.state.planning_units.length > 0) {\n      this.state.planning_units.forEach((item) => {\n        //get the name of the status parameter\n        let param_name = \"status\" + item[0];\n        //add the planning units\n        formData.append(param_name, item[1]);\n      });\n    }\n    //post to the server\n    this._post(\"updatePUFile\", formData).then((response) => {\n      //do something\n    });\n  }\n\n  //fired when the user left clicks on a planning unit to move its status up\n  moveStatusUp(e) {\n    this.changeStatus(e, \"up\");\n  }\n\n  //fired when the user left clicks on a planning unit to reset its status \n  resetStatus(e) {\n    this.changeStatus(e, \"reset\");\n  }\n\n  changeStatus(e, direction) {\n    //get the feature that the user has clicked \n    var features = this.map.queryRenderedFeatures(e.point, { layers: [PU_LAYER_NAME] });\n    //get the featureid\n    if (features.length > 0) {\n      //get the puid\n      let puid = features[0].properties.puid;\n      //get its current status \n      let status = this.getStatusLevel(puid);\n      //get the next status level\n      let next_status = this.getNextStatusLevel(status, direction);\n      //copy the current planning unit statuses \n      let statuses = this.state.planning_units;\n      //if the planning unit is not at level 0 (in which case it will not be in the planning_units state) - then remove it from the puids array for that status\n      if (status !== 0) this.removePuidFromArray(statuses, status, puid);\n      //add it to the new status array\n      if (next_status !== 0) this.addPuidToArray(statuses, next_status, puid);\n      //set the state\n      this.setState({ planning_units: statuses });\n      //re-render the planning unit edit layer\n      this.renderPuEditLayer();\n    }\n  }\n\n  getStatusLevel(puid) {\n    //iterate through the planning unit statuses to see which status the clicked planning unit belongs to, i.e. 1, 2 or 3\n    let status_level = 0; //default level as the getPlanningUnits REST call only returns the planning units with non-default values\n    PLANNING_UNIT_STATUSES.forEach((item) => {\n      let planning_units = this.getPlanningUnitsByStatus(item);\n      if (planning_units.indexOf(puid) > -1) {\n        status_level = item;\n      }\n    });\n    return status_level;\n  }\n\n  //gets the array index position for the passed status in the planning_units state\n  getStatusPosition(status) {\n    let position = -1;\n    this.state.planning_units.forEach((item, index) => {\n      if (item[0] === status) position = index;\n    });\n    return position;\n  }\n\n  //returns the planning units with a particular status, e.g. 1,2,3 \n  getPlanningUnitsByStatus(status) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    //get the array of planning units\n    let returnValue = (position > -1) ? this.state.planning_units[position][1] : [];\n    return returnValue;\n  }\n  \n  //returns the next status level for a planning unit depending on the direction\n  getNextStatusLevel(status, direction) {\n    let nextStatus;\n    switch (status) {\n      case 0:\n        nextStatus = (direction === \"up\") ? 3 : 0;\n        break;\n      case 1: //no longer used\n        nextStatus = (direction === \"up\") ? 0 : 0;\n        break;\n      case 2:\n        nextStatus = (direction === \"up\") ? 0 : 0; //used to be 1 going down\n        break;\n      case 3:\n        nextStatus = (direction === \"up\") ? 2 : 0;\n        break;\n      default:\n        break;\n    }\n    return nextStatus;\n  }\n\n  //removes in individual puid value from an array of puid statuses \n  removePuidFromArray(statuses, status, puid) {\n    return this.removePuidsFromArray(statuses, status, [puid]);\n  }\n\n  addPuidToArray(statuses, status, puid) {\n    return this.appPuidsToPlanningUnits(statuses, status, [puid]);\n  }\n\n  //adds all the passed puids to the planning_units state\n  appPuidsToPlanningUnits(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units, i.e. the index\n    let position = this.getStatusPosition(status);\n    if (position === -1) {\n      //create a new status and empty puid array\n      statuses.push([status, []]);\n      position = statuses.length - 1;\n    }\n    //add the puids to the puid array ensuring that they are unique\n    statuses[position][1] = Array.from(new Set(statuses[position][1].concat(puids)));\n    return statuses;\n  }\n\n  //removes all the passed puids from the planning_units state\n  removePuidsFromArray(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    if (position > -1) {\n      let puid_array = statuses[position][1];\n      let new_array = puid_array.filter((item) => {\n        return puids.indexOf(item) < 0;\n      }); \n      statuses[position][1] = new_array;\n      //if there are no more items in the puid array then remove it\n      if (new_array.length === 0) statuses.splice(position, 1);\n    }\n    return statuses;\n  }\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //ROUTINES FOR WORKING WITH COSTS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  getPlanningUnitsCostData(){\n    return new Promise((resolve, reject) => {\n      this._get(\"getPlanningUnitsCostData?user=\" + this.state.owner + \"&project=\" + this.state.project).then((response) => {\n        resolve(response.data);\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //ROUTINES FOR CREATING A NEW PROJECT AND PLANNING UNIT GRIDS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //previews the planning grid\n  previewPlanningGrid(planning_grid_metadata){\n    this.setState({planning_grid_metadata:planning_grid_metadata});\n    this.openPlanningGridDialog();\n  }\n  \n  //creates a new planning grid unit \n  createNewPlanningUnitGrid(iso3, domain, areakm2, shape) {\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this._ws(\"createPlanningUnitGrid?iso3=\" + iso3 + \"&domain=\" + domain + \"&areakm2=\" + areakm2 + \"&shape=\" + shape, this.wsMessageCallback.bind(this)).then((message) => {\n        this.newPlanningGridCreated(message).then(()=>{\n          this.closeNewPlanningGridDialog();\n          //websocket has finished \n          resolve(message);\n        });\n      }).catch((error) => {\n        //do something\n        reject(error);\n      });\n    });\n  }\n\n  //imports a zipped shapefile as a new planning grid\n  importPlanningUnitGrid(zipFilename, alias, description){\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this.log({method:'importPlanningUnitGrid',status:'Started',info:\"Importing planning grid..\"});\n      this.importZippedShapefileAsPu(zipFilename, alias, description).then((response) => {\n        this.log({method:'importPlanningUnitGrid',status:'Finished',info: response.info});\n        this.newPlanningGridCreated(response).then(()=> {\n          this.closeImportPlanningGridDialog();\n        });\n      }).catch((error) => { //importZippedShapefileAsPu error\n        this.deletePlanningUnitGrid(alias, true);\n        this.log({method:'importPlanningUnitGrid',status:'Finished',error:error});\n        reject(error);\n      });\n    });\n  }\n  \n  //called when a new planning grid has been created\n  newPlanningGridCreated(response){\n    return new Promise((resolve, reject) => {\n      //start polling to see when the upload is done\n      this.pollMapbox(response.uploadId).then((response) => {\n        //update the planning unit items\n        this.getPlanningUnitGrids();\n        resolve(\"Planning grid created\");\n      });\n    });\n  }\n\n  //deletes a planning unit grid\n  deletePlanningUnitGrid(feature_class_name, silent = false){\n    if (silent){ //used to roll back failed imports of planning grids\n      this.deletePlanningGrid(feature_class_name, true);\n    }else{\n      //get a list of the projects for the planning grid\n      this._get(\"listProjectsForPlanningGrid?feature_class_name=\" + feature_class_name).then((response)=>{\n        //if the planning grid is not being used then delete it\n        if (response.projects.length === 0){\n          this.deletePlanningGrid(feature_class_name, false);\n        }else{\n          //show the failed to delete dialog\n          this.setState({failedToDeleteProjects: response.projects, deleteWhat: 'planning grid'}, ()=> {\n            this.openFailedToDeleteDialog();\n          });\n        }\n      });\n    }\n  }\n  \n  //deletes a planning grid\n  deletePlanningGrid(feature_class_name, silent){\n      this._get(\"deletePlanningUnitGrid?planning_grid_name=\" + feature_class_name).then((response) => {\n        //update the planning unit grids\n        this.getPlanningUnitGrids();\n        this.setSnackBar(response.info, silent);  \n      }).catch((error) => {\n        //additional stuff\n      });\n  }\n  \n  getCountries() {\n    this._get(\"getCountries\").then((response) => {\n      this.setState({ countries: response.records });\n    });\n  }\n\n  //uploads the named feature class to mapbox on the server\n  uploadToMapBox(feature_class_name, mapbox_layer_name) {\n    return new Promise((resolve, reject) => {\n      this._get(\"uploadTilesetToMapBox?feature_class_name=\" + feature_class_name + \"&mapbox_layer_name=\" + mapbox_layer_name, 300000).then((response) => {\n        this.setState({loading: true});\n        //poll mapbox to see when the upload has finished\n        this.pollMapbox(response.uploadid).then((response2) => {\n          resolve(response2);\n        });\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //polls mapbox to see when an upload has finished - returns as promise\n  pollMapbox(uploadid){\n    this.setState({uploading: true});\n    this.log({info: 'Uploading to Mapbox..',status:'Uploading'});\n    return new Promise((resolve, reject) => {\n      if (uploadid === '0'){ \n        this.log({info: 'Tileset already exists on Mapbox',status:'UploadComplete'});\n        //reset state\n        this.setState({uploading: false});\n        resolve(\"Uploaded to Mapbox\");\n      }else{\n        let timer = setInterval(() => {\n          fetch(\"https://api.mapbox.com/uploads/v1/\" + MAPBOX_USER + \"/\" + uploadid + \"?access_token=\" + window.MBAT)\n            .then(response => response.json())\n            .then((response) => {\n              if (response.complete){\n                resolve(\"Uploaded to Mapbox\");\n                this.log({info: 'Uploaded',status:'UploadComplete'});\n                //clear the timer\n                let _timer = timers.find(timer => timer.uploadid === uploadid);\n                clearInterval(_timer.timer);\n                //remove the timer from the timers array\n                timers = timers.filter(timer => timer.uploadid !== uploadid);\n                //reset state\n                if (timers.length === 0) this.setState({uploading: false});\n              }\n            })\n            .catch((error) => {\n              this.setState({uploading: false});\n              reject(error);\n            });\n        }, 3000);\n        timers.push({uploadid: uploadid, timer: timer});\n      }\n    });\n  }\n  \n  closeWelcomeDialog(){\n    this.setState({ welcomeDialogOpen: false });\n  }\n  openWelcomeDialog(){\n    this.parseNotifications();\n    this.setState({ welcomeDialogOpen: true });\n  }\n  openFeaturesDialog(showClearSelectAll) {\n    this.setState({ featuresDialogOpen: true, addingRemovingFeatures: showClearSelectAll});\n    if (showClearSelectAll) this.getSelectedFeatureIds();\n  }\n  closeFeaturesDialog() {\n    this.setState({ featuresDialogOpen: false, newFeaturePopoverOpen: false, importFeaturePopoverOpen: false });\n  }\n  openNewFeatureDialog(){\n    this.setState({ NewFeatureDialogOpen: true });\n  }\n  closeNewFeatureDialog() {\n    this.setState({ NewFeatureDialogOpen: false });\n    //finalise digitising \n    this.finaliseDigitising();\n  }\n  openImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: true});\n  }\n  closeImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: false});\n  }\n  openImportGBIFDialog() {\n    this.setState({ importGBIFDialogOpen: true});\n  }\n  closeImportGBIFDialog() {\n    this.setState({ importGBIFDialogOpen: false});\n  }\n  openPlanningGridsDialog(){\n    this.setState({planningGridsDialogOpen: true});\n  }\n  closePlanningGridsDialog(){\n    this.setState({planningGridsDialogOpen: false});\n  }\n  openPlanningGridDialog(){\n    this.setState({planningGridDialogOpen: true});\n  }\n  closePlanningGridDialog(){\n    this.setState({planningGridDialogOpen: false});\n  }\n  openFeatureDialog(){\n    this.setState({featureDialogOpen: true});\n  }\n  closeFeatureDialog(){\n    this.setState({featureDialogOpen: false});\n  }\n  showNewFeaturePopover(){\n    this.setState({ newFeaturePopoverOpen: true });\n  }\n  hideNewFeaturePopover(){\n    this.setState({ newFeaturePopoverOpen: false });\n  }\n  showImportFeaturePopover(){\n    this.setState({ importFeaturePopoverOpen: true });\n  }\n  hideImportFeaturePopover(){\n    this.setState({ importFeaturePopoverOpen: false });\n  }\n  openCostsDialog() {\n    this.setState({ CostsDialogOpen: true });\n  }\n  closeCostsDialog() {\n    this.setState({ CostsDialogOpen: false });\n  }\n  openWDPAUpdateDialog(){\n    this.setState({ updateWDPADialogOpen: true });\n  }\n  closeWDPAUpdateDialog(){\n    this.setState({ updateWDPADialogOpen: false });\n  }\n  setNewFeatureDatasetFilename(filename) {\n    this.setState({ featureDatasetFilename: filename });\n  }\n  //used by the import wizard to import a users zipped shapefile as the planning units\n  importZippedShapefileAsPu(zipname, alias, description) {\n    //the zipped shapefile has been uploaded to the MARXAN folder - it will be imported to PostGIS and a record will be entered in the metadata_planning_units table\n    return this._get(\"importPlanningUnitGrid?filename=\" + zipname + \"&name=\" + alias + \"&description=\" + description);\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // MANAGING INTEREST FEATURES SECTION\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //updates the properties of a feature and then updates the features state\n  updateFeature(feature, newProps){\n    let features = this.state.allFeatures;\n    //get the position of the feature \n    var index = features.findIndex((element) => { return element.id === feature.id; });\n    if (index!==-1) {\n      Object.assign(features[index], newProps);\n      //update allFeatures and projectFeatures with the new value\n      this.setFeaturesState(features);\n    }\n  }\n\n  //gets the ids of the selected features\n  getSelectedFeatureIds(){\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      if (feature.selected) ids.push(feature.id);\n    });\n    this.setState({selectedFeatureIds: ids});\n  }\n\n  //when a user clicks a feature in the FeaturesDialog\n  clickFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    if (ids.includes(feature.id)){\n      //remove the feature if it is already selected\n      this.removeFeature(feature);\n    }else{\n      //add the feature to the selected feature array\n      this.addFeature(feature);\n    }\n  }\n  \n  //removes a feature from the selectedFeatureIds array\n  removeFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    //remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n    ids = ids.filter((value, index, arr) => {return value !== feature.id});\n    return new Promise((resolve, reject) => {\n      this.setState({ selectedFeatureIds: ids }, () => {\n        resolve(\"Feature removed\");  \n      });\n    });\n  }\n  \n  //adds a feature to the selectedFeatureIds array\n  addFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    //add the feautre to the selected feature array\n    ids.push(feature.id);\n    this.setState({ selectedFeatureIds: ids });\n  }\n  \n  //starts a digitising session\n  initialiseDigitising(){\n    //show the digitising controls if they are not already present, mapbox-gl-draw-cold and mapbox-gl-draw-hot\n    if (!this.map.getSource('mapbox-gl-draw-cold')) this.map.addControl(this.mapboxDrawControls);\n  }\n  \n  //finalises the digitising\n  finaliseDigitising(){\n    //hide the drawing controls\n    this.map.removeControl(this.mapboxDrawControls);\n  }\n  //called when the user has drawn a polygon on screen\n  polygonDrawn(evt){\n    //open the new feature dialog for the metadata\n    this.openNewFeatureDialog();\n    //save the feature in a local variable\n    this.digitisedFeatures = evt.features;\n  }\n  \n  //selects all the features\n  selectAllFeatures() {\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      ids.push(feature.id);\n    });\n    this.selectFeatures(ids);\n  }\n\n  //clears all the Conservation features\n  clearAllFeatures() {\n    this.setState({selectedFeatureIds: []});\n  }\n\n  //selects features \n  selectFeatures(ids) {\n    this.setState({selectedFeatureIds: ids});\n  }\n\n  //updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog\n  updateSelectedFeatures(){\n    let allFeatures = this.state.allFeatures;\n    allFeatures.forEach((feature) => {\n      if (this.state.selectedFeatureIds.includes(feature.id)) {\n        Object.assign(feature, {selected: true});\n      }else{\n        if (this.state.metadata.OLDVERSION){\n          //for imported projects we cannot preprocess them any longer as we dont have access to the features spatial data - therefore dont set preprocessed to false or any of the other stats fields\n          Object.assign(feature, {selected: false});\n        }else{\n          Object.assign(feature, {selected: false, preprocessed: false, protected_area: -1, pu_area: -1, pu_count: -1, target_area: -1, occurs_in_planning_grid: false});\n        }\n        //remove the feature layer if it is loaded\n        if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n        //remove the planning unit layer if it is loaded\n        if (feature.feature_puid_layer_loaded) this.toggleFeaturePUIDLayer(feature);\n      }\n    });\n    //when the project features have been saved to state, update the spec.dat file\n    this.setFeaturesState(allFeatures, ()=>{\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile(); \n      //close the dialog\n      this.closeFeaturesDialog();\n    });\n  }\n\n  //updates the target values for all features in the project to the passed value\n  updateTargetValueForFeatures(target_value){\n    let allFeatures = this.state.allFeatures;\n    //iterate through all features\n    allFeatures.forEach((feature) => {\n      Object.assign(feature, {target_value: target_value});\n    });\n    //set the features in app state\n    this.setFeaturesState(allFeatures, ()=> {\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile(); \n    });\n  }\n  \n  //the callback is optional and will be called when the state has updated\n  setFeaturesState(newFeatures, callback){\n    //update allFeatures and projectFeatures with the new value\n    this.setState({ allFeatures: newFeatures, projectFeatures: newFeatures.filter((item) => { return item.selected }) }, callback);\n  }\n  \n  //unselects a single Conservation feature\n  unselectItem(feature) {\n    //remove it from the selectedFeatureIds array\n    this.removeFeature(feature).then(() => {\n      //refresh the selected features\n      this.updateSelectedFeatures();\n    });\n  }\n\n  //previews the feature\n  previewFeature(feature_metadata){\n    this.setState({feature_metadata:feature_metadata});\n    this.openFeatureDialog();\n  }\n\n  //unzips a shapefile on the server\n  unzipShapefile(filename){\n    return new Promise((resolve, reject) => {\n      this._get(\"unzipShapefile?filename=\" + filename).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //deletes a zip file and shapefile (with the *.shp extension) \n  deleteShapefile(zipfile, shapefile){\n    return new Promise((resolve, reject) => {\n      this._get(\"deleteShapefile?zipfile=\" + zipfile + \"&shapefile=\" + shapefile).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //gets a list of fieldnames from the passed shapefile - this must exist in the servers root directory\n  getShapefileFieldnames(filename){\n    return new Promise((resolve, reject) => {\n      this._get(\"getShapefileFieldnames?filename=\" + filename).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //create new features from the already uploaded zipped shapefile \n  importFeatures(zipfile, name, description, shapefile,  spiltfield){\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      let url = (name !== \"\") ? \"importFeatures?zipfile=\" + zipfile + \"&shapefile=\" + shapefile + \"&name=\" + name + \"&description=\" + description : \"importFeatures?zipfile=\" + zipfile + \"&shapefile=\" + shapefile + \"&splitfield=\" + spiltfield;\n      this._ws(url, this.wsMessageCallback.bind(this)).then((message) => {\n        //get the uploadIds\n        let uploadIds = message.uploadIds;\n        //get a promise array to see when all of the uploads are done\n        let promiseArray = [];\n        //iterate through the uploadIds to see when they are done\n        for (var i = 0; i < uploadIds.length; ++i) {\n          promiseArray.push(this.pollMapbox(uploadIds[i]));\n        }\n        //see when they're done\n        Promise.all(promiseArray).then(response => {\n          resolve(\"All features uploaded\");\n        });\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n\n  //import features from GBIF\n  importGBIFData(item){\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      this._ws(\"importGBIFData?taxonKey=\" + item.key + \"&scientificName=\" + item.scientificName, this.wsMessageCallback.bind(this)).then((message) => {\n        //get the uploadId\n        let uploadId = message.uploadId;\n          this.pollMapbox(uploadId).then((response) => {\n            resolve(response);\n          });\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n  \n    //requests matching species names in GBIF\n  gbifSpeciesSuggest(q) {\n    return new Promise((resolve, reject) => {\n      jsonp(\"https://api.gbif.org/v1/species/suggest?q=\" + q + \"&rank=SPECIES\").promise.then((response) => {\n        resolve(response);\n      }, (err) => {\n        reject(err);\n      });\n    });\n  }\n\n  //create the new feature from the feature that has been digitised on the map\n  createNewFeature(name, description){\n    //start the logging\n    this.startLogging();\n    this.log({method:'createNewFeature',status:'Started',info:\"Creating feature..\"});\n    //post the geometry to the server with the metadata\n    let formData = new FormData();\n    formData.append('name', name);\n    formData.append('description', description);\n    //convert the coordinates into a linestring to create the polygon in postgis\n    let coords = this.digitisedFeatures[0].geometry.coordinates[0].map((coordinate) => {\n      return coordinate[0] + \" \" + coordinate[1];\n    }).join(\",\");\n    formData.append('linestring', \"Linestring(\" + coords + \")\");\n    this._post(\"createFeatureFromLinestring\", formData).then((response) => {\n        this.log({method:'createNewFeature',status:'Finished', info: response.info});\n        //start polling to see when the upload is done\n        this.pollMapbox(response.uploadId).then(() => {\n          this.newFeatureCreated(response.id);\n          //close the dialog\n          this.closeNewFeatureDialog();\n        });\n    }).catch((error) => {\n      this.log({status:'Finished', error: error});\n    });\n  }\n  \n  //gets the new feature information and updates the state\n  newFeatureCreated(id){\n    this.getInterestFeature(id);\n  }\n  \n  getInterestFeature(id) {\n    //load the interest feature from the marxan web database\n    this._get(\"getFeature?oid=\" + id + \"&format=json\").then((response) => {\n      //add the required attributes to use it in Marxan Web\n      this.addFeatureAttributes(response.data[0]);\n      //update the allFeatures array\n      this.addNewFeature(response.data[0]);\n    });\n  }\n\n  //adds a new feature to the allFeatures array\n  addNewFeature(feature){\n    //update the allFeatures array\n    var featuresCopy = this.state.allFeatures;\n    featuresCopy.push(feature);\n    this.setState({allFeatures: featuresCopy});\n  }\n  \n  //attempts to delete a feature - if the feature is in use in a project then it will not be deleted and the list of projects will be shown\n  deleteFeature(feature) {\n    this._get(\"listProjectsForFeature?feature_class_id=\" + feature.id).then((response) => {\n      if (response.projects.length === 0){\n        this._deleteFeature(feature);\n      }else{\n        this.setState({failedToDeleteProjects: response.projects, deleteWhat: 'feature'}, ()=> {\n          this.openFailedToDeleteDialog();\n        });\n      }\n    });\n  }\n\n  //deletes a feature\n  _deleteFeature(feature){\n    this._get(\"deleteFeature?feature_name=\" + feature.feature_class_name).then((response) => {\n      this.setSnackBar(\"Feature deleted\");\n      //remove it from the current project if necessary\n      this.removeFeature(feature);\n      //remove it from the allFeatures array\n      this.removeFeatureFromAllFeatures(feature);\n    });\n  }\n\n  //shows the failed to delete feature dialog\n  showFailedToDeleteDialog(feature, projects){\n    console.log(projects)  ;\n  }\n  \n  //removes a feature from the allFeatures array\n  removeFeatureFromAllFeatures(feature){\n    let featuresCopy = this.state.allFeatures;\n    //remove the feature \n    featuresCopy = featuresCopy.filter((item) => {return item.id !== feature.id});\n    //update the allFeatures state   \n    this.setState({allFeatures: featuresCopy});\n  }\n  \n  //gets all the features \n  getAllFeatures(){\n    return new Promise((resolve, reject) => {\n      this._get(\"getAllSpeciesData\").then((response) => {\n        //set the allfeatures state\n        this.setState({allFeatures: response.data});\n        resolve(\"Features returned\");\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  openFeatureMenu(evt, feature){\n    this.setState({featureMenuOpen: true, currentFeature: feature, menuAnchor: evt.currentTarget});\n  }\n  closeFeatureMenu(evt){\n    this.setState({featureMenuOpen: false});\n  }\n\n  //hides the feature layer\n  hideFeatureLayer(){\n    this.state.projectFeatures.forEach((feature) => {\n      if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n    });\n  }\n  \n  //toggles the feature layer on the map\n  toggleFeatureLayer(feature){\n    if (feature.tilesetid === ''){\n      this.setSnackBar(\"This feature does not have an associated tileset on Mapbox. See <a href='\" + ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\");\n      return;\n    }\n    // this.closeFeatureMenu();\n    let layerName = feature.tilesetid.split(\".\")[1];\n    if (this.map.getLayer(layerName)){\n      this.map.removeLayer(layerName);\n      this.map.removeSource(layerName);\n      this.updateFeature(feature, {feature_layer_loaded: false});\n    }else{\n      this.map.addLayer({\n        'id': layerName,\n        'type': \"fill\",\n        'source': {\n          'type': \"vector\",\n          'url': \"mapbox://\" + feature.tilesetid\n        },\n        'source-layer': layerName,\n        'paint': {\n          'fill-color': feature.color,\n          'fill-opacity': 0.9,\n          'fill-outline-color': \"rgba(0, 0, 0, 0.2)\"\n        }\n      }, PUVSPR_LAYER_NAME); //add it before the layer that shows the planning unit outlines for the feature\n      this.updateFeature(feature, {feature_layer_loaded: true});\n    }\n  }\n  \n  //toggles the feature layer on the map\n  toggleFeaturePUIDLayer(feature){\n    // this.closeFeatureMenu();\n    let layerName = \"puid_\" + feature.id;\n    if (this.map.getLayer(layerName)){\n      this.map.removeLayer(layerName);\n      this.updateFeature(feature, {feature_puid_layer_loaded: false});\n    }else{\n      //get the planning units where the feature occurs\n      this._get(\"getFeaturePlanningUnits?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&oid=\" + feature.id).then((response) => {\n        //ids retrieved - add the layer\n        this.map.addLayer({\n          'id': layerName,\n          'type': \"line\",\n          'source': PLANNING_UNIT_SOURCE_NAME,\n          'source-layer': this.state.tileset.name,\n          \"layout\": {\n            \"visibility\": \"none\"\n          }\n        }); \n        //update the paint property for the layer\n        var line_color_expression = this.initialiseFillColorExpression(\"puid\");\n        response.data.forEach((puid) => {\n            line_color_expression.push(puid, feature.color); \n        });\n        // Last value is the default, used where there is no data\n        line_color_expression.push(\"rgba(0,0,0,0)\");\n        this.map.setPaintProperty(layerName, \"line-color\", line_color_expression);\n        //show the layer\n        this.showLayer(layerName);\n      });\n      this.updateFeature(feature, {feature_puid_layer_loaded: true});\n    }\n  }\n\n  //removes the current feature from the project\n  removeFromProject(feature){\n    this.closeFeatureMenu();\n    this.unselectItem(feature);\n  }\n  \n  //zooms to a features extent\n  zoomToFeature(feature){\n    this.closeFeatureMenu();\n    //transform from BOX(-174.173506487 -18.788241791,-173.86528589 -18.5190063499999) to [[-73.9876, 40.7661], [-73.9397, 40.8002]]\n    let points = feature.extent.substr(4, feature.extent.length-5).replace(/ /g,\",\").split(\",\");\n    //get the points as numbers\n    let nums = points.map((item) => {return Number(item)});\n    //zoom to the feature\n    this.map.fitBounds([[nums[0], nums[1]],[nums[2], nums[3]]], { padding: 100});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// DIALOG OPENING/CLOSING FUNCTIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  showUserMenu(e) {\n    e.preventDefault();\n    this.setState({ userMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideUserMenu(e) {\n    this.setState({ userMenuOpen: false });\n  }\n  showHelpMenu(e) {\n    e.preventDefault();\n    this.setState({ helpMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideHelpMenu(e) {\n    this.setState({ helpMenuOpen: false });\n  }\n  showToolsMenu(e) {\n    e.preventDefault();\n    this.setState({ toolsMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideToolsMenu(e) {\n    this.setState({ toolsMenuOpen: false });\n  }\n  openRegisterDialog() {\n    this.setState({ registerDialogOpen: true });\n  }\n  closeRegisterDialog() {\n    this.setState({ registerDialogOpen: false });\n  }\n  openResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: true });\n  }\n  closeResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: false });\n  }\n  openProjectsDialog() {\n    this.setState({ projectsDialogOpen: true });\n    this.getProjects();\n  }\n  closeProjectsDialog() {\n    this.setState({ projectsDialogOpen: false });\n  }\n  openNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: true });\n  }\n  closeNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: false });\n  }\n  openNewProjectWizardDialog(){\n    this.getCountries();\n    this.setState({ newProjectWizardDialogOpen: true });\n  }\n  closeNewProjectWizardDialog(){\n    this.setState({ newProjectWizardDialogOpen: false });\n  }\n  openNewPlanningGridDialog() {\n    this.getCountries();\n    this.setState({ NewPlanningGridDialogOpen: true });\n  }\n  closeNewPlanningGridDialog() {\n    this.setState({ NewPlanningGridDialogOpen: false });\n  }\n  openImportPlanningGridDialog(){\n    this.setState({ importPlanningGridDialogOpen: true });\n  }\n  closeImportPlanningGridDialog(){\n    this.setState({ importPlanningGridDialogOpen: false });\n  }\n  openInfoDialog() {\n      this.setState({ openInfoDialogOpen: true, featureMenuOpen: false });\n  }\n  closeInfoDialog() {\n      this.setState({ openInfoDialogOpen: false });\n  }\n\n  openUserSettingsDialog() {\n    this.setState({ UserSettingsDialogOpen: true });\n    this.hideUserMenu();\n  }\n\n  closeUserSettingsDialog() {\n    this.setState({ UserSettingsDialogOpen: false });\n  }\n\n  openProfileDialog() {\n    this.setState({ profileDialogOpen: true });\n    this.hideUserMenu();\n  }\n  closeProfileDialog() {\n    this.setState({ profileDialogOpen: false });\n  }\n  \n  openAboutDialog(){\n    this.setState({ aboutDialogOpen: true });\n    this.hideHelpMenu();\n  }\n\n  closeAboutDialog() {\n    this.setState({ aboutDialogOpen: false });\n  }\n  \n  showRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: true });\n  }\n  \n  closeRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: false });\n  }\n\n  openClassificationDialog() {\n    this.setState({ classificationDialogOpen: true });\n  }\n  closeClassificationDialog() {\n    this.setState({ classificationDialogOpen: false });\n  }\n\n  openImportProjectDialog() {\n    this.setState({ importProjectDialogOpen: true });\n  }\n  closeImportDialog() {\n    this.setState({ importProjectDialogOpen: false });\n  }\n  openUsersDialog() {\n    this.getUsers();\n    this.setState({ usersDialogOpen: true });\n  }\n  closeUsersDialog() {\n    this.setState({ usersDialogOpen: false });\n  }\n  closeAlertDialog(){\n    this.setState({alertDialogOpen: false});\n  }\n  hideResults() {\n    this.setState({ resultsPanelOpen: false });\n  }\n  showResults() {\n    this.setState({ resultsPanelOpen: true });\n  }\n  \n  toggleInfoPanel() {\n    this.setState({ infoPanelOpen: !this.state.infoPanelOpen });\n  }\n  toggleResultsPanel() {\n    this.setState({ resultsPanelOpen: !this.state.resultsPanelOpen });\n  }\n  \n  openRunLogDialog(){\n    this.getRunLogs();\n    this.setState({runLogDialogOpen: true});\n  }\n  closeRunLogDialog(){\n    this.setState({runLogDialogOpen: false});\n  }\n  openGapAnalysisDialog(){\n    this.setState({gapAnalysisDialogOpen: true, gapAnalysis: []});\n    this.runGapAnalysis();\n  }\n  closeGapAnalysisDialog(){\n    this.setState({gapAnalysisDialogOpen: false, gapAnalysis: []});\n  }\n  openServerDetailsDialog(){\n    this.setState({serverDetailsDialogOpen: true});\n    this.hideHelpMenu();\n  }\n  closeServerDetailsDialog(){\n    this.setState({serverDetailsDialogOpen: false});\n  }\n  openChangePasswordDialog(){\n    this.hideUserMenu();\n    this.setState({changePasswordDialogOpen: true});\n  }\n  closeChangePasswordDialog(){\n    this.setState({changePasswordDialogOpen: false});\n  }\n  \n  openFailedToDeleteDialog(){\n    this.setState({FailedToDeleteDialogOpen: true});\n  }\n  closeFailedToDeleteDialog(){\n    this.setState({FailedToDeleteDialogOpen: false});\n  }\n  openTargetDialog(){\n    this.setState({targetDialogOpen:true});\n  }\n  closeTargetDialog(){\n    this.setState({targetDialogOpen:false});\n  }\n\n  openShareableLinkDialog(){\n    this.setState({shareableLinkDialogOpen: true});\n  }\n  closeShareableLinkDialog(){\n    this.setState({shareableLinkDialogOpen: false});\n  }\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// PROTECTED AREAS LAYERS STUFF\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  changeIucnCategory(iucnCategory) {\n    //update the state\n    let _metadata = this.state.metadata;\n    _metadata.IUCN_CATEGORY = iucnCategory;\n    this.setState({ metadata: _metadata });\n    //update the input.dat file\n    this.updateProjectParameter(\"IUCN_CATEGORY\", iucnCategory);\n    //filter the wdpa vector tiles\n    this.filterWdpaByIucnCategory(iucnCategory);\n    //render the wdpa intersections on the grid\n    this.renderPAGridIntersections(iucnCategory);\n  }\n\n  filterWdpaByIucnCategory(iucnCategory) {\n    //get the individual iucn categories\n    let iucnCategories = this.getIndividualIucnCategories(iucnCategory);\n    //TODO FILTER THE WDPA CLIENT SIDE BY INTERSECTING IT WITH THE PLANNING GRID\n    //filter the vector tiles for those iucn categories - and if the planning unit name has an iso3 country code - then use that as well. e.g. pu_ton_marine_hexagon_50 (has iso3 code) or pu_a4402723a92444ff829e9411f07e7 (no iso3 code)\n    //let filterExpr = (this.state.metadata.PLANNING_UNIT_NAME.match(/_/g).length> 1) ? ['all', ['in', 'IUCN_CAT'].concat(iucnCategories), ['==', 'PARENT_ISO', this.state.metadata.PLANNING_UNIT_NAME.substr(3, 3).toUpperCase()]] : ['all', ['in', 'IUCN_CAT'].concat(iucnCategories)];\n    let filterExpr = ['all', ['in', 'iucn_cat'].concat(iucnCategories)]; // no longer filter by ISO code\n    this.map.setFilter(WDPA_LAYER_NAME, filterExpr);\n    //turn on/off the protected areas legend\n    (iucnCategory === \"None\") ? this.hidePALegend() : this.showPALegend();\n  }\n\n  getIndividualIucnCategories(iucnCategory) {\n    let retValue = [];\n    switch (iucnCategory) {\n      case 'None':\n        retValue = [''];\n        break;\n      case 'IUCN I-II':\n        retValue = ['Ia', 'Ib', 'II'];\n        break;\n      case 'IUCN I-IV':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV'];\n        break;\n      case 'IUCN I-V':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V'];\n        break;\n      case 'IUCN I-VI':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V', 'VI'];\n        break;\n      case 'All':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V', 'VI','Not Reported'];\n        break;\n      default:\n    }\n    return retValue;\n  }\n\n  //gets the puids for those protected areas that intersect the planning grid in the passed iucn category\n  getPuidsFromIucnCategory(iucnCategory) {\n    let intersections_by_category = this.getIntersections(iucnCategory);\n    //get all the puids in this iucn category \n    let puids = this.getPuidsFromNormalisedData(intersections_by_category);\n    return puids;\n  }\n\n  //called when the iucn category changes - gets the puids that need to be added/removed, adds/removes them and updates the PuEdit layer\n  async renderPAGridIntersections(iucnCategory) {\n    await this.preprocessProtectedAreas(iucnCategory).then((intersections) => {\n      //get all the puids of the intersecting protected areas in this iucn category \n      let puids = this.getPuidsFromIucnCategory(iucnCategory);\n      //see if any of them will overwrite existing manually edited planning units - these will be in status 1 and 3\n      let manuallyEditedPuids = this.getPlanningUnitsByStatus(1).concat(this.getPlanningUnitsByStatus(3));\n      let clashingPuids = manuallyEditedPuids.filter(value => -1 !== puids.indexOf(value));\n      if (clashingPuids.length > 0){\n        //remove them from the puids\n        puids = puids.filter((item) => !clashingPuids.includes(item));\n        this.setSnackBar(\"Not all planning units have been added. See <a href='\" + ERRORS_PAGE + \"#not-all-planning-units-have-been-added' target='blank'>here</a>\");\n      }\n      //get all the puids for the existing iucn category - these will come from the previousPuids rather than getPuidsFromIucnCategory as there may have been some clashes and not all of the puids from getPuidsFromIucnCategory may actually be renderered\n      //if the previousPuids are undefined then get them from the projects previousIucnCategory\n      let previousPuids = (this.previousPuids !== undefined) ? this.previousPuids : this.getPuidsFromIucnCategory(this.previousIucnCategory);\n      //set the previously selected puids\n      this.previousPuids = puids;\n      //and previousIucnCategory\n      this.previousIucnCategory = iucnCategory;\n      //rerender\n      this.updatePlanningUnits(previousPuids, puids);\n    }).catch((error) => {\n      this.setSnackBar(error);\n    });\n  }\n\n  //updates the planning units by reconciling the passed arrays of puids\n  updatePlanningUnits(previousPuids, puids){\n    //copy the current planning units state\n    let statuses = this.state.planning_units;\n    //get the new puids that need to be added\n    let newPuids = this.getNewPuids(previousPuids, puids);\n    if (newPuids.length === 0) {\n      //get the puids that need to be removed\n      let oldPuids = this.getNewPuids(puids, previousPuids);\n      this.removePuidsFromArray(statuses, 2, oldPuids);\n    }\n    else {\n      //add all the new protected area intersections into the planning units as status 2\n      this.appPuidsToPlanningUnits(statuses, 2, newPuids);\n    }\n    //update the state\n    this.setState({ planning_units: statuses });\n    //re-render the layer\n    this.renderPuEditLayer();\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n  \n  getNewPuids(previousPuids, puids) {\n    return puids.filter((i) => {\n      return previousPuids.indexOf(i) === -1;\n    });\n  }\n\n  //turns on the legend for the protected areas\n  showPALegend(){\n    this.setState({pa_layer_visible:true});\n  }\n  \n  //hides the protected area legend\n  hidePALegend(){\n    this.setState({pa_layer_visible:false});  \n  }\n  preprocessProtectedAreas(iucnCategory) {\n    //have the intersections already been calculated\n    if (this.protected_area_intersections.length>0) {\n      return Promise.resolve(this.protected_area_intersections);\n    }\n    else {\n      //do the intersection on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket \n        this._ws(\"preprocessProtectedAreas?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&planning_grid_name=\" + this.state.metadata.PLANNING_UNIT_NAME, this.wsMessageCallback.bind(this)).then((message) => {\n          //set the local variable\n          this.protected_area_intersections = message.intersections;\n          //return a value to the then() call\n          resolve(message);\n        }).catch((error) => {\n          reject(error);\n        });\n      }); //return\n    }\n  }\n\n  getIntersections(iucnCategory) {\n    //get the individual iucn categories\n    let _iucn_categories = this.getIndividualIucnCategories(iucnCategory);\n    //get the planning units that intersect the protected areas with the passed iucn category\n    return this.protected_area_intersections.filter((item) => { return (_iucn_categories.indexOf(item[0]) > -1); });\n  }\n\n  //downloads and updates the WDPA on the server\n  updateWDPA(){\n    //start the logging\n    this.startLogging();\n    //call the webservice\n    return new Promise((resolve, reject) => {\n      this._ws(\"updateWDPA?downloadUrl=\" + window.WDPA.downloadUrl + \"&wdpaVersion=\" + window.WDPA.latest_version, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished - set the new version of the wdpa\n        let obj = Object.assign(this.state.marxanServer, {wdpa_version: window.WDPA.latest_version});\n        //update the state and when it is finished, re-add the wdpa source and layer\n        this.setState({newWDPAVersion: false, marxanServer: obj}, ()=> {\n          //set the source for the WDPA layer to the new vector tiles\n          this.setWDPAVectorTilesLayerName(window.WDPA.latest_version);\n          //remove the existing WDPA layer and source\n          this.map.removeLayer(WDPA_LAYER_NAME);\n          if (this.map && this.map.getSource(WDPA_SOURCE_NAME) !== undefined) this.map.removeSource(WDPA_SOURCE_NAME);\n          //re-add the WDPA source and layer\n          this.addWDPASource();\n          this.addWDPALayer();\n          //reset the protected area intersections on the client\n          this.protected_area_intersections = [];\n          //recalculate the protected area intersections and refilter the vector tiles\n          this.changeIucnCategory(this.state.metadata.IUCN_CATEGORY);\n          //close the dialog\n          this.closeWDPAUpdateDialog();\n        });\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// BOUNDARY LENGTH MODIFIER AND CLUMPING\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  async preprocessBoundaryLengths(iucnCategory) {\n    if (this.state.files.BOUNDNAME){ //if the bounds.dat file already exists\n      return Promise.resolve();\n    }else{\n      //calculate the boundary lengths on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket \n        this._ws(\"preprocessPlanningUnits?user=\" + this.state.owner + \"&project=\" + this.state.project, this.wsMessageCallback.bind(this)).then((message) => {\n          //update the state\n          var currentFiles = this.state.files;\n          currentFiles.BOUNDNAME = \"bounds.dat\";\n          this.setState({files: currentFiles});\n          //return a value to the then() call\n          resolve(message);\n        }).catch((error) => {\n          reject(error);\n        });\n      }); //return\n    }\n  }\n\n  showClumpingDialog(){\n    //update the map centre and zoom state which is used by the maps in the clumping dialog\n    this.updateMapCentreAndZoom();\n    //when the boundary lengths have been calculated\n    this.preprocessBoundaryLengths().then((intersections) => {\n      //update the spec.dat file with any that have been added or removed or changed target or spf\n      this.updateSpecFile().then((value) => {\n        //when the species file has been updated, update the planning unit file \n        this.updatePuFile();\n        //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using web sockets\n        this.updatePuvsprFile().then((value) => {\n          //show the clumping dialog\n          this.setState({ clumpingDialogOpen: true, clumpingRunning: true });\n        });\n      }).catch((error) => { //updateSpecFile error\n        \n      });\n    }).catch((error) => { //preprocessBoundaryLengths error\n      console.log(error);\n    }); \n  }\n\n  hideClumpingDialog(){\n    //delete the project group\n    this.deleteProjects();\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //return state to normal\n    this.setState({ clumpingDialogOpen: false });\n  }\n\n  //creates a group of 5 projects with UUIDs in the _clumping folder\n  createProjectGroupAndRun(blmValues){\n    //clear any exists projects\n    if (this.projects) this.deleteProjects();\n    return new Promise((resolve, reject) => {\n      this._get(\"createProjectGroup?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&copies=5&blmValues=\" + blmValues.join(\",\")).then((response) => {\n        //set the local variable for the projects\n        this.projects = response.data;\n        //run the projects\n        this.runProjects(response.data);\n        resolve(\"Project group created\");\n      }).catch((error) => {\n        //do something\n        reject(error);\n      });\n    });\n  }\n  \n  //deletes the projects from the _clumping folder\n  deleteProjects(){\n    if (this.projects){\n      var projectNames = this.projects.map((item) => {\n        return item.projectName;\n      });\n      //clear the local variable\n      this.projects = undefined;\n      return new Promise((resolve, reject) => {\n        this._get(\"deleteProjects?projectNames=\" + projectNames.join(\",\")).then((response) => {\n          resolve(\"Projects deleted\");\n        }).catch((error) => {\n          reject(error);\n        });\n      });\n    }\n  }\n  \n  runProjects(projects){\n    //reset the counter\n    this.projectsRun = 0;\n    //set the intitial state\n    this.setState({clumpingRunning: true});\n    //run the projects\n    projects.forEach((project) => {\n      this.startMarxanJob(\"_clumping\", project.projectName, false).then((response) => {\n        if (!this.checkForErrors(response, false)) {\n          //run completed - get a single solution\n          this.loadOtherSolution(response.user, response.project, 1);\n        }\n        //increment the project counter\n        this.projectsRun = this.projectsRun + 1;\n        //set the state\n        if (this.projectsRun===5) this.setState({clumpingRunning: false});\n      });\n    });\n  }\n  \n  rerunProjects(blmChanged, blmValues){\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //if the blmValues have changed then recreate the project group and run\n    if (blmChanged){\n      this.createProjectGroupAndRun(blmValues);\n    }else{\n      //rerun the projects\n      this.runProjects(this.projects);\n    }\n  }\n  \n  setBlmValue(blmValue){\n    var newRunParams = [], value;\n    //iterate through the run parameters and update the value for the blm\n    this.state.runParams.forEach((item) => {\n      value = (item.key === 'BLM') ? String(blmValue) : item.value;\n      newRunParams.push({key: item.key, value: value});\n    });\n    //update this run parameters\n    this.updateRunParams(newRunParams);\n  }\n\n  resetPaintProperties(){\n    //reset the paint properties\n    this.setState({map0_paintProperty:[],map1_paintProperty:[],map2_paintProperty:[],map3_paintProperty:[],map4_paintProperty:[]});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING RUNS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //returns the log of all of the runs from the server\n  getRunLogs(){\n    if (!this.state.unauthorisedMethods.includes(\"getRunLogs\")){\n      this._get(\"getRunLogs\").then((response) => {\n          this.setState({runLogs: response.data});\n      });\n    }\n  }\n  \n  //clears the records from the run logs file\n  clearRunLogs(){\n    this._get(\"clearRunLogs\").then((response) => {\n        this.getRunLogs();\n    });\n  }\n  \n  getShareableLink(){\n    this.openShareableLinkDialog();\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// GAP ANALYSIS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  runGapAnalysis(){\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.log_tab_active();\n      //call the websocket \n      this._ws(\"runGapAnalysis?user=\" + this.state.owner + \"&project=\" + this.state.project, this.wsMessageCallback.bind(this)).then((message) => {\n        this.setState({gapAnalysis: message.data});\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n    \n  }\n  \n  render() {\n    const message = (<span id=\"snackbar-message-id\" dangerouslySetInnerHTML={{ __html: this.state.snackbarMessage }} />);    \n    return (\n      <MuiThemeProvider>\n        <React.Fragment>\n          <div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" />\n          <LoadingDialog\n            open={this.state.shareableLink}\n          />\n          <LoginDialog \n            open={!this.state.loggedIn} \n            onOk={this.validateUser.bind(this)} \n            onCancel={this.openRegisterDialog.bind(this)} \n            loading={this.state.loading} \n            user={this.state.user} \n            password={this.state.password} \n            changeUserName={this.changeUserName.bind(this)} \n            changePassword={this.changePassword.bind(this)} \n            openResendPasswordDialog={this.openResendPasswordDialog.bind(this)}\n            marxanServers={this.state.marxanServers}\n            selectServer={this.selectServer.bind(this)}\n            marxanServer={this.state.marxanServer}\n          />\n          <RegisterDialog \n            open={this.state.registerDialogOpen} \n            onOk={this.createNewUser.bind(this)}\n            onCancel={this.closeRegisterDialog.bind(this)}\n            loading={this.state.loading} \n          />\n          <ResendPasswordDialog\n            open={this.state.resendPasswordDialogOpen} \n            onOk={this.resendPassword.bind(this)}\n            onCancel={this.closeResendPasswordDialog.bind(this)}\n            loading={this.state.loading} \n            changeEmail={this.changeEmail.bind(this)} \n            email={this.state.resendEmail} \n          />\n          <Welcome\n            open={this.state.userData.SHOWWELCOMESCREEN && this.state.welcomeDialogOpen} \n            onOk={this.closeWelcomeDialog.bind(this)}\n            onCancel={this.closeWelcomeDialog.bind(this)}\n            userData={this.state.userData}\n            saveOptions={this.saveOptions.bind(this)}\n            notifications={this.state.notifications}\n            resetNotifications={this.resetNotifications.bind(this)}\n            removeNotification={this.removeNotification.bind(this)}\n            openNewProjectDialog={this.openNewProjectWizardDialog.bind(this)}\n          />\n          <ToolsMenu\n            open={this.state.toolsMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            hideToolsMenu={this.hideToolsMenu.bind(this)}\n            openUsersDialog={this.openUsersDialog.bind(this)}\n            openRunLogDialog={this.openRunLogDialog.bind(this)}\n            openGapAnalysisDialog={this.openGapAnalysisDialog.bind(this)}\n            userRole={this.state.userData.ROLE}\n            metadata={this.state.metadata}\n          />\n          <UserMenu \n            open={this.state.userMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            hideUserMenu={this.hideUserMenu.bind(this)} \n            openUserSettingsDialog={this.openUserSettingsDialog.bind(this)}\n            openProfileDialog={this.openProfileDialog.bind(this)}\n            logout={this.logout.bind(this)}\n            marxanServer={this.state.marxanServer}\n            openChangePasswordDialog={this.openChangePasswordDialog.bind(this)}\n          />\n          <HelpMenu \n            open={this.state.helpMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            hideHelpMenu={this.hideHelpMenu.bind(this)} \n            openAboutDialog={this.openAboutDialog.bind(this)}\n            openServerDetailsDialog={this.openServerDetailsDialog.bind(this)}\n            DOCS_ROOT={DOCS_ROOT}\n          />\n          <UserSettingsDialog \n            open={this.state.UserSettingsDialogOpen}\n            onOk={this.closeUserSettingsDialog.bind(this)}\n            onCancel={this.closeUserSettingsDialog.bind(this)}\n            loading={this.state.loading} \n            userData={this.state.userData}\n            saveOptions={this.saveOptions.bind(this)}\n            changeBasemap={this.setBasemap.bind(this)}\n            basemaps={this.state.basemaps}\n            basemap={this.state.basemap}\n          />\n          <UsersDialog\n            open={this.state.usersDialogOpen}\n            onOk={this.closeUsersDialog.bind(this)}\n            onCancel={this.closeUsersDialog.bind(this)}\n            loading={this.state.loading}\n            user={this.state.user}\n            users={this.state.users}\n            deleteUser={this.deleteUser.bind(this)}\n            changeRole={this.changeRole.bind(this)}\n            guestUserEnabled={this.state.guestUserEnabled}\n            toggleEnableGuestUser={this.toggleEnableGuestUser.bind(this)}\n          />\n          <ProfileDialog \n            open={this.state.profileDialogOpen}\n            onOk={this.closeProfileDialog.bind(this)}\n            onCancel={this.closeProfileDialog.bind(this)}\n            loading={this.state.loading}\n            userData={this.state.userData}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AboutDialog \n            open={this.state.aboutDialogOpen}\n            onOk={this.closeAboutDialog.bind(this)}\n            marxanClientReleaseVersion={MARXAN_CLIENT_VERSION}\n            wdpaAttribution={this.state.wdpaAttribution}\n          />\n          <InfoPanel\n            open={this.state.infoPanelOpen}\n            activeTab={this.state.activeTab}\n            project={this.state.project}\n            metadata={this.state.metadata}\n            runMarxan={this.runMarxan.bind(this)} \n            stopProcess={this.stopProcess.bind(this)}\n            pid={this.state.pid}\n            renameProject={this.renameProject.bind(this)}\n            renameDescription={this.renameDescription.bind(this)}\n            features={this.state.projectFeatures}\n            project_tab_active={this.project_tab_active.bind(this)}\n            features_tab_active={this.features_tab_active.bind(this)}\n            pu_tab_active={this.pu_tab_active.bind(this)}\n            startPuEditSession={this.startPuEditSession.bind(this)}\n            stopPuEditSession={this.stopPuEditSession.bind(this)}\n            puEditing={this.state.puEditing}\n            clearManualEdits={this.clearManualEdits.bind(this)}\n            showRunSettingsDialog={this.showRunSettingsDialog.bind(this)}\n            openFeatureMenu={this.openFeatureMenu.bind(this)}\n            preprocessing={this.state.preprocessing}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            changeIucnCategory={this.changeIucnCategory.bind(this)}\n            updateFeature={this.updateFeature.bind(this)}\n            userRole={this.state.userData.ROLE}\n            toggleProjectPrivacy={this.toggleProjectPrivacy.bind(this)}\n            toggleCosts={this.toggleCosts.bind(this)}\n            openTargetDialog={this.openTargetDialog.bind(this)}\n            getShareableLink={this.getShareableLink.bind(this)}\n            marxanServer={this.state.marxanServer}\n            toggleFeatureLayer={this.toggleFeatureLayer.bind(this)}\n            toggleFeaturePUIDLayer={this.toggleFeaturePUIDLayer.bind(this)}\n            useFeatureColors={this.state.userData.USEFEATURECOLORS}\n            iucn_categories={IUCN_CATEGORIES}\n          />\n          <ResultsPanel\n            open={this.state.resultsPanelOpen}\n            preprocessing={this.state.preprocessing}\n            solutions={this.state.solutions}\n            loadSolution={this.loadSolution.bind(this)} \n            openClassificationDialog={this.openClassificationDialog.bind(this)}\n            hideResults={this.hideResults.bind(this)}\n            brew={this.state.brew}\n            messages={this.state.logMessages} \n            activeResultsTab={this.state.activeResultsTab}\n            legend_tab_active={this.legend_tab_active.bind(this)}\n            solutions_tab_active={this.solutions_tab_active.bind(this)}\n            log_tab_active={this.log_tab_active.bind(this)}\n            clearLog={this.clearLog.bind(this)}\n            owner={this.state.owner}\n            resultsLayer={this.state.resultsLayer}\n            wdpaLayer={ this.state.wdpaLayer }\n            pa_layer_visible={this.state.pa_layer_visible}\n            changeOpacity={this.changeOpacity.bind(this)}\n            results_layer_opacity={this.state.results_layer_opacity}\n            wdpa_layer_opacity={this.state.wdpa_layer_opacity}\n            userRole={this.state.userData.ROLE}\n          />\n          <FeatureInfoDialog\n            open={this.state.openInfoDialogOpen}\n            onOk={this.closeInfoDialog.bind(this)}\n            onCancel={this.closeInfoDialog.bind(this)}\n            loading={this.state.loading}\n            feature={this.state.currentFeature}\n            updateFeature={this.updateFeature.bind(this)}\n            FEATURE_PROPERTIES={FEATURE_PROPERTIES}\n            userRole={this.state.userData.ROLE}\n          />\n          <Popup\n            active_pu={this.state.active_pu} \n            xy={this.state.popup_point}\n          />\n          <PopupFeatureList\n            xy={this.state.popup_point}\n            features={this.state.puFeatures}\n            loading={this.state.loading}\n          />\n          <PopupPAList\n            xy={this.state.popup_point}\n            features={this.state.paFeatures}\n            loading={this.state.loading}\n            onMouseEnter={this.cancelTimer.bind(this)}\n            onMouseLeave={this.startTimer.bind(this)}\n          />\n          <ProjectsDialog \n            open={this.state.projectsDialogOpen} \n            onOk={this.closeProjectsDialog.bind(this)}\n            onCancel={this.closeProjectsDialog.bind(this)}\n            loading={this.state.loading}\n            projects={this.state.projects}\n            oldVersion={this.state.metadata.OLDVERSION}\n            deleteProject={this.deleteProject.bind(this)}\n            loadProject={this.loadProject.bind(this)}\n            cloneProject={this.cloneProject.bind(this)}\n            openNewProjectDialog={this.openNewProjectDialog.bind(this)}\n            openImportProjectDialog={this.openImportProjectDialog.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            userRole={this.state.userData.ROLE}\n            getAllFeatures={this.getAllFeatures.bind(this)}\n          />\n          <NewProjectDialog\n            open={this.state.newProjectDialogOpen}\n            onOk={this.closeNewProjectDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            planning_unit_grids={this.state.planning_unit_grids}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            features={this.state.allFeatures} \n            openCostsDialog={this.openCostsDialog.bind(this)}\n            selectedCosts={this.state.selectedCosts}\n            createNewProject={this.createNewProject.bind(this)}\n    \t\t\t\tpreviewFeature={this.previewFeature.bind(this)} \n          />\n          <NewProjectWizardDialog\n            open={this.state.newProjectWizardDialogOpen}\n            onOk={this.closeNewProjectWizardDialog.bind(this)}\n            okDisabled={true}\n            countries={this.state.countries}\n    \t\t\t\tdomains={DOMAINS}\n    \t\t\t\tshapes={SHAPES}\n    \t\t\t\tareakm2s={AREAKM2S}\n            iucn_categories={IUCN_CATEGORIES}\n            closeNewProjectWizardDialog={this.closeNewProjectWizardDialog.bind(this)}\n            createNewNationalProject={this.createNewNationalProject.bind(this)}\n          />\n          <NewPlanningGridDialog \n            open={this.state.NewPlanningGridDialogOpen} \n            onCancel={this.closeNewPlanningGridDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing || this.state.uploading}\n            createNewPlanningUnitGrid={this.createNewPlanningUnitGrid.bind(this)}\n            countries={this.state.countries}\n            setSnackBar={this.setSnackBar.bind(this)}\n    \t\t\t\tdomains={DOMAINS}\n    \t\t\t\tshapes={SHAPES}\n    \t\t\t\tareakm2s={AREAKM2S}\n            ERRORS_PAGE={ERRORS_PAGE}\n          />\n          <ImportPlanningGridDialog\n            open={this.state.importPlanningGridDialogOpen} \n            onOk={this.importPlanningUnitGrid.bind(this)}\n            onCancel={this.closeImportPlanningGridDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            requestEndpoint={this.state.marxanServer.endpoint}\n            SEND_CREDENTIALS={SEND_CREDENTIALS}\n            checkForErrors={this.checkForErrors.bind(this)} \n          />\n          <FeaturesDialog\n            open={this.state.featuresDialogOpen}\n            onOk={this.updateSelectedFeatures.bind(this)}\n            onCancel={this.closeFeaturesDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            metadata={this.state.metadata}\n            allFeatures={this.state.allFeatures}\n            deleteFeature={this.deleteFeature.bind(this)}\n            openImportFeaturesDialog={this.openImportFeaturesDialog.bind(this)}\n            selectAllFeatures={this.selectAllFeatures.bind(this)}\n            clearAllFeatures={this.clearAllFeatures.bind(this)}\n            selectFeatures={this.selectFeatures.bind(this)}\n            userRole={this.state.userData.ROLE}\n            clickFeature={this.clickFeature.bind(this)}\n            addingRemovingFeatures={this.state.addingRemovingFeatures}\n            selectedFeatureIds={this.state.selectedFeatureIds}\n            initialiseDigitising={this.initialiseDigitising.bind(this)}\n            newFeaturePopoverOpen={this.state.newFeaturePopoverOpen}\n            hideNewFeaturePopover={this.hideNewFeaturePopover.bind(this)}\n            showNewFeaturePopover={this.showNewFeaturePopover.bind(this)}\n            importFeaturePopoverOpen={this.state.importFeaturePopoverOpen}\n            hideImportFeaturePopover={this.hideImportFeaturePopover.bind(this)}\n            showImportFeaturePopover={this.showImportFeaturePopover.bind(this)}\n            previewFeature={this.previewFeature.bind(this)} \n            openImportGBIFDialog={this.openImportGBIFDialog.bind(this)}\n          />\n          <FeatureDialog\n            open={this.state.featureDialogOpen}\n            onOk={this.closeFeatureDialog.bind(this)}\n            onCancel={this.closeFeatureDialog.bind(this)}\n            loading={this.state.loading}\n            feature_metadata={this.state.feature_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <NewFeatureDialog\n            open={this.state.NewFeatureDialogOpen} \n            onOk={this.closeNewFeatureDialog.bind(this)}\n            onCancel={this.closeNewFeatureDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            createNewFeature={this.createNewFeature.bind(this)}\n          />\n          <ImportFeaturesDialog\n            open={this.state.importFeaturesDialogOpen} \n            importFeatures={this.importFeatures.bind(this)}\n            onCancel={this.closeImportFeaturesDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing || this.state.uploading}\n            setFilename={this.setNewFeatureDatasetFilename.bind(this)}\n            SEND_CREDENTIALS={SEND_CREDENTIALS}\n            filename={this.state.featureDatasetFilename}\n            checkForErrors={this.checkForErrors.bind(this)} \n            requestEndpoint={this.state.marxanServer.endpoint}\n            unzipShapefile={this.unzipShapefile.bind(this)}\n            getShapefileFieldnames={this.getShapefileFieldnames.bind(this)}\n            deleteShapefile={this.deleteShapefile.bind(this)}\n          />\n          <ImportGBIFDialog\n            open={this.state.importGBIFDialogOpen} \n            onCancel={this.closeImportGBIFDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing || this.state.uploading}\n            importGBIFData={this.importGBIFData.bind(this)}\n            gbifSpeciesSuggest={this.gbifSpeciesSuggest.bind(this)}\n          />\n          <PlanningGridsDialog\n            open={this.state.planningGridsDialogOpen}\n            onOk={this.closePlanningGridsDialog.bind(this)}\n            onCancel={this.closePlanningGridsDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            planningGrids={this.state.planning_unit_grids}\n            openNewPlanningGridDialog={this.openNewPlanningGridDialog.bind(this)}\n            openImportPlanningGridDialog={this.openImportPlanningGridDialog.bind(this)}\n            deletePlanningGrid={this.deletePlanningUnitGrid.bind(this)}\n            previewPlanningGrid={this.previewPlanningGrid.bind(this)}\n          />\n          <FailedToDeleteDialog\n            open={this.state.FailedToDeleteDialogOpen} \n            projects={this.state.failedToDeleteProjects}\n            userRole={this.state.userData.ROLE}\n            onOk={this.closeFailedToDeleteDialog.bind(this)}\n            deleteWhat={this.state.deleteWhat}\n          />\n          <PlanningGridDialog\n            open={this.state.planningGridDialogOpen}\n            onOk={this.closePlanningGridDialog.bind(this)}\n            onCancel={this.closePlanningGridDialog.bind(this)}\n            loading={this.state.loading}\n            planning_grid_metadata={this.state.planning_grid_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <CostsDialog\n            open={this.state.CostsDialogOpen}\n            onOk={this.closeCostsDialog.bind(this)}\n            onCancel={this.closeCostsDialog.bind(this)}\n            costs={this.state.costs}\n          />\n          <RunSettingsDialog\n            open={this.state.settingsDialogOpen}\n            onOk={this.closeRunSettingsDialog.bind(this)}\n            onCancel={this.closeRunSettingsDialog.bind(this)}\n            loading={this.state.loading}\n            updateRunParams={this.updateRunParams.bind(this)}\n            runParams={this.state.runParams}\n            showClumpingDialog={this.showClumpingDialog.bind(this)}\n            userRole={this.state.userData.ROLE}\n          />\n          <ClassificationDialog \n            open={this.state.classificationDialogOpen}\n            onOk={this.closeClassificationDialog.bind(this)}\n            onCancel={this.closeClassificationDialog.bind(this)}\n            loading={this.state.loading}\n            renderer={this.state.renderer}\n            changeColorCode={this.changeColorCode.bind(this)}\n            changeRenderer={this.changeRenderer.bind(this)}\n            changeNumClasses={this.changeNumClasses.bind(this)}\n            changeShowTopClasses={this.changeShowTopClasses.bind(this)}\n            summaryStats={this.state.summaryStats}\n            brew={this.state.brew}\n            dataBreaks={this.state.dataBreaks}\n          />\n          <ClumpingDialog\n            open={this.state.clumpingDialogOpen}\n            onOk={this.hideClumpingDialog.bind(this)}\n            onCancel={this.hideClumpingDialog.bind(this)}\n            tileset={this.state.tileset}\n            RESULTS_LAYER_NAME={RESULTS_LAYER_NAME}\n            map0_paintProperty={this.state.map0_paintProperty}\n            map1_paintProperty={this.state.map1_paintProperty}\n            map2_paintProperty={this.state.map2_paintProperty}\n            map3_paintProperty={this.state.map3_paintProperty}\n            map4_paintProperty={this.state.map4_paintProperty}\n            mapCentre={this.state.mapCentre}\n            mapZoom={this.state.mapZoom}\n            createProjectGroupAndRun={this.createProjectGroupAndRun.bind(this)}\n            rerunProjects={this.rerunProjects.bind(this)}\n            setBlmValue={this.setBlmValue.bind(this)}\n            clumpingRunning={this.state.clumpingRunning}\n          />\n          <ImportProjectDialog\n            open={this.state.importProjectDialogOpen}\n            onOk={this.closeImportDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            requestEndpoint={this.state.marxanServer.endpoint}\n            SEND_CREDENTIALS={SEND_CREDENTIALS}\n            importProject={this.importProject.bind(this)}\n            checkForErrors={this.checkForErrors.bind(this)} \n            log={this.log.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <RunLogDialog\n            open={this.state.runLogDialogOpen}\n            onOk={this.closeRunLogDialog.bind(this)}\n            onRequestClose={this.closeRunLogDialog.bind(this)}\n            loading={this.state.loading}\n            preprocessing={this.state.preprocessing}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            runLogs={this.state.runLogs}\n            getRunLogs={this.getRunLogs.bind(this)}\n            clearRunLogs={this.clearRunLogs.bind(this)}\n            stopMarxan={this.stopProcess.bind(this)}\n          />\n          <ServerDetailsDialog  \n            open={this.state.serverDetailsDialogOpen}\n            onOk={this.closeServerDetailsDialog.bind(this)}\n            onCancel={this.closeServerDetailsDialog.bind(this)}\n            onRequestClose={this.closeServerDetailsDialog.bind(this)}\n            marxanServer={this.state.marxanServer}\n            newWDPAVersion={this.state.newWDPAVersion}\n            showUpdateWDPADialog={this.openWDPAUpdateDialog.bind(this)}\n          />\n          <UpdateWDPADialog\n            open={this.state.updateWDPADialogOpen}\n            onOk={this.closeWDPAUpdateDialog.bind(this)}\n            onCancel={this.closeWDPAUpdateDialog.bind(this)}\n            newWDPAVersion={this.state.newWDPAVersion}\n            updateWDPA={this.updateWDPA.bind(this)}\n            loading={this.state.preprocessing}\n          />          \n          <ChangePasswordDialog  \n            open={this.state.changePasswordDialogOpen}\n            onOk={this.closeChangePasswordDialog.bind(this)}\n            user={this.state.user}\n            onRequestClose={this.closeChangePasswordDialog.bind(this)}\n            checkPassword={this.checkPassword.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AlertDialog\n            open={this.state.alertDialogOpen}\n            onOk={this.closeAlertDialog.bind(this)}\n          />\n          <Snackbar\n            open={this.state.snackbarOpen}\n            message={message}\n            onRequestClose={this.closeSnackbar.bind(this)}\n            style={{maxWidth:'800px !important'}} \n            contentStyle={{maxWidth:'800px !important'}}\n            bodyStyle={{maxWidth:'800px !important'}}\n          />\n          <Popover open={this.state.featureMenuOpen} anchorEl={this.state.menuAnchor} onRequestClose={this.closeFeatureMenu.bind(this)} style={{width:'307px'}}>\n            <Menu style={{width:'207px'}} onMouseLeave={this.closeFeatureMenu.bind(this)} >\n              <MenuItemWithButton leftIcon={<Properties style={{margin: '1px'}}/>} onClick={this.openInfoDialog.bind(this)}>Properties</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<RemoveFromProject style={{margin: '1px'}}/>} style={{display: ((this.state.currentFeature.old_version)||(this.state.userData.ROLE === \"ReadOnly\")) ? 'none' : 'block'}} onClick={this.removeFromProject.bind(this, this.state.currentFeature)}>Remove from project</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={(this.state.currentFeature.feature_layer_loaded) ? <RemoveFromMap style={{margin: '1px'}}/> : <AddToMap style={{margin: '1px'}}/>} style={{display: (this.state.currentFeature.tilesetid) ? 'block' : 'none'}} onClick={this.toggleFeatureLayer.bind(this, this.state.currentFeature)}>{(this.state.currentFeature.feature_layer_loaded) ? \"Remove from map\" : \"Add to map\"}</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={(this.state.currentFeature.feature_puid_layer_loaded) ? <RemoveFromMap style={{margin: '1px'}}/> : <AddToMap style={{margin: '1px'}}/>} onClick={this.toggleFeaturePUIDLayer.bind(this, this.state.currentFeature)} disabled={!(this.state.currentFeature.preprocessed && this.state.currentFeature.occurs_in_planning_grid)}>{(this.state.currentFeature.feature_puid_layer_loaded) ? \"Remove planning unit outlines\" : \"Outline planning units where the feature occurs\"}</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<ZoomIn style={{margin: '1px'}}/>} style={{display: (this.state.currentFeature.extent) ? 'block' : 'none'}} onClick={this.zoomToFeature.bind(this, this.state.currentFeature)}>Zoom to feature extent</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<Preprocess style={{margin: '1px'}}/>} style={{display: ((this.state.currentFeature.old_version)||(this.state.userData.ROLE === \"ReadOnly\")) ? 'none' : 'block'}} onClick={this.preprocessSingleFeature.bind(this, this.state.currentFeature)} disabled={this.state.currentFeature.preprocessed || this.state.preprocessing}>Pre-process</MenuItemWithButton>\n            </Menu>\n          </Popover>   \n          <TargetDialog \n            open={this.state.targetDialogOpen}\n            onOk={this.closeTargetDialog.bind(this)}\n            showCancelButton={true}\n            onCancel={this.closeTargetDialog.bind(this)}\n            updateTargetValueForFeatures={this.updateTargetValueForFeatures.bind(this)}\n          />\n          <GapAnalysisDialog \n            open={this.state.gapAnalysisDialogOpen}\n            showCancelButton={true}\n            onOk={this.closeGapAnalysisDialog.bind(this)}\n            closeGapAnalysisDialog={this.closeGapAnalysisDialog.bind(this)}\n            gapAnalysis={this.state.gapAnalysis}\n            preprocessing={this.state.preprocessing}\n            projectFeatures={this.state.projectFeatures}\n            metadata={this.state.metadata}\n            marxanServer={this.state.marxanServer}\n          />\n          <ShareableLinkDialog\n            open={this.state.shareableLinkDialogOpen}\n            onOk={this.closeShareableLinkDialog.bind(this)}\n            shareableLinkUrl={window.location + \"?server=\" + this.state.marxanServer.name + \"&user=\" + this.state.user + \"&project=\" + this.state.project}\n          />\n          <AppBar\n            open={this.state.loggedIn}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            infoPanelOpen={this.state.infoPanelOpen}\n            resultsPanelOpen={this.state.resultsPanelOpen}\n            openProjectsDialog={this.openProjectsDialog.bind(this)}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            openPlanningGridsDialog={this.openPlanningGridsDialog.bind(this)}\n            toggleInfoPanel={this.toggleInfoPanel.bind(this)}\n            toggleResultsPanel={this.toggleResultsPanel.bind(this)}\n            showToolsMenu={this.showToolsMenu.bind(this)}\n            showUserMenu={this.showUserMenu.bind(this)}\n            showHelpMenu={this.showHelpMenu.bind(this)}\n          />\n        </React.Fragment>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'typeface-roboto';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","module.exports = {\n\t// returns a boolean if it is a valid number\n\tisNumber: function (str) {\n\t\tvar pattern = /^\\d+$/;\n\t\treturn pattern.test(str); \n\t},\n\tisValidTargetValue: function (value) {\n\t\tif (module.exports.isNumber(value)){\n\t\t\tif ((value<=100)&&(value>=0)){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tgetMaxNumberOfClasses: function(brew, colorCode) {\n\t\t//get the color scheme\n\t\tlet colorScheme = brew.colorSchemes[colorCode];\n\t\t//get the names of the properties for the colorScheme\n\t\tlet properties = Object.keys(colorScheme).filter(function(key) { return (key !== 'properties'); });\n\t\t//get them as numbers\n\t\tlet numbers = properties.map((property) => { return Number(property) });\n\t\t//get the maximum number of colors in this scheme\n\t\tlet colorSchemeLength = numbers.reduce(function(a, b) {\n\t\t\treturn Math.max(a, b);\n\t\t});\n\t\treturn colorSchemeLength;\n\t},\n\t//returns the area in the passed units, e.g. getArea(10000,'m2') will return 10000\n    getArea: function(value, units){\n        let scale;\n        switch (units) {\n            case 'm2':\n                scale = 1;\n                break;\n            case 'ha':\n                scale = 0.0001;\n                break;\n            case 'km2':\n                scale = 0.000001;\n                break;\n            default:\n                // code\n        }\n        return Number((value * scale).toFixed(1));\n    },\n  //zooms the passed map to the passed bounds\n  zoomToBounds: function (map, bounds) {\n  \t//if the bounds span the dateline, then we can force the map to fit the bounds of a polygon from [[179,minLat],[180,maxLat]]\n    let minLng = (bounds[0] === -180) ? 179 : bounds[0];\n    let maxLng = bounds[2];\n    if (bounds[0] < 0  && bounds[2] > 0){\n    \t//if the bounds are from -1xx to 1xx then see if the range is bigger from -1xx to 1xx or from 1xx to -1xx\n    \tlet lngSpanAcrossMeridian = (bounds[2]) - bounds[0];\n    \tlet lngSpanAcrossDateline = (bounds[0] + 180) + (180 - bounds[2]);\n    \t//if the lng range is smaller across the dateline, then set the minLng and maxLng\n    \tif (lngSpanAcrossMeridian > lngSpanAcrossDateline){\n    \t\tminLng = bounds[2];\n    \t\tmaxLng = bounds[0] + 360;\n    \t}\n    }\n    map.fitBounds([minLng, bounds[1], maxLng, bounds[3]], { padding: { top: 10, bottom: 10, left: 10, right: 10 }, easing: (num) => { return 1; } });\n  }\n};","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}