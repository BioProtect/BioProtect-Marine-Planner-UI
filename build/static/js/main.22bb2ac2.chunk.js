(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1087:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(42),r=a.n(s),o=(a(491),a(55)),l=a.n(o),c=a(124),p=a(2),u=a(3),h=a(5),d=a(4),g=a(6),m=a(429),f=a(430),v=a.n(f),b=a(180),y=a(431),k=a.n(y),S=a(432),E=a.n(S),w=a(54),O=a.n(w),P=(a(591),a(592),a(433)),x=a.n(P),D=a(267),C=a.n(D),j=a(62),F=a.n(j),R=a(63),A=a.n(R),L=a(434),N=a.n(L),T=a(435),I=a.n(T),M=a(436),U=a.n(M),B=a(268),_=a.n(B),G=a(269),z=a.n(G),V=a(437),H=a.n(V),K=a(438),Q=a.n(K);function W(e,t){var a=e.colorSchemes[t];return Object.keys(a).filter(function(e){return"properties"!==e}).map(function(e){return Number(e)}).reduce(function(e,t){return Math.max(e,t)})}var Y=a(19),X=a.n(Y),q=a(11),J=a(9),Z=a(29),$=a(150),ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={adminMenuOpen:!1},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"openFeaturesDialog",value:function(e){this.props.openFeaturesDialog(!1)}},{key:"openAdminMenu",value:function(e){this.setState({adminMenuOpen:!0,menuAnchor:e.currentTarget})}},{key:"closeAdminMenu",value:function(e){this.setState({adminMenuOpen:!1})}},{key:"openUsersDialog",value:function(){this.props.openUsersDialog(),this.closeAdminMenu()}},{key:"openRunLogDialog",value:function(){this.props.openRunLogDialog(),this.closeAdminMenu()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement($.Toolbar,{style:{display:this.props.open?"block":"none",backgroundColor:"rgb(0, 188, 212)",height:"36px",padding:"0px 18px"},className:"appBar"},i.a.createElement($.ToolbarGroup,null,i.a.createElement(q.a,{icon:J.c,onClick:this.props.openProjectsDialog,title:"Projects",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement(q.a,{icon:J.j,onClick:this.openFeaturesDialog.bind(this),title:"Features",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement(q.a,{icon:J.p,onClick:this.props.openPlanningGridsDialog.bind(this),title:"Planning grids",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement($.ToolbarSeparator,{style:{marginLeft:"12px",marginRight:"12px"}}),i.a.createElement(q.a,{style:{fontSize:"20px"},icon:this.props.infoPanelOpen?J.a:Z.a,onClick:this.props.toggleInfoPanel,title:this.props.infoPanelOpen?"Hide the project window":"Show the project window",className:"appBarIcon"}),i.a.createElement(q.a,{style:{fontSize:"20px"},icon:this.props.resultsPanelOpen?J.b:Z.b,onClick:this.props.toggleResultsPanel,title:this.props.resultsPanelOpen?"Hide the results window":"Show the results window",className:"appBarIcon"}),i.a.createElement($.ToolbarSeparator,{style:{marginLeft:"12px",marginRight:"12px"}}),i.a.createElement(q.a,{icon:J.t,onClick:this.props.showUserMenu,title:"User: "+this.props.user+" ("+this.props.userRole+")",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement("div",{className:"adminDiv appBarIcon",onClick:this.openAdminMenu.bind(this),style:{display:"Admin"===this.props.userRole?"inline-block":"none"}},"Admin"),i.a.createElement(F.a,{open:this.state.adminMenuOpen,anchorEl:this.state.menuAnchor,onRequestClose:this.closeAdminMenu.bind(this)},i.a.createElement(A.a,{desktop:!0,onMouseLeave:this.closeAdminMenu.bind(this),menuItemStyle:{backgroundColor:"rgb(0, 188, 212)",color:"white"},listStyle:{width:"120px",backgroundColor:"rgb(0, 188, 212)"},selectedMenuItemStyle:{color:"rgb(24,24,24)"}},i.a.createElement(X.a,{leftIcon:i.a.createElement(q.a,{style:{fontSize:"20px"},icon:J.v,color:"white"}),onClick:this.openUsersDialog.bind(this),title:"Manage Users"},"Users"),i.a.createElement(X.a,{leftIcon:i.a.createElement(q.a,{style:{fontSize:"20px"},icon:J.n,color:"white"}),onClick:this.openRunLogDialog.bind(this),title:"View Run Log and stop runs"},"Run log"))),i.a.createElement(q.a,{icon:Z.h,onClick:this.props.showHelpMenu,title:"Help and support",className:"appBarIcon",style:{fontSize:"20px"}}))))}}]),t}(i.a.Component),te=a(439),ae=a.n(te),ne=a(440),ie=a.n(ne),se=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.style?this.props.style:{},t={display:!1!==this.props.show?"inline-block":"none",marginLeft:"4px",marginRight:"4px",padding:"0px",minWidth:"30px",width:this.props.label?"":"24px",height:"24px"};return Object.assign(e,t),i.a.createElement(ie.a,Object.assign({},this.props,{style:e,overlayStyle:{lineHeight:"24px",height:"24px"},buttonStyle:{lineHeight:"24px",height:"24px"}}))}}]),t}(i.a.Component),re=a(64),oe=a.n(re),le=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"openDocumentation",value:function(){window.open("https://andrewcottam.github.io/marxan-web/documentation/"+this.props.helpLink)}},{key:"render",value:function(){var e=this.props.offsetX?{marginLeft:this.props.offsetX+"px",width:"400px"}:this.props.rightX?{right:this.props.rightX+"px",width:"400px",left:null}:{},t=this.props.offsetY?{marginTop:this.props.offsetY-60+"px"}:{},a=Object.assign(e,t),n=this.props.showCancelButton?i.a.createElement(se,{label:this.props.cancelLabel?this.props.cancelLabel:"Cancel",primary:!0,onClick:this.props.onCancel,disabled:this.props.cancelDisabled}):null,s=this.props.contentStyle?this.props.contentStyle:this.props.contentWidth?{width:this.props.contentWidth+"px"}:{};return i.a.createElement(ae.a,Object.assign({},this.props,{onRequestClose:this.props.onCancel,overlayStyle:this.props.showOverlay?{display:"block"}:{display:"none"},titleClassName:"dialogTitleStyle",contentStyle:s,titleStyle:this.props.titleBarIcon?{marginLeft:"27px"}:null,className:"dialogGeneric",style:a,actions:[this.props.actions,n,i.a.createElement(se,{label:this.props.okLabel?this.props.okLabel:"OK",primary:!0,onClick:this.props.onOk,disabled:this.props.okDisabled})],children:[this.props.titleBarIcon?i.a.createElement(q.a,{icon:this.props.titleBarIcon,style:{position:"absolute",top:"18px",left:"24px"},key:"k1"}):null,i.a.createElement(oe.a,{className:"spin",style:{display:this.props.loading||this.props.showSpinner?"inline-block":"none",color:"rgb(255, 64, 129)",position:"absolute",top:"13px",right:"45px"},key:"spinner"}),this.props.children,this.props.helpLink?i.a.createElement(q.a,{icon:Z.h,onClick:this.openDocumentation.bind(this),title:"Open documentation for this window",className:"appBarIcon docs",style:{fontSize:"18px"},key:"helpLink"}):null]}))}}]),t}(i.a.Component),ce=a(24),pe=a.n(ce),ue=a(39),he=a.n(ue),de=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.props.onOk()}},{key:"selectServer",value:function(e,t,a){this.props.selectServer(this.props.marxanServers[t])}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(le,Object.assign({},this.props,{showOverlay:!0,okDisabled:!!(!this.props.user||!this.props.password||this.props.loading||!this.props.marxanServer||this.props.marxanServer&&this.props.marxanServer.offline||this.props.marxanServer&&!this.props.marxanServer.guestUserEnabled),okLabel:this.props.marxanServer&&!this.props.marxanServer.offline&&!this.props.marxanServer.corsEnabled&&this.props.marxanServer.guestUserEnabled?"Login (Read-Only)":"Login",showCancelButton:!0,cancelLabel:"Register",cancelDisabled:!!(void 0===this.props.marxanServer||this.props.loading||this.props.marxanServer&&this.props.marxanServer.offline||this.props.marxanServer&&!this.props.marxanServer.corsEnabled),helpLink:"docs_user.html#log-in-window",contentWidth:358,offsetY:200,children:[i.a.createElement("div",{key:"21"},i.a.createElement(he.a,{floatingLabelText:"Marxan Server",floatingLabelFixed:!0,underlineShow:!1,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},style:{width:"320px"},value:this.props.marxanServer&&this.props.marxanServer.name,onChange:this.selectServer.bind(this),children:this.props.marxanServers.map(function(e){var t=e.offline?e.name:e.corsEnabled?e.name:e.guestUserEnabled?e.name:e.name+" (Guest user disabled)";return i.a.createElement(X.a,{value:e.name,key:e.name,primaryText:t,style:{fontSize:"12px"},innerDivStyle:{padding:"0px 10px 0px 52px"},leftIcon:e.offline?i.a.createElement(q.a,{style:{height:"12px",marginTop:"5px"},icon:J.r}):e.corsEnabled?null:i.a.createElement(q.a,{style:{height:"12px",marginTop:"5px"},icon:J.k}),title:e.offline?e.host+" (offline)\n"+e.description:e.corsEnabled?e.host+"\n"+e.description:e.guestUserEnabled?e.host+" (read-only)\n"+e.description:e.host+" (guest user disabled)\n"+e.description})})}),i.a.createElement("div",{style:{height:"124px"},id:"logindiv",key:"logindiv"},i.a.createElement(pe.a,{floatingLabelText:"Username",floatingLabelFixed:!0,onChange:function(t,a){return e.props.changeUserName(a)},inputStyle:{fontSize:"12px"},value:this.props.user,className:"loginUserField",disabled:!!(this.props.loading||this.props.marxanServer&&!this.props.marxanServer.corsEnabled),onKeyPress:this.handleKeyPress.bind(this)}),i.a.createElement("span",null,i.a.createElement(pe.a,{floatingLabelText:"Password",floatingLabelFixed:!0,type:"password",onChange:function(t,a){return e.props.changePassword(a)},value:this.props.password,className:"loginUserField",disabled:!!(this.props.loading||this.props.marxanServer&&!this.props.marxanServer.corsEnabled),onKeyPress:this.handleKeyPress.bind(this)}))))],onRequestClose:this.props.onOk,title:"Login",modal:!0})))}}]),t}(i.a.Component),ge=a(441),me=a.n(ge),fe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={validForm:!1,user:void 0,name:void 0,email:void 0,mb_tk:"sk.eyJ1IjoiYmxpc2h0ZW4iLCJhIjoiY2piNm1tOGwxMG9lajMzcXBlZDR4aWVjdiJ9.Z1Jq4UAgGpXukvnUReLO1g",validEmail:!0,mb_tk_err:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"createNewUser",value:function(){try{this.validateEmail()}catch(e){switch(e.message){case"could not determine account from provided accessToken":this.setState({mb_tk_err:"Invalid Mapbox Access Token"})}return void e.message}this.props.onOk(this.state.user,this.state.password,this.state.name,this.state.email,this.state.mb_tk)}},{key:"validateEmail",value:function(){var e=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.email).toLowerCase());if(this.setState({validEmail:e}),!e)throw new Error("Invalid email address")}},{key:"validateMapboxPublicKey",value:function(){var e=this;this.setState({mb_tk_err:""});var t=new me.a(this.state.mb_tk);t.listTilesets(function(t,a){t&&e.setState({mb_tk_err:"Access Token cannot list and/or upload tilesets"})}),t.createUpload({tileset:["test","test"].join("."),url:"irrelevant"},function(t,a){"Not Found"===t.message&&e.setState({mb_tk_err:"Access Token cannot list and/or upload tilesets"})})}},{key:"render",value:function(){var e=this,t=[i.a.createElement("div",{key:"RegisterDialogDiv"},i.a.createElement(pe.a,{floatingLabelText:"Username",floatingLabelFixed:!0,onChange:function(t,a){return e.setState({user:a})}}),i.a.createElement(pe.a,{floatingLabelText:"Password",floatingLabelFixed:!0,type:"password",onChange:function(t,a){return e.setState({password:a})}}),i.a.createElement(pe.a,{floatingLabelText:"Full name",floatingLabelFixed:!0,onChange:function(t,a){return e.setState({name:a})}}),i.a.createElement(pe.a,{floatingLabelText:"Email address",floatingLabelFixed:!0,errorText:this.state.validEmail?"":"Invalid email address",onChange:function(t,a){return e.setState({email:a})}}),i.a.createElement("span",null),i.a.createElement("span",null))];return i.a.createElement(le,Object.assign({},this.props,{contentWidth:358,onOk:this.createNewUser.bind(this),okDisabled:!(this.state.user&&this.state.password&&this.state.name&&this.state.email&&this.state.mb_tk)||this.props.loading,showCancelButton:!0,cancelDisabled:this.props.loading,helpLink:"docs_user.html#new-user-registration",title:"Register",children:t,onRequestClose:this.props.onCancel}))}}]),t}(i.a.Component),ve=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.props.resendPassword()}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(le,Object.assign({},this.props,{contentWidth:358,showCancelButton:!0,okDisabled:!this.props.email||this.props.loading,cancelDisabled:this.props.resending,title:"Resend password",children:[i.a.createElement("div",{key:"resendDiv"},i.a.createElement(pe.a,{floatingLabelText:"email address",floatingLabelFixed:!0,onChange:function(t,a){return e.props.changeEmail(a)},value:this.props.email,className:"loginUserField",disabled:this.props.loading,onKeyPress:this.handleKeyPress.bind(this)}))],onRequestClose:this.props.onCancel})))}}]),t}(i.a.Component),be=a(442),ye=a.n(be),ke=a(46),Se=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{open:this.props.userMenuOpen,anchorEl:this.props.menuAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.hideUserMenu},i.a.createElement(A.a,{desktop:!0,onMouseLeave:this.props.hideUserMenu,menuItemStyle:{backgroundColor:"rgb(0, 188, 212)",color:"white"},listStyle:{width:"120px",backgroundColor:"rgb(0, 188, 212)"},selectedMenuItemStyle:{color:"rgb(24,24,24)"}},i.a.createElement(X.a,{primaryText:this.props.user+" ("+this.props.userRole+")",style:{marginLeft:"40px"}}),i.a.createElement(X.a,{style:{display:"ReadOnly"!==this.props.userRole?"block":"none"},primaryText:"Settings",onClick:this.props.openOptionsDialog.bind(this),leftIcon:i.a.createElement(q.a,{style:{fontSize:"20px",marginBottom:"7px"},icon:J.e,color:"white"})}),i.a.createElement(X.a,{style:{display:"ReadOnly"!==this.props.userRole?"block":"none"},primaryText:"Profile",onClick:this.props.openProfileDialog,leftIcon:i.a.createElement(q.a,{style:{fontSize:"20px",marginBottom:"7px"},icon:J.g,color:"white"})}),i.a.createElement(X.a,{style:{display:"ReadOnly"!==this.props.userRole?"block":"none"},primaryText:"Change password",onClick:this.props.openChangePasswordDialog,leftIcon:i.a.createElement(q.a,{style:{fontSize:"20px",marginBottom:"7px"},icon:J.u,color:"white"})}),i.a.createElement(X.a,{primaryText:"Log out",onClick:this.props.logout.bind(this),leftIcon:i.a.createElement(ye.a,{color:ke.white})}))))}}]),t}(i.a.Component),Ee=a(443),we=a.n(Ee),Oe=a(444),Pe=a.n(Oe),xe=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"openDocumentation",value:function(){window.open(this.props.DOCS_ROOT+"docs_user.html")}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{open:this.props.open,anchorEl:this.props.menuAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.hideHelpMenu},i.a.createElement(A.a,{desktop:!0,onMouseLeave:this.props.hideHelpMenu,menuItemStyle:{backgroundColor:"rgb(0, 188, 212)",color:"white"},listStyle:{width:"120px",backgroundColor:"rgb(0, 188, 212)"},selectedMenuItemStyle:{color:"rgb(24,24,24)"},width:"102px"},i.a.createElement(X.a,{primaryText:"Server Details",onClick:this.props.openServerDetailsDialog,leftIcon:i.a.createElement(q.a,{style:{height:"16px",marginTop:"4px",fontSize:"18px"},icon:J.o,color:"white"})}),i.a.createElement(X.a,{primaryText:"Documentation",onClick:this.openDocumentation.bind(this),leftIcon:i.a.createElement(we.a,{color:ke.white})}),i.a.createElement(X.a,{primaryText:"About",onClick:this.props.openAboutDialog,leftIcon:i.a.createElement(Pe.a,{color:ke.white})}))))}}]),t}(i.a.Component),De=a(95),Ce=a.n(De),je=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={saveEnabled:!1},a.options={},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"setOption",value:function(e,t){this.setState({saveEnabled:!0}),this.options[e]=t}},{key:"updateOptions",value:function(){this.props.saveOptions(this.options),this.props.onOk()}},{key:"changeBasemap",value:function(e,t,a){var n=this.props.basemaps[t];this.props.changeBasemap(n),this.setOption("BASEMAP",n.name)}},{key:"render",value:function(){var e=this;return i.a.createElement(le,Object.assign({},this.props,{contentWidth:370,offsetY:80,showCancelButton:!1,onOk:this.updateOptions.bind(this),helpLink:"docs_user.html#settings",title:"Settings",children:i.a.createElement("div",{key:"k14"},i.a.createElement(he.a,{floatingLabelText:"Basemap style",floatingLabelFixed:!0,underlineShow:!1,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},style:{width:"260px"},value:this.props.basemap,onChange:this.changeBasemap.bind(this),children:this.props.basemaps.map(function(e){return i.a.createElement(X.a,{value:e.name,key:e.name,primaryText:e.alias,style:{fontSize:"12px"},title:e.description})})}),i.a.createElement(Ce.a,{label:"Show planning unit popup",defaultChecked:this.props.userData.SHOWPOPUP,onCheck:function(t,a){return e.setOption("SHOWPOPUP",a)},style:{fontSize:"13px"}}))}))}}]),t}(i.a.Component),Fe=a(271),Re=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={updated:!1,validEmail:!0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.updateUser()}},{key:"updateState",value:function(e,t){var a;this.setState((a={},Object(Fe.a)(a,e,t),Object(Fe.a)(a,"updated",!0),a))}},{key:"validateEmail",value:function(){var e=this.state.EMAIL?this.state.EMAIL:this.props.userData.EMAIL,t=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase());if(this.setState({validEmail:t}),!t)throw new Error("Invalid email address")}},{key:"updateUser",value:function(){try{this.validateEmail()}catch(e){return}this.props.updateUser(this.state),this.closeProfileDialog()}},{key:"closeProfileDialog",value:function(){this.props.onOk(),this.setState({updated:!1,validEmail:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement(le,Object.assign({},this.props,{contentWidth:330,offsetY:80,onCancel:this.closeProfileDialog.bind(this),showCancelButton:!0,onOk:this.updateUser.bind(this),helpLink:"docs_user.html#profile",title:"Profile",children:i.a.createElement("div",{key:"k15"},i.a.createElement(pe.a,{floatingLabelText:"Full name",floatingLabelFixed:!0,onChange:function(t,a){return e.updateState("NAME",a)},defaultValue:this.props.userData&&this.props.userData.NAME,onKeyPress:this.handleKeyPress.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},style:{fontSize:"13px"}}),i.a.createElement(pe.a,{floatingLabelText:"Email address",floatingLabelFixed:!0,errorText:this.state.validEmail?"":"Invalid email address",onChange:function(t,a){return e.updateState("EMAIL",a)},defaultValue:this.props.userData&&this.props.userData.EMAIL,onKeyPress:this.handleKeyPress.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},style:{fontSize:"13px"}}))}))}}]),t}(i.a.Component),Ae=a(32),Le=["User","ReadOnly","Admin"],Ne=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={selectedUser:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"changeRole",value:function(e,t,a,n,i){this.props.changeRole(e,i)}},{key:"_delete",value:function(){this.props.deleteUser(this.state.selectedUser.user),this.setState({selectedUser:!1})}},{key:"changeUser",value:function(e,t){this.setState({selectedUser:t})}},{key:"closeDialog",value:function(){this.setState({selectedUser:void 0}),this.props.onOk()}},{key:"render",value:function(){var e=this;return this.props.users?i.a.createElement(le,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),onRequestClose:this.closeDialog.bind(this),showCancelButton:!1,helpLink:"docs_user.html#the-users-window-admin-users-only",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Users",children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{style:{marginBottom:"5px"}},"There are a total of ",this.props.users.length," users:"),i.a.createElement("div",{id:"usersTable"},this.props.users&&this.props.users.length>0?i.a.createElement(Ae.a,{pageSize:this.props.users.length,className:"projectsReactTable noselect",showPagination:!1,minRows:0,noDataText:"",data:this.props.users,thisRef:this,columns:[{Header:"User",accessor:"user",width:90,headerStyle:{textAlign:"left"}},{Header:"Name",accessor:"NAME",width:200,headerStyle:{textAlign:"left"}},{Header:"email",accessor:"EMAIL",width:250,headerStyle:{textAlign:"left"}},{Header:"Role",accessor:"ROLE",width:180,headerStyle:{textAlign:"left"},Cell:function(t){return"guest"===t.original.user?i.a.createElement("div",null,"ReadOnly"):i.a.createElement(he.a,{style:{width:130,height:15,lineHeight:15,position:"relative",fontSize:"12px"},menuStyle:{position:"absolute",top:-22},underlineStyle:{position:"relative",top:20},iconStyle:{lineHeight:"24px",height:"24px"},value:t.original.ROLE,onChange:e.changeRole.bind(e,t.original.user,t.value)},Le.map(function(e){return i.a.createElement(X.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})}))}}],getTrProps:function(e,t,a){return{style:{background:t.original.user===(e.thisRef.state.selectedUser&&e.thisRef.state.selectedUser.user)?"aliceblue":""},onClick:function(a){-1===Le.indexOf(a.target.textContent)&&e.thisRef.changeUser(a,t.original)}}}}):null),i.a.createElement("div",{id:"projectsToolbar"},i.a.createElement(se,{icon:i.a.createElement(q.a,{icon:Z.i,color:"rgb(255, 64, 129)"}),title:"Delete user",disabled:!this.state.selectedUser||this.props.loading||this.props.user===this.state.selectedUser.user||"guest"===this.state.selectedUser.user,onClick:this._delete.bind(this),label:"Delete"}),i.a.createElement(Ce.a,{label:"Enable guest user",style:{fontSize:"12px",paddingLeft:"10px",width:"200px",display:"inline-block",verticalAlign:"bottom"},onClick:this.props.toggleEnableGuestUser,checked:this.props.guestUserEnabled})))})):null}}]),t}(i.a.Component),Te=a(445),Ie=a.n(Te),Me=a(446),Ue=a.n(Me),Be=a(447),_e=a.n(Be),Ge=a(448),ze=a.n(Ge),Ve=a(449),He=a.n(Ve),Ke=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{contentWidth:500,offsetY:80,title:"About",helpLink:"docs_user.html#about-window",children:i.a.createElement("div",{key:"k5"},i.a.createElement("div",{className:"aboutTitle"},"Software development"),i.a.createElement("div",{className:"aboutText"},"Marxan Web v",this.props.marxanClientReleaseVersion," Feedback:"," ",i.a.createElement("a",{href:"mailto:andrew.cottam@ec.europa.eu",className:"email"},"Andrew Cottam")),i.a.createElement("div",{className:"aboutText"},"Marxan 2.4.3 - Ian Ball, Matthew Watts & Hugh Possingham"),i.a.createElement("div",{className:"aboutTitle"},"Data providers"),i.a.createElement("div",{className:"aboutText",style:{marginTop:"10px"},dangerouslySetInnerHTML:{__html:this.props.wdpaAttribution}}),i.a.createElement("div",{className:"aboutTitle"},"Funding and in-kind contributions"),i.a.createElement("div",{className:"aboutText",style:{marginTop:"10px"}},"Marxan Web funded by the BIOPAMA project of the European Commission. With in-kind contributions from Mapbox."),i.a.createElement("div",{className:"aboutText",style:{marginTop:"10px"}},"Marxan funded by a range of donors - see ",i.a.createElement("a",{href:"http://marxan.org/credits.html",target:"_blank",rel:"noopener noreferrer"},"here"),"."),i.a.createElement("div",{className:"logos"},i.a.createElement("a",{href:"https://www.iucn.org/"},i.a.createElement("img",{src:Ie.a,alt:"IUCN logo",title:"IUCN logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://www.unep-wcmc.org/"},i.a.createElement("img",{src:Ue.a,alt:"UN Environment WCMC logo",title:"UN Environment WCMC logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://www.biopama.org"},i.a.createElement("img",{src:ze.a,alt:"BIOPAMA logo",title:"BIOPAMA logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://ec.europa.eu/jrc/en"},i.a.createElement("img",{src:He.a,alt:"Joint Research Centre of the European Commission logo",title:"Joint Research Centre of the European Commission logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://www.mapbox.com"},i.a.createElement("img",{src:_e.a,alt:"Mapbox logo",title:"Mapbox logo",className:"aboutLogo"}))))}))}}]),t}(i.a.Component),Qe=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(X.a,Object.assign({className:"smallMenuItem"},this.props,{innerDivStyle:{paddingLeft:"40px"}}))}}]),t}(i.a.Component),We=(a(217),a(50)),Ye=a.n(We),Xe=a(65),qe=a(87),Je=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={editing:!1,localTargetValue:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(e){this.startEditing()}},{key:"isNumber",value:function(e){return/^\d+$/.test(e)}},{key:"onChange",value:function(e){var t=e.nativeEvent.target.value;t>100||(this.isNumber(t)||""===t)&&(t=""===t?0:Number(t),this.setState({localTargetValue:t}))}},{key:"onKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.setState({editing:!1})}},{key:"startEditing",value:function(){this.setState({editing:!0,localTargetValue:this.props.target_value}),document.getElementById("input_"+this.props.interestFeature.id).focus(),document.getElementById("input_"+this.props.interestFeature.id).select()}},{key:"stopEditing",value:function(){this.setState({editing:!1}),this.props.updateTargetValue(this,this.state.localTargetValue)}},{key:"render",value:function(){var e="Does not occur in planning area"===this.props.targetStatus?"lightgray":"Unknown"===this.props.targetStatus?"white":"Target achieved"===this.props.targetStatus?"white":"rgb(255, 64, 129)",t="Does not occur in planning area"===this.props.targetStatus?"white":"Unknown"===this.props.targetStatus?ke.blue300:"Target achieved"===this.props.targetStatus?ke.blue300:"white";return n.createElement("div",{onClick:"ReadOnly"===this.props.userRole?null:this.onClick.bind(this),style:{position:"absolute",left:"8px",top:"17px",display:this.props.visible?"block":"none"}},n.createElement("div",{title:this.props.targetStatus,style:{display:this.state.editing?"none":"inline-flex",backgroundColor:e,size:"0",color:t,userSelect:"none",alignItems:"center",justifyContent:"center",fontSize:"12px",borderRadius:"50%",height:"33px",width:"33px",left:"8px",border:"1px lightgray solid"}},this.props.target_value,"%"),n.createElement("div",{style:{display:this.state.editing?"inline-flex":"none",size:"30",backgroundColor:"#2F6AE4",userSelect:"none",alignItems:"center",justifyContent:"center",borderRadius:"50%",height:"33px",width:"33px",left:"8px"}},n.createElement("input",{id:"input_"+this.props.interestFeature.id,onBlur:this.stopEditing.bind(this),onKeyPress:this.onKeyPress.bind(this),onChange:this.onChange.bind(this),style:{backgroundColor:"transparent",border:"0px",height:"33px",width:"33px",fontSize:"13px",display:"inline-flex",textAlign:"center",color:ke.blue300},value:this.state.localTargetValue})))}}]),t}(n.PureComponent),Ze=a(117),$e=a.n(Ze),et=a(181),tt=a.n(et),at=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={alwaysShowPercent:!1,showUnprotectedPercent:!1,targetAsLine:!1},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a=this.props.scaledWidth/100,i=this.props.target_value*a;e=Math.round(-1===this.props.protected_percent?0:this.props.protected_percent*a);var s=this.props.protected_percent,r=s<this.props.target_value&&Math.round(s)===this.props.target_value?s.toFixed(2).slice(0,s.toFixed(2).indexOf(".")+2):Math.round(s);t=e<26&&!this.state.alwaysShowPercent;var o=this.props.protected_percent>=this.props.target_value?0:i-e,l=100*a-e-o;return n.createElement("div",{className:this.props.visible?"linearGauge":"linearGaugeNoBorder",style:{opacity:-1===this.props.protected_percent?"0.3":1}},n.createElement("div",{title:r+"% protected",className:"percentBar protectedPercentBar",style:{width:e+"px"}},t?n.createElement("span",null,"\xa0"):r+"%"),n.createElement("div",{title:"Target of "+this.props.target_value+"%",className:"percentBar targetShortfall",style:{width:this.props.visible?o+"px":"0px"}}),n.createElement("div",{className:"percentBar totalShortFall",style:{width:l+"px",color:"rgba(0,0,0,0.7)",textAlign:this.props.visible?null:"left",fontStyle:this.props.visible?null:"italic"}},this.props.visible?null:"Does not occur"))}}]),t}(n.Component),nt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"iconClick",value:function(e,t){this.props.openFeatureMenu(t,e)}},{key:"updateTargetValue",value:function(e,t){this.props.updateFeature(e.props.interestFeature,{target_value:t})}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement("div",{className:"tabTitle"},"Select the features"),n.createElement(qe.List,{style:{padding:"0px !important",maxHeight:this.props.maxheight,overflow:"auto"}},this.props.features.map(function(t){var a=t.pu_area,i=-1===t.protected_area?-1:a>=0&&t.protected_area>0?t.protected_area/a*100:0,s=0===a?"Does not occur in planning area":-1===i?"Unknown":t.protected_area>=t.target_area?"Target achieved":"Target missed";return n.createElement(qe.ListItem,{leftAvatar:e.props.simple?n.createElement("span",null):n.createElement(Je,{style:{left:8},target_value:t.target_value,updateTargetValue:e.updateTargetValue.bind(e),interestFeature:t,targetStatus:s,visible:0!==t.pu_area,userRole:e.props.userRole}),primaryText:t.alias,secondaryText:e.props.simple?n.createElement("span",null):n.createElement(at,{scaledWidth:220,target_value:t.target_value,protected_percent:i,visible:0!==t.pu_area}),key:t.id,value:t.alias,rightIconButton:e.props.simple?n.createElement("div",null):n.createElement($e.a,{touch:!0,tooltipPosition:"bottom-left",onClick:e.iconClick.bind(e,t)},n.createElement(tt.a,{color:ke.grey400})),innerDivStyle:{padding:e.props.simple?"5px 5px 5px 5px":"9px 5px 11px 53px"},style:{borderRadius:"3px",fontSize:"14px",color:"rgba(0,0,0,0.8)"}})})))}}]),t}(n.Component),it=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"openFeaturesDialog",value:function(e){this.props.openFeaturesDialog(!0)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"newPUDialogPane"},i.a.createElement(nt,{features:this.props.features,openFeatureMenu:this.props.openFeatureMenu,simple:this.props.simple,maxheight:"387px",updateFeature:this.props.updateFeature,userRole:this.props.userRole}),i.a.createElement(se,{onClick:this.props.openTargetPopup,show:!(this.props.metadata&&this.props.metadata.OLDVERSION||"ReadOnly"===this.props.userRole||!this.props.showTargetButton),icon:i.a.createElement(q.a,{icon:J.f}),style:{marginLeft:this.props.leftmargin,width:"30px",marginTop:"5px"},title:"Set a target for all features"}),i.a.createElement(se,{label:"+/-",onClick:this.openFeaturesDialog.bind(this),show:!(this.props.metadata&&this.props.metadata.OLDVERSION||"ReadOnly"===this.props.userRole),style:{marginLeft:this.props.leftmargin,width:"30px",marginTop:"5px"},title:"Add/remove features from the project"})))}}]),t}(i.a.Component),st=a(182),rt=a.n(st),ot=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).iucnCategories=["None","IUCN I-II","IUCN I-IV","IUCN I-V","IUCN I-VI","All"],a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){!1===e.editingProjectName&&this.props.editingProjectName&&(document.getElementById("projectName").value=this.props.project,document.getElementById("projectName").focus()),!1===e.editingDescription&&this.props.editingDescription&&(document.getElementById("descriptionEdit").value=this.props.metadata.DESCRIPTION,document.getElementById("descriptionEdit").focus())}},{key:"onKeyPress",value:function(e){13!==e.nativeEvent.keyCode&&27!==e.nativeEvent.keyCode||document.getElementById(e.nativeEvent.target.id).blur()}},{key:"onBlur",value:function(e){"projectName"===e.nativeEvent.target.id?this.props.renameProject(e.target.value):this.props.renameDescription(e.target.value)}},{key:"startEditingProjectName",value:function(){this.props.project&&this.props.startEditingProjectName()}},{key:"startEditingDescription",value:function(){this.props.project&&this.props.startEditingDescription()}},{key:"startStopPuEditSession",value:function(e){this.props.puEditing?this.stopPuEditSession():this.startPuEditSession()}},{key:"startPuEditSession",value:function(){this.setState({puEditing:!0}),this.props.startPuEditSession()}},{key:"stopPuEditSession",value:function(){this.setState({puEditing:!1}),this.props.stopPuEditSession()}},{key:"changeIucnCategory",value:function(e,t,a){this.props.changeIucnCategory(this.iucnCategories[t])}},{key:"toggleProjectPrivacy",value:function(e,t){var a=t?"True":"False";this.props.toggleProjectPrivacy(a)}},{key:"toggleCosts",value:function(e,t){this.props.toggleCosts(t)}},{key:"stopProcess",value:function(){this.props.stopProcess(this.props.pid)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"infoPanel",style:{display:this.props.open?"block":"none"}},i.a.createElement(Ye.a,{zDepth:2,className:"InfoPanelPaper"},i.a.createElement(Ye.a,{zDepth:2,className:"titleBar"},"ReadOnly"===this.props.userRole?i.a.createElement("span",{className:"projectNameEditBox",title:this.props.project+" (Read-only)"},i.a.createElement(q.a,{style:{color:"white",height:"16px",marginTop:"4px",marginBottom:"2px",marginRight:"5px"},icon:J.k}),this.props.project):i.a.createElement("span",{onClick:this.startEditingProjectName.bind(this),className:"projectNameEditBox",title:"Click to rename the project"},this.props.project),"ReadOnly"===this.props.userRole?null:i.a.createElement("input",{id:"projectName",style:{position:"absolute",display:this.props.editingProjectName?"block":"none",left:"39px",top:"32px",width:"365px",border:"1px lightgray solid"},className:"projectNameEditBox",onKeyPress:this.onKeyPress.bind(this),onBlur:this.onBlur.bind(this)})),i.a.createElement(Xe.Tabs,{contentContainerStyle:{margin:"20px"},className:"tabs",value:this.props.activeTab},i.a.createElement(Xe.Tab,{label:"Project",onActive:this.props.project_tab_active,value:"project",disabled:!!this.props.puEditing},i.a.createElement("div",null,i.a.createElement("div",{className:"tabTitle"},"Description"),"ReadOnly"===this.props.userRole?null:i.a.createElement("input",{id:"descriptionEdit",style:{display:this.props.editingDescription?"block":"none"},className:"descriptionEditBox",onKeyPress:this.onKeyPress.bind(this),onBlur:this.onBlur.bind(this)}),"ReadOnly"===this.props.userRole?i.a.createElement("div",{className:"description",title:this.props.metadata.DESCRIPTION},this.props.metadata.DESCRIPTION):i.a.createElement("div",{className:"description",onClick:this.startEditingDescription.bind(this),style:{display:this.props.editingDescription?"none":"block"},title:"Click to edit"},this.props.metadata.DESCRIPTION),i.a.createElement("div",{className:"tabTitle tabTitleTopMargin"},"Created"),i.a.createElement("div",{className:"createDate"},this.props.metadata.CREATEDATE),i.a.createElement("div",{className:"tabTitle tabTitleTopMargin"},this.props.metadata.OLDVERSION?"Imported project":""),i.a.createElement("div",{style:{position:"absolute",top:"413px",display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(Ce.a,{label:"Private",style:{fontSize:"12px"},checked:this.props.metadata.PRIVATE,onCheck:this.toggleProjectPrivacy.bind(this)})))),i.a.createElement(Xe.Tab,{label:"Features",onActive:this.props.features_tab_active,value:"features",disabled:!!this.props.puEditing},i.a.createElement(it,{features:this.props.features,openFeatureMenu:this.props.openFeatureMenu,openFeaturesDialog:this.props.openFeaturesDialog,metadata:this.props.metadata,updateFeature:this.props.updateFeature,leftmargin:"10px",simple:!1,showTargetButton:!0,openTargetPopup:this.props.openTargetPopup,userRole:this.props.userRole})),i.a.createElement(Xe.Tab,{label:"Planning units",onActive:this.props.pu_tab_active,value:"planning_units"},i.a.createElement("div",null,i.a.createElement("div",{className:"tabTitle"},"Planning grid"),i.a.createElement("div",{className:"description"},this.props.metadata.pu_alias),i.a.createElement("div",{className:"tabTitle tabTitleTopMargin"},"Protected areas"),i.a.createElement(he.a,{floatingLabelText:"Include",floatingLabelFixed:!0,underlineShow:!1,disabled:this.props.preprocessing||"ReadOnly"===this.props.userRole,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},style:{marginTop:"-15px",width:"140px"},value:this.props.metadata.IUCN_CATEGORY,onChange:this.changeIucnCategory.bind(this),children:this.iucnCategories.map(function(e){return i.a.createElement(X.a,{value:e,key:e,primaryText:e,style:{fontSize:"12px"}})})}),i.a.createElement("div",{style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement("div",{className:"tabTitle"},"Statuses"),i.a.createElement(q.a,{icon:this.props.puEditing?J.s:J.k,onClick:this.startStopPuEditSession.bind(this),title:this.props.puEditing?"Save":"Click to edit",style:{cursor:"pointer",marginRight:"10px",color:"rgba(255, 64, 129, 0.7)"}}),i.a.createElement("div",{className:"description",style:{display:"inline-block"}},this.props.puEditing?"Click on the map to change the status":"Click to edit"),i.a.createElement("div",{style:{display:this.props.puEditing?"block":"none"}},i.a.createElement("div",{className:"statusRow"},i.a.createElement("div",{className:"statusSwatch",style:{border:"1px rgba(63, 191, 63, 1) solid"}}),i.a.createElement("div",{className:"puStatus"},"Initially included")),i.a.createElement("div",{className:"statusRow"},i.a.createElement("div",{className:"statusSwatch",style:{border:"1px rgba(63, 63, 191, 1) solid"}}),i.a.createElement("div",{className:"puStatus"},"Locked in the reserve system")),i.a.createElement("div",{className:"statusRow"},i.a.createElement("div",{className:"statusSwatch",style:{border:"1px rgba(191, 63, 63, 1) solid"}}),i.a.createElement("div",{className:"puStatus"},"Locked out of the reserve system")),i.a.createElement(se,{icon:i.a.createElement(q.a,{icon:J.h}),title:"Clear all manual edits",onClick:this.props.clearManualEdits.bind(this)}))),i.a.createElement("div",{className:"tabTitle",style:{display:"none"}},"Costs"),i.a.createElement(Ce.a,{label:"Show costs",style:{fontSize:"12px",display:"none"},onCheck:this.toggleCosts.bind(this)})))),i.a.createElement(Ye.a,{className:"lowerToolbar"},i.a.createElement(se,{icon:i.a.createElement(rt.a,{style:{height:"20px",width:"20px"}}),title:"Run Settings",onClick:this.props.showRunSettingsDialog}),i.a.createElement(se,{label:"Stop",title:"Click to stop the current run",show:"ReadOnly"!==this.props.userRole,style:{marginLeft:"194px"},onClick:this.stopProcess.bind(this),disabled:0===this.props.pid,secondary:!0}),i.a.createElement(se,{label:"Run",title:"Click to run this project",show:"ReadOnly"!==this.props.userRole,onClick:this.props.runMarxan,disabled:this.props.preprocessing||0===this.props.features.length||this.props.puEditing,secondary:!0})))))}}]),t}(i.a.Component),lt=a(450),ct=a.n(lt),pt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={showSlider:!1},a.old_opacity=.5,a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e,t){this.props.layer&&(this.old_opacity=this.props.opacity,this.props.changeOpacity(this.props.layer.id,t))}},{key:"toggleLayer",value:function(){this.props.layer&&(this.props.opacity>0?this.onChange(void 0,0):this.onChange(void 0,this.old_opacity))}},{key:"mouseEnter",value:function(e){this.setState({showSlider:!0})}},{key:"mouseLeave",value:function(e){this.setState({showSlider:!1})}},{key:"render",value:function(){return i.a.createElement("div",{style:this.props.style},i.a.createElement("div",{onMouseEnter:this.mouseEnter.bind(this),onMouseLeave:this.mouseLeave.bind(this),style:{position:"absolute",width:"132px",height:"23px"},title:"Change transparency - click to toggle layer"},i.a.createElement(q.a,{icon:0===this.props.opacity?Z.g:Z.f,style:{color:"gainsboro"},onClick:this.toggleLayer.bind(this)}),i.a.createElement(ct.a,{value:this.props.opacity,onChange:this.onChange.bind(this),style:{display:this.state.showSlider?"inline-block":"none",width:"100px",position:"absolute",top:"2px",left:"26px"},sliderStyle:{margin:"0px"}})))}}]),t}(i.a.Component),ut=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"getPlanningUnitsLegend",value:function(e){var t,a=this;if(1!==this.props.brew.breaks[this.props.brew.breaks.length-1]){var i=this.props.brew.getNumClasses(),s=W(this.props.brew,e),r=this.props.brew.colorSchemes[e],o=i<=s?Array.apply(null,{length:i}).map(Number.call,Number):Array.apply(null,{length:s}).map(Number.call,Number),l=o.length;t=o.map(function(e){var t=a.props.brew.breaks[e+1]-a.props.brew.breaks[e]>1,i=1===a.props.brew.breaks[e+1]?" solution":" solutions",s=t?a.props.brew.breaks[e]+1+" - "+a.props.brew.breaks[e+1]+i:a.props.brew.breaks[e+1]+i;return n.createElement("div",{key:e},n.createElement("div",{key:"swatch"+e,style:{backgroundColor:r[l][e],width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"7px",fontSize:"12px"},key:"label"+e},s))})}else t=n.createElement("div",null,n.createElement("div",{style:{backgroundColor:"rgba(255, 0, 136,1)",width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"3px",fontSize:"12px"}},"Proposed addition to network"));return t=n.createElement("div",null,n.createElement("div",{className:"tabTitle"},"Planning units"),n.createElement("div",null,t),n.createElement(pt,{layer:this.props.resultsLayer,changeOpacity:this.props.changeOpacity,opacity:this.props.results_layer_opacity}))}},{key:"getProtectedAreasLegend",value:function(){return this.props.pa_layer_visible?n.createElement("div",null,n.createElement("div",{className:"tabTitle"},"Protected areas"),n.createElement("div",{key:"marine",style:{backgroundColor:"rgba(63,127,191)",width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"7px",fontSize:"12px"},key:"label_marine"},"Marine"),n.createElement("div",null,n.createElement("div",{key:"terrestrial",style:{backgroundColor:"rgba(99,148,69)",width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"7px",fontSize:"12px"},key:"label_terrestrial"},"Terrestrial")),n.createElement(pt,{layer:this.props.wdpaLayer,changeOpacity:this.props.changeOpacity,opacity:this.props.wdpa_layer_opacity})):null}},{key:"render",value:function(){var e=this.props.brew&&this.props.brew.breaks&&this.props.brew.colorCode?this.getPlanningUnitsLegend(this.props.brew.colorCode):n.createElement("div",null),t=this.getProtectedAreasLegend();return n.createElement("div",null,n.createElement("div",null,e),n.createElement("div",{style:{marginTop:"32px"}},t))}}]),t}(n.Component),ht=a(451),dt=a.n(ht),gt=0,mt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={showClipboard:!1,selectedSolution:void 0,runtimeStr:"00:00s"},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(this.props.log!==e.log){var a=document.getElementById("log");a&&(a.scrollTop=a.scrollHeight),this.resetSolution()}this.props.solutions!==e.solutions&&this.resetSolution(),this.props&&this.props.preprocessing&&e&&!e.preprocessing&&this.startTimer(),e&&e.preprocessing&&this.props&&!this.props.preprocessing&&this.stopTimer()}},{key:"str_pad_left",value:function(e,t,a){return(new Array(a+1).join(t)+e).slice(-a)}},{key:"startTimer",value:function(){var e=this;gt=0,this.timer=setInterval(function(){var t=Math.floor(gt/60),a=gt-60*t,n=e.str_pad_left(t,"0",2)+":"+e.str_pad_left(a,"0",2);e.setState({runtimeStr:n}),gt+=1},1e3)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"loadSolution",value:function(e){this.props.loadSolution(e,this.props.owner)}},{key:"mouseEnter",value:function(e){this.setState({showClipboard:!0})}},{key:"mouseLeave",value:function(e){"buttonsDiv"!==e.relatedTarget.id&&this.setState({showClipboard:!1})}},{key:"selectText",value:function(e){if(e=document.getElementById(e),document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var a=window.getSelection(),n=document.createRange();n.selectNodeContents(e),a.removeAllRanges(),a.addRange(n)}else console.warn("Could not select text in node: Unsupported browser.")}},{key:"copyLog",value:function(e){this.selectText("log"),e.target.focus(),document.execCommand("copy")}},{key:"resetSolution",value:function(){this.state.selectedSolution&&this.changeSolution(void 0,void 0)}},{key:"changeSolution",value:function(e,t){this.setState({selectedSolution:t}),t&&this.loadSolution(t.Run_Number)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{width:"300px",height:"400px",position:"absolute",right:"140px",display:this.props.open?"block":"none"}},i.a.createElement(Ye.a,{zDepth:2,className:"ResultsPanePaper"},i.a.createElement("div",{className:"resultsTitle"},"Results"),i.a.createElement(Xe.Tabs,{contentContainerStyle:{margin:"20px"},className:"resultsTabs",value:this.props.activeResultsTab,id:"resultsTabs"},i.a.createElement(Xe.Tab,{label:"Legend",value:"legend",onActive:this.props.legend_tab_active},i.a.createElement("div",null,i.a.createElement(ut,{brew:this.props.brew,resultsLayer:this.props.resultsLayer,wdpaLayer:this.props.wdpaLayer,pa_layer_visible:this.props.pa_layer_visible,changeOpacity:this.props.changeOpacity,results_layer_opacity:this.props.results_layer_opacity,wdpa_layer_opacity:this.props.wdpa_layer_opacity}),i.a.createElement(se,{icon:i.a.createElement(rt.a,{style:{height:"20px",width:"20px"}}),title:"Legend Settings",onClick:this.props.openClassificationDialog,style:{top:"447px",position:"absolute",marginLeft:"-7px"}}))),i.a.createElement(Xe.Tab,{label:"Solutions",value:"solutions",onActive:this.props.solutions_tab_active},i.a.createElement("div",{id:"solutionsPanel",style:{display:this.props.processing?"none":"block"}},this.props.solutions&&this.props.solutions.length>0?i.a.createElement(Ae.a,{thisRef:this,getTrProps:function(e,t,a,n){return{onClick:function(a){e.thisRef.changeSolution(a,t.original)},style:{background:t.original.Run_Number===(e.thisRef.state.selectedSolution&&e.thisRef.state.selectedSolution.Run_Number)?"aliceblue":""},title:"Click to show on the map"}},className:"solutions_infoTable -highlight",showPagination:!1,minRows:0,pageSize:this.props.solutions.length,noDataText:"",data:this.props.solutions,columns:[{Header:"Run",accessor:"Run_Number",width:40,headerStyle:{textAlign:"left"}},{Header:"Score",accessor:"Score",width:80,headerStyle:{textAlign:"left"}},{Header:"Cost",accessor:"Cost",width:80,headerStyle:{textAlign:"left"}},{Header:"Planning Units",accessor:"Planning_Units",width:50,headerStyle:{textAlign:"left"}},{Header:"Missing Values",accessor:"Missing_Values",width:105,headerStyle:{textAlign:"left"}}]}):null)),i.a.createElement(Xe.Tab,{label:"Log",value:"log",onActive:this.props.log_tab_active},i.a.createElement("div",{id:"log",onMouseEnter:this.mouseEnter.bind(this),onMouseLeave:this.mouseLeave.bind(this)},this.props.log),i.a.createElement("div",{className:"runtime",style:{display:this.props.preprocessing?"block":"none"}},"Runtime: ",this.state.runtimeStr,"s"),i.a.createElement("div",{id:"buttonsDiv",style:{position:"absolute",top:"430px",right:"16px",padding:"10px"}},i.a.createElement(se,{icon:i.a.createElement(dt.a,{style:{height:"20px",width:"20px"}}),title:"Copy to clipboard",onClick:this.copyLog.bind(this),show:this.state.showClipboard}),i.a.createElement(se,{icon:i.a.createElement(q.a,{icon:J.h}),title:"Clear log",onClick:this.props.clearLog.bind(this),show:this.state.showClipboard})))),i.a.createElement("div",{className:"processingDiv",style:{display:this.props.preprocessing?"block":"none"},title:"Processing.."},i.a.createElement(Ye.a,{zDepth:2},i.a.createElement("div",{className:"processingText"}),i.a.createElement(oe.a,{className:"spin processingSpin",style:{color:"rgb(255, 64, 129)"}}))))))}}]),t}(i.a.Component),ft=a(148),vt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"getHTML",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i.a.createElement("div",{title:""!==t?t:e},e)}},{key:"getAreaHTML",value:function(e){var t=this.props.feature.protected_area<this.props.feature.target_area&&"Area protected"===e.row.key?"red":"rgba(0, 0, 0, 0.6)",a="0.0"===Number(e.row.value/1e6).toFixed(1)&&e.row.value>0?" (approx.)":"";return i.a.createElement("div",{title:e.row.value/1e6+" Km2",style:{color:t}},String(Number(e.row.value/1e6).toFixed(1)).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Km",i.a.createElement("span",{style:{verticalAlign:"super",fontSize:"smaller"}},"2"),a)}},{key:"renderKeyCell",value:function(e){return this.getHTML(e.row.key,e.original.hint)}},{key:"updateFeatureValue",value:function(e,t){var a="target_value"===e?t.currentTarget.innerHTML.substr(0,t.currentTarget.innerHTML.length-1):t.currentTarget.innerHTML;if("target_value"===e&&Object(ft.isValidTargetValue)(a)||"spf"===e&&Object(ft.isNumber)(a)){var n={};n[e]=a,this.props.updateFeature(this.props.feature,n)}else alert("Invalid value")}},{key:"renderValueCell",value:function(e){var t;switch(e.row.key){case"ID":case"Alias":case"Feature class name":t=this.getHTML(e.row.value,e.original.hint);break;case"Description":case"Creation date":t=this.getHTML(e.row.value);break;case"Mapbox ID":t=""===e.row.value||null===e.row.value?this.getHTML("Not available","The feature was not uploaded to Mapbox"):this.getHTML(e.row.value,"The feature was uploaded to Mapbox with this identifier");break;case"Total area":t=-1===e.row.value?this.getHTML("Not calculated","Total areas are not available for imported projects"):this.getAreaHTML(e,e.original.hint);break;case"Target percent":t="ReadOnly"===this.props.userRole?i.a.createElement("div",null,e.row.value,"%"):i.a.createElement("div",{contentEditable:!0,suppressContentEditableWarning:!0,title:"Click to edit",onBlur:this.updateFeatureValue.bind(this,"target_value")},e.row.value,"%");break;case"Species Penalty Factor":t="ReadOnly"===this.props.userRole?i.a.createElement("div",null,e.row.value,"%"):i.a.createElement("div",{contentEditable:!0,suppressContentEditableWarning:!0,title:"Click to edit",onBlur:this.updateFeatureValue.bind(this,"spf")},e.row.value);break;case"Preprocessed":t=e.row.value?this.getHTML("Yes","The feature has been intersected with the planning units"):this.getHTML("No","The feature has not yet been intersected with the planning units");break;case"Planning grid area":t=-1===e.row.value?this.getHTML("Not calculated","Calculated during pre-processing"):this.getAreaHTML(e);break;case"Planning unit count":t=-1===e.row.value?this.getHTML("Not calculated","Calculated during pre-processing"):this.getHTML(e.row.value);break;case"Target area":case"Area protected":t=-1===e.row.value?this.getHTML("Not calculated","Calculated during a Marxan run"):this.getAreaHTML(e)}return t}},{key:"render",value:function(){var e=this;if(this.props.feature){var t=[];return this.props.FEATURE_PROPERTIES.forEach(function(a){(!e.props.feature.old_version||e.props.feature.old_version&&a.showForOld)&&t.push({key:a.key,value:e.props.feature[a.name],hint:a.hint})},this),i.a.createElement(le,Object.assign({title:"Properties"},this.props,{contentWidth:380,offsetX:135,offsetY:250,children:i.a.createElement(Ae.a,{showPagination:!1,className:this.props.feature.old_version?"infoTableOldVersion":"infoTable",minRows:0,pageSize:t.length,data:t,noDataText:"",columns:[{Header:"Key",accessor:"key",width:150,headerStyle:{textAlign:"left"},Cell:function(t){return e.renderKeyCell(t)}},{Header:"Value",accessor:"value",width:185,headerStyle:{textAlign:"left"},Cell:function(t){return e.renderValueCell(t)}}],key:"k9"})}))}return null}}]),t}(i.a.Component),bt=a(118),yt=a.n(bt),kt=a(452),St=a.n(kt),Et=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={selectedProject:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"_delete",value:function(){this.props.deleteProject(this.state.selectedProject.user,this.state.selectedProject.name),this.setState({selectedProject:!1})}},{key:"load",value:function(){!0===this.props.oldVersion&&!1===this.state.selectedProject.oldVersion?this.props.getAllFeatures().then(function(){this.loadAndClose()}.bind(this)):this.loadAndClose()}},{key:"loadAndClose",value:function(){this.props.loadProject(this.state.selectedProject.name,this.state.selectedProject.user),this.closeDialog()}},{key:"_new",value:function(){this.props.getAllFeatures().then(function(){this.props.openNewProjectDialog(),this.closeDialog()}.bind(this))}},{key:"cloneProject",value:function(){this.props.cloneProject(this.state.selectedProject.user,this.state.selectedProject.name)}},{key:"openImportDialog",value:function(){this.props.openImportDialog(),this.closeDialog()}},{key:"changeProject",value:function(e,t){this.setState({selectedProject:t})}},{key:"closeDialog",value:function(){this.setState({selectedProject:void 0}),this.props.onOk()}},{key:"sortDate",value:function(e,t,a){return Date.parse(e)>Date.parse(t)?1:-1}},{key:"renderTitle",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.description},e.original.description)}},{key:"renderName",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.name},e.original.name)}},{key:"render",value:function(){var e=[];return e=["Admin","ReadOnly"].includes(this.props.userRole)?[{Header:"User",accessor:"user",width:90,headerStyle:{textAlign:"left"}},{Header:"Name",accessor:"name",width:200,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)},{Header:"Description",accessor:"description",width:250,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Date",accessor:"createdate",width:180,headerStyle:{textAlign:"left"},sortMethod:this.sortDate.bind(this)}]:[{Header:"Name",accessor:"name",width:170,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)},{Header:"Description",accessor:"description",width:330,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Date",accessor:"createdate",width:220,headerStyle:{textAlign:"left"},sortMethod:this.sortDate.bind(this)}],this.props.projects?i.a.createElement(le,Object.assign({},this.props,{okLabel:"ReadOnly"===this.props.userRole?"Open (Read-only)":"Open",onOk:this.load.bind(this),onCancel:this.closeDialog.bind(this),okDisabled:!this.state.selectedProject,showCancelButton:!0,helpLink:"docs_user.html#the-projects-window",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Projects",children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{style:{marginBottom:"5px"}},"There are a total of ",this.props.projects.length," projects:"),i.a.createElement("div",{id:"projectsTable"},i.a.createElement(Ae.a,{pageSize:this.props.projects.length,className:"projectsReactTable noselect",showPagination:!1,minRows:0,noDataText:"",data:this.props.projects,thisRef:this,columns:e,getTrProps:function(e,t,a){return{style:{background:t.original.user===(e.thisRef.state.selectedProject&&e.thisRef.state.selectedProject.user)&&t.original.name===(e.thisRef.state.selectedProject&&e.thisRef.state.selectedProject.name)?"aliceblue":""},onClick:function(a){e.thisRef.changeProject(a,t.original)}}}})),i.a.createElement("div",{id:"projectsToolbar",style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("createProject"),icon:i.a.createElement(q.a,{icon:J.l}),title:"New project",onClick:this._new.bind(this),label:"New"}),i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("createImportProject"),icon:i.a.createElement(yt.a,{style:{height:"20px",width:"20px"}}),title:"Import an existing Marxan project from the local machine",onClick:this.openImportDialog.bind(this),label:"Import"}),i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("cloneProject"),icon:i.a.createElement(St.a,{style:{height:"20px",width:"20px"}}),title:"Duplicate project",onClick:this.cloneProject.bind(this),disabled:!this.state.selectedProject||this.props.loading,label:"Duplicate"}),i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("deleteProject"),icon:i.a.createElement(q.a,{icon:Z.i,color:"rgb(255, 64, 129)"}),title:"Delete project",disabled:!this.state.selectedProject||this.props.loading,onClick:this._delete.bind(this),label:"Delete"})))})):null}}]),t}(i.a.Component),wt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={validName:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"changeName",value:function(e,t){this.props.setName(t)}},{key:"changeDescription",value:function(e,t){this.props.setDescription(t)}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:this.props.paddingBottom}},n.createElement(pe.a,{errorText:!1===this.state.validName?"Required field":"",value:this.props.name,onChange:this.changeName.bind(this),floatingLabelText:"Enter a name for the project",floatingLabelFixed:!0}),n.createElement(pe.a,{value:this.props.description,onChange:this.changeDescription.bind(this),multiLine:!0,rows:3,floatingLabelText:"Enter a description for the project",floatingLabelFixed:!0})))}}]),t}(n.Component),Ot=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"changeItem",value:function(e,t){var a=this.props.items[t];if(null!==a.envelope){var n=this.getLatLngLikeFromWKT(a.envelope);this.props.map.fitBounds(n,{easing:function(e){return 1}})}this.addLayerToMap(a.feature_class_name),this.props.changeItem(a.feature_class_name)}},{key:"getLatLngLikeFromWKT",value:function(e){var t=a(712)(e).coordinates[0];return[[t[0][0],t[0][1]],[t[2][0],t[2][1]]]}},{key:"addLayerToMap",value:function(e){this.mapboxlayername=e,a(713)("https://api.mapbox.com/v4/"+this.props.mapboxUser+"."+e+".json?access_token=pk.eyJ1IjoiYmxpc2h0ZW4iLCJhIjoiMEZrNzFqRSJ9.0QBRA2HxTb8YHErUFRMPZg&secure",this.parseUrlExists.bind(this))}},{key:"parseUrlExists",value:function(e,t){!t||200!==t.statusCode?console.log("The MapBox layer does not exist"):("pu_"===this.props.map.getStyle().layers[this.props.map.getStyle().layers.length-1].id.substr(0,3)&&this.props.map.removeLayer(this.props.map.getStyle().layers[this.props.map.getStyle().layers.length-1].id),this.props.map.getSource(this.props.mapboxUser)&&this.props.map.removeSource(this.props.mapboxUser),this.props.map.addSource("blishten",{type:"vector",url:"mapbox://"+this.props.mapboxUser+"."+this.mapboxlayername}),this.props.map.addLayer({id:this.mapboxlayername,type:"fill",source:this.props.mapboxUser,"source-layer":this.mapboxlayername,paint:{"fill-color":"#f08","fill-opacity":.4}}))}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(he.a,{onChange:this.changeItem.bind(this),value:this.props.selectedValue,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},floatingLabelText:"Select the planning units",floatingLabelFixed:!0,style:{width:this.props.width,verticalAlign:"middle"}},this.props.items.map(function(e){return n.createElement(X.a,{value:e.feature_class_name,primaryText:e.alias,key:e.feature_class_name,style:{fontSize:"12px"},menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"}})})))}}]),t}(n.Component),Pt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={planning_unit_grids_received:!1},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=new O.a.Map({container:this.mapContainer,style:"mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd",center:[0,0],zoom:2});this.setState({map:e})}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement("div",{className:"newPUDialogPane"},n.createElement("div",null,n.createElement("div",{ref:function(t){return e.mapContainer=t},className:"absolute top right left bottom",style:{width:"352px",height:"300px",marginTop:"71px",marginLeft:"24px"}}),n.createElement("div",{style:{position:"absolute",top:"380px",verticalAlign:"middle"}},n.createElement(Ot,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},selectedValue:this.props.pu,map:this.state.map,mapboxUser:"blishten",items:this.props.planning_unit_grids,changeItem:this.props.changeItem,disabled:!this.state.planning_unit_grids_received,width:"352px"})))))}}]),t}(n.Component),xt=a(453),Dt=a.n(xt),Ct=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={selectedFeature:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){qe.ListItem.defaultProps.disableTouchRipple=!0,qe.ListItem.defaultProps.disableFocusRipple=!0}},{key:"changeFeature",value:function(e,t){this.setState({selectedFeature:t})}},{key:"clickListItem",value:function(e){}},{key:"render",value:function(){var e=i.a.createElement($e.a,{touch:!0,tooltipPosition:"bottom-left"},i.a.createElement(tt.a,{color:ke.grey400})),t=i.a.createElement(Dt.a,{iconButtonElement:e},i.a.createElement(X.a,null,"Info"),i.a.createElement(X.a,{title:"Not implemented"},"View"),i.a.createElement(X.a,{title:"Not implemented"},"Prioritise"));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"newPUDialogPane"},i.a.createElement("div",null,"Select the costs"),i.a.createElement(qe.List,null,this.props.selectedCosts.map(function(e){return i.a.createElement(qe.ListItem,{disableFocusRipple:!0,primaryText:e.alias,secondaryText:e.description,key:e.id,value:e.alias,rightIconButton:t})})),i.a.createElement(se,{label:"Select",onClick:this.props.openCostsDialog})))}}]),t}(i.a.Component),jt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={selectedFeature:void 0,previousRow:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"_delete",value:function(){this.props.deleteFeature(this.state.selectedFeature),this.setState({selectedFeature:void 0})}},{key:"_new",value:function(e){this.setState({anchorEl:e.currentTarget}),this.props.showNewFeaturesDialogPopover()}},{key:"_newByImport",value:function(){this.props.onCancel(),this.props.openNewFeatureDialog("import")}},{key:"_newByDigitising",value:function(){this.onOk(),this.props.initialiseDigitising()}},{key:"clickFeature",value:function(e,t){if(this.props.addingRemovingFeatures){if(e.shiftKey){var a=this.getFeaturesBetweenRows(this.state.previousRow,t);this.props.selectFeatures(a)}else this.props.clickFeature(t.original,e.shiftKey,this.state.previousRow);this.setState({previousRow:t})}else this.setState({selectedFeature:t.original})}},{key:"getFeaturesBetweenRows",value:function(e,t){var a=this.props.selectedFeatureIds,n=e.index<t.index?e.index+1:t.index,i=e.index<t.index?t.index+1:e.index;return this.props.allFeatures.slice(n,i).forEach(function(e){a.includes(e.id)?a.splice(a.indexOf(e.id),1):a.push(e.id)}),a}},{key:"onOk",value:function(e){this.props.addingRemovingFeatures?this.props.onOk():this.unselectFeature()}},{key:"unselectFeature",value:function(e){this.setState({selectedFeature:void 0}),this.props.onCancel()}},{key:"sortDate",value:function(e,t,a){return Date.parse(e)>Date.parse(t)?1:-1}},{key:"preview",value:function(e){this.props.previewFeature(e)}},{key:"renderTitle",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.description},e.original.description)}},{key:"renderPreview",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:"Click to preview"},"..")}},{key:"render",value:function(){var e=this;return this.props.allFeatures?i.a.createElement(le,Object.assign({},this.props,{autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Features",onOk:this.onOk.bind(this),showCancelButton:this.props.addingRemovingFeatures,helpLink:"docs_user.html#the-features-window",children:i.a.createElement(i.a.Fragment,{key:"k10"},i.a.createElement("div",{style:{marginBottom:"5px"}},"There are a total of"," "+this.props.allFeatures.length," features:"),i.a.createElement("div",{id:"projectsTable"},i.a.createElement(Ae.a,{pageSize:this.props.allFeatures.length,className:"projectsReactTable noselect",showPagination:!1,minRows:0,data:this.props.allFeatures,thisRef:this,columns:[{Header:"Name",accessor:"alias",width:170,headerStyle:{textAlign:"left"}},{Header:"Description",accessor:"description",width:310,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Date",accessor:"creation_date",width:205,headerStyle:{textAlign:"left"},sortMethod:this.sortDate.bind(this)},{Header:"",width:8,headerStyle:{textAlign:"center"},Cell:this.renderPreview.bind(this)}],getTrProps:function(e,t,a){return{style:{background:e.thisRef.props.addingRemovingFeatures&&e.thisRef.props.selectedFeatureIds.includes(t.original.id)||!e.thisRef.props.addingRemovingFeatures&&e.thisRef.state.selectedFeature&&e.thisRef.state.selectedFeature.id===t.original.id?"aliceblue":""},onClick:function(a){e.thisRef.clickFeature(a,t)}}},getTdProps:function(t,a,n){return{onClick:function(t){""===n.Header&&e.preview(a.original)}}}})),i.a.createElement("div",{id:"projectsToolbar"},i.a.createElement("div",{style:{display:this.props.metadata.OLDVERSION?"block":"none"},className:"tabTitle"},"This is an imported project. Only features from this project are shown."),i.a.createElement(se,{show:"ReadOnly"!==this.props.userRole&&!this.props.metadata.OLDVERSION&&!this.props.addingRemovingFeatures,icon:i.a.createElement(q.a,{icon:J.l}),title:"New feature",disabled:this.props.loading,onClick:this._new.bind(this),label:"New"}),i.a.createElement(F.a,{open:this.props.featuresDialogPopupOpen,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.closePopover},i.a.createElement(A.a,{desktop:!0},i.a.createElement(X.a,{primaryText:"Draw on screen",title:"Create a new feature by digitising it on the screen",onClick:this._newByDigitising.bind(this)}),i.a.createElement(X.a,{primaryText:"Add from GBIF",disabled:!0}),i.a.createElement(X.a,{primaryText:"Add from IUCN Red List",disabled:!0}))),i.a.createElement(se,{show:!this.props.metadata.OLDVERSION&&!this.props.addingRemovingFeatures&&"ReadOnly"!==this.props.userRole,icon:i.a.createElement(yt.a,{style:{height:"20px",width:"20px"}}),title:"Import an existing feature from the local machine",disabled:this.props.loading,onClick:this._newByImport.bind(this),label:"Import"}),i.a.createElement(se,{show:"Admin"===this.props.userRole&&!this.props.metadata.OLDVERSION&&!this.props.addingRemovingFeatures,icon:i.a.createElement(q.a,{icon:Z.i,color:"rgb(255, 64, 129)"}),title:"Delete feature",disabled:void 0===this.state.selectedFeature||this.props.loading||this.state.selectedFeature&&"global admin"===this.state.selectedFeature.created_by,onClick:this._delete.bind(this),label:"Delete"}),i.a.createElement(se,{show:this.props.addingRemovingFeatures,icon:i.a.createElement(q.a,{icon:Z.e}),title:"Clear all features",onClick:this.props.clearAllFeatures,label:"Clear all"}),i.a.createElement(se,{show:this.props.addingRemovingFeatures,icon:i.a.createElement(q.a,{icon:Z.d}),title:"Select all features",onClick:this.props.selectAllFeatures,label:"Select all"})))})):null}}]),t}(i.a.Component),Ft=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleNext=function(){var e=a.state.stepIndex;a.setState({stepIndex:e+1})},a.handlePrev=function(){var e=a.state.stepIndex;e>0&&a.setState({stepIndex:e-1})},a.state={steps:["Info","Planning units","Features","Costs"],loadingFeatures:!1,finished:!1,stepIndex:0,name:"",description:"",pu:"",featuresDialogOpen:!1,allFeatures:[],selectedFeatureIds:[]},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.features!==this.props.features&&this.setState({allFeatures:JSON.parse(JSON.stringify(this.props.features))})}},{key:"openFeaturesDialog",value:function(){this.setState({featuresDialogOpen:!0})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"setDescription",value:function(e){this.setState({description:e})}},{key:"changePU",value:function(e){this.setState({pu:e})}},{key:"onOk",value:function(e){this.gotoStart(),this.props.onOk()}},{key:"gotoStart",value:function(){this.setState({stepIndex:0})}},{key:"closeFeaturesDialog",value:function(){this.setState({featuresDialogOpen:!1})}},{key:"updateSelectedFeatures",value:function(){var e=this,t=this.state.allFeatures;t.forEach(function(t){e.state.selectedFeatureIds.includes(t.id)?Object.assign(t,{selected:!0}):Object.assign(t,{selected:!1})},this),this.setState({allFeatures:t}),this.closeFeaturesDialog()}},{key:"clickFeature",value:function(e){this.state.selectedFeatureIds.includes(e.id)?this.removeFeature(e):this.addFeature(e)}},{key:"selectAllFeatures",value:function(){var e=[];this.state.allFeatures.forEach(function(t){e.push(t.id)}),this.selectFeatures(e)}},{key:"clearAllFeatures",value:function(){this.setState({selectedFeatureIds:[]})}},{key:"selectFeatures",value:function(e){this.setState({selectedFeatureIds:e})}},{key:"removeFeature",value:function(e){var t=this.state.selectedFeatureIds;return t=t.filter(function(t,a,n){return t!==e.id}),new Promise(function(e,a){this.setState({selectedFeatureIds:t},function(){e()})}.bind(this))}},{key:"addFeature",value:function(e){var t=this.state.selectedFeatureIds;t.push(e.id),this.setState({selectedFeatureIds:t})}},{key:"createNewProject",value:function(){this.props.createNewProject({name:this.state.name,description:this.state.description,planning_grid_name:this.state.pu,features:this.state.allFeatures.filter(function(e){return e.selected})}),this.onOk()}},{key:"render",value:function(){var e=this.state.stepIndex,t=[i.a.createElement("div",{style:{width:"100%",maxWidth:"500px",margin:"auto",textAlign:"center"}},i.a.createElement("div",{style:{margin:"0 16px"}},i.a.createElement("div",{style:{marginTop:12}},i.a.createElement(se,{label:"Back",disabled:0===e,onClick:this.handlePrev}),i.a.createElement(se,{label:e===this.state.steps.length-1?"Finish":"Next",onClick:e===this.state.steps.length-1?this.createNewProject.bind(this):this.handleNext,primary:!0}))))],a=i.a.createElement("div",{key:"k3"},0===e?i.a.createElement(wt,{name:this.state.name,description:this.state.description,setName:this.setName.bind(this),setDescription:this.setDescription.bind(this),paddingBottom:"198px"}):null,1===e?i.a.createElement(Pt,{getPlanningUnitGrids:this.props.getPlanningUnitGrids,planning_unit_grids:this.props.planning_unit_grids,changeItem:this.changePU.bind(this),pu:this.state.pu,openImportPlanningGridDialog:this.props.openImportPlanningGridDialog}):null,2===e?i.a.createElement(it,{features:this.state.allFeatures.filter(function(e){return e.selected}),openFeaturesDialog:this.openFeaturesDialog.bind(this),simple:!0,showTargetButton:!1,leftmargin:"0px"}):null,3===e?i.a.createElement(Ct,{openCostsDialog:this.props.openCostsDialog,selectedCosts:this.props.selectedCosts}):null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(le,Object.assign({},this.props,{title:"New project",contentWidth:400,children:a,actions:t,okLabel:"Cancel",onOk:this.onOk.bind(this),onCancel:this.onOk.bind(this),onRequestClose:this.onOk.bind(this),helpLink:"docs_user.html#creating-new-projects"})),i.a.createElement(jt,{open:this.state.featuresDialogOpen,onOk:this.updateSelectedFeatures.bind(this),onCancel:this.closeFeaturesDialog.bind(this),loadingFeatures:this.state.loadingFeatures,allFeatures:this.state.allFeatures,selectAllFeatures:this.selectAllFeatures.bind(this),clearAllFeatures:this.clearAllFeatures.bind(this),selectFeatures:this.selectFeatures.bind(this),clickFeature:this.clickFeature.bind(this),addingRemovingFeatures:!0,selectedFeatureIds:this.state.selectedFeatureIds,metadata:{OLDVERSION:!1},userRole:"User"}))}}]),t}(i.a.Component),Rt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"renderName",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.name},e.original.name)}},{key:"render",value:function(){var e=[];return e=["Admin"].includes(this.props.userRole)?[{Header:"User",accessor:"user",width:90,headerStyle:{textAlign:"left"}},{Header:"Name",accessor:"name",width:200,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)}]:[{Header:"Name",accessor:"name",width:200,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)}],this.props.projects?i.a.createElement(le,Object.assign({},this.props,{showCancelButton:!1,autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Failed to delete "+this.props.deleteWhat,contentWidth:500,children:i.a.createElement(i.a.Fragment,{key:"k24"},i.a.createElement("div",{style:{marginBottom:"5px"}},"The "+this.props.deleteWhat+" is used in the following projects:"),i.a.createElement("div",{id:"failedProjectsTable"},i.a.createElement(Ae.a,{pageSize:this.props.projects.length,className:"projectsReactTable",showPagination:!1,minRows:0,noDataText:"",data:this.props.projects,thisRef:this,columns:e})))})):null}}]),t}(i.a.Component),At=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.map=new O.a.Map({container:this.mapContainer,style:"mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd",center:[0,0],zoom:2,attributionControl:!1}),this.map.on("load",function(t){t.target.addLayer({id:"planning_grid",type:"fill",source:{type:"vector",url:"mapbox://blishten."+e.props.planning_grid_metadata.feature_class_name},"source-layer":e.props.planning_grid_metadata.feature_class_name,paint:{"fill-color":"rgba(255, 0, 0, 0.4)","fill-outline-color":"rgba(255, 0, 0, 0.5)"}})}),this.props.getTilesetMetadata("blishten."+this.props.planning_grid_metadata.feature_class_name).then(function(t){null!=t.bounds&&e.props.zoomToBounds(e.map,t.bounds)}).catch(function(t){e.props.setSnackBar(t)})}},{key:"componentWillUnmount",value:function(){this.map&&this.map.remove()}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement("div",{className:"mapContainer2"},n.createElement("div",null,n.createElement("div",{ref:function(t){return e.mapContainer=t},className:"absolute top right left bottom",style:{width:"352px",height:"300px",marginTop:"71px",marginLeft:"24px"}}))))}}]),t}(n.Component),Lt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{onRequestClose:this.props.onCancel,showCancelButton:!1,title:this.props.planning_grid_metadata.alias,contentWidth:400,children:i.a.createElement(i.a.Fragment,{key:"k26"},i.a.createElement(At,{planning_grid_metadata:this.props.planning_grid_metadata,getTilesetMetadata:this.props.getTilesetMetadata,zoomToBounds:this.props.zoomToBounds,setSnackBar:this.props.setSnackBar}))}))}}]),t}(i.a.Component),Nt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={selectedPlanningGrid:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"_delete",value:function(){this.props.deletePlanningGrid(this.state.selectedPlanningGrid.feature_class_name),this.setState({selectedPlanningGrid:!1})}},{key:"_new",value:function(){this.props.openNewPlanningGridDialog(),this.closeDialog()}},{key:"openImportDialog",value:function(){this.props.openImportPlanningGridDialog(),this.closeDialog()}},{key:"changePlanningGrid",value:function(e,t){this.setState({selectedPlanningGrid:t})}},{key:"closeDialog",value:function(){this.setState({selectedPlanningGrid:void 0}),this.props.onOk()}},{key:"preview",value:function(e){this.props.previewPlanningGrid(e)}},{key:"renderName",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.alias+" ("+e.original.feature_class_name+")"},e.original.alias)}},{key:"renderTitle",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.description},e.original.description)}},{key:"renderCountry",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.country},e.original.country)}},{key:"renderArea",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"}},isNaN(e.original._area)?"":e.original._area)}},{key:"renderPreview",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:"Click to preview"},"..")}},{key:"render",value:function(){var e,t=this;return e=[{Header:"Name",accessor:"alias",width:215,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)},{Header:"Description",accessor:"description",width:273,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Country",accessor:"country",width:70,headerStyle:{textAlign:"left"},Cell:this.renderCountry.bind(this)},{Header:"Domain",accessor:"domain",width:70,headerStyle:{textAlign:"left"}},{Header:"Area (Km2)",accessor:"_area",width:75,headerStyle:{textAlign:"left"},Cell:this.renderArea.bind(this)},{Header:"",width:8,headerStyle:{textAlign:"center"},Cell:this.renderPreview.bind(this)}],i.a.createElement(le,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),showCancelButton:!1,helpLink:"docs_user.html#the-planning-grids-window",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Planning grids",children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{style:{marginBottom:"5px"}},"There are a total of ",this.props.planningGrids.length," planning grids:"),i.a.createElement("div",{id:"projectsTable"},i.a.createElement(Ae.a,{pageSize:this.props.planningGrids.length,className:"projectsReactTable noselect",showPagination:!1,minRows:0,noDataText:"",data:this.props.planningGrids,thisRef:this,columns:e,getTrProps:function(e,t){return{style:{background:t.original.alias===(e.thisRef.state.selectedPlanningGrid&&e.thisRef.state.selectedPlanningGrid.alias)?"aliceblue":""},onClick:function(a){e.thisRef.changePlanningGrid(a,t.original)}}},getTdProps:function(e,a,n){return{onClick:function(e){""===n.Header&&t.preview(a.original)}}}})),i.a.createElement("div",{id:"projectsToolbar",style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("createPlanningUnitGrid"),icon:i.a.createElement(q.a,{icon:J.l}),title:"New planning grid",onClick:this._new.bind(this),label:"New"}),i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("importPlanningUnitGrid"),icon:i.a.createElement(yt.a,{style:{height:"20px",width:"20px"}}),title:"Import an existing planning grid from the local machine",onClick:this.openImportDialog.bind(this),label:"Import"}),i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("deletePlanningUnitGrid"),icon:i.a.createElement(q.a,{icon:Z.i,color:"rgb(255, 64, 129)"}),title:"Delete planning grid",disabled:!this.state.selectedPlanningGrid||this.props.loading||this.state.selectedPlanningGrid&&"global admin"===this.state.selectedPlanningGrid.created_by,onClick:this._delete.bind(this),label:"Delete"})))}))}}]),t}(i.a.Component),Tt=["Marine","Terrestrial"],It=[10,20,30,40,50],Mt=["Hexagon","Square"],Ut=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={iso3:"",domain:"",shape:"",areakm2:void 0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"changeIso3",value:function(e,t){var a=this.props.countries[t].iso3;["FJI","KIR","NZL","RUS","TUV","USA","WLF"].includes(a)?(this.setState({iso3:void 0}),this.props.setSnackBar("Countries that span the meridian are currently not supported. See <a href='"+this.props.ERRORS_PAGE+"#planning-grids-cannot-be-created-for-countries-that-span-the-meridian' target='blank'>here</a>")):this.setState({iso3:this.props.countries[t].iso3})}},{key:"changeDomain",value:function(e,t){this.setState({domain:Tt[t]})}},{key:"changeShape",value:function(e,t){this.setState({shape:Mt[t]})}},{key:"changeAreaKm2",value:function(e,t){this.setState({areakm2:It[t]})}},{key:"onOk",value:function(){this.props.createNewPlanningUnitGrid(this.state.iso3,this.state.domain,this.state.areakm2,this.state.shape).then(function(e){this.props.onCancel()}.bind(this))}},{key:"render",value:function(){var e={width:"240px"};return n.createElement(le,Object.assign({},this.props,{onOk:this.onOk.bind(this),onRequestClose:this.props.onCancel,okDisabled:!this.state.iso3||!this.state.domain||!this.state.areakm2||this.props.loading,cancelLabel:"Cancel",showCancelButton:!0,helpLink:"docs_user.html#creating-new-planning-grids-using-marxan-web",title:"New planning grid",contentWidth:358,children:n.createElement(n.Fragment,{key:"k13"},n.createElement("div",null,n.createElement(he.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeIso3.bind(this),value:this.state.iso3,floatingLabelText:"Area of interest",floatingLabelFixed:!0},this.props.countries.map(function(e){return n.createElement(X.a,{style:{fontSize:"12px"},value:e.iso3,primaryText:e.original_n,key:e.iso3})})),n.createElement(se,{icon:n.createElement(q.a,{icon:Z.c}),title:"Load a custom area of interest from a shapefile (not currently implemented)",style:{position:"absolute",top:"83px",right:"32px"}})),n.createElement("div",null,n.createElement(he.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeDomain.bind(this),value:this.state.domain,style:e,floatingLabelText:"Domain",floatingLabelFixed:!0},Tt.map(function(e){return n.createElement(X.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})}))),n.createElement("div",null,n.createElement(he.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeShape.bind(this),value:this.state.shape,style:e,floatingLabelText:"Planning unit shape",floatingLabelFixed:!0},Mt.map(function(e){return n.createElement(X.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})}))),n.createElement("div",null,n.createElement(he.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeAreaKm2.bind(this),value:this.state.areakm2,style:e,floatingLabelText:"Area of each planning unit",floatingLabelFixed:!0},It.map(function(e){return n.createElement(X.a,{style:{fontSize:"12px"},value:e,primaryText:e+" Km2",key:e})}))))}))}}]),t}(n.Component),Bt=a(94),_t=a(86),Gt=a.n(_t),zt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1,active:!1},a.onChange=a.onChange.bind(Object(Bt.a)(a)),a.fileUpload=a.fileUpload.bind(Object(Bt.a)(a)),a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(e){this.setState({active:!0})}},{key:"onChange",value:function(e){e.target.files.length&&(this.fileUpload(e.target.files[0]),document.getElementById(this.id).value="")}},{key:"fileUpload",value:function(e){this.setState({loading:!0});var t=this.props.requestEndpoint+"uploadShapefile",a=new FormData;this.filename=e.name,a.append("value",e),a.append("filename",this.filename),a.append("name",this.props.name),a.append("description",this.props.description),Object(b.post)(t,a,{withCredentials:this.props.SEND_CREDENTIALS}).then(function(e){this.finishedLoading(e)}.bind(this))}},{key:"finishedLoading",value:function(e){this.props.checkForErrors(e.data)||(this.setState({loading:!1}),this.props.setFilename(this.filename)),this.setState({active:!1})}},{key:"render",value:function(){return this.id="upload"+this.props.parameter,i.a.createElement("form",{className:"uploadForm"},i.a.createElement("div",{className:"uploadLabel",style:{color:this.state.active?"rgb(0, 188, 212)":"rgba(0, 0, 0, 0.3)"}},this.props.label),i.a.createElement("div",{className:"uploadFileField"},i.a.createElement("div",{className:"uploadFileFieldIcon"},i.a.createElement("label",{htmlFor:this.id},i.a.createElement(Gt.a,{name:"file",title:"Click to upload a file",style:{cursor:"pointer"}})),i.a.createElement("input",{type:"file",onChange:this.onChange,onClick:this.onClick.bind(this),accept:".zip",style:{display:"none",width:"10px"},id:this.id})),i.a.createElement("div",{className:"mandatoryIcon"},i.a.createElement(Gt.a,{name:"exclamation-circle",title:"Required field",style:{color:"darkslateblue",display:""===this.props.filename&&this.props.mandatory?"block":"none"}})),i.a.createElement("div",{className:"uploadFileFieldLabel",style:{width:"168px"}},this.props.filename)),i.a.createElement(Gt.a,{name:"sync",spin:!0,style:{display:this.state.loading?"inline-block":"none",marginLeft:"6px"}}))}}]),t}(i.a.Component),Vt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={planning_grid_name:"",zipFilename:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"changeName",value:function(e,t){this.setState({planning_grid_name:t})}},{key:"setzipFilename",value:function(e){this.setState({zipFilename:e})}},{key:"onOk",value:function(){this.props.onOk(this.state.zipFilename,this.state.planning_grid_name,"Imported using the import planning grid dialog").then(function(e){}).catch(function(e){})}},{key:"render",value:function(){return n.createElement(le,Object.assign({},this.props,{title:"Import planning grid",contentWidth:304,children:n.createElement(n.Fragment,{key:"22"},n.createElement(pe.a,{value:this.state.planning_grid_name,onChange:this.changeName.bind(this),floatingLabelText:"Name",floatingLabelFixed:!0}),n.createElement(zt,{requestEndpoint:this.props.requestEndpoint,SEND_CREDENTIALS:this.props.SEND_CREDENTIALS,mandatory:!0,filename:this.state.zipFilename,setFilename:this.setzipFilename.bind(this),checkForErrors:this.props.checkForErrors,label:"Zipped shapefile"})),showCancelButton:!0,onOk:this.onOk.bind(this),okDisabled:this.props.loading,onRequestClose:this.props.onCancel.bind(this),helpLink:"docs_user.html#importing-existing-planning-grids"}))}}]),t}(n.Component),Ht=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{onRequestClose:this.props.onCancel,showCancelButton:!1,title:this.props.feature_metadata.alias,contentWidth:400,children:i.a.createElement(i.a.Fragment,{key:"k26"},i.a.createElement(At,{planning_grid_metadata:this.props.feature_metadata,getTilesetMetadata:this.props.getTilesetMetadata,zoomToBounds:this.props.zoomToBounds,setSnackBar:this.props.setSnackBar}))}))}}]),t}(i.a.Component),Kt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"changeName",value:function(e,t){this.props.setName(t)}},{key:"changeDescription",value:function(e,t){this.props.setDescription(t)}},{key:"render",value:function(){var e=n.createElement(n.Fragment,{key:"k12"},n.createElement("div",null,n.createElement(pe.a,{value:this.props.name,onChange:this.changeName.bind(this),style:{display:"block"},floatingLabelText:"Enter a name",floatingLabelFixed:!0}),n.createElement(pe.a,{value:this.props.description,onChange:this.changeDescription.bind(this),style:{display:"block"},multiLine:!0,rows:2,floatingLabelText:"Enter a description",floatingLabelFixed:!0}),"import"===this.props.newFeatureSource?n.createElement(zt,{SEND_CREDENTIALS:this.props.SEND_CREDENTIALS,requestEndpoint:this.props.requestEndpoint,checkForErrors:this.props.checkForErrors,mandatory:!0,name:this.props.name,description:this.props.description,filename:this.props.filename,setFilename:this.props.setFilename,label:"Shapefile",style:{paddingTop:"10px"}}):null));return n.createElement(le,Object.assign({},this.props,{onOk:this.props.createNewFeature,okDisabled:!(""!==this.props.name&&""!==this.props.description&&(""!==this.props.filename&&"import"===this.props.newFeatureSource||""===this.props.filename&&"digitising"===this.props.newFeatureSource)&&!1===this.props.loading),showCancelButton:!0,contentWidth:420,title:"Import existing feature",children:e,onRequestClose:this.props.onOk,helpLink:"docs_user.html#importing-existing-features"}))}}]),t}(n.Component),Qt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{contentWidth:370,offsetY:80,title:"Costs",children:i.a.createElement(i.a.Fragment,{key:"k8"},i.a.createElement("div",null,"Not yet implemented"))}))}}]),t}(i.a.Component),Wt=a(186),Yt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={data:[],updateEnabled:!1},a.renderEditable=a.renderEditable.bind(Object(Bt.a)(a)),a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){e.runParams!==this.props.runParams&&this.setState({data:this.props.runParams})}},{key:"openParametersDialog",value:function(){this.props.openParametersDialog()}},{key:"updateRunParams",value:function(){this.setState({updateEnabled:!1}),"ReadOnly"!==this.props.userRole&&this.props.updateRunParams(this.state.data),this.props.onOk()}},{key:"setUpdateEnabled",value:function(){this.setState({updateEnabled:!0})}},{key:"renderEditable",value:function(e){var t=this;return"ReadOnly"===this.props.userRole?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,this.state.data[e.index].value)):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{backgroundColor:"#fafafa",float:"BLM"===Object(Wt.a)(this.state.data)[e.index].key?"left":"none"},contentEditable:!0,suppressContentEditableWarning:!0,onFocus:this.setUpdateEnabled.bind(this),onBlur:function(a){var n=Object(Wt.a)(t.state.data);n[e.index][e.column.id]=a.target.innerHTML,t.setState({data:n})}},this.state.data[e.index].value),i.a.createElement(Gt.a,{name:"external-link-alt",onClick:this.props.showClumpingDialog,title:"Click to open the BLM comparison dialog",style:{display:"BLM"===Object(Wt.a)(this.state.data)[e.index].key?"block":"none",cursor:"pointer",paddingTop:"6px",paddingLeft:"35px"}}))}},{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{contentWidth:400,offsetX:80,offsetY:260,onOk:this.updateRunParams.bind(this),helpLink:"docs_user.html#run-settings",title:"Run settings",children:i.a.createElement("div",{style:{height:"275px"},key:"k16"},i.a.createElement(Ae.a,{showPagination:!1,className:"summary_infoTable",minRows:0,pageSize:this.state.data.length,data:this.state.data,noDataText:"",columns:[{Header:"Parameter",accessor:"key",width:165,headerStyle:{textAlign:"left"}},{Header:"Value",accessor:"value",width:193,headerStyle:{textAlign:"left"},Cell:this.renderEditable}]}))}))}}]),t}(i.a.Component),Xt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){this.props.changeValue(a)}},{key:"render",value:function(){var e,t=this.props.values.map(function(t){return e="string"===typeof t?t.substr(0,1).toUpperCase().concat(t.replace("_"," ").substr(1)):t.toString(),i.a.createElement(X.a,{value:t,key:t,primaryText:e})});return i.a.createElement(he.a,{selectionRenderer:this.props.selectionRenderer,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},listStyle:{fontSize:"12px"},style:{width:"150px",margin:"0px 10px"},autoWidth:!0,floatingLabelText:this.props.floatingLabelText,floatingLabelFixed:!0,children:t,onChange:this.handleChange.bind(this),value:this.props.property})}}]),t}(i.a.Component),qt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){this.props.changeValue(a)}},{key:"selectionRenderer",value:function(){return this.getSwatch(this.props.property,!0)}},{key:"getSwatch",value:function(e,t){var a=this.props.brew.getNumClasses(),n=W(this.props.brew,e),s=this.props.brew.colorSchemes[e],r=a<=n?Array.apply(null,{length:a}).map(Number.call,Number):Array.apply(null,{length:n}).map(Number.call,Number),o=r.length,l=112/o,c=r.map(function(e){return i.a.createElement("div",{key:e,style:{backgroundColor:s[o][e],width:l,height:"16px",display:"inline-block"}})}),p=e!==this.props.property||t?"lightgray":"rgb(255, 64, 129)";return c=i.a.createElement("div",{style:{display:"inline-flex",marginTop:"12px",border:"1px solid "+p}},c)}},{key:"render",value:function(){var e,t=this.props.values.map(function(t){e="opacity"!==t?"":"Opacity";var a="opacity"!==t?this.getSwatch(t,!1):null;return i.a.createElement(X.a,{value:t,primaryText:e,key:t,children:a,title:t})},this);return i.a.createElement(he.a,{selectionRenderer:this.selectionRenderer.bind(this),menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},listStyle:{fontSize:"12px"},style:{width:"150px",margin:"0px 10px"},autoWidth:!0,floatingLabelText:this.props.floatingLabelText,floatingLabelFixed:!0,children:t,onChange:this.handleChange.bind(this),value:this.props.property})}}]),t}(i.a.Component),Jt=a(66),Zt=["equal_interval","jenks","std_deviation","quantile"],$t=["opacity","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1"],ea=["3","4","5","6","7","8","9"],ta=["1","2","3","4","5","6","7","8","9"],aa=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.dataBreaks.map(function(e,t){return i.a.createElement(Jt.e,{x:e,key:t,stroke:"#00BCD4"})});return i.a.createElement(le,Object.assign({},this.props,{contentWidth:390,rightX:0,offsetY:80,showCancelButton:!1,helpLink:"docs_user.html#changing-how-the-results-are-displayed",title:"Classification",children:i.a.createElement("div",{style:{height:"275px"},key:"k6"},i.a.createElement(Jt.b,{width:250,height:150,data:this.props.summaryStats},i.a.createElement(Jt.c,{strokeDasharray:"1",stroke:"#f4f4f4"}),i.a.createElement(Jt.g,{dataKey:"number",tick:{fontSize:11},type:"number"},i.a.createElement(Jt.d,{value:"Sum solutions",offset:0,position:"insideBottom",style:{fontSize:"11px",color:"#222222"}})),i.a.createElement(Jt.h,{tick:{fontSize:11}},i.a.createElement(Jt.d,{value:"Count",angle:-90,position:"insideLeft",style:{fontSize:"11px",color:"#222222"}})),i.a.createElement(Jt.f,null),i.a.createElement(Jt.a,{dataKey:"count",fill:"#E14081"}),e),i.a.createElement("div",{className:"renderers"},i.a.createElement(qt,{values:$t,changeValue:this.props.changeColorCode,property:this.props.renderer.COLORCODE,floatingLabelText:"Colour scheme",brew:this.props.brew}),i.a.createElement(Xt,{values:Zt,changeValue:this.props.changeRenderer,property:this.props.renderer.CLASSIFICATION,floatingLabelText:"Classification"}),i.a.createElement(Xt,{values:ea,changeValue:this.props.changeNumClasses,property:this.props.renderer.NUMCLASSES,floatingLabelText:"Number of classes"}),i.a.createElement(Xt,{values:ta,changeValue:this.props.changeShowTopClasses,property:this.props.renderer.TOPCLASSES,floatingLabelText:"Show top n classes"})))}))}}]),t}(i.a.Component),na=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.map=new O.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/light-v9",center:this.props.mapCentre,zoom:this.props.mapZoom,attributionControl:!1,interactive:!1}),this.map.on("load",function(t){t.target.addLayer({id:e.props.RESULTS_LAYER_NAME,type:"fill",source:{type:"vector",url:"mapbox://"+e.props.tileset.id},"source-layer":e.props.tileset.name,paint:{"fill-color":"rgba(0, 0, 0, 0)","fill-outline-color":"rgba(0, 0, 0, 0)"}}),e.map.setCenter(e.props.mapCentre),e.setMapZoom()})}},{key:"componentDidUpdate",value:function(e,t){this.props.paintProperty!==e.paintProperty&&(0===this.props.paintProperty.length?(this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-color","rgba(0, 0, 0, 0)"),this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-outline-color","rgba(0, 0, 0, 0)")):(this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-color",this.props.paintProperty.fillColor),this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-outline-color",this.props.paintProperty.oulineColor),this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-opacity",.5))),this.props.mapCentre!==e.mapCentre&&this.map.setCenter(this.props.mapCentre),this.props.mapZoom!==e.mapZoom&&this.setMapZoom()}},{key:"componentWillUnmount",value:function(){this.map&&this.map.remove()}},{key:"setMapZoom",value:function(){this.map.setZoom(this.props.mapZoom)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{display:"inline-block",margin:"5px"},onClick:this.props.disabled?null:this.props.selectBlm.bind(this,this.props.blmValue)},i.a.createElement("div",{style:{fontSize:"14px"}},"BLM: ",this.props.blmValue),i.a.createElement("div",{ref:function(t){return e.mapContainer=t},style:{width:"200px",height:"200px",cursor:this.props.disabled?"default":"pointer"},className:"hoverMapContainer",title:this.props.disabled?"":"Click to select this BLM value"}))}}]),t}(i.a.Component),ia=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"parseBlmValue",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)?e:""}},{key:"selectBlm",value:function(e){this.props.setBlmValue(e),this.props.onOk()}},{key:"onRequestClose",value:function(){this.props.clumpingRunning||this.props.onOk()}},{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{showSpinner:this.props.clumpingRunning,contentWidth:680,offsetX:80,offsetY:80,onOk:this.onRequestClose.bind(this),okDisabled:this.props.clumpingRunning,showCancelButton:!0,helpLink:"docs_user.html#clumping-window",actions:[i.a.createElement(se,{label:"Refresh",primary:!0,onClick:this.props.rerunProjects,disabled:this.props.clumpingRunning})],title:"Clumping",children:i.a.createElement("div",{key:"k7"},i.a.createElement(na,{disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map0_paintProperty,blmValue:this.parseBlmValue(this.props.blmValues[0]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(na,{disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map1_paintProperty,blmValue:this.parseBlmValue(this.props.blmValues[1]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(na,{disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map2_paintProperty,blmValue:this.parseBlmValue(this.props.blmValues[2]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(na,{disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map3_paintProperty,blmValue:this.parseBlmValue(this.props.blmValues[3]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(na,{disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map4_paintProperty,blmValue:this.parseBlmValue(this.props.blmValues[4]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement("div",{style:{display:"inline-block",margin:"5px",verticalAlign:"top",paddingTop:"60px",textAlign:"center",fontSize:"14px",width:"200px",height:"224px"}},i.a.createElement("div",null,"Move and zoom the main map to preview the clumping"),i.a.createElement("div",{style:{paddingTop:"30px"}},i.a.createElement("span",null,"BLM from "),i.a.createElement(pe.a,{value:this.props.blmMin,onChange:this.props.changBlmMin.bind(this),style:{width:"36px"},inputStyle:{textAlign:"center",fontSize:"14px"},id:"blmmin",disabled:this.props.clumpingRunning}),i.a.createElement("span",null," to "),i.a.createElement(pe.a,{value:this.props.blmMax,onChange:this.props.changBlmMax.bind(this),style:{width:"36px"},inputStyle:{textAlign:"center",fontSize:"14px"},id:"blmmax",disabled:this.props.clumpingRunning}))))}))}}]),t}(i.a.Component),sa=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={folderUploadText:"",active:!1},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(e){this.setState({active:!0})}},{key:"onChange",value:function(e){this.props.filesListed(e.target.files),this.setState({folderUploadText:e.target.files.length+" files"}),this.setState({active:!1})}},{key:"_addDirectory",value:function(e){e&&(e.directory=!0,e.webkitdirectory=!0)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"uploadLabel",style:{color:this.state.active?"rgb(0, 188, 212)":"rgba(0, 0, 0, 0.3)"}},this.props.label),i.a.createElement("div",{className:"uploadFileField"},i.a.createElement("div",{className:"uploadFileFieldIcon"},i.a.createElement("div",{style:{display:"inline-flex"}},i.a.createElement("label",{htmlFor:"folderSelector"},i.a.createElement(Gt.a,{name:"folder",title:"Click to select a Marxan project folder",style:{cursor:"pointer",display:"inline-flex"}}))),i.a.createElement("input",{id:"folderSelector",ref:function(t){return e._addDirectory(t)},type:"file",onChange:this.onChange.bind(this),onClick:this.onClick.bind(this),style:{display:"none",width:"10px"}})),i.a.createElement("div",{className:"uploadFileFieldLabel"},this.state.folderUploadText)))}}]),t}(i.a.Component),ra=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={planning_grid_name:"",zipFilename:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"setzipFilename",value:function(e){this.setState({zipFilename:e}),this.props.setZipFilename(e)}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginTop:"14px"}},n.createElement(sa,{label:"Marxan project folder",filesListed:this.props.filesListed}),n.createElement(zt,{requestEndpoint:this.props.requestEndpoint,SEND_CREDENTIALS:this.props.SEND_CREDENTIALS,mandatory:!0,filename:this.state.zipFilename,setFilename:this.setzipFilename.bind(this),checkForErrors:this.props.checkForErrors,label:"Planning grid zipped shapefile",style:{paddingTop:"20px"}}),n.createElement(pe.a,{value:this.props.planning_grid_name,onChange:this.props.setPlanningGridName,floatingLabelText:"Planning grid name",floatingLabelFixed:!0,style:{marginTop:"20px"}})))}}]),t}(n.Component),oa=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleNext=function(){var e=a.state.stepIndex;if(1===e)return a.setState({loading:!0}),void a.props.importProject(a.state.name,a.state.description,a.state.zipFilename,a.state.files,a.state.planning_grid_name).then(function(e){a.onOk()}).catch(function(e){a.setState({loading:!1}),a.props.setLog(e+"Import stopped"),a.props.setSnackBar(e)});a.setState({stepIndex:e+1})},a.handlePrev=function(){var e=a.state.stepIndex;e>0&&a.setState({stepIndex:e-1})},a.state={steps:["Files and planning grid","Info"],loading:!1,stepIndex:0,name:"",description:"",zipFilename:"",files:[],planning_grid_name:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"filesListed",value:function(e){this.setState({files:e})}},{key:"setZipFilename",value:function(e){this.setState({zipFilename:e})}},{key:"setPlanningGridName",value:function(e,t){this.setState({planning_grid_name:t})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"setDescription",value:function(e){this.setState({description:e})}},{key:"onOk",value:function(){this.setState({loading:!1,stepIndex:0}),this.props.onOk()}},{key:"render",value:function(){var e=this.state.stepIndex,t=[i.a.createElement("div",{style:{width:"100%",maxWidth:700,margin:"auto",textAlign:"center"}},i.a.createElement("div",{style:{margin:"0 16px"}},i.a.createElement("div",{style:{marginTop:12}},i.a.createElement(se,{label:"Back",disabled:0===e,onClick:this.handlePrev}),i.a.createElement(se,{label:e===this.state.steps.length-1?"Finish":"Next",onClick:this.handleNext.bind(this),primary:!0,disabled:this.state.loading}))))],a=i.a.createElement(i.a.Fragment,{key:"k4"},i.a.createElement("div",null,0===e?i.a.createElement(ra,{filesListed:this.filesListed.bind(this),setZipFilename:this.setZipFilename.bind(this),requestEndpoint:this.props.requestEndpoint,SEND_CREDENTIALS:this.props.SEND_CREDENTIALS,checkForErrors:this.props.checkForErrors,setPlanningGridName:this.setPlanningGridName.bind(this),planning_grid_name:this.state.planning_grid_name}):null,1===e?i.a.createElement(wt,{name:this.state.name,description:this.state.description,setName:this.setName.bind(this),setDescription:this.setDescription.bind(this),paddingBottom:"50px"}):null));return i.a.createElement(le,Object.assign({},this.props,{title:"Import existing Marxan project",contentWidth:358,children:a,okLabel:"Cancel",actions:t,onOk:this.onOk.bind(this),onRequestClose:this.onOk.bind(this),helpLink:"docs_user.html#importing-existing-marxan-projects"}))}}]),t}(i.a.Component),la=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={selectedRun:void 0,runningJobs:!1},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(this.props.runLogs!==e.runLogs){var a=this.props.runLogs.filter(function(e){return"Running"===e.status});this.setState({runningJobs:a.length>0})}}},{key:"closeDialog",value:function(){this.setState({selectedRun:void 0}),this.props.onOk()}},{key:"stopRun",value:function(e){this.props.stopMarxan("m"+this.state.selectedRun.pid),this.refreshRunLogs()}},{key:"clearRunLogs",value:function(e){this.props.clearRunLogs()}},{key:"refreshRunLogs",value:function(e){this.props.getRunLogs(),this.setState({selectedRun:void 0})}},{key:"changeSelectedRun",value:function(e,t){this.setState({selectedRun:t})}},{key:"renderUser",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.user},e.original.user)}},{key:"renderProject",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.project},e.original.project)}},{key:"renderStatus",value:function(e){var t;switch(e.original.status){case"Completed":t=i.a.createElement(q.a,{icon:J.d,style:{color:"green"},title:"Run completed"});break;case"Stopped":t=i.a.createElement(q.a,{icon:J.q,style:{color:"darkgray"},title:"Run stopped by the user"});break;case"Killed":t=i.a.createElement(q.a,{icon:J.i,style:{color:"red"},title:"Run stopped by the operating system"});break;case"Running":t=i.a.createElement(oe.a,{className:"spin",style:{height:"16px",width:"16px",verticalAlign:"sub",color:"rgb(255, 64, 129)"}})}return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.status},t,"  "+e.original.status)}},{key:"renderEnded",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"}},e.original.endtime?e.original.endtime:"")}},{key:"renderRuntime",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"}},e.original.runtime?e.original.runtime:"")}},{key:"render",value:function(){var e;return e=[{Header:"pid",accessor:"pid",width:60,headerStyle:{textAlign:"left"}},{Header:"User",accessor:"user",width:60,headerStyle:{textAlign:"left"},Cell:this.renderUser.bind(this)},{Header:"Project",accessor:"project",width:150,headerStyle:{textAlign:"left"},Cell:this.renderProject.bind(this)},{Header:"Started",accessor:"starttime",width:112,headerStyle:{textAlign:"left"}},{Header:"Ended",accessor:"endtime",width:112,headerStyle:{textAlign:"left"},Cell:this.renderEnded.bind(this)},{Header:"Runtime",accessor:"runtime",width:60,headerStyle:{textAlign:"right"},className:"table_column_right_align",Cell:this.renderRuntime.bind(this)},{Header:"Runs",accessor:"runs",width:60,headerStyle:{textAlign:"right"},className:"table_column_right_align"},{Header:"Status",accessor:"status",width:80,headerStyle:{textAlign:"left"},Cell:this.renderStatus.bind(this)}],i.a.createElement(le,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),onCancel:this.closeDialog.bind(this),showCancelButton:!1,helpLink:"docs_user.html#the-run-log",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Runs",children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{style:{marginBottom:"5px"}},"There are a total of ",this.props.runLogs.length," runs in the log:"),i.a.createElement("div",{id:"projectsTable"},i.a.createElement(Ae.a,{pageSize:this.props.runLogs.length,className:"projectsReactTable noselect",showPagination:!1,minRows:0,noDataText:"",data:this.props.runLogs,thisRef:this,columns:e,getTrProps:function(e,t,a){return{style:{background:t.original.pid===(e.thisRef.state.selectedRun&&e.thisRef.state.selectedRun.pid)?"aliceblue":""},onClick:function(a){e.thisRef.changeSelectedRun(a,t.original)}}}})),i.a.createElement("div",{id:"projectsToolbar",style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("stopMarxan"),title:"Stop run",disabled:void 0===this.state.selectedRun||(!this.props.preprocessing&&!this.state.runningJobs||"Running"!==this.state.selectedRun.status),onClick:this.stopRun.bind(this),label:"Stop",secondary:!0}),i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("getRunLogs"),title:"Refresh run logs",icon:i.a.createElement(q.a,{icon:J.m}),onClick:this.refreshRunLogs.bind(this)}),i.a.createElement(se,{show:!this.props.unauthorisedMethods.includes("clearRunLogs"),title:"Clear run logs",icon:i.a.createElement(q.a,{icon:J.h}),onClick:this.clearRunLogs.bind(this)})))}))}}]),t}(i.a.Component),ca=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{contentWidth:500,offsetY:80,title:"Server Details",helpLink:"docs_user.html#server-details",children:i.a.createElement("div",{key:"k5"},i.a.createElement("div",{className:"tabTitle"},"Name:"),i.a.createElement("div",{className:"serverDetails"},this.props.marxanServer&&this.props.marxanServer.name),i.a.createElement("div",{className:"tabTitle"},"Host:"),i.a.createElement("div",{className:"serverDetails"},this.props.marxanServer&&this.props.marxanServer.host),i.a.createElement("div",{className:"tabTitle"},"Description:"),i.a.createElement("div",{className:"serverDetails"},this.props.marxanServer&&this.props.marxanServer.description),i.a.createElement("div",{className:"tabTitle"},"System:"),i.a.createElement("div",{className:"serverDetails"},this.props.marxanServer&&this.props.marxanServer.system),i.a.createElement("div",{className:"tabTitle"},"Marxan Server version:"),i.a.createElement("div",{className:"serverDetails"},this.props.marxanServer&&this.props.marxanServer.server_version),i.a.createElement("div",{className:"tabTitle"},"WDPA version:"),i.a.createElement("div",{className:"serverDetails"},this.props.marxanServer&&this.props.marxanServer.wdpa_version),i.a.createElement("div",{style:{display:this.props.newWDPAVersion?"block":"none"}},i.a.createElement("br",null),i.a.createElement("div",{className:"tabTitle",dangerouslySetInnerHTML:{__html:window.WDPA.latest_version+" is available. Details <a href='"+window.WDPA.metadataUrl+"' target='_blank'>here</a>. Click below to update. "}}),i.a.createElement("br",null),i.a.createElement(se,{title:"Update WDPA",onClick:this.props.updateWDPA,label:"Update",disabled:this.props.loading})))}))}}]),t}(i.a.Component),pa=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{contentWidth:500,offsetY:80,title:"Alert",children:i.a.createElement("div",{key:"k23"},i.a.createElement("div",{className:"description"},"A new version of the WDPA is available. ",i.a.createElement("br",null),"Click on Help | Server Details for more information."))}))}}]),t}(i.a.Component),ua=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={currentPassword:"",newPassword1:"",newPassword2:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"setCurrentPassword",value:function(e,t){this.setState({currentPassword:t})}},{key:"setNewPassword1",value:function(e,t){this.setState({newPassword1:t})}},{key:"setNewPassword2",value:function(e,t){this.setState({newPassword2:t})}},{key:"onOk",value:function(e){var t=this;this.state.newPassword2===this.state.newPassword1?this.props.checkPassword(this.props.user,this.state.currentPassword).then(function(e){t.props.updateUser({PASSWORD:t.state.newPassword1}).then(function(e){t.props.setSnackBar("Password updated"),t.props.onOk()}).catch(function(e){t.props.setSnackBar("Password not updated")})}).catch(function(e){t.props.setSnackBar("Invalid password")}):this.passwordsDontMatch()}},{key:"passwordsDontMatch",value:function(){this.props.setSnackBar("Passwords don't match")}},{key:"render",value:function(){return i.a.createElement(le,Object.assign({},this.props,{onOk:this.onOk.bind(this),showCancelButton:!0,onCancel:this.props.onOk,helpLink:"docs_user.html#change-password",contentWidth:358,offsetY:80,title:"Change Password",children:i.a.createElement("div",{key:"k5"},i.a.createElement(pe.a,{floatingLabelText:"Current password",floatingLabelFixed:!0,onChange:this.setCurrentPassword.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},style:{fontSize:"13px"},type:"password"}),i.a.createElement(pe.a,{floatingLabelText:"New password",floatingLabelFixed:!0,onChange:this.setNewPassword1.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},style:{fontSize:"13px"},type:"password"}),i.a.createElement(pe.a,{floatingLabelText:"Repeat password",floatingLabelFixed:!0,onChange:this.setNewPassword2.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},style:{fontSize:"13px"},type:"password"}))}))}}]),t}(i.a.Component),ha=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.active_pu?Object.keys(this.props.active_pu).map(function(t){return{key:t,value:e.props.active_pu[t]}}):[],a=this.props.xy.x+25+"px",n=this.props.xy.y-25+"px";return i.a.createElement("div",{style:{display:t.length>0?"block":"none",left:a,top:n},id:"popup"},i.a.createElement("div",{className:"popupHeader"},"Planning unit properties"),i.a.createElement(Ae.a,{showPagination:!1,pageSize:t.length,minRows:0,noDataText:"",data:t,columns:[{Header:"Property",accessor:"key"},{Header:"Value",accessor:"value"}]}))}}]),t}(i.a.Component),da=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.xy.x+25+"px",t=this.props.xy.y-25+"px";return i.a.createElement("div",{style:{display:this.props.features&&this.props.features.length>0?"block":"none",left:e,top:t},id:"popup"},i.a.createElement("div",{className:"popupHeader"},"Features"),i.a.createElement(oe.a,{className:"spin",style:{display:this.props.loading?"inline-block":"none",color:"rgb(255, 64, 129)",position:"absolute",top:"5px",right:"7px"},key:"spinner"}),i.a.createElement(Ae.a,{showPagination:!1,pageSize:this.props.loading?0:this.props.features&&this.props.features.length,minRows:0,noDataText:"",data:this.props.features,columns:[{Header:"Feature",accessor:"alias",width:220,headerStyle:{display:"none"}}]}))}}]),t}(i.a.Component),ga=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.xy.x+25+"px",t=this.props.xy.y-25+"px";return i.a.createElement("div",{style:{display:this.props.features&&this.props.features.length>0?"block":"none",left:e,top:t},id:"popup"},i.a.createElement("div",{className:"popupHeader"},"Protected Areas"),i.a.createElement(oe.a,{className:"spin",style:{display:this.props.loading?"inline-block":"none",color:"rgb(255, 64, 129)",position:"absolute",top:"5px",right:"7px"},key:"spinner"}),i.a.createElement(Ae.a,{showPagination:!1,pageSize:this.props.loading?0:this.props.features&&this.props.features.length,minRows:0,noDataText:"",data:this.props.features,columns:[{Header:"Name",accessor:"name",width:320},{Header:"Category",accessor:"iucn_cat",width:60}]}))}}]),t}(i.a.Component),ma=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={target_value:17,validTarget:!0},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.validateTarget()}},{key:"validateTarget",value:function(){var e=Object(ft.isValidTargetValue)(this.state.target_value);this.setState({validTarget:e}),e&&(this.props.updateTargetValueForFeatures(this.state.target_value),this.props.onOk())}},{key:"onOk",value:function(){this.validateTarget()}},{key:"render",value:function(){var e=this;return n.createElement(le,Object.assign({},this.props,{contentWidth:240,offsetX:80,offsetY:260,title:"Target",onOk:this.onOk.bind(this),children:n.createElement(n.Fragment,null,n.createElement(pe.a,{floatingLabelFixed:!0,onChange:function(t,a){return e.setState({target_value:a})},defaultValue:this.state.target_value,onKeyPress:this.handleKeyPress.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},style:{fontSize:"13px",width:"70px"},errorText:this.state.validTarget?"":"Invalid target"})," ")}))}}]),t}(n.PureComponent);O.a.accessToken="pk.eyJ1IjoiYmxpc2h0ZW4iLCJhIjoiMEZrNzFqRSJ9.0QBRA2HxTb8YHErUFRMPZg";var fa=m.version,va="https://andrewcottam.github.io/marxan-web/documentation/",ba=va+"docs_errors.html",ya=!1,ka=[1,2,3],Sa="planning_units_layer",Ea="planning_units_status_layer",wa="planning_units_puvspr_layer",Oa=.9,Pa=.2,xa="Outline planning units where the feature occurs",Da=[{name:"id",key:"ID",hint:"The unique identifier for the feature",showForOld:!0},{name:"alias",key:"Alias",hint:"A human readable name for the feature",showForOld:!0},{name:"feature_class_name",key:"Feature class name",hint:"The internal name for the feature in the PostGIS database",showForOld:!1},{name:"description",key:"Description",hint:"Full description of the feature",showForOld:!1},{name:"creation_date",key:"Creation date",hint:"The date the feature was created or imported",showForOld:!1},{name:"tilesetid",key:"Mapbox ID",hint:"The unique identifier of the feature tileset in Mapbox",showForOld:!1},{name:"area",key:"Total area",hint:"The total area for the feature in Km2 (i.e. globally)",showForOld:!1},{name:"target_value",key:"Target percent",hint:"The target percentage for the feature within the planning grid",showForOld:!0},{name:"spf",key:"Species Penalty Factor",hint:"The species penalty factor is used to weight the likelihood of getting a species in the results",showForOld:!0},{name:"preprocessed",key:"Preprocessed",hint:"Whether or not the feature has been intersected with the planning units",showForOld:!1},{name:"pu_count",key:"Planning unit count",hint:"The number of planning units that intersect the feature (calculated during pre-processing)",showForOld:!0},{name:"pu_area",key:"Planning grid area",hint:"The area of the feature within the planning grid in Km2 (calculated during pre-processing)",showForOld:!0},{name:"target_area",key:"Target area",hint:"The total area that needs to be protected to achieve the target percentage in Km2 (calculated during a Marxan Run)",showForOld:!0},{name:"protected_area",key:"Area protected",hint:"The total area protected in the current solution in Km2 (calculated during a Marxan Run)",showForOld:!0}],Ca="",ja=new O.a.Popup({closeButton:!1}),Fa=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={marxanServers:[],marxanServer:{},usersDialogOpen:!1,alertDialogOpen:!1,featureMenuOpen:!1,profileDialogOpen:!1,aboutDialogOpen:!1,helpDialogOpen:!1,importDialogOpen:!1,optionsDialogOpen:!1,CostsDialogOpen:!1,registerDialogOpen:!1,clumpingDialogOpen:!1,settingsDialogOpen:!1,projectsDialogOpen:!1,openInfoDialogOpen:!1,newProjectDialogOpen:!1,classificationDialogOpen:!1,resendPasswordDialogOpen:!1,NewPlanningGridDialogOpen:!1,importPlanningGridDialogOpen:!1,FailedToDeleteDialogOpen:!1,changePasswordDialogOpen:!1,serverDetailsDialogOpen:!1,planningGridsDialogOpen:!1,planningGridDialogOpen:!1,NewFeatureDialogOpen:!1,featuresDialogOpen:!1,featureDialogOpen:!1,runLogDialogOpen:!1,infoPanelOpen:!1,resultsPanelOpen:!1,targetPopupOpen:!1,guestUserEnabled:!0,users:[],user:ya?"andrew":"",password:ya?"asd":"",project:ya?"Tonga marine":"",failedToDeleteProjects:[],owner:"",loggedIn:!1,userData:{},unauthorisedMethods:[],metadata:{},renderer:{},editingProjectName:!1,editingDescription:!1,runParams:[],files:{},popup_point:{x:0,y:0},snackbarOpen:!1,snackbarMessage:"",tilesets:[],puFeatures:[],paFeatures:[],userMenuOpen:!1,helpMenuOpen:!1,preprocessing:!1,pa_layer_visible:!1,currentFeature:{},puvsprLayerText:"",featureDatasetName:"",featureDatasetDescription:"",featureDatasetFilename:"",loading:!1,dataBreaks:[],allFeatures:[],projectFeatures:[],selectedFeatureIds:[],addingRemovingFeatures:!1,results_layer_opacity:Oa,wdpa_layer_opacity:Pa,costs:[],selectedCosts:[],countries:[],planning_units:[],planning_unit_grids:[],planning_grid_metadata:{},feature_metadata:{},activeTab:"project",activeResultsTab:"legend",streamingLog:"",map0_paintProperty:[],map1_paintProperty:[],map2_paintProperty:[],map3_paintProperty:[],map4_paintProperty:[],blmValues:[.001,.01,.1,1,10],blmMin:.001,blmMax:10,clumpingRunning:!1,deleteWhat:"",pid:0,basemaps:[],basemap:"North Star",mapCentre:{lng:0,lat:0},mapZoom:12,runLogs:[],puEditing:!1,wdpaAttribution:""},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){ya&&this.validateUser(),this.getGlobalVariables(),this.setState({brew:new C.a})}},{key:"_get",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(n,i){t.setState({loading:!0}),x()(t.state.marxanServer.endpoint+e,{timeout:a}).promise.then(function(e){t.setState({loading:!1}),t.checkForErrors(e)?i(e.error):n(e)},function(e){t.setState({loading:!1}),t.setSnackBar("Request timeout - the server may not be running"),i(e)})})}},{key:"_post",value:function(e,t){var a=this,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3]);return new Promise(function(i,s){a.setState({loading:!0}),Object(b.post)(a.state.marxanServer.endpoint+e,t,{withCredentials:n}).then(function(e){a.checkForErrors(e.data)?(a.setState({loading:!1}),s(e.data.error)):(a.setState({loading:!1}),i(e.data))})})}},{key:"_ws",value:function(e,t){var a=this;return new Promise(function(n,i){var s=new WebSocket(a.state.marxanServer.websocketEndpoint+e);s.onmessage=function(e){var s=JSON.parse(e.data);a.checkForErrors(s)?(t(s),a.setState({preprocessing:!1}),i(s.error)):"Finished"===s.status?(t(s),a.setState({preprocessing:!1}),n(s)):t(s)},s.onopen=function(e){},s.onerror=function(e){a.setState({preprocessing:!1}),i(e)},s.onclose=function(e){a.setState({preprocessing:!1}),e.wasClean?i(e):t({status:"SocketClosed"})}})}},{key:"checkForErrors",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.responseIsTimeoutOrEmpty(e,t),n=this.isServerError(e,t),i=a||n;if(i){var s=e.hasOwnProperty("trace")?e.trace:e.hasOwnProperty("error")?e.error:"No error message returned";console.error("Error message from server: "+s)}return i}},{key:"responseIsTimeoutOrEmpty",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e)return!1;return t&&this.setSnackBar("No response received from server"),!0}},{key:"isServerError",value:function(e,t){if(e&&e.error||e&&e.hasOwnProperty("metadata")&&e.metadata.hasOwnProperty("error")&&null!=e.metadata.error){var a=e.error?e.error:e.metadata.error;return t&&this.setSnackBar(a),!0}return e.warning&&t&&this.setSnackBar(e.warning),!1}},{key:"wsMessageCallback",value:function(e){var t="";switch(e.status){case"Started":case"Updating WDPA":case"Importing feature":this.setState({preprocessing:!0}),t=this.state.streamingLog+e.info+"\n";break;case"pid":this.setState({pid:e.pid});break;case"RunningMarxan":t=this.state.streamingLog+e.info.replace(/(\n\n {2}Init)/gm,"\n  Init").replace(/(\n\n {2}ThermalAnnealing)/gm,"\n  ThermalAnnealing").replace(/(\n\n {2}Iterative)/gm,"\n  Iterative").replace(/(\n\n {2}Best)/gm,"\n  Best");break;case"RunningQuery":break;case"FinishedQuery":t=this.state.streamingLog+e.info+" (elapsed time: "+e.elapsedtime+")\n";break;case"Finished":if(e.hasOwnProperty("info")){var a=e.hasOwnProperty("error")?e.error+"\n"+e.info:e.info;t=this.state.streamingLog+a+" (Total time: "+e.elapsedtime+")\n\n"}break;case"SocketClosed":this.setSnackBar("The WebSocket connection closed unexpectedly"),t=this.state.streamingLog+"The WebSocket connection closed unexpectedly. (Total time: "+e.elapsedtime+")\n\n"}""===t||this.state.clumpingRunning||this.setState({streamingLog:t})}},{key:"setSnackBar",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.setState({snackbarOpen:!0,snackbarMessage:e})}},{key:"getGlobalVariables",value:function(){this.setState({basemaps:window.MAPBOX_BASEMAPS}),this.initialiseServers(window.MARXAN_SERVERS)}},{key:"initialiseServers",value:function(e){var t=this,a=e.map(function(e){return e.host}),n="localhost"===window.location.hostname?"localhost":window.location.hostname;e.push({name:n,protocol:window.location.protocol,host:window.location.hostname,port:8080,description:"Local machine",type:"local"}),this.getAllServerCapabilities(e).then(function(n){(e=e.filter(function(e){return"remote"===e.type||"local"===e.type&&!e.offline&&-1===a.indexOf(e.host)||"localhost"===e.host})).sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()||"local"===e.type?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),t.setState({marxanServers:e})})}},{key:"getAllServerCapabilities",value:function(e){for(var t=[],a=0;a<e.length;++a)t.push(this.getServerCapabilities(e[a]));return Promise.all(t)}},{key:"getServerCapabilities",value:function(e){return new Promise(function(t,a){var n=e.protocol+"//"+e.host+":"+e.port+"/marxan-server/",i="http:"===e.protocol?"ws://"+e.host+":"+e.port+"/marxan-server/":"wss://"+e.host+":"+e.port+"/marxan-server/";e=Object.assign(e,{endpoint:n,websocketEndpoint:i,offline:!0,guestUserEnabled:!1,corsEnabled:!1}),v()(n+"getServerData",{timeout:1e3}).then(function(e){return e.json()}).then(function(a){if(a.hasOwnProperty("info")){var n=a.serverData.PERMITTED_DOMAINS.indexOf(window.location.hostname)>-1||e.host===window.location.hostname;e=Object.assign(e,{guestUserEnabled:a.serverData.ENABLE_GUEST_USER,corsEnabled:n,offline:!1,machine:a.serverData.MACHINE,client_version:a.serverData.MARXAN_CLIENT_VERSION,server_version:a.serverData.MARXAN_SERVER_VERSION,node:a.serverData.NODE,processor:a.serverData.PROCESSOR,release:a.serverData.RELEASE,system:a.serverData.SYSTEM,version:a.serverData.VERSION,wdpa_version:a.serverData.WDPA_VERSION}),""!==a.serverData.SERVER_NAME&&(e=Object.assign(e,{name:a.serverData.SERVER_NAME})),""!==a.serverData.SERVER_DESCRIPTION&&(e=Object.assign(e,{description:a.serverData.SERVER_DESCRIPTION}))}t(e)}).catch(function(a){t(e)})})}},{key:"setWDPAVectorTilesLayerName",value:function(e){var t=e.toLowerCase().substr(0,3)+"_"+e.substr(-4);Ca="wdpa_"+t+"_polygons"}},{key:"selectServer",value:function(e){this.setState({marxanServer:e}),this.setWDPAVectorTilesLayerName(e.wdpa_version),e.offline||e.corsEnabled||!e.guestUserEnabled||this.setState({user:"guest",password:"password"})}},{key:"closeSnackbar",value:function(){this.setState({snackbarOpen:!1})}},{key:"startLogging",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.log_tab_active(),e&&this.clearLog()}},{key:"clearLog",value:function(){this.setState({streamingLog:""})}},{key:"setLog",value:function(e){this.setState({streamingLog:this.state.streamingLog+e})}},{key:"getPuidsFromNormalisedData",value:function(e){var t=[];return e.forEach(function(e){t=t.concat(e[1])}),t}},{key:"changeUserName",value:function(e){this.setState({user:e})}},{key:"changePassword",value:function(e){this.setState({password:e})}},{key:"processLogin",value:function(){var e=this;this._get("getServerData").then(function(t){e.setState({guestUserEnabled:t.serverData.ENABLE_GUEST_USER}),e.validateUser()})}},{key:"checkPassword",value:function(e,t){var a=this;return new Promise(function(n,i){a._get("validateUser?user="+e+"&password="+t,1e4).then(function(e){n()}).catch(function(e){i(e)})})}},{key:"validateUser",value:function(){var e=this;this.checkPassword(this.state.user,this.state.password).then(function(){e.login()}).catch(function(e){})}},{key:"login",value:function(){var e=this;this._get("getUser?user="+this.state.user).then(function(t){e.setState({userData:t.userData,unauthorisedMethods:t.unauthorisedMethods,project:t.userData.LASTPROJECT});var a=e.state.basemaps.filter(function(e){return e.name===t.userData.BASEMAP})[0];e.setBasemap(a).then(function(){e.getAllFeatures().then(function(){e.loadProject(t.userData.LASTPROJECT,e.state.user)}),e.getPlanningUnitGrids(),e.state.marxanServer.wdpa_version!==window.WDPA.latest_version&&"Admin"===e.state.userData.ROLE?e.setState({newWDPAVersion:!0,alertDialogOpen:!0}):e.setState({newWDPAVersion:!1,alertDialogOpen:!1})})}).catch(function(e){})}},{key:"logout",value:function(){this.hideUserMenu(),this.setState({loggedIn:!1,user:"",password:"",project:"",owner:"",runParams:[],files:{},metadata:{},renderer:{},planning_units:[],projectFeatures:[],infoPanelOpen:!1,resultsPanelOpen:!1,brew:new C.a}),this.resetResults(),this._get("logout").then(function(e){}).catch(function(e){})}},{key:"changeEmail",value:function(e){this.setState({resendEmail:e})}},{key:"resendPassword",value:function(){var e=this;this._get("resendPassword?user="+this.state.user).then(function(t){e.setSnackBar(t.info),e.closeResendPasswordDialog()}).catch(function(e){})}},{key:"getUsers",value:function(){var e=this;this._get("getUsers").then(function(t){e.setState({users:t.users})}).catch(function(t){e.setState({users:[]})})}},{key:"deleteUser",value:function(e){var t=this;this._get("deleteUser?user="+e).then(function(a){t.setSnackBar("User deleted");var n=t.state.users;n=n.filter(function(t){return t.user!==e}),t.setState({users:n}),t.state.owner===e&&(t.setSnackBar("Current project no longer exists. Loading next available."),t.state.projects.some(function(a){return a.user!==e&&t.loadProject(a.name,a.user),a.name!==t.state.project}),t.deleteProjectsForUser(e))}).catch(function(e){})}},{key:"deleteProjectsForUser",value:function(e){var t=this.state.projects.map(function(t){return t.user!==e});this.setState({projects:t})}},{key:"changeRole",value:function(e,t){this.updateUser({ROLE:t},e);var a=this.state.users;a=a.map(function(a){return a.user===e?Object.assign(a,{ROLE:t}):a}),this.setState({users:a})}},{key:"toggleEnableGuestUser",value:function(){var e=this;this._get("toggleEnableGuestUser").then(function(t){e.setState({guestUserEnabled:t.enabled})}).catch(function(e){})}},{key:"toggleProjectPrivacy",value:function(e){var t=this;this.updateProjectParameter("PRIVATE",e).then(function(a){t.setState({metadata:Object.assign(t.state.metadata,{PRIVATE:"True"===e})})}).catch(function(e){})}},{key:"appendToFormData",value:function(e,t){for(var a in t)t.hasOwnProperty(a)&&e.append(a,t[a]);return e}},{key:"removeKeys",value:function(e,t){return t.map(function(t){return delete e[t],null}),e}},{key:"updateUser",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.user;return new Promise(function(n,i){e=t.removeKeys(e,["updated","validEmail"]);var s=new FormData;s.append("user",a),t.appendToFormData(s,e),t._post("updateUserParameters",s).then(function(e){t.state.user===a&&t.setState({userData:t.newUserData}),t.setState({optionsDialogOpen:!1}),n()}).catch(function(e){i(e)}),t.state.user===a&&(t.newUserData=Object.assign(t.state.userData,e))})}},{key:"saveOptions",value:function(e){this.hidePopup(),this.updateUser(e)}},{key:"upgradeProject",value:function(e){return this._get("upgradeProject?user="+this.state.user+"&project="+e)}},{key:"updateProjectParams",value:function(e,t){var a=new FormData;return a.append("user",this.state.owner),a.append("project",e),this.appendToFormData(a,t),this._post("updateProjectParameters",a)}},{key:"updateProjectParameter",value:function(e,t){var a={};return a[e]=t,this.updateProjectParams(this.state.project,a)}},{key:"updateRunParams",value:function(e){var t=this,a={};e.map(function(e){return a[e.key]=e.value,null}),this.updateProjectParams(this.state.project,a).then(function(e){t.setState({runParams:t.runParams})}).catch(function(e){}),this.runParams=e}},{key:"getPlanningUnitGrids",value:function(){var e=this;this._get("getPlanningUnitGrids").then(function(t){e.setState({planning_unit_grids:t.planning_unit_grids})}).catch(function(e){})}},{key:"loadProject",value:function(e,t){var a=this;this.resetResults(),this._get("getProject?user="+t+"&project="+e).then(function(e){a.setState({loggedIn:!0,project:e.project,owner:t,runParams:e.runParameters,files:Object.assign(e.files),metadata:e.metadata,renderer:e.renderer,planning_units:e.planning_units,infoPanelOpen:!0,resultsPanelOpen:!0}),e.metadata.PLANNING_UNIT_NAME&&a.changePlanningGrid("blishten."+e.metadata.PLANNING_UNIT_NAME).then(function(){a.getResults(t,e.project)}),a.feature_preprocessing=e.feature_preprocessing,a.protected_area_intersections=e.protected_area_intersections,a.previousIucnCategory=e.metadata.IUCN_CATEGORY,a.initialiseInterestFeatures(e.metadata.OLDVERSION,e.features)}).catch(function(e){e.indexOf("Logged on as read-only guest user")>-1&&a.setState({loggedIn:!0}),e.indexOf("does not exist")>-1&&(a.setSnackBar("Loading first available project"),a.loadProject("",a.state.user))})}},{key:"getArrayItem",value:function(e,t){var a=e.filter(function(e){return e[0]===t});return a.length>0?a[0]:void 0}},{key:"initialiseInterestFeatures",value:function(e,t){var a=this,n=e?JSON.parse(JSON.stringify(t)):this.state.allFeatures,i=t.map(function(e){return e.id}),s=n.map(function(n){var s=i.indexOf(n.id)>-1?t[i.indexOf(n.id)]:null,r=a.getArrayItem(a.feature_preprocessing,n.id);return a.addFeatureAttributes(n,e),s&&(n.selected=!0,n.preprocessed=!!r,n.pu_area=r?r[1]:-1,n.pu_count=r?r[2]:-1,n.spf=s.spf,n.target_value=s.target_value,n.occurs_in_planning_grid=n.pu_count>0),n});this.getSelectedFeatureIds(),this.setState({allFeatures:s,projectFeatures:s.filter(function(e){return e.selected})})}},{key:"addFeatureAttributes",value:function(e,t){e.selected=!1,e.preprocessed=!1,e.pu_area=-1,e.pu_count=-1,e.spf=40,e.target_value=17,e.target_area=-1,e.protected_area=-1,e.feature_layer_loaded=!1,e.old_version=t,e.occurs_in_planning_grid=!1}},{key:"resetResults",value:function(){this.runMarxanResponse={},this.setState({solutions:[]}),this.hideFeatureLayer(),this.hideLayer(wa)}},{key:"createNewUser",value:function(e,t,a,n,i){var s=this,r=new FormData;r.append("user",e),r.append("password",t),r.append("fullname",a),r.append("email",n),r.append("mapboxaccesstoken",i),this._post("createUser",r).then(function(t){s.setSnackBar(t.info),s.closeRegisterDialog(),s.setState({user:e,password:""})}).catch(function(e){})}},{key:"createNewProject",value:function(e){var t=this,a=new FormData;a.append("user",this.state.user),a.append("project",e.name),a.append("description",e.description),a.append("planning_grid_name",e.planning_grid_name);var n=[],i=[],s=[];e.features.forEach(function(e){n.push(e.id),i.push(17),s.push(40)}),a.append("interest_features",n.join(",")),a.append("target_values",i.join(",")),a.append("spf_values",s.join(",")),this._post("createProject",a).then(function(e){t.setSnackBar(e.info),t.setState({projectsDialogOpen:!1}),t.loadProject(e.name,e.user)}).catch(function(e){})}},{key:"createImportProject",value:function(e){var t=new FormData;return t.append("user",this.state.user),t.append("project",e),this._post("createImportProject",t)}},{key:"deleteProject",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._get("deleteProject?user="+e+"&project="+t).then(function(e){a.getProjects(),a.setSnackBar(e.info,n),e.project===a.state.project&&(a.setSnackBar("Current project deleted - loading first available"),a.state.projects.some(function(e){return e.name!==a.state.project&&a.loadProject(e.name,a.state.user),e.name!==a.state.project}))}).catch(function(e){})}},{key:"cloneProject",value:function(e,t){var a=this;this._get("cloneProject?user="+e+"&project="+t).then(function(e){a.getProjects(),a.setSnackBar(e.info)}).catch(function(e){})}},{key:"startEditingProjectName",value:function(){this.setState({editingProjectName:!0})}},{key:"startEditingDescription",value:function(){this.setState({editingDescription:!0})}},{key:"renameProject",value:function(e){var t=this;this.setState({editingProjectName:!1}),""!==e&&e!==this.state.project&&this._get("renameProject?user="+this.state.owner+"&project="+this.state.project+"&newName="+e).then(function(a){t.setState({project:e}),t.setSnackBar(a.info)}).catch(function(e){})}},{key:"renameDescription",value:function(e){var t=this;this.setState({editingDescription:!1}),this.updateProjectParameter("DESCRIPTION",e).then(function(a){t.setState({metadata:Object.assign(t.state.metadata,{DESCRIPTION:e})})}).catch(function(e){})}},{key:"getProjects",value:function(){var e=this;this._get("getProjects?user="+this.state.user).then(function(t){var a=[];t.projects.forEach(function(t){t.private&&t.user!==e.state.user&&"Admin"!==e.state.userData.ROLE||a.push(t)}),e.setState({projects:a})}).catch(function(e){})}},{key:"runMarxan",value:function(e){var t=this;this.startLogging(!0),this.resetProtectedAreas(),this.updateSpecFile().then(function(e){t.updatePuFile(),t.updatePuvsprFile().then(function(e){t.startMarxanJob(t.state.owner,t.state.project).then(function(e){t.getRunLogs(),t.checkForErrors(e)?t.runFinished([]):t.getResults(e.user,e.project)}).catch(function(e){t.marxanStopped(e)})})}).catch(function(e){})}},{key:"stopProcess",value:function(e){var t=this;this._get("stopProcess?pid="+e,1e4).catch(function(e){t.getRunLogs()})}},{key:"marxanStopped",value:function(e){this.getRunLogs(),this.setState({pid:0,streamingLog:this.state.streamingLog+"\n"+e+"\n\n"})}},{key:"resetProtectedAreas",value:function(){this.state.allFeatures.forEach(function(e){e.protected_area=-1,e.target_area=-1})}},{key:"updateSpecFile",value:function(){var e=new FormData;e.append("user",this.state.owner),e.append("project",this.state.project);var t=[],a=[],n=[];return this.state.projectFeatures.forEach(function(e){t.push(e.id),a.push(e.target_value),n.push(e.spf)}),e.append("interest_features",t.join(",")),e.append("target_values",a.join(",")),e.append("spf_values",n.join(",")),this._post("updateSpecFile",e)}},{key:"updatePuFile",value:function(){}},{key:"updatePuvsprFile",value:function(){return this.preprocessAllFeatures()}},{key:"preprocessSingleFeature",value:function(){var e=Object(c.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.closeFeatureMenu(),this.startLogging(),this.preprocessFeature(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"preprocessAllFeatures",value:function(){var e=Object(c.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<this.state.projectFeatures.length)){e.next=11;break}if((t=this.state.projectFeatures[a]).preprocessed){e.next=8;break}return e.next=6,this.preprocessFeature(t);case 6:e.next=8;break;case 8:++a,e.next=1;break;case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"preprocessFeature",value:function(e){var t=this;return new Promise(function(a,n){t.log_tab_active(),t._ws("preprocessFeature?user="+t.state.owner+"&project="+t.state.project+"&planning_grid_name="+t.state.metadata.PLANNING_UNIT_NAME+"&feature_class_name="+e.feature_class_name+"&alias="+e.alias+"&id="+e.id,t.wsMessageCallback.bind(t)).then(function(n){t.updateFeature(e,{preprocessed:!0,pu_count:Number(n.pu_count),pu_area:Number(n.pu_area),occurs_in_planning_grid:Number(n.pu_count)>0}),t.setState({pid:0}),a(n)}).catch(function(e){t.setState({pid:0}),n(e)})})}},{key:"startMarxanJob",value:function(e,t){var a=this;return new Promise(function(n,i){a.setState({active_pu:void 0}),a._ws("runMarxan?user="+e+"&project="+t,a.wsMessageCallback.bind(a)).then(function(e){a.setState({pid:0}),n(e)}).catch(function(e){i(e)})})}},{key:"getResults",value:function(e,t){var a=this;this._get("getResults?user="+e+"&project="+t).then(function(e){a.runCompleted(e)}).catch(function(e){})}},{key:"runCompleted",value:function(e){var t;this.runMarxanResponse=e,this.runMarxanResponse.ssoln&&this.runMarxanResponse.ssoln.length>0?(this.setSnackBar(e.info),this.renderSolution(this.runMarxanResponse.ssoln,!0),(t=(t=e.summary).map(function(e){return{Run_Number:e[0],Score:Number(e[1]).toFixed(1),Cost:Number(e[2]).toFixed(1),Planning_Units:e[3],Missing_Values:e[12]}})).splice(0,0,{Run_Number:"Sum",Score:"",Cost:"",Planning_Units:"",Missing_Values:""}),this.updateProtectedAmount(this.runMarxanResponse.mvbest)):t=[],this.runFinished(t)}},{key:"runFinished",value:function(e){this.setState({solutions:e})}},{key:"updateProtectedAmount",value:function(e){var t=this.state.allFeatures;t.forEach(function(t){var a=e.findIndex(function(e){return e[0]===t.id});if(a>-1){var n=e[a];Object.assign(t,{target_area:n[2],protected_area:n[3]})}}),this.setFeaturesState(t)}},{key:"importProject",value:function(e,t,a,n,i){var s=this;return new Promise(function(r,o){var l,c="";s.startLogging(),s.setState({streamingLog:"Starting import...\n"}),s.createImportProject(e).then(function(p){s.setState({streamingLog:s.state.streamingLog+" Project '"+e+"' created\n"}),s.importZippedShapefileAsPu(a,i,"Imported with the project '"+e+"'").then(function(a){c=a.feature_class_name,l=a.uploadId,s.setState({streamingLog:s.state.streamingLog+" Planning grid imported\n"}),s.uploadFiles(n,e).then(function(a){s.setState({streamingLog:s.state.streamingLog+" All files uploaded\n"}),s.upgradeProject(e).then(function(a){s.setState({streamingLog:s.state.streamingLog+" Project updated to new version\n"}),s.updateProjectParams(e,{DESCRIPTION:t+" (imported from an existing Marxan project)",CREATEDATE:new Date(Date.now()).toString(),OLDVERSION:"True",PLANNING_UNIT_NAME:c,OUTPUTDIR:"output"}).then(function(t){s.setState({streamingLog:s.state.streamingLog+" Uploading planning grid to Mapbox (this may take a minute or two)"}),s.pollMapbox(l).then(function(t){s.getPlanningUnitGrids(),s.setState({streamingLog:s.state.streamingLog+"\nImport complete\n"}),s.loadProject(e,s.state.user),r("Import complete")})}).catch(function(e){o(e)})}).catch(function(e){o(e)})}).catch(function(e){o(e)})}).catch(function(t){s.deleteProject(s.state.user,e,!0),o(t)})}).catch(function(e){o(e)})})}},{key:"uploadFiles",value:function(){var e=Object(c.a)(l.a.mark(function e(t,a){var n,i,s,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<t.length)){e.next=16;break}if(".dat"!==(n=t.item(s)).name.slice(-4)){e.next=13;break}return(r=new FormData).append("user",this.state.owner),r.append("project",a),i=n.webkitRelativePath.split("/").slice(1).join("/"),r.append("filename",i),r.append("value",n),this.setState({streamingLog:this.state.streamingLog+" Uploading: "+n.webkitRelativePath+"\n"}),e.next=13,this.uploadFile(r);case 13:s++,e.next=1;break;case 16:return e.abrupt("return","All files uploaded");case 17:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(e){return this._post("uploadFile",e)}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"loadSolution",value:function(e){var t=this;"Sum"===e?(this.updateProtectedAmount(this.runMarxanResponse.mvbest),this.renderSolution(this.runMarxanResponse.ssoln,!0)):this.getSolution(this.state.owner,this.state.project,e).then(function(e){t.updateProtectedAmount(e.mv),t.renderSolution(e.solution,!1)})}},{key:"loadOtherSolution",value:function(e,t,a){var n=this;this.getSolution(e,t,a).then(function(e){var a=n.getPaintProperties(e.solution,!1,!1);if(n.projects)switch(n.projects.filter(function(e){return e.projectName===t})[0].clump){case 0:n.setState({map0_paintProperty:a});break;case 1:n.setState({map1_paintProperty:a});break;case 2:n.setState({map2_paintProperty:a});break;case 3:n.setState({map3_paintProperty:a});break;case 4:n.setState({map4_paintProperty:a})}})}},{key:"getSolution",value:function(e,t,a){return this._get("getSolution?user="+e+"&project="+t+"&solution="+a)}},{key:"getssolncount",value:function(e){var t=0,a=[];return e.map(function(e){return a.push({number:e[0],count:e[1].length}),t+=e[1].length,null}),this.setState({summaryStats:a}),t}},{key:"getssolnSample",value:function(e,t){var a=[],n=0,i=this.getssolncount(e);return e.map(function(e){return n=Math.ceil(e[1].length/i*t),a.push(Array(n).fill(e[0])),null}),[].concat.apply([],a)}},{key:"getSsolnData",value:function(e){var t=e.map(function(e){return e[1]});return[].concat.apply([],t)}},{key:"classifyData",value:function(e,t,a,n){var i=this,s=this.getssolnSample(e,1e3);if(this.state.brew.setSeries(s),"opacity"===a&&(void 0===this.state.brew.colorSchemes.opacity||this.state.brew.colorSchemes.opacity&&!this.state.brew.colorSchemes.opacity[this.state.renderer.NUMCLASSES])){var r=this.state.brew,o=Array(Number(this.state.renderer.NUMCLASSES)).fill("rgba(255,0,136,").map(function(e,t){return e+1/i*(t+1)+")"},this.state.renderer.NUMCLASSES);void 0===r.colorSchemes.opacity&&(r.colorSchemes.opacity=[]),r.colorSchemes.opacity[this.state.renderer.NUMCLASSES]=o,this.setState({brew:r})}this.state.brew.setColorCode(a);var l=W(this.state.brew,a);t>l&&(t=l,this.setState({renderer:Object.assign(this.state.renderer,{NUMCLASSES:t})})),this.state.brew.setNumClasses(t),this.state.brew.classify(n),this.setState({dataBreaks:this.state.brew.getBreaks()})}},{key:"rendererStateUpdated",value:function(e,t){this.renderSolution(this.runMarxanResponse.ssoln,!0),"ReadOnly"!==this.state.userData.ROLE&&this.updateProjectParameter(e,t)}},{key:"changeRenderer",value:function(e){var t=this;this.setState({renderer:Object.assign(this.state.renderer,{CLASSIFICATION:e})},function(){t.rendererStateUpdated("CLASSIFICATION",e)})}},{key:"changeNumClasses",value:function(e){var t=this;this.setState({renderer:Object.assign(this.state.renderer,{NUMCLASSES:e})},function(){t.rendererStateUpdated("NUMCLASSES",e)})}},{key:"changeColorCode",value:function(e){var t=this;this.state.renderer.NUMCLASSES>this.state.brew.getNumClasses()&&this.setState({renderer:Object.assign(this.state.renderer,{NUMCLASSES:this.state.brew.getNumClasses()})}),this.setState({renderer:Object.assign(this.state.renderer,{COLORCODE:e})},function(){t.rendererStateUpdated("COLORCODE",e)})}},{key:"changeShowTopClasses",value:function(e){var t=this;this.setState({renderer:Object.assign(this.state.renderer,{TOPCLASSES:e})},function(){t.rendererStateUpdated("TOPCLASSES",e)})}},{key:"renderSolution",value:function(e,t){if(e){var a=this.getPaintProperties(e,t,!0);this.map.setPaintProperty("results_layer","fill-color",a.fillColor),this.map.setPaintProperty("results_layer","fill-outline-color",a.oulineColor),this.map.setPaintProperty("results_layer","fill-opacity",this.state.results_layer_opacity)}}},{key:"getPaintProperties",value:function(e,t,a){var n=this,i=this.initialiseFillColorExpression("puid"),s=this.initialiseFillColorExpression("puid");if(e.length>0){var r,o,l;if(a&&this.classifyData(e,Number(this.state.renderer.NUMCLASSES),this.state.renderer.COLORCODE,this.state.renderer.CLASSIFICATION),this.state.renderer.TOPCLASSES<this.state.renderer.NUMCLASSES){var c=this.state.brew.getBreaks();o=c[this.state.renderer.NUMCLASSES-this.state.renderer.TOPCLASSES+1]}else o=0;e.forEach(function(e,a){t?(l=e[0],r=n.state.brew.getColorInRange(l),l>=o?(i.push(e[1],r),s.push(e[1],"rgba(150, 150, 150, 0.6)")):(i.push(e[1],"rgba(0, 0, 0, 0)"),s.push(e[1],"rgba(0, 0, 0, 0)"))):(i.push(e[1],"rgba(255, 0, 136,1)"),s.push(e[1],"rgba(150, 150, 150, 0.6)"))}),i.push("rgba(0,0,0,0)"),s.push("rgba(0,0,0,0)")}else i="rgba(0, 0, 0, 0)",s="rgba(0, 0, 0, 0)";return{fillColor:i,oulineColor:s}}},{key:"initialiseFillColorExpression",value:function(e){return["match",["get",e]]}},{key:"renderPuEditLayer",value:function(){var e;this.state.planning_units.length>0?(e=["match",["get","puid"]],this.state.planning_units.forEach(function(t,a){var n;switch(t[0]){case 1:n="rgba(63, 191, 63, 1)";break;case 2:n="rgba(63, 63, 191, 1)";break;case 3:n="rgba(191, 63, 63, 1)"}e.push(t[1],n)}),e.push("rgba(150, 150, 150, 0)")):e="rgba(150, 150, 150, 0)",this.map.setPaintProperty(Ea,"line-color",e),this.map.setPaintProperty(Ea,"line-width",1.5)}},{key:"renderPuCostLayer",value:function(e){var t;e.length>0?(t=["match",["get","puid"]],e.forEach(function(e,a){var n;switch(e[0]){case 2e6:n="rgba(63, 191, 63, 1)";break;case 4744616:n="rgba(63, 63, 191, 1)";break;case 4932674:n="rgba(191, 63, 63, 1)";break;default:n="rgba(191, 63, 63, 0)"}t.push(e[1],n)}),t.push("rgba(150, 150, 150, 0)")):t="rgba(150, 150, 150, 0.7)",this.map.setPaintProperty("costs_layer","fill-color",t)}},{key:"mouseMove",value:function(e){if(this.state.puFeatures&&this.state.puFeatures.length>0&&this.setState({puFeatures:[]}),this.state.userData.SHOWPOPUP){var t=this.map.queryRenderedFeatures(e.point,{layers:["results_layer","wdpa"]});if(t.length){(!this.state.active_pu||this.state.active_pu&&this.state.active_pu.puid!==t[0].properties.puid)&&this.setState({popup_point:e.point});var a=t[0].properties,n=this.runMarxanResponse&&this.runMarxanResponse.ssoln?this.runMarxanResponse.ssoln.filter(function(e){return e[1].indexOf(a.puid)>-1})[0]:{};if(n){var i={puid:a.puid,Number:n[0]},s=Object.assign(i,a);this.setState({active_pu:s})}else this.hidePopup()}else this.hidePopup()}}},{key:"hidePopup",value:function(){this.setState({active_pu:void 0})}},{key:"showProtectedAreasPopup",value:function(e,t){var a=[],n=[];e.forEach(function(e){"wdpa"===e.layer.id&&n.indexOf(e.properties.wdpaid)<0&&(a.push(e.properties),n.push(e.properties.wdpaid))}),this.setState({paFeatures:a,popup_point:t.point})}},{key:"createMap",value:function(e){this.map=new O.a.Map({container:this.mapContainer,style:e,center:[0,0],zoom:2}),this.map.on("load",this.mapLoaded.bind(this)),this.map.on("error",this.mapError.bind(this)),this.map.on("click",this.mapClick.bind(this)),this.map.on("mouseenter","wdpa",this.mouseEnterPA),this.map.on("mouseleave","wdpa",this.mouseLeavePA)}},{key:"mouseEnterPA",value:function(e){this.getCanvas().style.cursor="pointer";for(var t=e.lngLat;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;ja.setLngLat(t).setLngLat(t).setHTML("<div class='noselect'><a href='https://www.protectedplanet.net/"+e.features[0].properties.wdpaid+"' target='_blank'>"+e.features[0].properties.name+" ("+e.features[0].properties.iucn_cat+")</a></div>").addTo(this)}},{key:"mouseLeavePA",value:function(e){var t=this;setTimeout(function(){t.getCanvas().style.cursor="",ja.remove()},2800)}},{key:"mapLoaded",value:function(e){var t=this;this.map.addControl(new O.a.ScaleControl),this.map.addControl(new O.a.NavigationControl,"bottom-right"),this.mapboxDrawControls=new E.a({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},defaultMode:"draw_polygon"}),this.map.on("mousemove",this.mouseMove.bind(this)),this.map.on("moveend",function(e){t.state.clumpingDialogOpen&&t.updateMapCentreAndZoom()}),this.map.on("draw.create",this.polygonDrawn.bind(this))}},{key:"updateMapCentreAndZoom",value:function(){this.setState({mapCentre:this.map.getCenter(),mapZoom:this.map.getZoom()})}},{key:"mapError",value:function(e){var t="";switch(e.error.message){case"Not Found":t="The tileset '"+e.source.url+"' was not found";break;case"Bad Request":t="The tileset from source '"+e.sourceId+"' was not found. See <a href='"+ba+"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>";break;default:t=e.error.message}"http status 200 returned without content."!==t&&(this.setSnackBar("MapError: "+t),console.error(t))}},{key:"mapClick",value:function(e){if(!this.state.puEditing&&!this.map.getSource("mapbox-gl-draw-cold")){var t=this.map.queryRenderedFeatures(e.point,{layers:["results_layer"]});this.setState({popup_point:e.point}),t.length&&t[0].properties.puid&&this.getPUFeatureList(t[0].properties.puid)}}},{key:"getPUFeatureList",value:function(e){var t=this;this._get("getPUSpeciesList?user="+this.state.owner+"&project="+this.state.project+"&puid="+e).then(function(e){t.setState({puFeatures:e.data})}).catch(function(e){})}},{key:"getESRIStyle",value:function(e){return new Promise(function(t,a){fetch(e).then(function(e){return e.json().then(function(e){var a=e.sources.esri.url;fetch(a).then(function(n){return n.json().then(function(n){var i="/"===n.tiles[0].substr(0,1)?a+n.tiles[0]:a+"/"+n.tiles[0];e.sources.esri={type:"vector",scheme:"xyz",tilejson:n.tilejson||"2.0.0",format:n.tileInfo&&n.tileInfo.format||"pbf",maxzoom:15,tiles:[i],description:n.description,name:n.name},t(e)})})})})})}},{key:"setBasemap",value:function(e){var t=this;return new Promise(function(a,n){t.setState({basemap:e.name}),t.getValidStyle(e).then(function(e){t.loadMapStyle(e).then(function(e){t.addWDPASource(),t.addWDPALayer(),t.state.tileset?(t.addPlanningGridLayers(t.state.tileset),t.getResults(t.state.owner,t.state.project),t.filterWdpaByIucnCategory(t.state.metadata.IUCN_CATEGORY),"planning_units"===t.state.activeTab&&t.pu_tab_active(),a()):a()})})})}},{key:"getValidStyle",value:function(e){var t=this;return new Promise(function(a,n){"esri"!==e.provider?a("mapbox://styles/"+e.id):t.getESRIStyle(e.id).then(function(e){a(e)})})}},{key:"loadMapStyle",value:function(e){var t=this;return new Promise(function(a,n){t.map?t.map.setStyle(e,{diff:!1}):t.createMap(e),t.map.on("style.load",function(e){a("Map style loaded")})})}},{key:"changePlanningGrid",value:function(e){var t=this;return new Promise(function(a,n){t.getMetadata(e).then(function(e){t.removePlanningGridLayers(),t.addPlanningGridLayers(e),null!=e.bounds&&t.zoomToBounds(t.map,e.bounds),t.setState({tileset:e}),t.filterWdpaByIucnCategory(t.state.metadata.IUCN_CATEGORY),a()}).catch(function(e){t.setSnackBar(e),n(e)})})}},{key:"getMetadata",value:function(e){var t=this;return new Promise(function(a,n){fetch("https://api.mapbox.com/v4/"+e+".json?secure&access_token="+t.state.userData.MAPBOXACCESSTOKEN).then(function(e){return e.json()}).then(function(t){null!=t.message&&t.message.indexOf("does not exist")>0?n("The tileset '"+e+"' was not found. See <a href='"+ba+"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>"):a(t)}).catch(function(e){n(e)})})}},{key:"addPlanningGridLayers",value:function(e){var t=(this.state.basemap,"");this.map.addSource("planning_units_source",{type:"vector",url:"mapbox://"+e.id}),this.map.addLayer({id:"results_layer",type:"fill",source:"planning_units_source","source-layer":e.name,paint:{"fill-color":"rgba(0, 0, 0, 0)","fill-outline-color":"rgba(0, 0, 0, 0)"}},t),this.setState({resultsLayer:this.map.getLayer("results_layer")}),this.map.addLayer({id:Sa,type:"fill",source:"planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"fill-color":"rgba(0, 0, 0, 0)","fill-outline-color":"rgba(150, 150, 150, 0.4)"}},t),this.map.addLayer({id:Ea,type:"line",source:"planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"line-color":"rgba(150, 150, 150, 0)","line-width":1.5}},t),this.map.addLayer({id:"costs_layer",type:"fill",source:"planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"fill-color":"rgba(255, 0, 0, 0)","fill-outline-color":"rgba(150, 150, 150, 0)"}},t),this.map.addLayer({id:wa,type:"line",source:"planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"line-color":"rgba(255, 255, 255, 1)","line-width":1.5}},t)}},{key:"removePlanningGridLayers",value:function(){var e=this;this.map.getStyle().layers.filter(function(e){return"planning_units_source"===e.source}).forEach(function(t){e.map.removeLayer(t.id)}),void 0!==this.map.getSource("planning_units_source")&&this.map.removeSource("planning_units_source")}},{key:"addWDPASource",value:function(){var e="IUCN and UNEP-WCMC ("+this.state.marxanServer.wdpa_version.substr(-4)+"), The World Database on Protected Areas (WDPA) "+this.state.marxanServer.wdpa_version+", Cambridge, UK: UNEP-WCMC. Available at: <a href='http://www.protectedplanet.net'>www.protectedplanet.net</a>",t=[window.WDPA.tilesUrl+"layer=marxan:"+Ca+"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}"];this.setState({wdpaAttribution:e}),this.map.addSource("wdpa_source",{attribution:e,type:"vector",tiles:t})}},{key:"addWDPALayer",value:function(){this.map.addLayer({id:"wdpa",type:"fill",source:"wdpa_source","source-layer":Ca,layout:{visibility:"visible"},filter:["==","wdpaid",-1],paint:{"fill-color":{type:"categorical",property:"marine",stops:[["0","rgb(99,148,69)"],["1","rgb(63,127,191)"],["2","rgb(63,127,191)"]]},"fill-outline-color":{type:"categorical",property:"marine",stops:[["0","rgb(99,148,69)"],["1","rgb(63,127,191)"],["2","rgb(63,127,191)"]]},"fill-opacity":this.state.wdpa_layer_opacity}}),this.setState({wdpaLayer:this.map.getLayer("wdpa")})}},{key:"showLayer",value:function(e){this.map&&this.map.getLayer(e)&&this.map.setLayoutProperty(e,"visibility","visible")}},{key:"hideLayer",value:function(e){this.map&&this.map.getLayer(e)&&this.map.setLayoutProperty(e,"visibility","none")}},{key:"isLayerVisible",value:function(e){return this.map&&this.map.getLayer(e)&&"visible"===this.map.getLayoutProperty(e,"visibility")}},{key:"changeOpacity",value:function(e,t){this.map&&this.map.getLayer(e)&&(this.map.setPaintProperty(e,"fill-opacity",t),"results_layer"===e&&this.setState({results_layer_opacity:t}),"wdpa"===e&&this.setState({wdpa_layer_opacity:t}))}},{key:"zoomToBounds",value:function(e,t){var a=t[0]<-180?-180:t[0],n=t[1]<-90?-90:t[1],i=t[2]>180?180:t[2],s=t[3]>90?90:t[3];e.fitBounds([a,n,i,s],{padding:{top:10,bottom:10,left:10,right:10},easing:function(e){return 1}})}},{key:"toggleCosts",value:function(e){var t=this;e?this.getPlanningUnitsCostData().then(function(e){t.renderPuCostLayer(e),t.showLayer("costs_layer")}):this.hideLayer("costs_layer")}},{key:"project_tab_active",value:function(){this.setState({activeTab:"project"}),this.pu_tab_inactive()}},{key:"features_tab_active",value:function(){"features"!==this.state.activeTab&&(this.setState({activeTab:"features"}),this.pu_tab_inactive())}},{key:"pu_tab_active",value:function(){this.setState({activeTab:"planning_units"}),this.reinstatePuvsprLayer=this.isLayerVisible(wa),this.hideLayer(wa),this.showLayer(Sa),this.changeOpacity("results_layer",0),this.previousResultsOpacity=this.state.results_layer_opacity,this.showLayer(Ea),this.renderPuEditLayer(Ea)}},{key:"pu_tab_inactive",value:function(){this.reinstatePuvsprLayer&&this.showLayer(wa),this.changeOpacity("results_layer",this.previousResultsOpacity?this.previousResultsOpacity:Oa),this.hideLayer(Sa),this.hideLayer(Ea)}},{key:"legend_tab_active",value:function(){this.setState({activeResultsTab:"legend"})}},{key:"solutions_tab_active",value:function(){this.setState({activeResultsTab:"solutions"})}},{key:"log_tab_active",value:function(){this.setState({activeResultsTab:"log"})}},{key:"startPuEditSession",value:function(){this.setState({puEditing:!0}),this.map.getCanvas().style.cursor="crosshair",this.onClickRef=this.moveStatusUp.bind(this),this.map.on("click",Sa,this.onClickRef),this.onContextMenu=this.resetStatus.bind(this),this.map.on("contextmenu",Sa,this.onContextMenu)}},{key:"stopPuEditSession",value:function(){this.setState({puEditing:!1}),this.map.getCanvas().style.cursor="pointer",this.map.off("click",Sa,this.onClickRef),this.map.off("contextmenu",Sa,this.onContextMenu),this.updatePuDatFile()}},{key:"clearManualEdits",value:function(){var e=this;this.setState({planning_units:[]},function(){var t=e.getPuidsFromIucnCategory(e.state.metadata.IUCN_CATEGORY);e.updatePlanningUnits([],t)})}},{key:"updatePuDatFile",value:function(){var e=new FormData;e.append("user",this.state.owner),e.append("project",this.state.project),this.state.planning_units.length>0&&this.state.planning_units.forEach(function(t){var a="status"+t[0];e.append(a,t[1])}),this._post("updatePUFile",e).then(function(e){}).catch(function(e){})}},{key:"moveStatusUp",value:function(e){this.changeStatus(e,"up")}},{key:"resetStatus",value:function(e){this.changeStatus(e,"reset")}},{key:"changeStatus",value:function(e,t){var a=this.map.queryRenderedFeatures(e.point,{layers:[Sa]});if(a.length>0){var n=a[0].properties.puid,i=this.getStatusLevel(n),s=this.getNextStatusLevel(i,t),r=this.state.planning_units;0!==i&&this.removePuidFromArray(r,i,n),0!==s&&this.addPuidToArray(r,s,n),this.setState({planning_units:r}),this.renderPuEditLayer()}}},{key:"getStatusLevel",value:function(e){var t=this,a=0;return ka.forEach(function(n){t.getPlanningUnitsByStatus(n).indexOf(e)>-1&&(a=n)}),a}},{key:"getStatusPosition",value:function(e){var t=-1;return this.state.planning_units.forEach(function(a,n){a[0]===e&&(t=n)}),t}},{key:"getPlanningUnitsByStatus",value:function(e){var t=this.getStatusPosition(e);return t>-1?this.state.planning_units[t][1]:[]}},{key:"getNextStatusLevel",value:function(e,t){var a;switch(e){case 0:a="up"===t?3:0;break;case 1:a=0;break;case 2:a="up"===t?1:0;break;case 3:a="up"===t?2:0}return a}},{key:"removePuidFromArray",value:function(e,t,a){return this.removePuidsFromArray(e,t,[a])}},{key:"addPuidToArray",value:function(e,t,a){return this.appPuidsToPlanningUnits(e,t,[a])}},{key:"appPuidsToPlanningUnits",value:function(e,t,a){var n=this.getStatusPosition(t);return-1===n&&(e.push([t,[]]),n=e.length-1),e[n][1]=Array.from(new Set(e[n][1].concat(a))),e}},{key:"removePuidsFromArray",value:function(e,t,a){var n=this.getStatusPosition(t);if(n>-1){var i=e[n][1].filter(function(e){return a.indexOf(e)<0});e[n][1]=i,0===i.length&&e.splice(n,1)}return e}},{key:"getPlanningUnitsCostData",value:function(){var e=this;return new Promise(function(t,a){e._get("getPlanningUnitsCostData?user="+e.state.owner+"&project="+e.state.project).then(function(e){t(e.data)}).catch(function(e){})})}},{key:"previewPlanningGrid",value:function(e){this.setState({planning_grid_metadata:e}),this.openPlanningGridDialog()}},{key:"createNewPlanningUnitGrid",value:function(e,t,a,n){var i=this;return new Promise(function(s,r){i.startLogging(!0),i.setState({streamingLog:"Creating planning grid..\n"}),i._get("createPlanningUnitGrid?iso3="+e+"&domain="+t+"&areakm2="+a+"&shape="+n).then(function(e){i.newPlanningGridCreated(e,"Created").then(function(){i.closeNewPlanningGridDialog()})}).catch(function(e){r(e)})})}},{key:"importPlanningUnitGrid",value:function(e,t,a){var n=this;return new Promise(function(i,s){n.startLogging(!0),n.setState({streamingLog:"Importing planning grid..\n"}),n.importZippedShapefileAsPu(e,t,a).then(function(e){n.newPlanningGridCreated(e,"Imported").then(function(){n.closeImportPlanningGridDialog()})}).catch(function(e){n.deletePlanningUnitGrid(t,!0),n.setState({streamingLog:n.state.streamingLog+e+"Finished\n"}),s(e)})})}},{key:"newPlanningGridCreated",value:function(e,t){var a=this;return new Promise(function(n,i){a.setState({streamingLog:a.state.streamingLog+t+"\nUploading to Mapbox..\n"}),a.pollMapbox(e.uploadId).then(function(){a.setState({streamingLog:a.state.streamingLog+"Uploaded\nPlanning grid: '"+e.alias+"' created"}),a.getPlanningUnitGrids(),n("Planning grid created")})})}},{key:"deletePlanningUnitGrid",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.deletePlanningGrid(e,!0):this._get("listProjectsForPlanningGrid?feature_class_name="+e).then(function(a){0===a.projects.length?t.deletePlanningGrid(e,!1):t.setState({failedToDeleteProjects:a.projects,deleteWhat:"planning grid"},function(){t.openFailedToDeleteDialog()})})}},{key:"deletePlanningGrid",value:function(e,t){var a=this;this._get("deletePlanningUnitGrid?planning_grid_name="+e).then(function(e){a.getPlanningUnitGrids(),a.setSnackBar(e.info,t)}).catch(function(e){})}},{key:"getCountries",value:function(){var e=this;this._get("getCountries").then(function(t){e.setState({countries:t.records})}).catch(function(e){})}},{key:"uploadToMapBox",value:function(e,t){var a=this;return new Promise(function(n,i){a._get("uploadTilesetToMapBox?feature_class_name="+e+"&mapbox_layer_name="+t,3e5).then(function(e){a.setState({loading:!0}),a.pollMapbox(e.uploadid).then(function(e){n("Uploaded to Mapbox")})}).catch(function(e){i(e)})})}},{key:"pollMapbox",value:function(e){var t=this;return this.setState({loading:!0}),new Promise(function(a,n){t.timer=setInterval(function(){fetch("https://api.mapbox.com/uploads/v1/blishten/"+e+"?access_token=sk.eyJ1IjoiYmxpc2h0ZW4iLCJhIjoiY2piNm1tOGwxMG9lajMzcXBlZDR4aWVjdiJ9.Z1Jq4UAgGpXukvnUReLO1g").then(function(e){return e.json()}).then(function(e){e.complete&&(clearInterval(t.timer),t.timer=null,t.setState({loading:!1}),a("Uploaded to Mapbox"))}).catch(function(e){t.setState({loading:!1}),n(e)})},3e3)})}},{key:"openNewFeatureDialog",value:function(e){this.setState({NewFeatureDialogOpen:!0,newFeatureSource:e})}},{key:"closeNewFeatureDialog",value:function(){this.setState({NewFeatureDialogOpen:!1}),"digitising"===this.state.newFeatureSource&&this.finaliseDigitising()}},{key:"openFeaturesDialog",value:function(e){this.setState({featuresDialogOpen:!0,addingRemovingFeatures:e}),e&&this.getSelectedFeatureIds()}},{key:"closeFeaturesDialog",value:function(){this.setState({featuresDialogOpen:!1,featuresDialogPopupOpen:!1})}},{key:"openPlanningGridsDialog",value:function(){this.setState({planningGridsDialogOpen:!0})}},{key:"closePlanningGridsDialog",value:function(){this.setState({planningGridsDialogOpen:!1})}},{key:"openPlanningGridDialog",value:function(){this.setState({planningGridDialogOpen:!0})}},{key:"closePlanningGridDialog",value:function(){this.setState({planningGridDialogOpen:!1})}},{key:"openFeatureDialog",value:function(){this.setState({featureDialogOpen:!0})}},{key:"closeFeatureDialog",value:function(){this.setState({featureDialogOpen:!1})}},{key:"showNewFeaturesDialogPopover",value:function(){this.setState({featuresDialogPopupOpen:!0})}},{key:"closePopover",value:function(){this.setState({featuresDialogPopupOpen:!1})}},{key:"openCostsDialog",value:function(){this.setState({CostsDialogOpen:!0})}},{key:"closeCostsDialog",value:function(){this.setState({CostsDialogOpen:!1})}},{key:"setNewFeatureDatasetName",value:function(e){this.setState({featureDatasetName:e})}},{key:"setNewFeatureDatasetDescription",value:function(e){this.setState({featureDatasetDescription:e})}},{key:"setNewFeatureDatasetFilename",value:function(e){this.setState({featureDatasetFilename:e})}},{key:"importZippedShapefileAsPu",value:function(e,t,a){return this._get("importPlanningUnitGrid?filename="+e+"&name="+t+"&description="+a)}},{key:"updateFeature",value:function(e,t){var a=this.state.allFeatures,n=a.findIndex(function(t){return t.id===e.id});-1!==n&&(Object.assign(a[n],t),this.setFeaturesState(a))}},{key:"getSelectedFeatureIds",value:function(){var e=[];this.state.allFeatures.forEach(function(t){t.selected&&e.push(t.id)}),this.setState({selectedFeatureIds:e})}},{key:"clickFeature",value:function(e){this.state.selectedFeatureIds.includes(e.id)?this.removeFeature(e):this.addFeature(e)}},{key:"removeFeature",value:function(e){var t=this,a=this.state.selectedFeatureIds;return a=a.filter(function(t,a,n){return t!==e.id}),new Promise(function(e,n){t.setState({selectedFeatureIds:a},function(){e("Feature removed")})})}},{key:"addFeature",value:function(e){var t=this.state.selectedFeatureIds;t.push(e.id),this.setState({selectedFeatureIds:t})}},{key:"initialiseDigitising",value:function(){this.map.getSource("mapbox-gl-draw-cold")||this.map.addControl(this.mapboxDrawControls)}},{key:"finaliseDigitising",value:function(){this.map.removeControl(this.mapboxDrawControls)}},{key:"polygonDrawn",value:function(e){this.openNewFeatureDialog("digitising"),this.digitisedFeatures=e.features}},{key:"selectAllFeatures",value:function(){var e=[];this.state.allFeatures.forEach(function(t){e.push(t.id)}),this.selectFeatures(e)}},{key:"clearAllFeatures",value:function(){this.setState({selectedFeatureIds:[]})}},{key:"selectFeatures",value:function(e){this.setState({selectedFeatureIds:e})}},{key:"updateSelectedFeatures",value:function(){var e=this,t=this.state.allFeatures;t.forEach(function(t){e.state.selectedFeatureIds.includes(t.id)?Object.assign(t,{selected:!0}):(e.state.metadata.OLDVERSION?Object.assign(t,{selected:!1}):Object.assign(t,{selected:!1,preprocessed:!1,protected_area:-1,pu_area:-1,pu_count:-1,target_area:-1,occurs_in_planning_grid:!1}),t.feature_layer_loaded&&e.toggleFeatureLayer(t),t.id===e.puvsprLayerId&&e.toggleFeaturePuvsprLayer(t))}),this.setFeaturesState(t,function(){"ReadOnly"!==e.state.userData.ROLE&&e.updateSpecFile(),e.closeFeaturesDialog()})}},{key:"updateTargetValueForFeatures",value:function(e){var t=this,a=this.state.allFeatures;a.forEach(function(t){Object.assign(t,{target_value:e})}),this.setFeaturesState(a,function(){"ReadOnly"!==t.state.userData.ROLE&&t.updateSpecFile()})}},{key:"setFeaturesState",value:function(e,t){this.setState({allFeatures:e,projectFeatures:e.filter(function(e){return e.selected})},t)}},{key:"unselectItem",value:function(e){var t=this;this.removeFeature(e).then(function(){t.updateSelectedFeatures()})}},{key:"previewFeature",value:function(e){this.setState({feature_metadata:e}),this.openFeatureDialog()}},{key:"createNewFeature",value:function(){switch(this.state.newFeatureSource){case"import":this.createNewFeatureFromImport();break;case"digitising":this.createNewFeatureFromDigitising()}}},{key:"createNewFeatureFromImport",value:function(){var e=this;return this.startLogging(!0),new Promise(function(t,a){e._ws("importFeature?filename="+e.state.featureDatasetFilename+"&name="+e.state.featureDatasetName+"&description="+e.state.featureDatasetDescription,e.wsMessageCallback.bind(e)).then(function(a){a.id&&e.pollMapbox(a.uploadId).then(function(){e.newFeatureCreated(a)}),t(a)}).catch(function(e){a(e)})})}},{key:"createNewFeatureFromDigitising",value:function(){var e=this;this.startLogging(!0),this.setState({streamingLog:"Creating feature...\n"});var t=new FormData;t.append("name",this.state.featureDatasetName),t.append("description",this.state.featureDatasetDescription);var a=this.digitisedFeatures[0].geometry.coordinates[0].map(function(e){return e[0]+" "+e[1]}).join(",");t.append("linestring","Linestring("+a+")"),this._post("createFeatureFromLinestring",t).then(function(t){e.setState({streamingLog:e.state.streamingLog+"Uploading to Mapbox...\n"}),e.pollMapbox(t.uploadId).then(function(){e.newFeatureCreated(t)})}).catch(function(e){})}},{key:"newFeatureCreated",value:function(e){this.getInterestFeature(e.id),this.setState({streamingLog:this.state.streamingLog+"Uploaded\nFeature '"+this.state.featureDatasetName+"' created"}),this.closeNewFeatureDialog(),this.resetNewConservationFeature()}},{key:"resetNewConservationFeature",value:function(){this.setState({featureDatasetName:"",featureDatasetDescription:"",featureDatasetFilename:""})}},{key:"getInterestFeature",value:function(e){var t=this;this._get("getFeature?oid="+e+"&format=json").then(function(e){t.addFeatureAttributes(e.data[0]),t.addNewFeature(e.data[0])}).catch(function(e){})}},{key:"addNewFeature",value:function(e){var t=this.state.allFeatures;t.push(e),this.setState({allFeatures:t})}},{key:"deleteFeature",value:function(e){var t=this;this._get("listProjectsForFeature?feature_class_id="+e.id).then(function(a){0===a.projects.length?t._deleteFeature(e):t.setState({failedToDeleteProjects:a.projects,deleteWhat:"feature"},function(){t.openFailedToDeleteDialog()})})}},{key:"_deleteFeature",value:function(e){var t=this;this._get("deleteFeature?feature_name="+e.feature_class_name).then(function(a){t.setSnackBar("Feature deleted"),t.removeFeature(e),t.removeFeatureFromAllFeatures(e)}).catch(function(e){})}},{key:"showFailedToDeleteDialog",value:function(e,t){console.log(t)}},{key:"removeFeatureFromAllFeatures",value:function(e){var t=this.state.allFeatures;t=t.filter(function(t){return t.id!==e.id}),this.setState({allFeatures:t})}},{key:"getAllFeatures",value:function(){var e=this;return new Promise(function(t,a){e._get("getAllSpeciesData").then(function(a){e.setState({allFeatures:a.data}),t("Features returned")}).catch(function(e){})})}},{key:"openFeatureMenu",value:function(e,t){var a=this.getMenuTextForPuvsprLayer(t);this.setState({featureMenuOpen:!0,currentFeature:t,menuAnchor:e.currentTarget,puvsprLayerText:a})}},{key:"closeFeatureMenu",value:function(e){this.setState({featureMenuOpen:!1})}},{key:"getMenuTextForPuvsprLayer",value:function(e){var t=this.isLayerVisible(wa),a=e.id!==this.puvsprLayerId||void 0===this.puvsprLayerId;return t?a?e.preprocessed?xa:"Remove planning unit outlines":e.preprocessed?"Remove planning unit outlines":xa:xa}},{key:"hideFeatureLayer",value:function(){var e=this;this.state.projectFeatures.forEach(function(t){t.feature_layer_loaded&&e.toggleFeatureLayer(t)})}},{key:"toggleFeatureLayer",value:function(e){var t=e.tilesetid.split(".")[1];this.map.getLayer(t)?(this.map.removeLayer(t),this.map.removeSource(t),this.updateFeature(e,{feature_layer_loaded:!1})):(this.map.addLayer({id:t,type:"fill",source:{type:"vector",url:"mapbox://"+e.tilesetid},"source-layer":t,paint:{"fill-color":"rgba(255, 0, 0, 1)","fill-outline-color":"rgba(255, 0, 0, 1)"}},wa),this.updateFeature(e,{feature_layer_loaded:!0}))}},{key:"toggleFeaturePuvsprLayer",value:function(e){"Remove planning unit outlines"===this.state.puvsprLayerText?(this.hideLayer(wa),this.setState({puvsprLayerText:xa}),this.puvsprLayerId=-1):(this.setState({puvsprLayerText:"Remove planning unit outlines"}),this.getFeaturePlanningUnits(e.id))}},{key:"getFeaturePlanningUnits",value:function(e){var t=this;this._get("getFeaturePlanningUnits?user="+this.state.owner+"&project="+this.state.project+"&oid="+e).then(function(a){var n=t.initialiseFillColorExpression("puid");a.data.forEach(function(e){n.push(e,"rgba(255, 0, 0, 1)")}),n.push("rgba(0,0,0,0)"),t.map.setPaintProperty(wa,"line-color",n),t.showLayer(wa),t.puvsprLayerId=e}).catch(function(e){})}},{key:"removeFromProject",value:function(e){this.closeFeatureMenu(),this.unselectItem(e)}},{key:"zoomToFeature",value:function(e){this.closeFeatureMenu();var t=e.extent.substr(4,e.extent.length-5).replace(/ /g,",").split(",").map(function(e){return Number(e)});this.map.fitBounds([[t[0],t[1]],[t[2],t[3]]],{padding:100})}},{key:"showUserMenu",value:function(e){e.preventDefault(),this.setState({userMenuOpen:!0,menuAnchor:e.currentTarget})}},{key:"hideUserMenu",value:function(e){this.setState({userMenuOpen:!1})}},{key:"showHelpMenu",value:function(e){e.preventDefault(),this.setState({helpMenuOpen:!0,menuAnchor:e.currentTarget})}},{key:"hideHelpMenu",value:function(e){this.setState({helpMenuOpen:!1})}},{key:"openRegisterDialog",value:function(){this.setState({registerDialogOpen:!0})}},{key:"closeRegisterDialog",value:function(){this.setState({registerDialogOpen:!1})}},{key:"openResendPasswordDialog",value:function(){this.setState({resendPasswordDialogOpen:!0})}},{key:"closeResendPasswordDialog",value:function(){this.setState({resendPasswordDialogOpen:!1})}},{key:"openProjectsDialog",value:function(){this.setState({projectsDialogOpen:!0}),this.getProjects()}},{key:"closeProjectsDialog",value:function(){this.setState({projectsDialogOpen:!1})}},{key:"openNewProjectDialog",value:function(){this.setState({newProjectDialogOpen:!0})}},{key:"closeNewProjectDialog",value:function(){this.setState({newProjectDialogOpen:!1})}},{key:"openNewPlanningGridDialog",value:function(){this.getCountries(),this.setState({NewPlanningGridDialogOpen:!0})}},{key:"closeNewPlanningGridDialog",value:function(){this.setState({NewPlanningGridDialogOpen:!1})}},{key:"openImportPlanningGridDialog",value:function(){this.setState({importPlanningGridDialogOpen:!0})}},{key:"closeImportPlanningGridDialog",value:function(){this.setState({importPlanningGridDialogOpen:!1})}},{key:"openInfoDialog",value:function(){this.setState({openInfoDialogOpen:!0,featureMenuOpen:!1})}},{key:"closeInfoDialog",value:function(){this.setState({openInfoDialogOpen:!1})}},{key:"openOptionsDialog",value:function(){this.setState({optionsDialogOpen:!0}),this.hideUserMenu()}},{key:"closeOptionsDialog",value:function(){this.setState({optionsDialogOpen:!1})}},{key:"openProfileDialog",value:function(){this.setState({profileDialogOpen:!0}),this.hideUserMenu()}},{key:"closeProfileDialog",value:function(){this.setState({profileDialogOpen:!1})}},{key:"openAboutDialog",value:function(){this.setState({aboutDialogOpen:!0}),this.hideHelpMenu()}},{key:"closeAboutDialog",value:function(){this.setState({aboutDialogOpen:!1})}},{key:"showRunSettingsDialog",value:function(){this.setState({settingsDialogOpen:!0})}},{key:"closeRunSettingsDialog",value:function(){this.setState({settingsDialogOpen:!1})}},{key:"openClassificationDialog",value:function(){this.setState({classificationDialogOpen:!0})}},{key:"closeClassificationDialog",value:function(){this.setState({classificationDialogOpen:!1})}},{key:"openImportDialog",value:function(){this.setState({importDialogOpen:!0})}},{key:"closeImportDialog",value:function(){this.setState({importDialogOpen:!1})}},{key:"openUsersDialog",value:function(){this.getUsers(),this.setState({usersDialogOpen:!0})}},{key:"closeUsersDialog",value:function(){this.setState({usersDialogOpen:!1})}},{key:"closeAlertDialog",value:function(){this.setState({alertDialogOpen:!1})}},{key:"hideResults",value:function(){this.setState({resultsPanelOpen:!1})}},{key:"showResults",value:function(){this.setState({resultsPanelOpen:!0})}},{key:"toggleInfoPanel",value:function(){this.setState({infoPanelOpen:!this.state.infoPanelOpen})}},{key:"toggleResultsPanel",value:function(){this.setState({resultsPanelOpen:!this.state.resultsPanelOpen})}},{key:"openRunLogDialog",value:function(){this.getRunLogs(),this.setState({runLogDialogOpen:!0})}},{key:"closeRunLogDialog",value:function(){this.setState({runLogDialogOpen:!1})}},{key:"openServerDetailsDialog",value:function(){this.setState({serverDetailsDialogOpen:!0}),this.hideHelpMenu()}},{key:"closeServerDetailsDialog",value:function(){this.setState({serverDetailsDialogOpen:!1})}},{key:"openChangePasswordDialog",value:function(){this.hideUserMenu(),this.setState({changePasswordDialogOpen:!0})}},{key:"closeChangePasswordDialog",value:function(){this.setState({changePasswordDialogOpen:!1})}},{key:"openFailedToDeleteDialog",value:function(){this.setState({FailedToDeleteDialogOpen:!0})}},{key:"closeFailedToDeleteDialog",value:function(){this.setState({FailedToDeleteDialogOpen:!1})}},{key:"openTargetPopup",value:function(){this.setState({targetPopupOpen:!0})}},{key:"closeTargetPopup",value:function(){this.setState({targetPopupOpen:!1})}},{key:"changeIucnCategory",value:function(e){var t=this.state.metadata;t.IUCN_CATEGORY=e,this.setState({metadata:t}),this.updateProjectParameter("IUCN_CATEGORY",e),this.filterWdpaByIucnCategory(e),this.renderPAGridIntersections(e)}},{key:"filterWdpaByIucnCategory",value:function(e){var t=this.getIndividualIucnCategories(e),a=["all",["in","iucn_cat"].concat(t)];this.map.setFilter("wdpa",a),"None"===e?this.hidePALegend():this.showPALegend()}},{key:"getIndividualIucnCategories",value:function(e){var t=[];switch(e){case"None":t=[""];break;case"IUCN I-II":t=["Ia","Ib","II"];break;case"IUCN I-IV":t=["Ia","Ib","II","III","IV"];break;case"IUCN I-V":t=["Ia","Ib","II","III","IV","V"];break;case"IUCN I-VI":t=["Ia","Ib","II","III","IV","V","VI"];break;case"All":t=["Ia","Ib","II","III","IV","V","VI","Not Reported"]}return t}},{key:"getPuidsFromIucnCategory",value:function(e){var t=this.getIntersections(e);return this.getPuidsFromNormalisedData(t)}},{key:"renderPAGridIntersections",value:function(){var e=Object(c.a)(l.a.mark(function e(t){var a=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preprocessProtectedAreas(t).then(function(e){var n=a.getPuidsFromIucnCategory(t),i=a.getPlanningUnitsByStatus(1).concat(a.getPlanningUnitsByStatus(3)).filter(function(e){return-1!==n.indexOf(e)});i.length>0&&(n=n.filter(function(e){return!i.includes(e)}),a.setSnackBar("Not all protected area cells were added to the map as they would overlap some manual edits."));var s=void 0!==a.previousPuids?a.previousPuids:a.getPuidsFromIucnCategory(a.previousIucnCategory);a.previousPuids=n,a.previousIucnCategory=t,a.updatePlanningUnits(s,n)}).catch(function(e){a.setSnackBar(e)});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updatePlanningUnits",value:function(e,t){var a=this.state.planning_units,n=this.getNewPuids(e,t);if(0===n.length){var i=this.getNewPuids(t,e);this.removePuidsFromArray(a,2,i)}else this.appPuidsToPlanningUnits(a,2,n);this.setState({planning_units:a}),this.renderPuEditLayer(),this.updatePuDatFile()}},{key:"getNewPuids",value:function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})}},{key:"showPALegend",value:function(){this.setState({pa_layer_visible:!0})}},{key:"hidePALegend",value:function(){this.setState({pa_layer_visible:!1})}},{key:"preprocessProtectedAreas",value:function(e){var t=this;return this.protected_area_intersections.length>0?Promise.resolve(this.protected_area_intersections):new Promise(function(e,a){t.startLogging(),t._ws("preprocessProtectedAreas?user="+t.state.owner+"&project="+t.state.project+"&planning_grid_name="+t.state.metadata.PLANNING_UNIT_NAME,t.wsMessageCallback.bind(t)).then(function(a){t.protected_area_intersections=a.intersections,e(a)}).catch(function(e){a(e)})})}},{key:"getIntersections",value:function(e){var t=this.getIndividualIucnCategories(e);return this.protected_area_intersections.filter(function(e){return t.indexOf(e[0])>-1})}},{key:"updateWDPA",value:function(){var e=this;return this.startLogging(!0),new Promise(function(t,a){e._ws("updateWDPA?downloadUrl="+window.WDPA.downloadUrl+"&wdpaVersion="+window.WDPA.latest_version,e.wsMessageCallback.bind(e)).then(function(a){var n=Object.assign(e.state.marxanServer,{wdpa_version:window.WDPA.latest_version});e.setState({newWDPAVersion:!1,marxanServer:n},function(){e.setWDPAVectorTilesLayerName(window.WDPA.latest_version),e.map.removeLayer("wdpa"),e.map&&void 0!==e.map.getSource("wdpa_source")&&e.map.removeSource("wdpa_source"),e.addWDPASource(),e.addWDPALayer(),e.filterWdpaByIucnCategory(e.state.metadata.IUCN_CATEGORY)}),t(a)}).catch(function(e){a(e)})})}},{key:"preprocessBoundaryLengths",value:function(){var e=Object(c.a)(l.a.mark(function e(t){var a=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.files.BOUNDNAME){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return e.abrupt("return",new Promise(function(e,t){a.startLogging(),a._ws("preprocessPlanningUnits?user="+a.state.owner+"&project="+a.state.project,a.wsMessageCallback.bind(a)).then(function(t){var n=a.state.files;n.BOUNDNAME="bounds.dat",a.setState({files:n}),e(t)}).catch(function(e){t(e)})}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showClumpingDialog",value:function(){var e=this;this.updateMapCentreAndZoom(),this.preprocessBoundaryLengths().then(function(t){e.updateSpecFile().then(function(t){e.updatePuFile(),e.updatePuvsprFile().then(function(t){e.setState({clumpingDialogOpen:!0,clumpingRunning:!0}),e.createProjectGroupAndRun()})}).catch(function(e){})}).catch(function(e){console.log(e)})}},{key:"hideClumpingDialog",value:function(){this.deleteProjects(),this.resetPaintProperties(),this.setState({clumpingDialogOpen:!1})}},{key:"createProjectGroupAndRun",value:function(){var e=this;return this.projects&&this.deleteProjects(),new Promise(function(t,a){e._get("createProjectGroup?user="+e.state.owner+"&project="+e.state.project+"&copies=5&blmValues="+e.state.blmValues.join(",")).then(function(a){e.projects=a.data,e.runProjects(a.data),t("Project group created")}).catch(function(e){a(e)})})}},{key:"deleteProjects",value:function(){var e=this;if(this.projects){var t=this.projects.map(function(e){return e.projectName});return this.projects=void 0,new Promise(function(a,n){e._get("deleteProjects?projectNames="+t.join(",")).then(function(e){a("Projects deleted")}).catch(function(e){n(e)})})}}},{key:"runProjects",value:function(e){var t=this;this.projectsRun=0,this.setState({clumpingRunning:!0}),e.forEach(function(e){t.startMarxanJob("_clumping",e.projectName,!1).then(function(e){t.checkForErrors(e,!1)||t.loadOtherSolution(e.user,e.project,1),t.projectsRun=t.projectsRun+1,5===t.projectsRun&&t.setState({clumpingRunning:!1})})})}},{key:"rerunProjects",value:function(){this.resetPaintProperties(),this.blmChanged?this.createProjectGroupAndRun():this.runProjects(this.projects),this.blmChanged=!1}},{key:"resetPaintProperties",value:function(){this.setState({map0_paintProperty:[],map1_paintProperty:[],map2_paintProperty:[],map3_paintProperty:[],map4_paintProperty:[]})}},{key:"changBlmMin",value:function(e,t){this.getBlmValues(t,this.state.blmMax),this.setState({blmMin:t})}},{key:"changBlmMax",value:function(e,t){this.getBlmValues(this.state.blmMin,t),this.setState({blmMax:t})}},{key:"getBlmValues",value:function(e,t){for(var a=[],n=(t-e)/4,i=0;i<5;i++)a[i]=i*n+Number(e);this.setState({blmValues:a}),this.blmChanged=!0}},{key:"setBlmValue",value:function(e){var t,a=[];this.state.runParams.forEach(function(n){t="BLM"===n.key?String(e):n.value,a.push({key:n.key,value:t})}),this.updateRunParams(a)}},{key:"getRunLogs",value:function(){var e=this;this.state.unauthorisedMethods.includes("getRunLogs")||this._get("getRunLogs").then(function(t){e.setState({runLogs:t.data})})}},{key:"clearRunLogs",value:function(){var e=this;this._get("clearRunLogs").then(function(t){e.getRunLogs()})}},{key:"render",value:function(){var e=this,t=i.a.createElement("span",{id:"snackbar-message-id",dangerouslySetInnerHTML:{__html:this.state.snackbarMessage}});return i.a.createElement(k.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"absolute top right left bottom"}),i.a.createElement(de,{open:!this.state.loggedIn,onOk:this.processLogin.bind(this),onCancel:this.openRegisterDialog.bind(this),loading:this.state.loading,user:this.state.user,changeUserName:this.changeUserName.bind(this),changePassword:this.changePassword.bind(this),password:this.state.password,openResendPasswordDialog:this.openResendPasswordDialog.bind(this),marxanServers:this.state.marxanServers,selectServer:this.selectServer.bind(this),marxanServer:this.state.marxanServer}),i.a.createElement(fe,{open:this.state.registerDialogOpen,onOk:this.createNewUser.bind(this),onCancel:this.closeRegisterDialog.bind(this),loading:this.state.loading}),i.a.createElement(ve,{open:this.state.resendPasswordDialogOpen,onOk:this.resendPassword.bind(this),onCancel:this.closeResendPasswordDialog.bind(this),loading:this.state.loading,changeEmail:this.changeEmail.bind(this),email:this.state.resendEmail}),i.a.createElement(Se,{userMenuOpen:this.state.userMenuOpen,user:this.state.user,userRole:this.state.userData.ROLE,menuAnchor:this.state.menuAnchor,hideUserMenu:this.hideUserMenu.bind(this),openOptionsDialog:this.openOptionsDialog.bind(this),openProfileDialog:this.openProfileDialog.bind(this),logout:this.logout.bind(this),marxanServer:this.state.marxanServer,openChangePasswordDialog:this.openChangePasswordDialog.bind(this)}),i.a.createElement(xe,{open:this.state.helpMenuOpen,menuAnchor:this.state.menuAnchor,hideHelpMenu:this.hideHelpMenu.bind(this),openAboutDialog:this.openAboutDialog.bind(this),openServerDetailsDialog:this.openServerDetailsDialog.bind(this),DOCS_ROOT:va}),i.a.createElement(je,{open:this.state.optionsDialogOpen,onOk:this.closeOptionsDialog.bind(this),onCancel:this.closeOptionsDialog.bind(this),loading:this.state.loading,userData:this.state.userData,saveOptions:this.saveOptions.bind(this),changeBasemap:this.setBasemap.bind(this),basemaps:this.state.basemaps,basemap:this.state.basemap}),i.a.createElement(Ne,{open:this.state.usersDialogOpen,onOk:this.closeUsersDialog.bind(this),onCancel:this.closeUsersDialog.bind(this),loading:this.state.loading,user:this.state.user,users:this.state.users,deleteUser:this.deleteUser.bind(this),changeRole:this.changeRole.bind(this),guestUserEnabled:this.state.guestUserEnabled,toggleEnableGuestUser:this.toggleEnableGuestUser.bind(this)}),i.a.createElement(Re,{open:this.state.profileDialogOpen,onOk:this.closeProfileDialog.bind(this),onCancel:this.closeProfileDialog.bind(this),loading:this.state.loading,userData:this.state.userData,updateUser:this.updateUser.bind(this)}),i.a.createElement(Ke,{open:this.state.aboutDialogOpen,onOk:this.closeAboutDialog.bind(this),marxanClientReleaseVersion:fa,wdpaAttribution:this.state.wdpaAttribution}),i.a.createElement(ot,{open:this.state.infoPanelOpen,activeTab:this.state.activeTab,project:this.state.project,metadata:this.state.metadata,runMarxan:this.runMarxan.bind(this),stopProcess:this.stopProcess.bind(this),pid:this.state.pid,renameProject:this.renameProject.bind(this),renameDescription:this.renameDescription.bind(this),startEditingProjectName:this.startEditingProjectName.bind(this),startEditingDescription:this.startEditingDescription.bind(this),editingProjectName:this.state.editingProjectName,editingDescription:this.state.editingDescription,features:this.state.projectFeatures,project_tab_active:this.project_tab_active.bind(this),features_tab_active:this.features_tab_active.bind(this),pu_tab_active:this.pu_tab_active.bind(this),startPuEditSession:this.startPuEditSession.bind(this),stopPuEditSession:this.stopPuEditSession.bind(this),puEditing:this.state.puEditing,clearManualEdits:this.clearManualEdits.bind(this),showRunSettingsDialog:this.showRunSettingsDialog.bind(this),openFeatureMenu:this.openFeatureMenu.bind(this),preprocessing:this.state.preprocessing,openFeaturesDialog:this.openFeaturesDialog.bind(this),changeIucnCategory:this.changeIucnCategory.bind(this),updateFeature:this.updateFeature.bind(this),userRole:this.state.userData.ROLE,toggleProjectPrivacy:this.toggleProjectPrivacy.bind(this),toggleCosts:this.toggleCosts.bind(this),openTargetPopup:this.openTargetPopup.bind(this)}),i.a.createElement(mt,{open:this.state.resultsPanelOpen,preprocessing:this.state.preprocessing,solutions:this.state.solutions,loadSolution:this.loadSolution.bind(this),openClassificationDialog:this.openClassificationDialog.bind(this),hideResults:this.hideResults.bind(this),brew:this.state.brew,log:this.state.streamingLog,activeResultsTab:this.state.activeResultsTab,legend_tab_active:this.legend_tab_active.bind(this),solutions_tab_active:this.solutions_tab_active.bind(this),log_tab_active:this.log_tab_active.bind(this),clearLog:this.clearLog.bind(this),owner:this.state.owner,resultsLayer:this.state.resultsLayer,wdpaLayer:this.state.wdpaLayer,pa_layer_visible:this.state.pa_layer_visible,changeOpacity:this.changeOpacity.bind(this),results_layer_opacity:this.state.results_layer_opacity,wdpa_layer_opacity:this.state.wdpa_layer_opacity}),i.a.createElement(vt,{open:this.state.openInfoDialogOpen,onOk:this.closeInfoDialog.bind(this),onCancel:this.closeInfoDialog.bind(this),loading:this.state.loading,feature:this.state.currentFeature,updateFeature:this.updateFeature.bind(this),FEATURE_PROPERTIES:Da,userRole:this.state.userData.ROLE}),i.a.createElement(ha,{active_pu:this.state.active_pu,xy:this.state.popup_point}),i.a.createElement(da,{xy:this.state.popup_point,features:this.state.puFeatures,loading:this.state.loading}),i.a.createElement(ga,{xy:this.state.popup_point,features:this.state.paFeatures,loading:this.state.loading}),i.a.createElement(Et,{open:this.state.projectsDialogOpen,onOk:this.closeProjectsDialog.bind(this),onCancel:this.closeProjectsDialog.bind(this),loading:this.state.loading,projects:this.state.projects,oldVersion:this.state.metadata.OLDVERSION,deleteProject:this.deleteProject.bind(this),loadProject:this.loadProject.bind(this),cloneProject:this.cloneProject.bind(this),openNewProjectDialog:this.openNewProjectDialog.bind(this),openImportDialog:this.openImportDialog.bind(this),unauthorisedMethods:this.state.unauthorisedMethods,userRole:this.state.userData.ROLE,getAllFeatures:this.getAllFeatures.bind(this)}),i.a.createElement(Ft,{open:this.state.newProjectDialogOpen,onOk:this.closeNewProjectDialog.bind(this),loading:this.state.loading,getPlanningUnitGrids:this.getPlanningUnitGrids.bind(this),planning_unit_grids:this.state.planning_unit_grids,openFeaturesDialog:this.openFeaturesDialog.bind(this),features:this.state.allFeatures,openCostsDialog:this.openCostsDialog.bind(this),selectedCosts:this.state.selectedCosts,createNewProject:this.createNewProject.bind(this)}),i.a.createElement(Ut,{open:this.state.NewPlanningGridDialogOpen,onCancel:this.closeNewPlanningGridDialog.bind(this),loading:this.state.loading,createNewPlanningUnitGrid:this.createNewPlanningUnitGrid.bind(this),countries:this.state.countries,setSnackBar:this.setSnackBar.bind(this),ERRORS_PAGE:ba}),i.a.createElement(Vt,{open:this.state.importPlanningGridDialogOpen,onOk:this.importPlanningUnitGrid.bind(this),onCancel:this.closeImportPlanningGridDialog.bind(this),loading:this.state.loading,requestEndpoint:this.state.marxanServer.endpoint,SEND_CREDENTIALS:!0,checkForErrors:this.checkForErrors.bind(this)}),i.a.createElement(jt,{open:this.state.featuresDialogOpen,onOk:this.updateSelectedFeatures.bind(this),onCancel:this.closeFeaturesDialog.bind(this),loading:this.state.loading,metadata:this.state.metadata,allFeatures:this.state.allFeatures,deleteFeature:this.deleteFeature.bind(this),openNewFeatureDialog:this.openNewFeatureDialog.bind(this),selectAllFeatures:this.selectAllFeatures.bind(this),clearAllFeatures:this.clearAllFeatures.bind(this),selectFeatures:this.selectFeatures.bind(this),userRole:this.state.userData.ROLE,clickFeature:this.clickFeature.bind(this),addingRemovingFeatures:this.state.addingRemovingFeatures,selectedFeatureIds:this.state.selectedFeatureIds,initialiseDigitising:this.initialiseDigitising.bind(this),featuresDialogPopupOpen:this.state.featuresDialogPopupOpen,closePopover:this.closePopover.bind(this),showNewFeaturesDialogPopover:this.showNewFeaturesDialogPopover.bind(this),previewFeature:this.previewFeature.bind(this)}),i.a.createElement(Ht,{open:this.state.featureDialogOpen,onOk:this.closeFeatureDialog.bind(this),onCancel:this.closeFeatureDialog.bind(this),loading:this.state.loading,feature_metadata:this.state.feature_metadata,getTilesetMetadata:this.getMetadata.bind(this),zoomToBounds:this.zoomToBounds.bind(this),setSnackBar:this.setSnackBar.bind(this)}),i.a.createElement(Kt,{open:this.state.NewFeatureDialogOpen,onOk:this.closeNewFeatureDialog.bind(this),onCancel:this.closeNewFeatureDialog.bind(this),loading:this.state.loading,setName:this.setNewFeatureDatasetName.bind(this),setDescription:this.setNewFeatureDatasetDescription.bind(this),setFilename:this.setNewFeatureDatasetFilename.bind(this),name:this.state.featureDatasetName,description:this.state.featureDatasetDescription,filename:this.state.featureDatasetFilename,createNewFeature:this.createNewFeature.bind(this),checkForErrors:this.checkForErrors.bind(this),requestEndpoint:this.state.marxanServer.endpoint,SEND_CREDENTIALS:!0,newFeatureSource:this.state.newFeatureSource}),i.a.createElement(Nt,{open:this.state.planningGridsDialogOpen,onOk:this.closePlanningGridsDialog.bind(this),onCancel:this.closePlanningGridsDialog.bind(this),loading:this.state.loading,getPlanningUnitGrids:this.getPlanningUnitGrids.bind(this),unauthorisedMethods:this.state.unauthorisedMethods,planningGrids:this.state.planning_unit_grids,openNewPlanningGridDialog:this.openNewPlanningGridDialog.bind(this),openImportPlanningGridDialog:this.openImportPlanningGridDialog.bind(this),deletePlanningGrid:this.deletePlanningUnitGrid.bind(this),previewPlanningGrid:this.previewPlanningGrid.bind(this)}),i.a.createElement(Rt,{open:this.state.FailedToDeleteDialogOpen,projects:this.state.failedToDeleteProjects,userRole:this.state.userData.ROLE,onOk:this.closeFailedToDeleteDialog.bind(this),deleteWhat:this.state.deleteWhat}),i.a.createElement(Lt,{open:this.state.planningGridDialogOpen,onOk:this.closePlanningGridDialog.bind(this),onCancel:this.closePlanningGridDialog.bind(this),loading:this.state.loading,planning_grid_metadata:this.state.planning_grid_metadata,getTilesetMetadata:this.getMetadata.bind(this),zoomToBounds:this.zoomToBounds.bind(this),setSnackBar:this.setSnackBar.bind(this)}),i.a.createElement(Qt,{open:this.state.CostsDialogOpen,onOk:this.closeCostsDialog.bind(this),onCancel:this.closeCostsDialog.bind(this),costs:this.state.costs}),i.a.createElement(Yt,{open:this.state.settingsDialogOpen,onOk:this.closeRunSettingsDialog.bind(this),onCancel:this.closeRunSettingsDialog.bind(this),loading:this.state.loading,updateRunParams:this.updateRunParams.bind(this),runParams:this.state.runParams,showClumpingDialog:this.showClumpingDialog.bind(this),userRole:this.state.userData.ROLE}),i.a.createElement(aa,{open:this.state.classificationDialogOpen,onOk:this.closeClassificationDialog.bind(this),onCancel:this.closeClassificationDialog.bind(this),loading:this.state.loading,renderer:this.state.renderer,changeColorCode:this.changeColorCode.bind(this),changeRenderer:this.changeRenderer.bind(this),changeNumClasses:this.changeNumClasses.bind(this),changeShowTopClasses:this.changeShowTopClasses.bind(this),summaryStats:this.state.summaryStats,brew:this.state.brew,dataBreaks:this.state.dataBreaks}),i.a.createElement(ia,{open:this.state.clumpingDialogOpen,onOk:this.hideClumpingDialog.bind(this),onCancel:this.hideClumpingDialog.bind(this),tileset:this.state.tileset,RESULTS_LAYER_NAME:"results_layer",map0_paintProperty:this.state.map0_paintProperty,map1_paintProperty:this.state.map1_paintProperty,map2_paintProperty:this.state.map2_paintProperty,map3_paintProperty:this.state.map3_paintProperty,map4_paintProperty:this.state.map4_paintProperty,blmValues:this.state.blmValues,mapCentre:this.state.mapCentre,mapZoom:this.state.mapZoom,rerunProjects:this.rerunProjects.bind(this),changBlmMin:this.changBlmMin.bind(this),changBlmMax:this.changBlmMax.bind(this),blmMin:this.state.blmMin,blmMax:this.state.blmMax,setBlmValue:this.setBlmValue.bind(this),clumpingRunning:this.state.clumpingRunning}),i.a.createElement(oa,{open:this.state.importDialogOpen,onOk:this.closeImportDialog.bind(this),loading:this.state.loading,requestEndpoint:this.state.marxanServer.endpoint,SEND_CREDENTIALS:!0,importProject:this.importProject.bind(this),checkForErrors:this.checkForErrors.bind(this),setLog:this.setLog.bind(this),setSnackBar:this.setSnackBar.bind(this),user:this.state.user}),i.a.createElement(la,{open:this.state.runLogDialogOpen,onOk:this.closeRunLogDialog.bind(this),onRequestClose:this.closeRunLogDialog.bind(this),loading:this.state.loading,preprocessing:this.state.preprocessing,unauthorisedMethods:this.state.unauthorisedMethods,getRunLogs:this.getRunLogs.bind(this),runLogs:this.state.runLogs,clearRunLogs:this.clearRunLogs.bind(this),stopMarxan:this.stopProcess.bind(this)}),i.a.createElement(ca,{open:this.state.serverDetailsDialogOpen,onOk:this.closeServerDetailsDialog.bind(this),onRequestClose:this.closeServerDetailsDialog.bind(this),newWDPAVersion:this.state.newWDPAVersion,marxanServer:this.state.marxanServer,updateWDPA:this.updateWDPA.bind(this),loading:this.state.preprocessing}),i.a.createElement(ua,{open:this.state.changePasswordDialogOpen,onOk:this.closeChangePasswordDialog.bind(this),user:this.state.user,onRequestClose:this.closeChangePasswordDialog.bind(this),checkPassword:this.checkPassword.bind(this),setSnackBar:this.setSnackBar.bind(this),updateUser:this.updateUser.bind(this)}),i.a.createElement(pa,{open:this.state.alertDialogOpen,onOk:this.closeAlertDialog.bind(this)}),i.a.createElement(N.a,{open:this.state.snackbarOpen,message:t,onRequestClose:this.closeSnackbar.bind(this),style:{maxWidth:"800px !important"},contentStyle:{maxWidth:"800px !important"},bodyStyle:{maxWidth:"800px !important"}}),i.a.createElement(F.a,{open:this.state.featureMenuOpen,anchorEl:this.state.menuAnchor,onRequestClose:this.closeFeatureMenu.bind(this),style:{width:"307px"}},i.a.createElement(A.a,{style:{width:"207px"},onMouseLeave:this.closeFeatureMenu.bind(this)},i.a.createElement(Qe,{leftIcon:i.a.createElement(I.a,{style:{margin:"1px"}}),onClick:this.openInfoDialog.bind(this)},"Properties"),i.a.createElement(Qe,{leftIcon:i.a.createElement(U.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.old_version||"ReadOnly"===this.state.userData.ROLE?"none":"block"},onClick:this.removeFromProject.bind(this,this.state.currentFeature)},"Remove from project"),i.a.createElement(Qe,{leftIcon:this.state.currentFeature.feature_layer_loaded?i.a.createElement(z.a,{style:{margin:"1px"}}):i.a.createElement(_.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.tilesetid?"block":"none"},onClick:this.toggleFeatureLayer.bind(this,this.state.currentFeature)},this.state.currentFeature.feature_layer_loaded?"Remove from map":"Add to map"),i.a.createElement(Qe,{leftIcon:"Remove planning unit outlines"===this.state.puvsprLayerText?i.a.createElement(z.a,{style:{margin:"1px"}}):i.a.createElement(_.a,{style:{margin:"1px"}}),onClick:this.toggleFeaturePuvsprLayer.bind(this,this.state.currentFeature),disabled:!(this.state.currentFeature.preprocessed&&this.state.currentFeature.occurs_in_planning_grid)},this.state.puvsprLayerText),i.a.createElement(Qe,{leftIcon:i.a.createElement(H.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.extent?"block":"none"},onClick:this.zoomToFeature.bind(this,this.state.currentFeature)},"Zoom to feature extent"),i.a.createElement(Qe,{leftIcon:i.a.createElement(Q.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.old_version||"ReadOnly"===this.state.userData.ROLE?"none":"block"},onClick:this.preprocessSingleFeature.bind(this,this.state.currentFeature),disabled:this.state.currentFeature.preprocessed||this.state.preprocessing},"Pre-process"))),i.a.createElement(ma,{open:this.state.targetPopupOpen,onOk:this.closeTargetPopup.bind(this),showCancelButton:!0,onCancel:this.closeTargetPopup.bind(this),updateTargetValueForFeatures:this.updateTargetValueForFeatures.bind(this)}),i.a.createElement(ee,{open:this.state.loggedIn,user:this.state.user,userRole:this.state.userData.ROLE,infoPanelOpen:this.state.infoPanelOpen,resultsPanelOpen:this.state.resultsPanelOpen,openProjectsDialog:this.openProjectsDialog.bind(this),openFeaturesDialog:this.openFeaturesDialog.bind(this),openPlanningGridsDialog:this.openPlanningGridsDialog.bind(this),toggleInfoPanel:this.toggleInfoPanel.bind(this),toggleResultsPanel:this.toggleResultsPanel.bind(this),showUserMenu:this.showUserMenu.bind(this),showHelpMenu:this.showHelpMenu.bind(this),openUsersDialog:this.openUsersDialog.bind(this),openRunLogDialog:this.openRunLogDialog.bind(this)})))}}]),t}(i.a.Component),Ra=(a(1086),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Aa(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(Fa,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");Ra?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Aa(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Aa(e)})}}()},148:function(e,t){e.exports={isNumber:function(e){return/^\d+$/.test(e)},isValidTargetValue:function(t){return!!(e.exports.isNumber(t)&&t<=100&&t>=0)}}},429:function(e){e.exports={name:"marxan_web",version:"0.9.0",private:!0,dependencies:{"@fortawesome/fontawesome-svg-core":"^1.2.12","@fortawesome/free-regular-svg-icons":"^5.6.3","@fortawesome/free-solid-svg-icons":"^5.6.3","@fortawesome/react-fontawesome":"^0.1.4","@mapbox/mapbox-gl-draw":"^1.1.1",axios:"^0.18.0",classybrew:"0.0.3","fetch-jsonp":"^1.1.3","jsonp-promise":"^0.1.2",mapbox:"^1.0.0-beta10","mapbox-gl":"^0.50.0","material-ui":"^0.20.0","rc-progress":"^2.2.5",react:"^16.3.2","react-dom":"^16.3.2","react-fontawesome":"^1.6.1","react-scripts":"^3.0.1","react-stay-scrolled":"^3.0.0","react-table":"^6.8.2",recharts:"^1.0.0-beta.10","typeface-roboto":"0.0.54",wellknown:"^0.5.0"},scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test --env=jsdom",eject:"react-scripts eject"},homepage:".",devDependencies:{"esformatter-jsx":"^8.0.1"},browserslist:{production:[">0.2%","not dead","not op_mini all"],development:["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}},445:function(e,t){e.exports="data:image/png;base64,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"},446:function(e,t){e.exports="data:image/png;base64,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"},447:function(e,t){e.exports="data:image/png;base64,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"},448:function(e,t){e.exports="data:image/png;base64,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"},449:function(e,t){e.exports="data:image/png;base64,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"},486:function(e,t,a){e.exports=a(1087)},491:function(e,t,a){},722:function(e,t){},724:function(e,t){},756:function(e,t){},757:function(e,t){},822:function(e,t){}},[[486,1,2]]]);
//# sourceMappingURL=main.22bb2ac2.chunk.js.map