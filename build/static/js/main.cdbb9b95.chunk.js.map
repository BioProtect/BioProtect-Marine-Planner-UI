{"version":3,"sources":["AppBar.js","ToolbarButton.js","MarxanDialog.js","LoadingDialog.js","LoginDialog.js","RegisterDialog.js","ResendPasswordDialog.js","UserMenu.js","HelpMenu.js","OptionsDialog.js","ProfileDialog.js","UsersDialog.js","AboutDialog.js","MenuItemWithButton.js","TargetIcon.js","LinearGauge.js","FeaturesList.js","SelectFeatures.js","InfoPanel.js","TransparencyControl.js","Legend.js","LogItem.js","Log.js","ResultsPanel.js","FeatureInfoDialog.js","ProjectsDialog.js","Metadata.js","SelectFieldMapboxLayer.js","PlanningUnitsDialog.js","SelectCostFeatures.js","FeaturesDialog.js","NewProjectDialog.js","FailedToDeleteDialog.js","MapContainer2.js","PlanningGridDialog.js","PlanningGridsDialog.js","NewPlanningGridDialog.js","ShapefileUpload.js","ImportPlanningGridDialog.js","FeatureDialog.js","NewFeatureDialog.js","ImportFeaturesDialog.js","CostsDialog.js","RunSettingsDialog.js","RendererSelector.js","ColorSelector.js","ClassificationDialog.js","MapContainer.js","ClumpingDialog.js","UploadFolder.js","UploadMarxanFiles.js","ImportProjectDialog.js","RunLogDialog.js","ServerDetailsDialog.js","AlertDialog.js","ChangePasswordDialog.js","Popup.js","PopupFeatureList.js","Notification.js","Notifications.js","PopupPAList.js","TargetDialog.js","ShareableLinkDialog.js","App.js","registerServiceWorker.js","index.js","images/iucn.png","images/wcmc.png","images/mapbox_small.png","images/biopama_small.png","images/jrc_logo_color_small.png","genericFunctions.js"],"names":["AppBar","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","adminMenuOpen","evt","openFeaturesDialog","setState","menuAnchor","currentTarget","openUsersDialog","closeAdminMenu","openRunLogDialog","react_default","a","createElement","Fragment","Toolbar","style","display","open","backgroundColor","height","padding","className","index_es","icon","faBookOpen","onClick","openProjectsDialog","title","fontSize","faFish","bind","faThLarge","openPlanningGridsDialog","marginLeft","marginRight","infoPanelOpen","faArrowAltCircleLeft","toggleInfoPanel","resultsPanelOpen","faArrowAltCircleRight","b","toggleResultsPanel","faUser","showUserMenu","user","userRole","openAdminMenu","Popover_default","anchorEl","onRequestClose","Menu_default","desktop","onMouseLeave","menuItemStyle","color","listStyle","width","selectedMenuItemStyle","MenuItem_default","leftIcon","faUsers","faRunning","faQuestionCircle","showHelpMenu","React","Component","ToolbarButton","_style1","_style2","show","minWidth","label","assign","RaisedButton_default","overlayStyle","lineHeight","buttonStyle","MarxanDialog","window","helpLink","offsetX","rightX","right","left","offsetY","marginTop","cancelButton","showCancelButton","src_ToolbarButton","cancelLabel","primary","onCancel","disabled","cancelDisabled","okButton","hideOKButton","okLabel","onOk","okDisabled","contentStyle","contentWidth","Dialog_default","showOverlay","titleClassName","titleStyle","titleBarIcon","actions","children","position","top","key","sync_default","loading","showSpinner","openDocumentation","LoadingDialog","src_MarxanDialog","modal","LoginDialog","e","nativeEvent","value","selectServer","marxanServers","password","marxanServer","offline","guestUserEnabled","corsEnabled","undefined","SelectField_default","floatingLabelText","floatingLabelFixed","underlineShow","labelStyle","name","onChange","map","item","text","primaryText","innerDivStyle","faUnlink","faLock","host","description","id","TextField_default","event","changeUserName","inputStyle","onKeyPress","handleKeyPress","type","changePassword","RegisterDialog","validForm","email","validEmail","validateEmail","err","message","valid","test","String","toLowerCase","Error","_this2","c","newValue","errorText","createNewUser","ResendPasswordDialog","resendPassword","resending","changeEmail","UserMenu","anchorOrigin","horizontal","vertical","targetOrigin","hideUserMenu","openOptionsDialog","marginBottom","faCog","openProfileDialog","faEdit","openChangePasswordDialog","faUserLock","logout","exit_to_app_default","white","HelpMenu","DOCS_ROOT","hideHelpMenu","openServerDetailsDialog","faServer","help_outline_default","openAboutDialog","info_default","OptionsDialog","saveEnabled","options","saveOptions","payload","basemap","basemaps","changeBasemap","setOption","updateOptions","alias","resetNotifications","ProfileDialog","updated","updateUser","_this$setState","defineProperty","EMAIL","userData","closeProfileDialog","updateState","defaultValue","NAME","floatingLabelShrinkStyle","floatingLabelFocusStyle","USER_ROLES","UsersDialog","selectedUser","oldRole","newRole","changeRole","deleteUser","users","closeDialog","autoDetectWindowHeight","bodyStyle","length","es","pageSize","showPagination","minRows","noDataText","data","thisRef","columns","Header","accessor","headerStyle","textAlign","Cell","row","original","menuStyle","underlineStyle","iconStyle","ROLE","getTrProps","rowInfo","column","background","indexOf","target","textContent","changeUser","faTrashAlt","_delete","Checkbox_default","paddingLeft","verticalAlign","toggleEnableGuestUser","checked","AboutDialog","marxanClientReleaseVersion","href","dangerouslySetInnerHTML","__html","wdpaAttribution","rel","src","iucn","alt","wcmc","biopama_small","jrc_logo_color_small","mapbox_small","MenuItemWithButton","TargetIcon","editing","localTargetValue","startEditing","str","isNumber","Number","target_value","document","getElementById","interestFeature","focus","select","updateTargetValue","targetStatus","fontColor","blue300","react","visible","size","userSelect","alignItems","justifyContent","borderRadius","border","onBlur","stopEditing","LinearGauge","alwaysShowPercent","showUnprotectedPercent","targetAsLine","protectedWidth","protectedHidden","scaleFactor","scaledWidth","targetPxOffset","Math","round","protected_percent","protNum","percentageProtectedText","slice","targetShortfallWidth","unprotectedWidth","opacity","fontStyle","FeaturesList","feature","openFeatureMenu","targetIcon","updateFeature","List","maxHeight","maxheight","overflow","features","pu_area","protected_area","target_area","leftAvatar","simple","src_TargetIcon","secondaryText","src_LinearGauge","rightIconButton","IconButton_default","touch","tooltipPosition","iconClick","more_vert_default","grey400","SelectFeatures","src_FeaturesList","openTargetDialog","showTargetButton","faCrosshairs","leftmargin","metadata","OLDVERSION","IUCN_CATEGORIES","InfoPanel","editingProjectName","editingDescription","prevProps","prevState","snapshot","project","DESCRIPTION","keyCode","blur","renameProject","then","renameDescription","puEditing","stopPuEditSession","startPuEditSession","changeIucnCategory","isInputChecked","checkedString","toggleProjectPrivacy","toggleCosts","stopProcess","pid","Paper_default","zDepth","startEditingProjectName","Tabs","contentContainerStyle","margin","activeTab","onActive","project_tab_active","react_textarea_autosize_esm_browser","startEditingDescription","CREATEDATE","PRIVATE","onCheck","features_tab_active","src_SelectFeatures","pu_tab_active","pu_alias","preprocessing","IUCN_CATEGORY","faUnlock","startStopPuEditSession","cursor","faEraser","clearManualEdits","faHome","zoomToProjectBounds","faShareAlt","getShareableLink","settings_default","showRunSettingsDialog","secondary","runMarxan","TransparencyControl","showSlider","old_opacity","layer","changeOpacity","onMouseEnter","mouseEnter","mouseLeave","faEyeSlash","faEye","toggleLayer","Slider_default","sliderStyle","Legend","colorCode","legendItems","brew","breaks","numClasses","getNumClasses","colorSchemeLength","getMaxNumberOfClasses","colorScheme","colorSchemes","numClassesArray","Array","apply","classesToShow","range","suffix","legendLabel","src_TransparencyControl","resultsLayer","results_layer_opacity","pa_layer_visible","wdpaLayer","wdpa_layer_opacity","planning_units_legend_items","getPlanningUnitsLegend","protected_areas_legend_items","getProtectedAreasLegend","Log","status","faCheckCircle","hasOwnProperty","faExclamationTriangle","info","messages","index","replace","error","LogItem","runtime","ResultsPanel","showClipboard","selectedSolution","runtimeStr","objDiv","scrollTop","scrollHeight","solutions","resetSolution","startTimer","stopTimer","string","pad","join","timer","setInterval","minutes","floor","seconds","finalTime","str_pad_left","clearInterval","solution","loadSolution","owner","relatedTarget","node","body","createTextRange","moveToElementText","getSelection","selection","createRange","selectNodeContents","removeAllRanges","addRange","console","warn","selectText","execCommand","changeSolution","Run_Number","activeResultsTab","legend_tab_active","src_Legend","openClassificationDialog","solutions_tab_active","processing","instance","log_tab_active","src_Log","assignment_default","copyLog","clearLog","FeatureInfoDialog","updateFeatureValue","arguments","roundedText","toFixed","getHTML","hint","innerHTML","isValidTargetValue","obj","alert","html","getAreaHTML","contentEditable","suppressContentEditableWarning","FEATURE_PROPERTIES","forEach","old_version","showForNew","showForOld","push","renderKeyCell","renderValueCell","ProjectsDialog","selectedProject","deleteProject","oldVersion","getAllFeatures","loadAndClose","loadProject","openNewProjectDialog","cloneProject","openImportProjectDialog","desc","Date","tableColumns","includes","renderName","renderTitle","sortMethod","sortDate","projects","load","changeProject","unauthorisedMethods","faPlusCircle","_new","get_app_default","content_copy_default","Metadata","validName","setName","setDescription","paddingBottom","changeName","changeDescription","multiLine","rows","SelectFieldMapboxLayer","items","envelope","getLatLngLikeFromWKT","fitBounds","easing","num","addLayerToMap","feature_class_name","changeItem","wkt","require","parse","coordinates","mapboxlayername","request","mapboxUser","MBAT_PUBLIC","parseUrlExists","res","statusCode","log","getStyle","layers","substr","removeLayer","getSource","removeSource","addSource","url","addLayer","source","source-layer","paint","fill-color","fill-opacity","selectedValue","PlanningUnitsDialog","planning_unit_grids_received","mapboxgl","Map","container","mapContainer","center","zoom","ref","el","src_SelectFieldMapboxLayer","pu","planning_unit_grids","SelectCostFeatures","selectedFeature","ListItem","defaultProps","disableTouchRipple","disableFocusRipple","iconButtonElement","rightIconMenu","IconMenu_default","selectedCosts","openCostsDialog","FeaturesDialog","previousRow","deleteFeature","showNewFeaturesDialogPopover","openImportFeaturesDialog","initialiseDigitising","addingRemovingFeatures","shiftKey","selectedIds","getFeaturesBetweenRows","selectFeatures","clickFeature","thisRow","selectedFeatureIds","idx1","idx2","allFeatures","splice","unselectFeature","feature_metadata","previewFeature","renderPreview","getTdProps","preview","featuresDialogPopupOpen","closePopover","_newByDigitising","_openImportFeaturesDialog","created_by","faCircle","clearAllFeatures","selectAllFeatures","NewProjectDialog","handleNext","stepIndex","handlePrev","steps","loadingFeatures","finished","featuresDialogOpen","JSON","stringify","gotoStart","selected","closeFeaturesDialog","removeFeature","addFeature","ids","filter","arr","Promise","resolve","reject","createNewProject","planning_grid_name","maxWidth","src_Metadata","src_PlanningUnitsDialog","getPlanningUnitGrids","changePU","openImportPlanningGridDialog","src_SelectCostFeatures","src_FeaturesDialog","updateSelectedFeatures","FailedToDeleteDialog","deleteWhat","MapContainer2","attributionControl","on","planning_grid_metadata","tilesetid","fill-outline-color","getTilesetMetadata","tileset","bounds","zoomToBounds","catch","setSnackBar","remove","PlanningGridDialog","expanded","areaTD","_area","country_idTD","country_id","src_MapContainer2","colspan","country","domain","creation_date","aoi_id","faAngleUp","faAngleDown","expand","PlanningGridsDialog","selectedPlanningGrid","deletePlanningGrid","openNewPlanningGridDialog","planningGrid","previewPlanningGrid","isNaN","renderCountry","renderArea","planningGrids","changePlanningGrid","openImportDialog","domains","areakm2s","shapes","NewPlanningGridDialog","iso3","shape","areakm2","countries","ERRORS_PAGE","createNewPlanningUnitGrid","response","dropDownStyle","changeIso3","original_n","faArrowAltCircleUp","changeDomain","changeShape","changeAreaKm2","ShapefileUpload","active","assertThisInitialized","fileUpload","files","requestEndpoint","formData","FormData","filename","append","post","withCredentials","SEND_CREDENTIALS","finishedLoading","checkForErrors","setFilename","parameter","htmlFor","lib_default","accept","mandatory","spin","ImportPlanningGridDialog","zipFilename","_description","ex","src_ShapefileUpload","setzipFilename","FeatureDialog","area","NewFeatureDialog","createNewFeature","INITIAL_STATE","fieldnames","splitField","ImportFeaturesDialog","unzipShapefile","shapefile","rootfilename","importFeatures","_this3","getShapefileFieldnames","_this4","deleteShapefile","_disabled","paddingTop","RadioButton","defaultSelected","resetFieldnames","changeSplitField","CostsDialog","RunSettingsDialog","updateEnabled","renderEditable","runParams","openParametersDialog","updateRunParams","cellInfo","float","toConsumableArray","onFocus","setUpdateEnabled","showClumpingDialog","RendererSelector","changeValue","values","toUpperCase","concat","toString","selectionRenderer","autoWidth","handleChange","property","ColorSelector","getSwatch","disableHighlight","divWidth","colorDivs","borderColor","_c","RENDERERS","COLORCODES","NUMCLASSES","TOPCLASSES","ClassificationDialog","dataBreaks","es6","x","stroke","summaryStats","strokeDasharray","dataKey","tick","offset","angle","fill","src_ColorSelector","changeColorCode","renderer","COLORCODE","src_RendererSelector","changeRenderer","CLASSIFICATION","changeNumClasses","changeShowTopClasses","MapContainer","mapCentre","mapZoom","interactive","RESULTS_LAYER_NAME","setCenter","setMapZoom","paintProperty","setPaintProperty","fillColor","oulineColor","setZoom","selectBlm","blmValue","INITIAL_PAINT_PROPERTIES","map0_paintProperty","map1_paintProperty","map2_paintProperty","map3_paintProperty","map4_paintProperty","ClumpingDialog","blmValues","blmMin","blmMax","blmChanged","createProjectGroupAndRun","resetPaintProperties","deleteProjects","_get","runProjects","projectNames","projectName","projectsRun","setClumpingRunning","startMarxanJob","loadOtherSolution","getSolution","paintProperties","getPaintProperties","clump","getBlmValues","min","max","increment","i","parseFloat","isFinite","setBlmValue","clumpingRunning","_this5","mapContainers","keys","src_MapContainer","parseBlmValue","rerunProjects","changeBlmMin","changeBlmMax","UploadFolder","folderUploadText","filesListed","directory","webkitdirectory","_addDirectory","UploadMarxanFiles","setZipFilename","src_UploadFolder","setPlanningGridName","ImportProjectDialog","importProject","src_UploadMarxanFiles","RunLogDialog","selectedRun","runningJobs","runLogs","runningLogs","stopMarxan","refreshRunLogs","clearRunLogs","getRunLogs","run","faTimesCircle","endtime","renderUser","renderProject","renderEnded","renderRuntime","renderStatus","changeSelectedRun","stopRun","faRedoAlt","ServerDetailsDialog","system","server_version","wdpa_version","newWDPAVersion","WDPA","latest_version","metadataUrl","updateWDPA","AlertDialog","ChangePasswordDialog","currentPassword","newPassword1","newPassword2","checkPassword","PASSWORD","passwordsDontMatch","setCurrentPassword","setNewPassword1","setNewPassword2","Popup","active_pu","xy","y","PopupFeatureList","Notification","paddingRight","removeNotification","Notifications","notifications","src_Notification","faBell","hideNotifications","PopupPAList","wdpaid","iucn_cat","onMouseOver","TargetDialog","validTarget","validateTarget","_validTarget","updateTargetValueForFeatures","ShareableLinkDialog","navigator","clipboard","writeText","shareableLinkUrl","faClipboard","copyToClipboard","MARXAN_CLIENT_VERSION","packageJson","version","PLANNING_UNIT_STATUSES","PU_LAYER_NAME","STATUS_LAYER_NAME","PUVSPR_LAYER_NAME","RESULTS_LAYER_FILL_OPACITY_ACTIVE","WDPA_FILL_LAYER_OPACITY","SHOW_PUVSPR_LAYER_TEXT","App","usersDialogOpen","alertDialogOpen","featureMenuOpen","profileDialogOpen","aboutDialogOpen","helpDialogOpen","importProjectDialogOpen","optionsDialogOpen","CostsDialogOpen","registerDialogOpen","clumpingDialogOpen","settingsDialogOpen","projectsDialogOpen","openInfoDialogOpen","newProjectDialogOpen","shareableLinkDialogOpen","classificationDialogOpen","resendPasswordDialogOpen","NewPlanningGridDialogOpen","importPlanningGridDialogOpen","FailedToDeleteDialogOpen","changePasswordDialogOpen","importFeaturesDialogOpen","serverDetailsDialogOpen","planningGridsDialogOpen","planningGridDialogOpen","NewFeatureDialogOpen","featureDialogOpen","runLogDialogOpen","targetDialogOpen","notificationsOpen","userMenuOpen","helpMenuOpen","failedToDeleteProjects","loggedIn","shareableLink","popup_point","snackbarOpen","snackbarMessage","tilesets","puFeatures","paFeatures","currentFeature","puvsprLayerText","featureDatasetFilename","projectFeatures","costs","planning_units","logMessages","lng","lat","location","search","getGlobalVariables","searchParams","URLSearchParams","openShareableLink","classyBrew","accessToken","MAPBOX_BASEMAPS","initialiseServers","MARXAN_SERVERS","has","serverData","find","server","get","switchToGuestUser","validateUser","params","timeout","jsonp","endpoint","promise","method","_this6","msgCallback","_this7","ws","WebSocket","websocketEndpoint","onmessage","onopen","onerror","onclose","wasClean","showSnackbar","networkError","responseIsTimeoutOrEmpty","serverError","isServerError","isError","trace","warning","logMessage","newFeatureCreated","_messages","_message","removeMessageFromLog","_this8","hosts","hostname","protocol","port","getAllServerCapabilities","sort","promiseArray","getServerCapabilities","all","fetchJsonp","json","PERMITTED_DOMAINS","ENABLE_GUEST_USER","machine","MACHINE","client_version","MARXAN_SERVER_VERSION","NODE","processor","PROCESSOR","release","RELEASE","SYSTEM","VERSION","WDPA_VERSION","planning_grid_units_limit","PLANNING_GRID_UNITS_LIMIT","disk_space","DISK_FREE_SPACE","SERVER_NAME","SERVER_DESCRIPTION","wdpa_vector_tile_layer","setWDPAVectorTilesLayerName","normalisedData","puids","_this9","_this10","login","_this11","LASTPROJECT","dismissedNotifications","showNotifications","BASEMAP","setBasemap","resetResults","_this12","resendEmail","_this13","closeResendPasswordDialog","_this14","_this15","usersCopy","some","deleteProjectsForUser","role","_this16","enabled","_this17","updateProjectParameter","NOTIFICATIONS","addNotifications","showForRoles","CLIENT_VERSION","SERVER_VERSION","_this18","_notifications","allowedForRole","notDismissed","notExpired","expires","d","notification","_notification","dismissNotification","_this19","parameters","_this20","removeKeys","appendToFormData","_post","newUserData","hidePopup","updateProjectParams","array","_this21","_this22","_this23","runParameters","PLANNING_UNIT_NAME","MAPBOX_USER","getResults","feature_preprocessing","protected_area_intersections","previousIucnCategory","initialiseInterestFeatures","tmpArr","_this24","outFeatures","projectFeature","getArrayItem","addFeatureAttributes","getSelectedFeatureIds","runMarxanResponse","hideFeatureLayer","hideLayer","_this25","closeRegisterDialog","_this26","interest_features","target_values","spf_values","_this27","silent","getProjects","_this28","newName","_this29","newDesc","_this30","_this31","private","_this32","startLogging","resetProtectedAreas","updateSpecFile","updatePuFile","updatePuvsprFile","runFinished","marxanStopped","_this33","spf","preprocessAllFeatures","closeFeatureMenu","preprocessFeature","preprocessed","_this34","_ws","wsMessageCallback","pu_count","occurs_in_planning_grid","_this35","_this36","runCompleted","ssoln","renderSolution","summary","Score","Cost","Planning_Units","Missing_Values","updateProtectedAmount","mvbest","mvData","mvbestItemIndex","findIndex","mvItem","setFeaturesState","_this37","uploadId","createImportProject","importZippedShapefileAsPu","uploadFiles","upgradeProject","formattedDate","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","OUTPUTDIR","pollMapbox","file","filepath","webkitRelativePath","split","uploadFile","s","_this38","mv","_this39","total","number","count","sampleSize","sample","ssolnLength","getssolncount","ceil","arrays","classification","_this40","getssolnSample","setSeries","brewCopy","newBrewColorScheme","setColorCode","setNumClasses","classify","getBreaks","_this41","rendererStateUpdated","_this42","_this43","_this44","sum","setRenderer","_this45","fill_color_expression","initialiseFillColorExpression","fill_outline_color_expression","visibleValue","classifyData","getColorInRange","attribute","expression","cost_data","SHOWPOPUP","queryRenderedFeatures","point","puid","properties","vector_tile_properties","marxan_results","marxan_results_dict","mapLoaded","mapError","mapClick","mouseEnterPA","mouseLeavePA","getCanvas","lngLat","abs","showProtectedAreasPopup","ms","_this46","setTimeout","timerCancelled","wdpaIds","_this47","addControl","ScaleControl","NavigationControl","mapboxDrawControls","MapboxDraw","displayControlsDefault","controls","polygon","trash","defaultMode","mouseMove","updateMapCentreAndZoom","polygonDrawn","getCenter","getZoom","sourceId","getPUFeatureList","_this48","styleUrl","fetch","TileJSON","sources","esri","tilesurl","tiles","scheme","tilejson","format","tileInfo","maxzoom","_this49","getValidStyle","loadMapStyle","addWDPASource","addWDPALayer","addPlanningGridLayers","filterWdpaByIucnCategory","_this50","provider","getESRIStyle","styleJson","_this51","setStyle","diff","createMap","_this52","getMetadata","removePlanningGridLayers","tilesetId","response2","beforeLayer","getLayer","layout","visibility","line-color","line-width","_this53","attribution","tilesUrl","stops","setLayoutProperty","layername","getLayoutProperty","layerId","_map","minLng","minLat","maxLng","maxLat","bottom","_this54","getPlanningUnitsCostData","renderPuCostLayer","showLayer","pu_tab_inactive","reinstatePuvsprLayer","isLayerVisible","previousResultsOpacity","renderPuEditLayer","onClickRef","moveStatusUp","onContextMenu","resetStatus","off","updatePuDatFile","_this55","getPuidsFromIucnCategory","updatePlanningUnits","param_name","changeStatus","direction","getStatusLevel","next_status","getNextStatusLevel","statuses","removePuidFromArray","addPuidToArray","_this56","status_level","getPlanningUnitsByStatus","getStatusPosition","nextStatus","removePuidsFromArray","appPuidsToPlanningUnits","from","Set","new_array","_this57","openPlanningGridDialog","_this58","newPlanningGridCreated","closeNewPlanningGridDialog","_this59","closeImportPlanningGridDialog","deletePlanningUnitGrid","_this60","_this61","openFailedToDeleteDialog","_this62","_this63","records","mapbox_layer_name","_this64","uploadid","_this65","MBAT","complete","showClearSelectAll","finaliseDigitising","zipname","newProps","element","_this66","removeControl","openNewFeatureDialog","digitisedFeatures","_this67","feature_layer_loaded","toggleFeatureLayer","puvsprLayerId","toggleFeaturePuvsprLayer","_this68","newFeatures","callback","_this69","openFeatureDialog","_this70","zipfile","_this71","_this72","spiltfield","_this73","_this74","coords","geometry","coordinate","closeNewFeatureDialog","getInterestFeature","_this75","addNewFeature","featuresCopy","_this76","_deleteFeature","_this77","removeFeatureFromAllFeatures","_this78","getMenuTextForPuvsprLayer","newFeature","_this79","layerName","getFeaturePlanningUnits","oid","_this80","line_color_expression","unselectItem","nums","extent","preventDefault","getCountries","getUsers","iucnCategory","_metadata","renderPAGridIntersections","iucnCategories","getIndividualIucnCategories","filterExpr","setFilter","hidePALegend","showPALegend","retValue","intersections_by_category","getIntersections","getPuidsFromNormalisedData","preprocessProtectedAreas","intersections","_this81","clashingPuids","previousPuids","newPuids","getNewPuids","oldPuids","_this82","iucn_categories","_this83","downloadUrl","BOUNDNAME","_this84","currentFiles","_this85","preprocessBoundaryLengths","_this86","_this87","_this88","newRunParams","_this89","_this90","openShareableLinkDialog","_this91","MuiThemeProvider_default","src_LoadingDialog","src_LoginDialog","openRegisterDialog","openResendPasswordDialog","src_RegisterDialog","src_ResendPasswordDialog","src_UserMenu","src_HelpMenu","src_OptionsDialog","closeOptionsDialog","src_UsersDialog","closeUsersDialog","src_ProfileDialog","src_AboutDialog","closeAboutDialog","src_InfoPanel","src_ResultsPanel","hideResults","src_FeatureInfoDialog","closeInfoDialog","src_Popup","src_PopupFeatureList","src_PopupPAList","cancelTimer","src_ProjectsDialog","closeProjectsDialog","src_NewProjectDialog","closeNewProjectDialog","src_NewPlanningGridDialog","src_ImportPlanningGridDialog","importPlanningUnitGrid","src_FeatureDialog","closeFeatureDialog","src_NewFeatureDialog","src_ImportFeaturesDialog","closeImportFeaturesDialog","setNewFeatureDatasetFilename","src_PlanningGridsDialog","closePlanningGridsDialog","src_FailedToDeleteDialog","closeFailedToDeleteDialog","src_PlanningGridDialog","closePlanningGridDialog","src_CostsDialog","closeCostsDialog","src_RunSettingsDialog","closeRunSettingsDialog","src_ClassificationDialog","closeClassificationDialog","src_ClumpingDialog","hideClumpingDialog","src_ImportProjectDialog","closeImportDialog","src_RunLogDialog","closeRunLogDialog","src_ServerDetailsDialog","closeServerDetailsDialog","src_ChangePasswordDialog","closeChangePasswordDialog","src_AlertDialog","closeAlertDialog","Snackbar_default","closeSnackbar","src_Notifications","src_MenuItemWithButton","error_outline_default","openInfoDialog","remove_default","removeFromProject","visibility_off_default","visibility_default","zoom_in_default","zoomToFeature","autorenew_default","preprocessSingleFeature","src_TargetDialog","closeTargetDialog","src_ShareableLinkDialog","closeShareableLinkDialog","src_AppBar","isLocalhost","Boolean","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","render","src_App","URL","process","origin","addEventListener","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","module","exports","reduce"],"mappings":"kjBAkBMA,eACL,SAAAA,EAAaC,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CAACC,eAAe,GAFXR,kFAKCS,GACjBN,KAAKJ,MAAMW,oBAAmB,yCAGlBD,GACbN,KAAKQ,SAAS,CAACH,eAAe,EAAMI,WAAYH,EAAII,uDAGvCJ,GACbN,KAAKQ,SAAS,CAACH,eAAe,8CAG/BL,KAAKJ,MAAMe,kBACXX,KAAKY,4DAGLZ,KAAKJ,MAAMiB,mBACXb,KAAKY,kDAGH,OACEE,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAACE,EAAA,QAAD,CAASC,MAAO,CAACC,QAAUpB,KAAKJ,MAAMyB,KAAQ,QAAU,OAAQC,gBAAiB,mBAAoBC,OAAQ,OAAQC,QAAS,YAAaC,UAAW,UACrJX,EAAAC,EAAAC,cAACE,EAAA,aAAD,KACGJ,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMC,IAAYC,QAAS7B,KAAKJ,MAAMkC,mBAAoBC,MAAM,WAAWN,UAAW,aAAcN,MAAO,CAACa,SAAU,UACvIlB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMM,IAAQJ,QAAS7B,KAAKO,mBAAmB2B,KAAKlC,MAAO+B,MAAM,WAAWN,UAAW,aAAcN,MAAO,CAACa,SAAU,UACxIlB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMQ,IAAWN,QAAS7B,KAAKJ,MAAMwC,wBAAwBF,KAAKlC,MAAO+B,MAAM,iBAAiBN,UAAW,aAAcN,MAAO,CAACa,SAAU,UAC5JlB,EAAAC,EAAAC,cAACE,EAAA,iBAAD,CAAkBC,MAAO,CAACkB,WAAW,OAAQC,YAAY,UACzDxB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACa,SAAU,QAASL,KAAO3B,KAAKJ,MAAM2C,cAAiBC,IAAuBzB,IAAGc,QAAS7B,KAAKJ,MAAM6C,gBAAiBV,MAAQ/B,KAAKJ,MAAM2C,cAAiB,0BAA4B,0BAA2Bd,UAAW,eACpPX,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACa,SAAU,QAASL,KAAO3B,KAAKJ,MAAM8C,iBAAoBC,IAAwBC,IAAGf,QAAS7B,KAAKJ,MAAMiD,mBAAoBd,MAAQ/B,KAAKJ,MAAM8C,iBAAoB,0BAA4B,0BAA2BjB,UAAW,eAC9PX,EAAAC,EAAAC,cAACE,EAAA,iBAAD,CAAkBC,MAAO,CAACkB,WAAW,OAAQC,YAAY,UACzDxB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMmB,IAAQjB,QAAS7B,KAAKJ,MAAMmD,aAAchB,MAAO,SAAW/B,KAAKJ,MAAMoD,KAAO,KAAOhD,KAAKJ,MAAMqD,SAAW,IAAKxB,UAAW,aAAcN,MAAO,CAACa,SAAU,UAClLlB,EAAAC,EAAAC,cAAA,OAAKS,UAAW,sBAAuBI,QAAS7B,KAAKkD,cAAchB,KAAKlC,MAAOmB,MAAO,CAACC,QAAkC,UAAxBpB,KAAKJ,MAAMqD,SAAwB,eAAiB,SAArJ,SACDnC,EAAAC,EAAAC,cAACmC,EAAApC,EAAD,CAASM,KAAMrB,KAAKI,MAAMC,cAAe+C,SAAUpD,KAAKI,MAAMK,WAAY4C,eAAgBrD,KAAKY,eAAesB,KAAKlC,OACjHc,EAAAC,EAAAC,cAACsC,EAAAvC,EAAD,CAAMwC,SAAS,EAAMC,aAAcxD,KAAKY,eAAesB,KAAKlC,MAAOyD,cAAe,CAACnC,gBAAgB,mBAAoBoC,MAAM,SAAUC,UAAW,CAACC,MAAM,QAAQtC,gBAAgB,oBAAqBuC,sBAAuB,CAACH,MAAM,kBAClO5C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUgD,SAAUjD,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACa,SAAU,QAASL,KAAMqC,IAASN,MAAO,UAAY7B,QAAS7B,KAAKW,gBAAgBuB,KAAKlC,MAAO+B,MAAO,gBAAnJ,SACAjB,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUgD,SAAUjD,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACa,SAAU,QAASL,KAAMsC,IAAWP,MAAO,UAAY7B,QAAS7B,KAAKa,iBAAiBqB,KAAKlC,MAAO+B,MAAO,8BAAtJ,aAGHjB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMuC,IAAkBrC,QAAS7B,KAAKJ,MAAMuE,aAAcpC,MAAO,mBAAoBN,UAAW,aAAcN,MAAO,CAACa,SAAU,oBA7CxIoC,IAAMC,WAqDZ1E,gDCpET2E,oLAGJ,IAAIC,EAAWvE,KAAKJ,MAAMuB,MAASnB,KAAKJ,MAAMuB,MAAQ,GAClDqD,EAAU,CAAEpD,SAA8B,IAApBpB,KAAKJ,MAAM6E,KAAkB,eAAiB,OAAQpC,WAAW,MAAOC,YAAY,MAAMd,QAAS,MAAMkD,SAAU,OAAOd,MAAQ5D,KAAKJ,MAAM+E,MAAS,GAAI,OAAQpD,OAAQ,QAEpM,OADAzB,OAAO8E,OAAOL,EAASC,GAEtB1D,EAAAC,EAAAC,cAAC6D,GAAA9D,EAADjB,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECuB,MAAOoD,EACPO,aAAc,CAACC,WAAW,OAAOxD,OAAO,QACxCyD,YAAa,CAACD,WAAW,OAAOxD,OAAO,kBAXf6C,IAAMC,WAiBnBC,0BCDTW,+LAEJC,OAAO7D,KAJO,2DAIUrB,KAAKJ,MAAMuF,2CAKnC,IAAIC,EAAWpF,KAAKJ,MAAMwF,QAAW,CAAC/C,WAAYrC,KAAKJ,MAAMwF,QAAU,KAAMxB,MAAO,SAAY5D,KAAKJ,MAAMyF,OAAU,CAACC,MAAOtF,KAAKJ,MAAMyF,OAAS,KAAMzB,MAAO,QAAS2B,KAAK,MAAQ,GAChLC,EAAWxF,KAAKJ,MAAM4F,QAAW,CAACC,UAAWzF,KAAKJ,MAAM4F,QAAU,GAAK,MAAQ,GAC/ErE,EAAQrB,OAAO8E,OAAOQ,EAASI,GAC/BE,EAAgB1F,KAAKJ,MAAM+F,iBAAoB7E,EAAAC,EAAAC,cAAC4E,GAAD,CAAejB,MAAQ3E,KAAKJ,MAAMiG,YAAe7F,KAAKJ,MAAMiG,YAAc,SAAUC,SAAS,EAAMjE,QAAS7B,KAAKJ,MAAMmG,SAAUC,SAAUhG,KAAKJ,MAAMqG,iBAAoB,KACzNC,EAAYlG,KAAKJ,MAAMuG,aAAiB,KAAOrF,EAAAC,EAAAC,cAAC4E,GAAD,CAAejB,MAAQ3E,KAAKJ,MAAMwG,QAAWpG,KAAKJ,MAAMwG,QAAU,KAAMN,SAAS,EAAMjE,QAAS7B,KAAKJ,MAAMyG,KAAML,SAAUhG,KAAKJ,MAAM0G,aACrLC,EAAgBvG,KAAKJ,MAAM2G,aAAgBvG,KAAKJ,MAAM2G,aAAgBvG,KAAKJ,MAAM4G,aAAgB,CAAC5C,MAAO5D,KAAKJ,MAAM4G,aAAe,MAAQ,GAC/I,OACC1F,EAAAC,EAAAC,cAACyF,GAAA1F,EAADjB,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECyD,eAAgBrD,KAAKJ,MAAMmG,SAC3BjB,aAAe9E,KAAKJ,MAAM8G,YAAe,CAACtF,QAAQ,SAAW,CAACA,QAAQ,QACtEuF,eAAgB,mBAChBJ,aAAcA,EACdK,WAAa5G,KAAKJ,MAAMiH,aAAgB,CAACxE,WAAY,QAAU,KAC/DZ,UAAW,gBACXN,MAAOA,EACP2F,QAAS,CACR9G,KAAKJ,MAAMkH,QACXpB,EACAQ,GAEDa,SAAU,CACR/G,KAAKJ,MAAMiH,aAAgB/F,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAM3B,KAAKJ,MAAMiH,aAAc1F,MAAO,CAAC6F,SAAU,WAAYC,IAAK,OAAQ1B,KAAM,QAAS2B,IAAI,OAAS,KACnJpG,EAAAC,EAAAC,cAACmG,GAAApG,EAAD,CAAMU,UAAU,OAAON,MAAO,CAACC,QAAUpB,KAAKJ,MAAMwH,SAAWpH,KAAKJ,MAAMyH,YAAe,eAAiB,OAAQ3D,MAAO,oBAAqBsD,SAAU,WAAYC,IAAK,OAAQ3B,MAAO,QAAS4B,IAAK,YAAclH,KAAKJ,MAAMmH,SAC9N/G,KAAKJ,MAAMuF,SAAYrE,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMuC,IAAkBrC,QAAS7B,KAAKsH,kBAAkBpF,KAAKlC,MAAO+B,MAAO,qCAAsCN,UAAW,kBAAmBN,MAAO,CAACa,SAAU,QAASkF,IAAI,aAAe,gBA/BhN9C,IAAMC,WAsClBY,MCtDTsC,oLAEJ,OACCzG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAEC8G,aAAa,EACbf,kBAAkB,EAClBQ,cAAc,EACdK,aAAc,IACdzE,MAAM,YACN0F,OAAO,aAXgBrD,IAAMC,WAkBnBkD,8CCZTG,0LACUC,GACY,UAAtBA,EAAEC,YAAYV,KAAiBlH,KAAKJ,MAAMyG,4CAElC/F,EAAK4G,EAAKW,GACtB7H,KAAKJ,MAAMkI,aAAa9H,KAAKJ,MAAMmI,cAAcb,qCAEzC,IAAArH,EAAAG,KACR,OACCc,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAEC8G,aAAa,EACbJ,eAActG,KAAKJ,MAAMoD,OAAShD,KAAKJ,MAAMoI,UAAYhI,KAAKJ,MAAMwH,UAAWpH,KAAKJ,MAAMqI,cAAejI,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAaC,SAAWlI,KAAKJ,MAAMqI,eAAejI,KAAKJ,MAAMqI,aAAaE,kBACvN/B,QAAUpG,KAAKJ,MAAMqI,eAAejI,KAAKJ,MAAMqI,aAAaC,UAAUlI,KAAKJ,MAAMqI,aAAaG,aAAapI,KAAKJ,MAAMqI,aAAaE,iBAAoB,oBAAsB,QAC7KxC,kBAAkB,EAClBE,YAAa,WACbI,uBAA4CoC,IAA1BrI,KAAKJ,MAAMqI,cAA6BjI,KAAKJ,MAAMwH,SAAYpH,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAaC,SAAalI,KAAKJ,MAAMqI,eAAejI,KAAKJ,MAAMqI,aAAaG,aACjMjD,SAAU,+BACVqB,aAAc,IACdhB,QAAS,IACTuB,SAAU,CACVjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,MACRpG,EAAAC,EAAAC,cAACsH,GAAAvH,EAAD,CACCwH,kBAAmB,gBACnBC,oBAAoB,EACpBC,eAAe,EACfhF,cAAe,CAACzB,SAAS,QACzB0G,WAAY,CAAC1G,SAAS,QACtBb,MAAO,CAACyC,MAAM,SACdiE,MAAO7H,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAaU,KACxDC,SAAU5I,KAAK8H,aAAa5F,KAAKlC,MACjC+G,SAAW/G,KAAKJ,MAAMmI,cAAcc,IAAI,SAACC,GAExC,IAAIC,EAAQD,EAAKZ,QAAWY,EAAKH,KAASG,EAAKV,YAAeU,EAAKH,KAAQG,EAAKX,iBAAoBW,EAAKH,KAAOG,EAAKH,KAAO,yBAC5H,OAAQ7H,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CACP8G,MAAOiB,EAAKH,KACZzB,IAAK4B,EAAKH,KACVK,YAAaD,EACb5H,MAAO,CAACa,SAAS,QACjBiH,cAAe,CAACzH,QAAQ,qBACxBuC,SAAW+E,EAAKZ,QAAWpH,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACI,OAAQ,OAAQkE,UAAU,OAAQ9D,KAAMuH,MAAeJ,EAAKV,YAAe,KAAOtH,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACI,OAAQ,OAAQkE,UAAU,OAAQ9D,KAAMwH,MACvMpH,MAAQ+G,EAAKZ,QAAWY,EAAKM,KAAO,eAAiBN,EAAKO,YAAgBP,EAAKV,YAAeU,EAAKM,KAAO,KAAON,EAAKO,YAAeP,EAAKX,iBAAoBW,EAAKM,KAAO,iBAAmBN,EAAKO,YAAcP,EAAKM,KAAO,2BAA6BN,EAAKO,kBAIjQvI,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACI,OAAO,SAAU+H,GAAG,WAAWpC,IAAI,YAC/CpG,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CACCwH,kBAAkB,WAClBC,oBAAoB,EACpBI,SAAY,SAACY,EAAO3B,GAAR,OAAgBhI,EAAKD,MAAM6J,eAAe5B,IACtD6B,WAAY,CAAC1H,SAAS,QACtB6F,MAAO7H,KAAKJ,MAAMoD,KAClBvB,UAAU,iBACVuE,YAAahG,KAAKJ,MAAMwH,SAAUpH,KAAKJ,MAAMqI,eAAejI,KAAKJ,MAAMqI,aAAaG,aACpFuB,WAAY3J,KAAK4J,eAAe1H,KAAKlC,QAEtCc,EAAAC,EAAAC,cAAA,YAAMF,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CACLwH,kBAAkB,WAClBC,oBAAoB,EACpBqB,KAAK,WACLjB,SAAY,SAACY,EAAO3B,GAAR,OAAgBhI,EAAKD,MAAMkK,eAAejC,IACtDA,MAAO7H,KAAKJ,MAAMoI,SAClBvG,UAAU,iBACVuE,YAAYhG,KAAKJ,MAAMwH,SAAUpH,KAAKJ,MAAMqI,eAAejI,KAAKJ,MAAMqI,aAAaG,aACnFuB,WAAY3J,KAAK4J,eAAe1H,KAAKlC,YAMxCqD,eAAgBrD,KAAKJ,MAAMyG,KAC3BtE,MAAM,QACN0F,OAAO,aAzEcrD,IAAMC,WAgFjBqD,MCrFTqC,eACL,SAAAA,EAAYnK,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA+J,IAClBlK,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAiK,GAAA5J,KAAAH,KAAMJ,KACDQ,MAAQ,CAAE4J,WAAW,EAAOhH,UAAMqF,EAAWM,UAAMN,EAAW4B,WAAO5B,EAAW6B,YAAY,GAF/ErK,+EAOlB,IACCG,KAAKmK,gBAGN,MAAOC,GAKN,YAJQA,EAAIC,QAObrK,KAAKJ,MAAMyG,KAAKrG,KAAKI,MAAM4C,KAAMhD,KAAKI,MAAM4H,SAAUhI,KAAKI,MAAMuI,KAAM3I,KAAKI,MAAM6J,+CAIlF,IACIK,EADK,sJACMC,KAAKC,OAAOxK,KAAKI,MAAM6J,OAAOQ,eAE7C,GADAzK,KAAKQ,SAAS,CAAE0J,WAAYI,KACvBA,EACJ,MAAM,IAAII,MAAM,0DAIT,IAAAC,EAAA3K,KACJ4K,EAAI,CAAC9J,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,qBACfpG,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,WAAWC,oBAAoB,EAAMI,SAAY,SAACY,EAAMqB,GAAP,OAAoBF,EAAKnK,SAAS,CAACwC,KAAK6H,OACtH/J,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,WAAWC,oBAAoB,EAAMqB,KAAK,WAAWjB,SAAY,SAACY,EAAMqB,GAAP,OAAoBF,EAAKnK,SAAS,CAACwH,SAAS6C,OAC1I/J,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,YAAYC,oBAAoB,EAAMI,SAAY,SAACY,EAAMqB,GAAP,OAAoBF,EAAKnK,SAAS,CAACmI,KAAKkC,OACvH/J,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,gBAAgBC,oBAAoB,EAAMsC,UAAW9K,KAAKI,MAAM8J,WAAc,GAAK,wBAAyBtB,SAAY,SAACY,EAAMqB,GAAP,OAAoBF,EAAKnK,SAAS,CAACyJ,MAAMY,SAEjM,OACC/J,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAEC4G,aAAc,IACdH,KAAMrG,KAAK+K,cAAc7I,KAAKlC,MAC9BsG,aAActG,KAAKI,MAAM4C,MAAQhD,KAAKI,MAAM4H,UAAYhI,KAAKI,MAAMuI,MAAQ3I,KAAKI,MAAM6J,QAAUjK,KAAKJ,MAAMwH,QAC3GzB,kBAAkB,EAClBM,eAAgBjG,KAAKJ,MAAMwH,QAC3BjC,SAAU,uCACVpD,MAAM,WACNgF,SAAU6D,EACVvH,eAAgBrD,KAAKJ,MAAMmG,mBAlDF3B,IAAMC,WAwDpB0F,MCxDTiB,0LAEUrD,GACY,UAAtBA,EAAEC,YAAYV,KAAiBlH,KAAKJ,MAAMqL,kDAEtC,IAAApL,EAAAG,KACR,OACCc,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAEC4G,aAAc,IACdb,kBAAkB,EAClBW,YAAatG,KAAKJ,MAAMqK,OAASjK,KAAKJ,MAAMwH,QAC5CnB,eAAgBjG,KAAKJ,MAAMsL,UAC3BnJ,MAAM,kBACNgF,SAAU,CAACjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,aACnBpG,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,gBAAgBC,oBAAoB,EAAMI,SAAY,SAACY,EAAO3B,GAAR,OAAgBhI,EAAKD,MAAMuL,YAAYtD,IAASA,MAAO7H,KAAKJ,MAAMqK,MAAOxI,UAAU,iBAAiBuE,SAAYhG,KAAKJ,MAAMwH,QAASuC,WAAY3J,KAAK4J,eAAe1H,KAAKlC,UAE7PqD,eAAgBrD,KAAKJ,MAAMmG,oBAlBG3B,IAAMC,WAyB1B2G,oCClBTI,oLAEJ,OACCtK,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAACmC,EAAApC,EAAD,CACCM,KAAMrB,KAAKJ,MAAMyB,KACjB+B,SAAUpD,KAAKJ,MAAMa,WACrB4K,aAAc,CAACC,WAAY,OAAQC,SAAU,UAC7CC,aAAc,CAACF,WAAY,OAAQC,SAAU,OAC7ClI,eAAgBrD,KAAKJ,MAAM6L,cAE3B3K,EAAAC,EAAAC,cAACsC,EAAAvC,EAAD,CAAMwC,SAAS,EAAMC,aAAcxD,KAAKJ,MAAM6L,aAAchI,cAAe,CAACnC,gBAAgB,mBAAoBoC,MAAM,SAAUC,UAAW,CAACC,MAAM,QAAQtC,gBAAgB,oBAAqBuC,sBAAuB,CAACH,MAAM,kBAC5N5C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAahJ,KAAKJ,MAAMoD,KAAO,KAAOhD,KAAKJ,MAAMqD,SAAW,IAAK9B,MAAO,CAACkB,WAAW,UAC9FvB,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUI,MAAO,CAACC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,QAAU,QAAS+F,YAAY,WAAWnH,QAAS7B,KAAKJ,MAAM8L,kBAAkBxJ,KAAKlC,MAAO+D,SAAUjD,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACa,SAAU,OAAQ2J,aAAc,OAAQhK,KAAMiK,IAAOlI,MAAO,YAC7P5C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUI,MAAO,CAACC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,QAAU,QAAS+F,YAAY,UAAUnH,QAAS7B,KAAKJ,MAAMiM,kBAAmB9H,SAAUjD,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACa,SAAU,OAAQ2J,aAAc,OAAQhK,KAAMmK,IAAQpI,MAAO,YAClP5C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUI,MAAO,CAACC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,QAAU,QAAS+F,YAAY,kBAAkBnH,QAAS7B,KAAKJ,MAAMmM,yBAA0BhI,SAAUjD,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACa,SAAU,OAAQ2J,aAAc,OAAQhK,KAAMqK,IAAYtI,MAAO,YACrQ5C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAY,UAAUnH,QAAS7B,KAAKJ,MAAMqM,OAAO/J,KAAKlC,MAAO+D,SAAUjD,EAAAC,EAAAC,cAACkL,GAAAnL,EAAD,CAAQ2C,MAAOyI,uBAhB/E/H,IAAMC,WAwBd+G,gDCCAgB,+LAxBblH,OAAO7D,KAAKrB,KAAKJ,MAAMyM,UAAY,uDAIpC,OACCvL,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAACmC,EAAApC,EAAD,CACCM,KAAMrB,KAAKJ,MAAMyB,KACjB+B,SAAUpD,KAAKJ,MAAMa,WACrB4K,aAAc,CAACC,WAAY,OAAQC,SAAU,UAC7CC,aAAc,CAACF,WAAY,OAAQC,SAAU,OAC7ClI,eAAgBrD,KAAKJ,MAAM0M,cAE3BxL,EAAAC,EAAAC,cAACsC,EAAAvC,EAAD,CAAMwC,SAAS,EAAMC,aAAcxD,KAAKJ,MAAM0M,aAAc7I,cAAe,CAACnC,gBAAgB,mBAAoBoC,MAAM,SAAUC,UAAW,CAACC,MAAM,QAAQtC,gBAAgB,oBAAqBuC,sBAAuB,CAACH,MAAM,iBAAkBE,MAAO,SACrP9C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAY,iBAAiBnH,QAAS7B,KAAKJ,MAAM2M,wBAAyBxI,SAAUjD,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACI,OAAQ,OAAQkE,UAAU,MAAMzD,SAAU,QAASL,KAAM6K,IAAU9I,MAAO,YACjM5C,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAY,gBAAgBnH,QAAS7B,KAAKsH,kBAAkBpF,KAAKlC,MAAO+D,SAAUjD,EAAAC,EAAAC,cAACyL,GAAA1L,EAAD,CAAM2C,MAAOyI,aACzGrL,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAY,QAAQnH,QAAS7B,KAAKJ,MAAM8M,gBAAiB3I,SAAUjD,EAAAC,EAAAC,cAAC2L,GAAA5L,EAAD,CAAM2C,MAAOyI,uBAlBxE/H,IAAMC,WCuDduI,eA1DP,SAAAA,EAAYhN,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA4M,IACV/M,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA8M,GAAAzM,KAAAH,KAAMJ,KACDQ,MAAQ,CAACyM,aAAa,GAC3BhN,EAAKiN,QAAU,GAHLjN,yEAKRqH,EAAKW,GACP7H,KAAKQ,SAAS,CAACqM,aAAa,IAC5B7M,KAAK8M,QAAQ5F,GAAOW,0CAGpB7H,KAAKJ,MAAMmN,YAAY/M,KAAK8M,SAC5B9M,KAAKJ,MAAMyG,6CAELmD,EAAOtC,EAAK8F,GAClB,IAAIC,EAAUjN,KAAKJ,MAAMsN,SAAShG,GAClClH,KAAKJ,MAAMuN,cAAcF,GACzBjN,KAAKoN,UAAU,UAAWH,EAAQtE,uCAIlC,OACQ7H,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACY5E,KAAKJ,MADjB,CAEQ4G,aAAc,IACdhB,QAAS,GACTG,kBAAkB,EAClBU,KAAMrG,KAAKqN,cAAcnL,KAAKlC,MAC9BmF,SAAU,0BACVpD,MAAM,WACNgF,SACQjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,OACDpG,EAAAC,EAAAC,cAACsH,GAAAvH,EAAD,CACQwH,kBAAmB,gBACnBC,oBAAoB,EACpBC,eAAe,EACfhF,cAAe,CAACzB,SAAS,QACzB0G,WAAY,CAAC1G,SAAS,QACtBb,MAAO,CAACyC,MAAM,SACdiE,MAAO7H,KAAKJ,MAAMqN,QAClBrE,SAAU5I,KAAKmN,cAAcjL,KAAKlC,MAClC+G,SAAW/G,KAAKJ,MAAMsN,SAASrE,IAAI,SAACC,GAC5B,OAAQhI,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CACA8G,MAAOiB,EAAKH,KACZzB,IAAK4B,EAAKH,KACVK,YAAaF,EAAKwE,MAClBnM,MAAO,CAACa,SAAS,QACjBD,MAAO+G,EAAKO,kBAIpCvI,EAAAC,EAAAC,cAAC4E,GAAD,CAAejB,MAAM,sBAAsB9C,QAAS7B,KAAKJ,MAAM2N,mBAAoB9L,UAAW,kCAnDlH2C,IAAMC,qBCwDnBmJ,eAzDd,SAAAA,EAAY5N,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAwN,IAClB3N,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA0N,GAAArN,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEqN,SAAS,EAAOvD,YAAY,GAFzBrK,8EAIJ8H,GACY,UAAtBA,EAAEC,YAAYV,KAAiBlH,KAAK0N,iDAE7B/E,EAAMd,GAAO,IAAA8F,EACxB3N,KAAKQ,UAALmN,EAAA,GAAA7N,OAAA8N,GAAA,EAAA9N,CAAA6N,EACEhF,EAAOd,GADT/H,OAAA8N,GAAA,EAAA9N,CAAA6N,EAAA,WACyB,GADzBA,4CAIA,IACI1D,EAAQjK,KAAKI,MAAMyN,MAAQ7N,KAAKI,MAAMyN,MAAQ7N,KAAKJ,MAAMkO,SAASD,MAClEvD,EAFK,sJAEMC,KAAKC,OAAOP,GAAOQ,eAElC,GADAzK,KAAKQ,SAAS,CAAE0J,WAAYI,KACvBA,EACJ,MAAM,IAAII,MAAM,8DAIjB,IACC1K,KAAKmK,gBAGN,MAAOC,GACN,OAEDpK,KAAKJ,MAAM8N,WAAW1N,KAAKI,OAC3BJ,KAAK+N,kEAGL/N,KAAKJ,MAAMyG,OACXrG,KAAKQ,SAAS,CAAEiN,SAAS,EAAOvD,YAAY,qCAEpC,IAAAS,EAAA3K,KACR,OACCc,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAEC4G,aAAc,IACdhB,QAAS,GACTO,SAAU/F,KAAK+N,mBAAmB7L,KAAKlC,MACvC2F,kBAAkB,EAClBU,KAAMrG,KAAK0N,WAAWxL,KAAKlC,MAC3BmF,SAAU,yBACVpD,MAAM,UACNgF,SACCjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,OACRpG,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,YAAYC,oBAAoB,EAAMI,SAAY,SAACY,EAAMqB,GAAP,OAAoBF,EAAKqD,YAAY,OAAOnD,IAAWoD,aAAejO,KAAKJ,MAAMkO,UAAY9N,KAAKJ,MAAMkO,SAASI,KAAMvE,WAAY3J,KAAK4J,eAAe1H,KAAKlC,MAAOmO,yBAA0B,CAACnM,SAAS,QAASoM,wBAAyB,CAACpM,SAAS,QAASb,MAAO,CAACa,SAAS,UAC5VlB,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,gBAAgBC,oBAAoB,EAAMsC,UAAW9K,KAAKI,MAAM8J,WAAc,GAAK,wBAAyBtB,SAAY,SAACY,EAAMqB,GAAP,OAAoBF,EAAKqD,YAAY,QAAQnD,IAAWoD,aAAcjO,KAAKJ,MAAMkO,UAAY9N,KAAKJ,MAAMkO,SAASD,MAAOlE,WAAY3J,KAAK4J,eAAe1H,KAAKlC,MAAOmO,yBAA0B,CAACnM,SAAS,QAASoM,wBAAyB,CAACpM,SAAS,QAASb,MAAO,CAACa,SAAS,qBAlD7YoC,IAAMC,yCCO9BgK,GAAa,CAAC,OAAO,WAAW,SA8GrBC,eA5GZ,SAAAA,EAAY1O,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAsO,IACjBzO,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAwO,GAAAnO,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEmO,kBAAclG,GAFZxI,0EAIRmD,EAAMwL,EAASlO,EAAK4G,EAAKuH,GACnCzO,KAAKJ,MAAM8O,WAAW1L,EAAMyL,qCAG3BzO,KAAKJ,MAAM+O,WAAW3O,KAAKI,MAAMmO,aAAavL,MAC9ChD,KAAKQ,SAAS,CAAE+N,cAAc,uCAErB/E,EAAOxG,GAChBhD,KAAKQ,SAAS,CAAE+N,aAAcvL,0CAG9BhD,KAAKQ,SAAS,CAAE+N,kBAAclG,IAC9BrI,KAAKJ,MAAMyG,wCAEJ,IAAAsE,EAAA3K,KACP,OAAIA,KAAKJ,MAAMgP,MAET9N,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACA5E,KAAKJ,MADL,CAEJyG,KAAMrG,KAAK6O,YAAY3M,KAAKlC,MAC5BqD,eAAgBrD,KAAK6O,YAAY3M,KAAKlC,MACtC2F,kBAAkB,EAClBR,SAAU,mDACV2J,wBAAwB,EACxBC,UAAW,CAAEvN,QAAQ,qBACrBO,MAAM,QACNgF,SACEjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,MAClBpG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACwK,aAAa,QAA1B,wBAAwD3L,KAAKJ,MAAMgP,MAAMI,OAAzE,WACElO,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,cACLtJ,KAAKJ,MAAMgP,OAAO5O,KAAKJ,MAAMgP,MAAMI,OAAO,EAC3ClO,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACEC,SAAUlP,KAAKJ,MAAMgP,MAAMI,OAC3BvN,UAAW,8BACX0N,gBAAgB,EAChBC,QAAS,EACTC,WAAW,GACXC,KAAMtP,KAAKJ,MAAMgP,MACjBW,QAASvP,KACTwP,QAAS,CAAC,CAAEC,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,SACrF,CAAEH,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,SAC5E,CAAEH,OAAQ,QAASC,SAAU,QAAS9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,SAC9E,CAAEH,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAC3EC,KAAM,SAAAC,GAAG,MACe,UAAtBA,EAAIC,SAAS/M,KACdlC,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAACsH,GAAAvH,EAAD,CACCI,MAAO,CAACyC,MAAO,IAAIrC,OAAQ,GAAGwD,WAAY,GAAGiC,SAAU,WAAWhF,SAAU,QAC5EgO,UAAW,CAAChJ,SAAU,WAAWC,KAAM,IACvCgJ,eAAgB,CAACjJ,SAAU,WAAWC,IAAK,IAC3CiJ,UAAW,CAACnL,WAAW,OAAOxD,OAAO,QACrCsG,MAAOiI,EAAIC,SAASI,KACpBvH,SAAU+B,EAAK+D,WAAWxM,KAAKyI,EAAMmF,EAAIC,SAAS/M,KAAM8M,EAAIjI,QAE5DwG,GAAWxF,IAAI,SAAAC,GACf,OACChI,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CACCI,MAAO,CAAEa,SAAU,QACnB6F,MAAOiB,EACPE,YAAaF,EACb5B,IAAK4B,UAMVsH,WAAY,SAAChQ,EAAOiQ,EAASC,GAC3B,MAAO,CACLnP,MAAO,CACLoP,WAAaF,EAAQN,SAAS/M,QAAU5C,EAAMmP,QAAQnP,MAAMmO,cAAcnO,EAAMmP,QAAQnP,MAAMmO,aAAavL,MAAS,YAAc,IAEpInB,QAAS,SAAC8F,IACuC,IAA5C0G,GAAWmC,QAAQ7I,EAAE8I,OAAOC,cAAmBtQ,EAAMmP,QAAQoB,WAAWhJ,EAAG0I,EAAQN,eAK7F,MAEJjP,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,mBACPxI,EAAAC,EAAAC,cAAC4E,GAAD,CACEjE,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMiP,IAAalN,MAAM,sBAChD3B,MAAM,cACNiE,UAAWhG,KAAKI,MAAMmO,cAAgBvO,KAAKJ,MAAMwH,SAAYpH,KAAKJ,MAAMoD,OAAShD,KAAKI,MAAMmO,aAAavL,MAAyC,UAAjChD,KAAKI,MAAMmO,aAAavL,KACzInB,QAAS7B,KAAK6Q,QAAQ3O,KAAKlC,MAC3B2E,MAAO,WAET7D,EAAAC,EAAAC,cAAC8P,GAAA/P,EAAD,CACC4D,MAAM,oBACNxD,MAAO,CAACa,SAAS,OAAO+O,YAAa,OAAQnN,MAAM,QAAQxC,QAAQ,eAAe4P,cAAc,UAChGnP,QAAS7B,KAAKJ,MAAMqR,sBACpBC,QAASlR,KAAKJ,MAAMuI,wBAQvB,YAxGe/D,IAAMC,oHC2EjB8M,oLA7EX,OACErQ,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACM5E,KAAKJ,MADX,CAEE4G,aAAc,IACdhB,QAAS,GACTzD,MAAM,QACNoD,SAAU,8BACV4B,SACEjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,MACPpG,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cAAhB,wBACAX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,aAAhB,eACezB,KAAKJ,MAAMwR,2BAD1B,aACgE,IAC9DtQ,EAAAC,EAAAC,cAAA,KAAGqQ,KAAK,oCAAoC5P,UAAU,SAAtD,kBAIFX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,aAAhB,4DAGAX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cAAhB,kBACAX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAaN,MAAO,CAACsE,UAAU,QAAS6L,wBAAyB,CAACC,OAAQvR,KAAKJ,MAAM4R,mBACrG1Q,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cAAhB,qCACAX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAaN,MAAO,CAACsE,UAAU,SAA/C,gHAGA3E,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAaN,MAAO,CAACsE,UAAU,SAA/C,4CAC2C3E,EAAAC,EAAAC,cAAA,KAAGqQ,KAAK,iCAAiCZ,OAAO,SAASgB,IAAI,uBAA7D,QAD3C,KAGD3Q,EAAAC,EAAAC,cAAA,OAAKS,UAAW,SACfX,EAAAC,EAAAC,cAAA,KAAGqQ,KAAK,yBACPvQ,EAAAC,EAAAC,cAAA,OACE0Q,IAAKC,KACLC,IAAI,YACJ7P,MAAO,YACPN,UAAW,eAGdX,EAAAC,EAAAC,cAAA,KAAGqQ,KAAK,8BACPvQ,EAAAC,EAAAC,cAAA,OACE0Q,IAAKG,KACLD,IAAI,2BACJ7P,MAAO,2BACPN,UAAW,eAGdX,EAAAC,EAAAC,cAAA,KAAGqQ,KAAK,2BACPvQ,EAAAC,EAAAC,cAAA,OACE0Q,IAAKI,KACLF,IAAI,eACJ7P,MAAO,eACPN,UAAW,eAGbX,EAAAC,EAAAC,cAAA,KAAGqQ,KAAK,+BACRvQ,EAAAC,EAAAC,cAAA,OACE0Q,IAAKK,KACLH,IAAI,wDACJ7P,MAAO,wDACPN,UAAW,eAGZX,EAAAC,EAAAC,cAAA,KAAGqQ,KAAK,0BACPvQ,EAAAC,EAAAC,cAAA,OACE0Q,IAAKM,KACLJ,IAAI,cACJ7P,MAAO,cACPN,UAAW,2BApEF2C,IAAMC,WCCjB4N,oLAJb,OAAOnR,EAAAC,EAAAC,cAAC8C,EAAA/C,EAADjB,OAAA8E,OAAA,CAAUnD,UAAW,iBAAqBzB,KAAKJ,MAA/C,CAAsDqJ,cAAe,CAAC8H,YAAY,kBAF1D3M,IAAMC,0DC+CxB6N,eA9Cd,SAAAA,EAAYtS,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkS,IAClBrS,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoS,GAAA/R,KAAAH,KAAMJ,KACDQ,MAAQ,CAAE+R,SAAS,EAAOC,sBAAkB/J,GAF/BxI,uEAIX2J,GACPxJ,KAAKqS,gDAEGC,GAER,MADc,QACC/H,KAAK+H,oCAEZ9I,GACR,IAAIqB,EAAWrB,EAAM5B,YAAY6I,OAAO5I,MACpCgD,EAAW,MACX7K,KAAKuS,SAAS1H,IAA2B,KAAbA,KAC/BA,EAAyB,KAAbA,EAAmB,EAAI2H,OAAO3H,GAC1C7K,KAAKQ,SAAS,CAAC4R,iBAAiBvH,wCAGvBrB,GACoB,UAA1BA,EAAM5B,YAAYV,KAAiBlH,KAAKQ,SAAS,CAAE2R,SAAS,2CAGhEnS,KAAKQ,SAAS,CAAE2R,SAAS,EAAMC,iBAAkBpS,KAAKJ,MAAM6S,eAC5DC,SAASC,eAAe,SAAW3S,KAAKJ,MAAMgT,gBAAgBtJ,IAAIuJ,QAClEH,SAASC,eAAe,SAAW3S,KAAKJ,MAAMgT,gBAAgBtJ,IAAIwJ,+CAGlE9S,KAAKQ,SAAS,CAAE2R,SAAS,IACzBnS,KAAKJ,MAAMmT,kBAAkB/S,KAAMA,KAAKI,MAAMgS,mDAG9C,IAAI9Q,EAA+C,oCAA5BtB,KAAKJ,MAAMoT,aAAsD,YAA2C,YAA5BhT,KAAKJ,MAAMoT,aAA8B,QAAuC,oBAA5BhT,KAAKJ,MAAMoT,aAAsC,QAAU,oBAClNC,EAAyC,oCAA5BjT,KAAKJ,MAAMoT,aAAsD,QAAuC,YAA5BhT,KAAKJ,MAAMoT,aAA8BE,WAAuC,oBAA5BlT,KAAKJ,MAAMoT,aAAsCE,WAAU,QAC3M,OACAC,EAAA,qBAAKtR,QAAkC,aAAxB7B,KAAKJ,MAAMqD,SAA2B,KAAOjD,KAAK6B,QAAQK,KAAKlC,MAAOmB,MAAO,CAAC6F,SAAS,WAAWzB,KAAK,MAAM0B,IAAI,OAAQ7F,QAAUpB,KAAKJ,MAAMwT,QAAW,QAAU,SACjLD,EAAA,qBAAKpR,MAAO/B,KAAKJ,MAAMoT,aAAc7R,MAAO,CAACC,QAAYpB,KAAKI,MAAM+R,QAAW,OAAS,cAAe7Q,gBAAiBA,EAAiB+R,KAAK,IAAK3P,MAAMuP,EAAWK,WAAW,OAAQC,WAAW,SAAUC,eAAe,SAAUxR,SAAS,OAAQyR,aAAa,MAAOlS,OAAO,OAAQqC,MAAM,OAAQ2B,KAAK,MAAOmO,OAAO,wBACxT1T,KAAKJ,MAAM6S,aADb,KAEAU,EAAA,qBAAKhS,MAAO,CAACC,QAAYpB,KAAKI,MAAM+R,QAAW,cAAgB,OAAOkB,KAAK,KAAK/R,gBAAkB,UAAUgS,WAAa,OAAOC,WAAa,SAASC,eAAiB,SAASC,aAAe,MAAMlS,OAAO,OAAOqC,MAAM,OAAO2B,KAAK,QACpO4N,EAAA,uBAAO7J,GAAI,SAAWtJ,KAAKJ,MAAMgT,gBAAgBtJ,GAAIqK,OAAQ3T,KAAK4T,YAAY1R,KAAKlC,MAAO2J,WAAY3J,KAAK2J,WAAWzH,KAAKlC,MAAO4I,SAAU5I,KAAK4I,SAAS1G,KAAKlC,MAAOmB,MAAO,CAACG,gBAAkB,cAAcoS,OAAS,MAAMnS,OAAO,OAAOqC,MAAM,OAAO5B,SAAW,OAAOZ,QAAQ,cAAcwO,UAAY,SAASlM,MAAMwP,YAAUrL,MAAO7H,KAAKI,MAAMgS,4BAxCnUhO,2DCqCVyP,eArCd,SAAAA,EAAYjU,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6T,IAClBhU,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+T,GAAA1T,KAAAH,KAAMJ,KAIDQ,MAAQ,CAAE0T,mBAAmB,EAAOC,wBAAwB,EAAMC,cAAa,GALlEnU,wEAQlB,IAAIoU,EACAC,EAEAC,EAAcnU,KAAKJ,MAAMwU,YAAc,IAEvCC,EAAkBrU,KAAKJ,MAAM6S,aAAe0B,EAEhDF,EAAiBK,KAAKC,OAAyC,IAAlCvU,KAAKJ,MAAM4U,kBAA4B,EAAKxU,KAAKJ,MAAM4U,kBAAoBL,GAExG,IAAIM,EAAUzU,KAAKJ,MAAM4U,kBACrBE,EAA2BD,EAAUjC,OAAOxS,KAAKJ,MAAM6S,eAAkB6B,KAAKC,MAAME,KAAWzU,KAAKJ,MAAM6S,aAAgBjI,OAAOiK,GAASE,MAAM,EAAEnK,OAAOiK,GAASjE,QAAQ,KAAO,GAA2B8D,KAAKC,MAAME,GAE3NP,EAAmBD,EAAiB,KAAQjU,KAAKI,MAAM0T,kBAEvD,IAAIc,EAAwB5U,KAAKJ,MAAM4U,mBAAqBxU,KAAKJ,MAAM6S,aAAgB,EAAK4B,EAAiBJ,EAIzGY,EAAoB,IAAMV,EAAeF,GAF7CW,EAAwBA,EAAqB,EAAK,EAAIA,GAGtD,OACCzB,EAAA,qBAAK1R,UAAYzB,KAAKJ,MAAMwT,QAAW,cAAgB,sBAAuBjS,MAAO,CAAC2T,SAA4C,IAAlC9U,KAAKJ,MAAM4U,kBAA4B,MAAQ,IAC9IrB,EAAA,qBAAKpR,MAAO2S,EAA0B,cAAejT,UAAW,iCAAkCN,MAAO,CAACyC,MAAOqQ,EAAiB,OAAQC,EAAkBf,EAAA,kCAAsBuB,EAA0B,KAC5MvB,EAAA,qBAAKpR,MAAO,aAAe/B,KAAKJ,MAAM6S,aAAe,IAAKhR,UAAW,6BAA8BN,MAAO,CAACyC,MAAQ5D,KAAKJ,MAAMwT,QAAWwB,EAAuB,KAAO,SACvKzB,EAAA,qBAAK1R,UAAW,4BAA6BN,MAAO,CAACyC,MAAOiR,EAAmB,KAAMnR,MAAM,kBAAmBkM,UAAc5P,KAAKJ,MAAMwT,QAAW,KAAO,OAAQ2B,UAAc/U,KAAKJ,MAAMwT,QAAW,KAAO,WAAapT,KAAKJ,MAAMwT,QAAW,KAAO,0BAhChOhP,aC2EX4Q,qLApEJC,EAAS3U,GAClBN,KAAKJ,MAAMsV,gBAAgB5U,EAAK2U,6CAEfE,EAAYtK,GAC7B7K,KAAKJ,MAAMwV,cAAcD,EAAWvV,MAAMgT,gBAAiB,CAACH,aAAc5H,qCAElE,IAAAhL,EAAAG,KACR,OACCmT,EAAA,cAACA,EAAA,SAAD,KACCA,EAAA,cAACkC,GAAA,KAAD,CAAMlU,MAAO,CAACK,QAAQ,iBAAkB8T,UAAWtV,KAAKJ,MAAM2V,UAAWC,SAAU,SACjFxV,KAAKJ,MAAM6V,SAAS5M,IAAI,SAACC,GAEzB,IAAI4M,EAAU5M,EAAK4M,QAIflB,GAA8C,IAAzB1L,EAAK6M,gBAA0B,EAAKD,GAAW,GAAM5M,EAAK6M,eAAiB,EAAM7M,EAAK6M,eAAiBD,EAAW,IAAU,EAIjJ1C,EAA4B,IAAZ0C,EAAiB,mCAA4D,IAAvBlB,EAA4B,UAAa1L,EAAK6M,gBAAkB7M,EAAK8M,YAAe,kBAAoB,gBAClL,OACCzC,EAAA,cAACkC,GAAA,SAAD,CACCQ,WAAYhW,EAAKD,MAAMkW,OACtB3C,EAAA,2BAECA,EAAA,cAAC4C,GAAD,CACC5U,MAAO,CAACoE,KAAM,GACdkN,aAAc3J,EAAK2J,aACnBM,kBAAmBlT,EAAKkT,kBAAkB7Q,KAAKrC,GAC/C+S,gBAAiB9J,EACjBkK,aAAcA,EACdI,QAAyB,IAAftK,EAAK4M,QACfzS,SAAUpD,EAAKD,MAAMqD,WAGxB+F,YAAaF,EAAKwE,MAClB0I,cAAenW,EAAKD,MAAMkW,OACzB3C,EAAA,2BAEAA,EAAA,cAAC8C,GAAD,CACC7B,YAAa,IACb3B,aAAc3J,EAAK2J,aACnB+B,kBAAmBA,EACnBpB,QAAyB,IAAftK,EAAK4M,UAGjBxO,IAAK4B,EAAKQ,GACVzB,MAAOiB,EAAKwE,MACZ4I,gBAAiBrW,EAAKD,MAAMkW,OAC3B3C,EAAA,0BAEAA,EAAA,cAACgD,GAAApV,EAAD,CAAYqV,OAAO,EAAMC,gBAAgB,cAAcxU,QAAShC,EAAKyW,UAAUpU,KAAKrC,EAAMiJ,IACzFqK,EAAA,cAACoD,GAAAxV,EAAD,CAAc2C,MAAO8S,cAGvBvN,cAAe,CAACzH,QAAU3B,EAAKD,MAAMkW,OAAU,kBAAoB,qBACnE3U,MAAO,CAACsS,aAAa,MAAMzR,SAAS,OAAQ0B,MAAO,gCA1DhCU,aCsBZqS,8LAvBKnW,GAClBN,KAAKJ,MAAMW,oBAAmB,oCAG9B,OACCO,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAAA,OAAKS,UAAW,mBACfX,EAAAC,EAAAC,cAAC0V,GAAD,CACCjB,SAAUzV,KAAKJ,MAAM6V,SACrBP,gBAAiBlV,KAAKJ,MAAMsV,gBAC5BY,OAAQ9V,KAAKJ,MAAMkW,OACnBP,UAAW,QACXH,cAAepV,KAAKJ,MAAMwV,cAC1BnS,SAAUjD,KAAKJ,MAAMqD,WAEtBnC,EAAAC,EAAAC,cAAC4E,GAAD,CAAe/D,QAAS7B,KAAKJ,MAAM+W,iBAAkBlS,KAA6B,aAAtBzE,KAAKJ,MAAMqD,UAAyBjD,KAAKJ,MAAMgX,iBAAoBjV,KAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAOkV,MAAkB1V,MAAO,CAACkB,WAAWrC,KAAKJ,MAAMkX,WAAWlT,MAAM,OAAQ6B,UAAU,OAAQ1D,MAAO,kCAChQjB,EAAAC,EAAAC,cAAC4E,GAAD,CAAejB,MAAM,MAAM9C,QAAS7B,KAAKO,mBAAmB2B,KAAKlC,MAAOyE,OAASzE,KAAKJ,MAAMmX,UAAY/W,KAAKJ,MAAMmX,SAASC,YAAsC,aAAxBhX,KAAKJ,MAAMqD,UAA2B9B,MAAO,CAACkB,WAAWrC,KAAKJ,MAAMkX,WAAWlT,MAAM,OAAQ6B,UAAU,OAAQ1D,MAAO,kDAjBxOqC,IAAMC,0CCY/B4S,GAAkB,CAAC,OAAO,YAAY,YAAY,WAAW,YAAY,OA+M9DC,eA5Md,SAAAA,EAAYtX,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkX,IAClBrX,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoX,GAAA/W,KAAAH,KAAMJ,KACDQ,MAAQ,CAAC+W,oBAAmB,EAAOC,oBAAoB,GAF1CvX,kFAIAwX,EAAWC,EAAWC,IAEH,IAAjCD,EAAUH,oBAAgCnX,KAAKI,MAAM+W,qBACxDzE,SAASC,eAAe,eAAe9K,MAAQ7H,KAAKJ,MAAM4X,QAC1D9E,SAASC,eAAe,eAAeE,UAGH,IAAjCyE,EAAUF,oBAAgCpX,KAAKI,MAAMgX,qBACxD1E,SAASC,eAAe,mBAAmB9K,MAAQ7H,KAAKJ,MAAMmX,SAASU,YACvE/E,SAASC,eAAe,mBAAmBE,4CAIlClL,GACoB,KAA1BA,EAAEC,YAAY8P,SAA4C,KAA1B/P,EAAEC,YAAY8P,SACjDhF,SAASC,eAAehL,EAAEC,YAAY6I,OAAOnH,IAAIqO,sCAI5ChQ,GAAG,IAAAgD,EAAA3K,KACuB,gBAA5B2H,EAAEC,YAAY6I,OAAOnH,GACxBtJ,KAAKJ,MAAMgY,cAAcjQ,EAAE8I,OAAO5I,OAAOgQ,KAAK,WAC1ClN,EAAKnK,SAAS,CAAE2W,oBAAoB,MAIxCnX,KAAKJ,MAAMkY,kBAAkBnQ,EAAE8I,OAAO5I,OAAOgQ,KAAK,WACjDlN,EAAKnK,SAAS,CAAE4W,oBAAoB,wDAMlCpX,KAAKJ,MAAM4X,SACdxX,KAAKQ,SAAS,CAAC2W,oBAAoB,sDAIhCnX,KAAKJ,MAAM4X,SACdxX,KAAKQ,SAAS,CAAC4W,oBAAoB,mDAGd9W,GACrBN,KAAKJ,MAAMmY,UAAa/X,KAAKgY,oBAAqBhY,KAAKiY,kEAGxDjY,KAAKQ,SAAS,CAAEuX,WAAW,IAC3B/X,KAAKJ,MAAMqY,iEAIXjY,KAAKQ,SAAS,CAAEuX,WAAW,IAC3B/X,KAAKJ,MAAMoY,+DAGOxO,EAAMtC,EAAI8F,GAC5BhN,KAAKJ,MAAMsY,mBAAmBjB,GAAgB/P,iDAE1B5G,EAAK6X,GACzB,IAAIC,EAAiBD,EAAkB,OAAS,QAChDnY,KAAKJ,MAAMyY,qBAAqBD,uCAErB5O,EAAO2O,GAClBnY,KAAKJ,MAAM0Y,YAAYH,yCAGvBnY,KAAKJ,MAAM2Y,YAAYvY,KAAKJ,MAAM4Y,sCAGlC,OACC1X,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAaN,MAAO,CAACC,QAASpB,KAAKJ,MAAMyB,KAAO,QAAU,SACzEP,EAAAC,EAAAC,cAACyX,GAAA1X,EAAD,CAAO2X,OAAQ,EAAGjX,UAAU,kBAC3BX,EAAAC,EAAAC,cAACyX,GAAA1X,EAAD,CAAO2X,OAAQ,EAAGjX,UAAU,YACD,aAAxBzB,KAAKJ,MAAMqD,SAA2BnC,EAAAC,EAAAC,cAAA,QAAMS,UAAW,qBAAsBM,MAAO/B,KAAKJ,MAAM4X,QAAU,gBAAgB1W,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBP,MAAO,CAACuC,MAAO,QAASnC,OAAQ,OAAQkE,UAAU,MAAMkG,aAAc,MAAOrJ,YAAa,OAAQX,KAAMwH,MAAUnJ,KAAKJ,MAAM4X,SAAkB1W,EAAAC,EAAAC,cAAA,QAAMa,QAAS7B,KAAK2Y,wBAAwBzW,KAAKlC,MAAOyB,UAAW,qBAAsBM,MAAM,+BAA+B/B,KAAKJ,MAAM4X,SAC1Y,aAAxBxX,KAAKJ,MAAMqD,SAA2B,KAAOnC,EAAAC,EAAAC,cAAA,SAAOsI,GAAG,cAAcnI,MAAO,CAAC6F,SAAS,WAAY5F,QAAYpB,KAAKI,MAAM+W,mBAAsB,QAAU,OAAO5R,KAAK,OAAO0B,IAAI,OAAOrD,MAAM,QAAS8P,OAAO,uBAAwBjS,UAAW,qBAAsBkI,WAAY3J,KAAK2J,WAAWzH,KAAKlC,MAAO2T,OAAQ3T,KAAK2T,OAAOzR,KAAKlC,SAE1Uc,EAAAC,EAAAC,cAAC4X,GAAA,KAAD,CAAMC,sBAAuB,CAACC,OAAS,QAASrX,UAAW,OAAQoG,MAAO7H,KAAKJ,MAAMmZ,WACpFjY,EAAAC,EAAAC,cAAC4X,GAAA,IAAD,CAAKjU,MAAM,UAAUqU,SAAUhZ,KAAKJ,MAAMqZ,mBAAoBpR,MAAM,UAAU7B,WAAWhG,KAAKJ,MAAMmY,WACnGjX,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAhB,eAC0B,aAAxBzB,KAAKJ,MAAMqD,SAA2B,KAAOnC,EAAAC,EAAAC,cAACkY,GAAA,EAAD,CAAU9J,QAAQ,IAAI9F,GAAG,kBAAkBnI,MAAO,CAACC,QAAYpB,KAAKI,MAAMgX,mBAAsB,QAAU,QAAS3V,UAAW,qBAAsBkI,WAAY3J,KAAK2J,WAAWzH,KAAKlC,MAAO2T,OAAQ3T,KAAK2T,OAAOzR,KAAKlC,QAC1O,aAAxBA,KAAKJ,MAAMqD,SAA2BnC,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cAAeM,MAAO/B,KAAKJ,MAAMmX,SAASU,YAAanG,wBAAyB,CAACC,OAAQvR,KAAKJ,MAAMmX,SAASU,eAAkB3W,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cAAeI,QAAS7B,KAAKmZ,wBAAwBjX,KAAKlC,MAAOmB,MAAO,CAACC,QAAapB,KAAKI,MAAMgX,mBAAgC,OAAV,SAAmBrV,MAAM,gBAAgBuP,wBAAyB,CAACC,OAAQvR,KAAKJ,MAAMmX,SAASU,eAC7Z3W,EAAAC,EAAAC,cAAA,OAAKS,UAAW,8BAAhB,WACAX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cAAezB,KAAKJ,MAAMmX,SAASqC,YACnDtY,EAAAC,EAAAC,cAAA,OAAKS,UAAW,8BAAgCzB,KAAKJ,MAAMmX,SAASC,WAAc,mBAAqB,IACvGlW,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAAC6F,SAAS,WAAYC,IAAI,QAAS7F,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,OAAS,UACvGnC,EAAAC,EAAAC,cAAC8P,GAAA/P,EAAD,CACC4D,MAAM,UACNxD,MAAO,CAACa,SAAS,QACjBkP,QAASlR,KAAKJ,MAAMmX,SAASsC,QAC7BC,QAAStZ,KAAKqY,qBAAqBnW,KAAKlC,WAK5Cc,EAAAC,EAAAC,cAAC4X,GAAA,IAAD,CAAKjU,MAAM,WAAWqU,SAAUhZ,KAAKJ,MAAM2Z,oBAAqB1R,MAAM,WAAW7B,WAAWhG,KAAKJ,MAAMmY,WACtGjX,EAAAC,EAAAC,cAACwY,GAAD,CACC/D,SAAUzV,KAAKJ,MAAM6V,SACrBP,gBAAiBlV,KAAKJ,MAAMsV,gBAC5B3U,mBAAoBP,KAAKJ,MAAMW,mBAC/BwW,SAAU/W,KAAKJ,MAAMmX,SACrB3B,cAAepV,KAAKJ,MAAMwV,cAC1B0B,WAAY,OACZhB,QAAQ,EACRc,kBAAkB,EAClBD,iBAAkB3W,KAAKJ,MAAM+W,iBAC7B1T,SAAUjD,KAAKJ,MAAMqD,YAGvBnC,EAAAC,EAAAC,cAAC4X,GAAA,IAAD,CAAKjU,MAAM,iBAAiBqU,SAAUhZ,KAAKJ,MAAM6Z,cAAe5R,MAAM,kBACrE/G,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAhB,iBACAX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,eAAgBzB,KAAKJ,MAAMmX,SAAS2C,UACpD5Y,EAAAC,EAAAC,cAAA,OAAKS,UAAW,8BAAhB,mBACAX,EAAAC,EAAAC,cAACsH,GAAAvH,EAAD,CACCwH,kBAAmB,UACnBC,oBAAoB,EACpBC,eAAe,EACfzC,SAAWhG,KAAKJ,MAAM+Z,eAAyC,aAAxB3Z,KAAKJ,MAAMqD,SAClDQ,cAAe,CAACzB,SAAS,QACzB0G,WAAY,CAAC1G,SAAS,QACtBb,MAAO,CAACsE,UAAU,QAAQ7B,MAAM,SAChCiE,MAAO7H,KAAKJ,MAAMmX,SAAS6C,cAC3BhR,SAAU5I,KAAKkY,mBAAmBhW,KAAKlC,MACvC+G,SAAWkQ,GAAgBpO,IAAI,SAACC,GAC/B,OAAQhI,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CACP8G,MAAOiB,EACP5B,IAAK4B,EACLE,YAAaF,EACb3H,MAAO,CAACa,SAAS,cAIpBlB,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,OAAS,UACrEnC,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAhB,YACAX,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAO3B,KAAKJ,MAAMmY,UAAa8B,IAAW1Q,IAAQtH,QAAS7B,KAAK8Z,uBAAuB5X,KAAKlC,MAAO+B,MAAQ/B,KAAKJ,MAAMmY,UAAa,OAAS,gBAAiB5W,MAAO,CAAC4Y,OAAO,UAAWzX,YAAa,OAAQoB,MAAO,6BACpO5C,EAAAC,EAAAC,cAAA,OAAKS,UAAW,cAAeN,MAAO,CAACC,QAAS,iBAAmBpB,KAAKJ,MAAMmY,UAAa,wCAA0C,iBACrIjX,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAUpB,KAAKJ,MAAMmY,UAAa,QAAU,SACxDjX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,aAAaX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,eAAgBN,MAAO,CAAEuS,OAAQ,oCAAyC5S,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAhB,iCACvHX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,aAAaX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,eAAgBN,MAAO,CAAEuS,OAAQ,oCAAyC5S,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAhB,qCACvHX,EAAAC,EAAAC,cAAC4E,GAAD,CACCjE,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMqY,MAC7BjY,MAAM,yBACNF,QAAS7B,KAAKJ,MAAMqa,iBAAiB/X,KAAKlC,UAI7Cc,EAAAC,EAAAC,cAAA,OAAKS,UAAW,WAAYN,MAAO,CAACC,QAAQ,SAA5C,SACAN,EAAAC,EAAAC,cAAC8P,GAAA/P,EAAD,CACC4D,MAAM,aACNxD,MAAO,CAACa,SAAS,OAAOZ,QAAQ,QAChCkY,QAAStZ,KAAKsY,YAAYpW,KAAKlC,WAKnCc,EAAAC,EAAAC,cAACyX,GAAA1X,EAAD,CAAOU,UAAW,gBAChBX,EAAAC,EAAAC,cAAC4E,GAAD,CACCjE,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMuY,MAC7BnY,MAAM,yBACNF,QAAS7B,KAAKJ,MAAMua,sBAErBrZ,EAAAC,EAAAC,cAAC4E,GAAD,CACCjE,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMyY,MAC7BrY,MAAO,uCACPF,QAAS7B,KAAKJ,MAAMya,iBACpB5V,KAAuC,WAAhCzE,KAAKJ,MAAMqI,aAAa4B,OAEhC/I,EAAAC,EAAAC,cAAC4E,GAAD,CACCjE,KAAMb,EAAAC,EAAAC,cAACsZ,GAAAvZ,EAAD,CAAUI,MAAO,CAACI,OAAO,OAAOqC,MAAM,UAC5C7B,MAAM,eACNF,QAAS7B,KAAKJ,MAAM2a,wBAErBzZ,EAAAC,EAAAC,cAAA,OAAKS,UAAU,kBACfX,EAAAC,EAAAC,cAAC4E,GAAD,CACCjB,MAAM,OACN5C,MAAM,gCACN0C,KAA8B,aAAxBzE,KAAKJ,MAAMqD,SACjB9B,MAAO,CAACkB,WAAY,SACpBR,QAAS7B,KAAKuY,YAAYrW,KAAKlC,MAC/BgG,SAA2B,IAAjBhG,KAAKJ,MAAM4Y,IACrBgC,WAAW,IAEZ1Z,EAAAC,EAAAC,cAAC4E,GAAD,CACCjB,MAAM,MACN5C,MAAM,4BACN0C,KAA8B,aAAxBzE,KAAKJ,MAAMqD,SACjBpB,QAAS7B,KAAKJ,MAAM6a,UACpBzU,SAAUhG,KAAKJ,MAAM+Z,eAAiD,IAA/B3Z,KAAKJ,MAAM6V,SAASzG,QAAiBhP,KAAKJ,MAAMmY,UACvFyC,WAAW,eAnMIpW,IAAMC,gCCsCfqW,eAnDd,SAAAA,EAAY9a,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0a,IAClB7a,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4a,GAAAva,KAAAH,KAAMJ,KACDQ,MAAQ,CACZua,YAAY,GAEb9a,EAAK+a,YAAc,GALD/a,wEAOVS,EAAKuK,GACT7K,KAAKJ,MAAMib,QAEd7a,KAAK4a,YAAc5a,KAAKJ,MAAMkV,QAC9B9U,KAAKJ,MAAMkb,cAAc9a,KAAKJ,MAAMib,MAAMvR,GAAIuB,0CAK3C7K,KAAKJ,MAAMib,QAEV7a,KAAKJ,MAAMkV,QAAU,EAExB9U,KAAK4I,cAASP,EAAW,GAGzBrI,KAAK4I,cAASP,EAAWrI,KAAK4a,iDAItBpR,GACVxJ,KAAKQ,SAAS,CACbma,YAAY,uCAIHnR,GACVxJ,KAAKQ,SAAS,CACbma,YAAY,qCAKb,OACC7Z,EAAAC,EAAAC,cAAA,OAAKG,MAAQnB,KAAKJ,MAAMuB,OACvBL,EAAAC,EAAAC,cAAA,OAAK+Z,aAAe/a,KAAKgb,WAAW9Y,KAAKlC,MAAQwD,aAAexD,KAAKib,WAAW/Y,KAAKlC,MAAQmB,MAAQ,CAAE6F,SAAU,WAAYpD,MAAO,QAASrC,OAAQ,QAAWQ,MAAQ,+CACvKjB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAA8B,IAAvB3B,KAAKJ,MAAMkV,QAAkBoG,IAAaC,IAAQha,MAAQ,CAAEuC,MAAO,aAAgB7B,QAAU7B,KAAKob,YAAYlZ,KAAKlC,QAC3Ic,EAAAC,EAAAC,cAACqa,GAAAta,EAAD,CAAQ8G,MAAQ7H,KAAKJ,MAAMkV,QAAUlM,SAAW5I,KAAK4I,SAAS1G,KAAKlC,MAAQmB,MAAQ,CAAEC,QAAUpB,KAAKI,MAAMua,WAAc,eAAiB,OAAQ/W,MAAO,QAASoD,SAAU,WAAYC,IAAK,MAAO1B,KAAM,QAAW+V,YAAc,CAAExC,OAAQ,kBA7C/M1U,IAAMC,WC0EzBkX,kMA3EUC,GAAW,IAC9BC,EAD8B5b,EAAAG,KAIlC,GAD4E,IAA9DA,KAAKJ,MAAM8b,KAAKC,OAAO3b,KAAKJ,MAAM8b,KAAKC,OAAO3M,OAAS,GACzD,CAEX,IAAI4M,EAAa5b,KAAKJ,MAAM8b,KAAKG,gBAE7BC,EAAoBC,gCAAsB/b,KAAKJ,MAAM8b,KAAMF,GAE3DQ,EAAchc,KAAKJ,MAAM8b,KAAKO,aAAaT,GAE3CU,EAAmBN,GAAcE,EAAqBK,MAAMC,MAAM,KAAM,CAC3EpN,OAAQ4M,IACN/S,IAAI2J,OAAOrS,KAAMqS,QAAU2J,MAAMC,MAAM,KAAM,CAC/CpN,OAAQ8M,IACNjT,IAAI2J,OAAOrS,KAAMqS,QAChB6J,EAAgBH,EAAgBlN,OACpCyM,EAAcS,EAAgBrT,IAAI,SAACC,GAElC,IAAIwT,EAASzc,EAAKD,MAAM8b,KAAKC,OAAO7S,EAAO,GAAKjJ,EAAKD,MAAM8b,KAAKC,OAAO7S,GAAQ,EAC3EyT,EAA+C,IAArC1c,EAAKD,MAAM8b,KAAKC,OAAO7S,EAAO,GAAY,YAAc,aAClE0T,EAAeF,EAAUzc,EAAKD,MAAM8b,KAAKC,OAAO7S,GAAQ,EAAK,MAAQjJ,EAAKD,MAAM8b,KAAKC,OAAO7S,EAAO,GAAKyT,EAAS1c,EAAKD,MAAM8b,KAAKC,OAAO7S,EAAO,GAAKyT,EACxJ,OAAOpJ,EAAA,qBAAKjM,IAAM4B,GAChBqK,EAAA,qBAAKjM,IAAM,SAAW4B,EAAO3H,MAAQ,CAAEG,gBAAiB0a,EAAYK,GAAevT,GAAOlF,MAAO,OAAQrC,OAAQ,OAAQmS,OAAQ,sBAAuBoF,OAAQ,MAAO1X,QAAS,cAAe4P,cAAe,SAE9MmC,EAAA,qBAAKhS,MAAQ,CAAEC,QAAS,cAAe4P,cAAe,MAAO3O,WAAY,MAAOL,SAAU,QAAWkF,IAAM,QAAU4B,GAClH0T,WAKNf,EAActI,EAAA,yBACbA,EAAA,qBAAKhS,MAAQ,CAAEG,gBAAiB,sBAAuBsC,MAAO,OAAQrC,OAAQ,OAAQmS,OAAQ,sBAAuBoF,OAAQ,MAAO1X,QAAS,cAAe4P,cAAe,SAE3KmC,EAAA,qBAAKhS,MAAQ,CAAEC,QAAS,cAAe4P,cAAe,MAAO3O,WAAY,MAAOL,SAAU,SAA1F,iCAUF,OALAyZ,EAActI,EAAA,yBACbA,EAAA,qBAAK1R,UAAY,YAAjB,kBACA0R,EAAA,yBAAQsI,GACRtI,EAAA,cAACsJ,GAAD,CAAqB5B,MAAQ7a,KAAKJ,MAAM8c,aAAe5B,cAAe9a,KAAKJ,MAAMkb,cAAehG,QAAS9U,KAAKJ,MAAM+c,2EAmBrH,OAboB3c,KAAKJ,MAAMgd,iBAC/BzJ,EAAA,yBACCA,EAAA,qBAAK1R,UAAY,YAAjB,mBACA0R,EAAA,qBAAKjM,IAAK,SAAU/F,MAAQ,CAAEG,gBAAiB,mBAAoBsC,MAAO,OAAQrC,OAAQ,OAAQmS,OAAQ,sBAAuBoF,OAAQ,MAAO1X,QAAS,cAAe4P,cAAe,SACvLmC,EAAA,qBAAKhS,MAAQ,CAAEC,QAAS,cAAe4P,cAAe,MAAO3O,WAAY,MAAOL,SAAU,QAAWkF,IAAM,gBAA3G,UACAiM,EAAA,yBACCA,EAAA,qBAAKjM,IAAK,cAAe/F,MAAQ,CAAEG,gBAAiB,kBAAmBsC,MAAO,OAAQrC,OAAQ,OAAQmS,OAAQ,sBAAuBoF,OAAQ,MAAO1X,QAAS,cAAe4P,cAAe,SAC3LmC,EAAA,qBAAKhS,MAAQ,CAAEC,QAAS,cAAe4P,cAAe,MAAO3O,WAAY,MAAOL,SAAU,QAAWkF,IAAM,qBAA3G,gBAEDiM,EAAA,cAACsJ,GAAD,CAAqB5B,MAAQ7a,KAAKJ,MAAMid,UAAY/B,cAAe9a,KAAKJ,MAAMkb,cAAehG,QAAS9U,KAAKJ,MAAMkd,sBAGlH,sCAKA,IAAIC,EAA+B/c,KAAKJ,MAAM8b,MAAQ1b,KAAKJ,MAAM8b,KAAKC,QAAU3b,KAAKJ,MAAM8b,KAAKF,UAAaxb,KAAKgd,uBAAuBhd,KAAKJ,MAAM8b,KAAKF,WAAarI,EAAA,0BAClK8J,EAA+Bjd,KAAKkd,0BACxC,OAAO/J,EAAA,yBACNA,EAAA,yBAAM4J,GACN5J,EAAA,qBAAKhS,MAAO,CAACsE,UAAU,SAAUwX,WAvEf7Y,aCkBN+Y,oLAZV,OACIhK,EAAA,qBAAK1R,UAAWzB,KAAKJ,MAAM6B,WAC1B0R,EAAA,cAAChM,GAAApG,EAAD,CAAMU,UAAU,OAAON,MAAO,CAACC,QAAyC,iBAA9BpB,KAAKJ,MAAMyK,QAAQ+S,QAA2D,gBAA9Bpd,KAAKJ,MAAMyK,QAAQ+S,OAA6B,SAAW,OAAQ7b,OAAQ,OAAQqC,MAAO,OAAQoN,cAAe,MAAOtN,MAAO,oBAAqBpB,YAAY,OAAQP,MAAO,oBACzQoR,EAAA,cAACzR,EAAA,EAAD,CAAiBC,KAAM0b,IAAelc,MAAO,CAACC,QAAyC,aAA9BpB,KAAKJ,MAAMyK,QAAQ+S,QAA0Bpd,KAAKJ,MAAMyK,QAAQiT,eAAe,SAAwB,OAAX,SAAmB5Z,MAAM,QAASpB,YAAY,OAAQP,MAAO,4BAClNoR,EAAA,cAACzR,EAAA,EAAD,CAAiBC,KAAMgB,IAAuBxB,MAAO,CAACC,QAAwC,mBAA9BpB,KAAKJ,MAAMyK,QAAQ+S,OAA+B,SAAW,OAAQ1Z,MAAM,QAASpB,YAAY,OAAQP,MAAO,oBAC5KoR,EAAA,cAACzR,EAAA,EAAD,CAAiBC,KAAM4b,IAAuBpc,MAAO,CAACuC,MAAM,MAAOtC,QAASpB,KAAKJ,MAAMyK,QAAQiT,eAAe,SAAW,SAAW,OAAShb,YAAY,OAAQP,MAAO/B,KAAKJ,MAAMyK,QAAQmT,OAC3LrK,EAAA,qBAAKhS,MAAO,CAACC,QAAS,UAAWkQ,wBAAyB,CAACC,OAAQvR,KAAKJ,MAAMyK,QAAQmT,gBATjFpZ,aC2BH+Y,oLA9BL,IAAAtd,EAAAG,KACJ+G,EAAW/G,KAAKJ,MAAM6d,SAAS5U,IAAI,SAACwB,EAASqT,GAChD,IAAIjc,EAAY,GAEhB,OAAQ4I,EAAQ+S,QACf,IAAK,gBACJtd,OAAO8E,OAAOyF,EAAS,CAAEmT,KAAMnT,EAAQmT,KAAKG,QAAQ,mBAAoB,YAAYA,QAAQ,+BAAgC,wBAAwBA,QAAQ,wBAAyB,iBAAiBA,QAAQ,mBAAoB,cAClO,MACD,IAAK,UACL,IAAK,YACJlc,EAAuB,IAAVic,EAAe,wBAA0B,mBACtD,MACD,IAAK,WACL,IAAK,iBACJjc,EAAY,oBACZ,MACD,QACCA,EAAY,qBAKd,OADI4I,EAAQiT,eAAe,UAAUxd,OAAO8E,OAAOyF,EAAS,CAAEmT,KAAMnT,EAAQuT,QACrEzK,EAAA,cAAC0K,GAAD,CAASxT,QAASA,EAASnD,IAAKwW,EAAO/D,cAAe9Z,EAAKD,MAAM+Z,cAAelY,UAAWA,MAEnG,OACC0R,EAAA,qBAAK7J,GAAG,MAAMyR,aAAc/a,KAAKJ,MAAMob,WAAYxX,aAAcxD,KAAKJ,MAAMqb,YAAalU,UA1B1E3C,kCCUd0Z,GAAQ,EAsMGC,eAnMd,SAAAA,EAAYne,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA+d,IAClBle,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAie,GAAA5d,KAAAH,KAAMJ,KACDQ,MAAQ,CAAE4d,eAAe,EAAOC,sBAAkB5V,EAAU6V,WAAW,UAF1Dre,kFAIAwX,EAAWC,GAM5B,IAAI6G,EAASzL,SAASC,eAAe,OACjCwL,IAAQA,EAAOC,UAAYD,EAAOE,cACnCre,KAAKJ,MAAM0e,YAAcjH,EAAUiH,WACtCte,KAAKue,gBAEFve,KAAKJ,OAASI,KAAKJ,MAAM+Z,eAAiBtC,IAAcA,EAAUsC,eAAe3Z,KAAKwe,aACtFnH,GAAaA,EAAUsC,eAAiB3Z,KAAKJ,QAAUI,KAAKJ,MAAM+Z,eAAe3Z,KAAKye,iDAE9EC,EAAOC,EAAI3P,GACpB,OAAQ,IAAImN,MAAMnN,EAAO,GAAG4P,KAAKD,GAAKD,GAAQ/J,OAAO3F,wCAE7C,IAAArE,EAAA3K,KACX8d,GAAU,EACP9d,KAAK6e,MAAQC,YAAY,WACxB,IAAIC,EAAUzK,KAAK0K,MAAMlB,GAAU,IAC/BmB,EAAUnB,GAAqB,GAAViB,EACxBG,EAAYvU,EAAKwU,aAAaJ,EAAQ,IAAI,GAAG,IAAIpU,EAAKwU,aAAaF,EAAQ,IAAI,GACnFtU,EAAKnK,SAAS,CAAC0d,WAAYgB,IAC3BpB,IAAoB,GACf,yCAIJsB,cAAcpf,KAAK6e,OACnB7e,KAAK6e,MAAQ,0CAEHQ,GACZrf,KAAKJ,MAAM0f,aAAaD,EAAUrf,KAAKJ,MAAM2f,0CAGnC/V,GACVxJ,KAAKQ,SAAS,CAAEwd,eAAe,uCAGrBxU,GACqB,eAA3BA,EAAMgW,cAAclW,IAAqBtJ,KAAKQ,SAAS,CAAEwd,eAAe,uCAGlEyB,GAEV,GADAA,EAAO/M,SAASC,eAAe8M,GAC3B/M,SAASgN,KAAKC,gBAAiB,CAClC,IAAMrD,EAAQ5J,SAASgN,KAAKC,kBAC5BrD,EAAMsD,kBAAkBH,GACxBnD,EAAMxJ,cAEF,GAAI5N,OAAO2a,aAAc,CAC7B,IAAMC,EAAY5a,OAAO2a,eACnBvD,EAAQ5J,SAASqN,cACvBzD,EAAM0D,mBAAmBP,GACzBK,EAAUG,kBACVH,EAAUI,SAAS5D,QAGnB6D,QAAQC,KAAK,uFAIP9f,GACPN,KAAKqgB,WAAW,OAChB/f,EAAImQ,OAAOoC,QACXH,SAAS4N,YAAY,gDAKjBtgB,KAAKI,MAAM6d,kBAAkBje,KAAKugB,oBAAelY,OAAWA,0CAIlDmB,EAAO6V,GACrBrf,KAAKQ,SAAS,CAAEyd,iBAAkBoB,IAC9BA,GAAUrf,KAAKsf,aAAaD,EAASmB,6CAIzC,OACC1f,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAM,QAAQrC,OAAO,QAASyF,SAAS,WAAW1B,MAAM,QAAQlE,QAAYpB,KAAKJ,MAAMyB,KAAO,QAAU,SACpHP,EAAAC,EAAAC,cAACyX,GAAA1X,EAAD,CAAO2X,OAAQ,EAAGjX,UAAU,qBAC3BX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,gBAAf,WACAX,EAAAC,EAAAC,cAAC4X,GAAA,KAAD,CAAMC,sBAAuB,CAACC,OAAS,QAASrX,UAAW,cAAeoG,MAAO7H,KAAKJ,MAAM6gB,iBAAkBnX,GAAG,eAChHxI,EAAAC,EAAAC,cAAC4X,GAAA,IAAD,CAAKjU,MAAM,SAASkD,MAAM,SAASmR,SAAUhZ,KAAKJ,MAAM8gB,mBACvD5f,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAC2f,GAAD,CACCjF,KAAM1b,KAAKJ,MAAM8b,KACjBgB,aAAe1c,KAAKJ,MAAM8c,aAC1BG,UAAY7c,KAAKJ,MAAMid,UACvBD,iBAAkB5c,KAAKJ,MAAMgd,iBAC7B9B,cAAe9a,KAAKJ,MAAMkb,cAC1B6B,sBAAuB3c,KAAKJ,MAAM+c,sBAClCG,mBAAoB9c,KAAKJ,MAAMkd,qBAEhChc,EAAAC,EAAAC,cAAC4E,GAAD,CACCjE,KAAMb,EAAAC,EAAAC,cAACsZ,GAAAvZ,EAAD,CAAUI,MAAO,CAACI,OAAO,OAAOqC,MAAM,UAC5C7B,MAAM,kBACNF,QAAS7B,KAAKJ,MAAMghB,yBACpBzf,MAAO,CAAE8F,IAAI,QAASD,SAAS,WAAY3E,WAAW,QACtDoC,UAAmC4D,IAA5BrI,KAAKJ,MAAM8c,iBAIrB5b,EAAAC,EAAAC,cAAC4X,GAAA,IAAD,CAAKjU,MAAM,YAAYkD,MAAM,YAAYmR,SAAUhZ,KAAKJ,MAAMihB,sBAC7D/f,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,iBAAiBnI,MAAO,CAACC,QAAapB,KAAKJ,MAAMkhB,WAAuB,OAAV,UACpE9gB,KAAKJ,MAAM0e,WAAWte,KAAKJ,MAAM0e,UAAUtP,OAAO,EACnDlO,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACCM,QAASvP,KACToQ,WAAY,SAAChQ,EAAOiQ,EAASC,EAAQyQ,GACnC,MAAO,CACNlf,QAAS,SAAC8F,GACRvH,EAAMmP,QAAQgR,eAAe5Y,EAAG0I,EAAQN,WAE1C5O,MAAO,CACLoP,WAAaF,EAAQN,SAASyQ,cAAgBpgB,EAAMmP,QAAQnP,MAAM6d,kBAAkB7d,EAAMmP,QAAQnP,MAAM6d,iBAAiBuC,YAAe,YAAc,IAExJze,MAAO,6BAGVN,UAAW,iCACX0N,gBAAgB,EAChBC,QAAS,EACTF,SAAUlP,KAAKJ,MAAM0e,UAAUtP,OAC/BK,WAAW,GACXC,KAAMtP,KAAKJ,MAAM0e,UACjB9O,QAAS,CAAC,CACRC,OAAQ,MACRC,SAAU,aACV9L,MAAM,GACN+L,YAAY,CAACC,UAAY,SACzB,CACAH,OAAQ,QACRC,SAAU,QACV9L,MAAM,GACN+L,YAAY,CAACC,UAAY,SACzB,CACAH,OAAQ,OACRC,SAAU,OACV9L,MAAM,GACN+L,YAAY,CAACC,UAAY,SACzB,CACAH,OAAQ,iBACRC,SAAU,iBACV9L,MAAM,GACN+L,YAAY,CAACC,UAAY,SACzB,CACAH,OAAQ,iBACRC,SAAU,iBACV9L,MAAM,IACN+L,YAAY,CAACC,UAAY,YAG3B,OAGH9O,EAAAC,EAAAC,cAAC4X,GAAA,IAAD,CAAKjU,MAAM,MAAMkD,MAAM,MAAMmR,SAAUhZ,KAAKJ,MAAMohB,eAAgB7f,MAAO,CAAEC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,OAAS,UACnInC,EAAAC,EAAAC,cAACigB,GAAD,CAAKxD,SAAUzd,KAAKJ,MAAM6d,SAAUnU,GAAG,MAAM0R,WAAYhb,KAAKgb,WAAW9Y,KAAKlC,MAAOib,WAAYjb,KAAKib,WAAW/Y,KAAKlC,MAAO2Z,cAAe3Z,KAAKJ,MAAM+Z,gBACvJ7Y,EAAAC,EAAAC,cAAA,OAAKS,UAAW,UAAWN,MAAO,CAACC,QAAYpB,KAAKJ,MAAM+Z,cAAgB,QAAU,SAApF,YAAwG3Z,KAAKI,MAAM8d,WAAnH,KACApd,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,aAAanI,MAAO,CAAC6F,SAAS,WAAWC,IAAI,QAAQ3B,MAAM,OAAO9D,QAAQ,SACjFV,EAAAC,EAAAC,cAAC4E,GAAD,CACCjE,KAAMb,EAAAC,EAAAC,cAACkgB,GAAAngB,EAAD,CAAWI,MAAO,CAACI,OAAO,OAAOqC,MAAM,UAC7C7B,MAAM,oBACNF,QAAS7B,KAAKmhB,QAAQjf,KAAKlC,MAC3ByE,KAAMzE,KAAKI,MAAM4d,gBAElBld,EAAAC,EAAAC,cAAC4E,GAAD,CACCjE,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMqY,MAC7BjY,MAAM,YACNF,QAAS7B,KAAKJ,MAAMwhB,SAASlf,KAAKlC,MAClCyE,KAAMzE,KAAKI,MAAM4d,mBAKrBld,EAAAC,EAAAC,cAAA,OAAKS,UAAU,gBAAgBN,MAAO,CAACC,QAASpB,KAAKJ,MAAM+Z,cAAiB,QAAU,QAAS5X,MAAM,gBACpGjB,EAAAC,EAAAC,cAACyX,GAAA1X,EAAD,CAAO2X,OAAQ,GACd5X,EAAAC,EAAAC,cAAA,OAAKS,UAAU,mBACfX,EAAAC,EAAAC,cAACmG,GAAApG,EAAD,CAAMU,UAAU,sBAAsBN,MAAO,CAACuC,MAAO,mCA1LlCU,IAAMC,WCuHlBgd,sLAhIHna,EAAKS,GACe,KAA1BA,EAAEC,YAAY8P,SAA4C,KAA1B/P,EAAEC,YAAY8P,UAEjD1X,KAAKshB,mBAAmBpa,EAAIS,GAE5B3H,KAAKJ,MAAMyG,wCAGLwB,GAAkB,IAAX9F,EAAWwf,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,GAAAA,UAAA,GAAH,GACtB,OAAOzgB,EAAAC,EAAAC,cAAA,OAAKe,MAAkB,KAAVA,EAAgBA,EAAQ8F,GAAQA,uCAGzCjI,GAEX,IAAI8D,EAAS1D,KAAKJ,MAAMqV,QAAQU,eAAiB3V,KAAKJ,MAAMqV,QAAQW,aAAmC,mBAAlBhW,EAAMkQ,IAAI5I,IAA4B,MAAQ,qBAE/Hsa,EAA+D,QAA/ChP,OAAO5S,EAAMkQ,IAAIjI,MAAM,KAAS4Z,QAAQ,IAAkB7hB,EAAMkQ,IAAIjI,MAAQ,EAAM,aAAe,GAErH,OADW/G,EAAAC,EAAAC,cAAA,OAAKe,MAAOnC,EAAMkQ,IAAIjI,MAAM,IAAU,OAAQ1G,MAAO,CAACuC,MAAMA,IAAS8G,OAAOgI,OAAO5S,EAAMkQ,IAAIjI,MAAM,KAAS4Z,QAAQ,IAAI9D,QAAQ,wBAAyB,KAAzJ,MAAiK7c,EAAAC,EAAAC,cAAA,QAAMG,MAAO,CAAC6P,cAAe,QAAShP,SAAU,YAAhD,KAAqEwf,yCAGpO5hB,GACb,OAAOI,KAAK0hB,QAAQ9hB,EAAMkQ,IAAI5I,IAAKtH,EAAMmQ,SAAS4R,iDAGhCza,EAAK5G,GACvB,IAAIuH,EAAQvH,EAAII,cAAckhB,UAC9B,GAAc,iBAAR1a,GAA4B2a,6BAAmBha,IAAsB,QAARX,GAAmBqL,mBAAS1K,GAAU,CACxG,IAAIia,EAAM,GACVA,EAAI5a,GAAOW,EACX7H,KAAKJ,MAAMwV,cAAcpV,KAAKJ,MAAMqV,QAAS6M,QAE7CC,MAAM,yDAGQniB,GACf,IAAIoiB,EACJ,OAAQpiB,EAAMkQ,IAAI5I,KACjB,IAAK,KACL,IAAK,QACL,IAAK,qBACJ8a,EAAOhiB,KAAK0hB,QAAQ9hB,EAAMkQ,IAAIjI,MAAOjI,EAAMmQ,SAAS4R,MACpD,MACD,IAAK,cAGL,IAAK,gBACJK,EAAOhiB,KAAK0hB,QAAQ9hB,EAAMkQ,IAAIjI,OAC9B,MACD,IAAK,YACJma,EAA6B,KAApBpiB,EAAMkQ,IAAIjI,OAAoC,OAApBjI,EAAMkQ,IAAIjI,MAAmB7H,KAAK0hB,QAAQ,gBAAiB,0CAA4C1hB,KAAK0hB,QAAQ9hB,EAAMkQ,IAAIjI,MAAO,2DACxK,MACD,IAAK,aACJma,GAA6B,IAArBpiB,EAAMkQ,IAAIjI,MAAgB7H,KAAK0hB,QAAQ,iBAAkB,uDAAyD1hB,KAAKiiB,YAAYriB,EAAOA,EAAMmQ,SAAS4R,MACjK,MACD,IAAK,iBACJK,EAAgC,aAAxBhiB,KAAKJ,MAAMqD,SAA2BnC,EAAAC,EAAAC,cAAA,WAAMpB,EAAMkQ,IAAIjI,OAAe/G,EAAAC,EAAAC,cAAA,OAAKkhB,iBAAe,EAACC,gCAA8B,EAACpgB,MAAM,gBAAgB4R,OAAQ3T,KAAKshB,mBAAmBpf,KAAKlC,KAAM,gBAAiB2J,WAAY3J,KAAK2J,WAAWzH,KAAKlC,KAAM,iBAAkBJ,EAAMkQ,IAAIjI,OACtR,MACD,IAAK,yBACJma,EAAgC,aAAxBhiB,KAAKJ,MAAMqD,SAA2BnC,EAAAC,EAAAC,cAAA,WAAMpB,EAAMkQ,IAAIjI,OAAe/G,EAAAC,EAAAC,cAAA,OAAKkhB,iBAAe,EAACC,gCAA8B,EAACpgB,MAAM,gBAAgB4R,OAAQ3T,KAAKshB,mBAAmBpf,KAAKlC,KAAM,OAAQ2J,WAAY3J,KAAK2J,WAAWzH,KAAKlC,KAAM,QAASJ,EAAMkQ,IAAIjI,OACpQ,MACD,IAAK,eACJma,EAAQpiB,EAAMkQ,IAAIjI,MAAS7H,KAAK0hB,QAAQ,MAAO,4DAA8D1hB,KAAK0hB,QAAQ,KAAM,oEAChI,MACD,IAAK,qBACJM,GAA6B,IAArBpiB,EAAMkQ,IAAIjI,MAAgB7H,KAAK0hB,QAAQ,iBAAkB,oCAAsC1hB,KAAKiiB,YAAYriB,GACxH,MACD,IAAK,sBACJoiB,GAA6B,IAArBpiB,EAAMkQ,IAAIjI,MAAgB7H,KAAK0hB,QAAQ,iBAAkB,oCAAsC1hB,KAAK0hB,QAAQ9hB,EAAMkQ,IAAIjI,OAC9H,MACD,IAAK,cAGL,IAAK,iBACJma,GAA6B,IAArBpiB,EAAMkQ,IAAIjI,MAAgB7H,KAAK0hB,QAAQ,iBAAkB,kCAAoC1hB,KAAKiiB,YAAYriB,GAKxH,OAAOoiB,mCAEC,IAAAniB,EAAAG,KACP,GAAIA,KAAKJ,MAAMqV,QAAQ,CACtB,IAAI3F,EAAM,GAOV,OALAtP,KAAKJ,MAAMwiB,mBAAmBC,QAAQ,SAACvZ,KAChCjJ,EAAKD,MAAMqV,QAAQqN,aAAexZ,EAAKyZ,YAAgB1iB,EAAKD,MAAMqV,QAAQqN,aAAexZ,EAAK0Z,aACnGlT,EAAKmT,KAAK,CAACvb,IAAK4B,EAAK5B,IAAKW,MAAOhI,EAAKD,MAAMqV,QAAQnM,EAAKH,MAAOgZ,KAAM7Y,EAAK6Y,QAE1E3hB,MAEFc,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,CAAc7C,MAAM,cACf/B,KAAKJ,MADV,CAEC4G,aAAc,IACdrB,SAAU,2CACVC,QAAS,IACTI,QAAS,IACTuB,SACCjG,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACCE,gBAAgB,EAChB1N,UAAYzB,KAAKJ,MAAMqV,QAAQqN,YAAe,sBAAwB,YACtElT,QAAS,EACTF,SAAUI,EAAKN,OACfM,KAAMA,EACND,WAAW,GACXG,QAAS,CAAC,CACRC,OAAQ,MACRC,SAAU,MACV9L,MAAM,IACN+L,YAAY,CAACC,UAAY,QACzBC,KAAM,SAAAjQ,GAAK,OAAIC,EAAK6iB,cAAc9iB,KAClC,CACA6P,OAAQ,QACRC,SAAU,QACV9L,MAAM,IACN+L,YAAY,CAACC,UAAY,QACzBC,KAAM,SAAAjQ,GAAK,OAAIC,EAAK8iB,gBAAgB/iB,MAGtCsH,IAAI,UAKR,OAAO,YA5HqB9C,IAAMC,qDCsJvBue,eA/Ib,SAAAA,EAAYhjB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA4iB,IAClB/iB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA8iB,GAAAziB,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEyiB,qBAAiBxa,GAFdxI,yEAKlBG,KAAKJ,MAAMkjB,cAAc9iB,KAAKI,MAAMyiB,gBAAgB7f,KAAMhD,KAAKI,MAAMyiB,gBAAgBla,MACrF3I,KAAKQ,SAAS,CAAEqiB,iBAAiB,oCAGF,IAA1B7iB,KAAKJ,MAAMmjB,aAAmE,IAA1C/iB,KAAKI,MAAMyiB,gBAAgBE,WAEnE/iB,KAAKJ,MAAMojB,iBAAiBnL,KAAK,WAChC7X,KAAKijB,gBACJ/gB,KAAKlC,OAGPA,KAAKijB,sDAKNjjB,KAAKJ,MAAMsjB,YAAYljB,KAAKI,MAAMyiB,gBAAgBla,KAAM3I,KAAKI,MAAMyiB,gBAAgB7f,MACnFhD,KAAK6O,6CAIL7O,KAAKJ,MAAMojB,iBAAiBnL,KAAK,WAChC7X,KAAKJ,MAAMujB,uBACXnjB,KAAK6O,eACJ3M,KAAKlC,8CAGPA,KAAKJ,MAAMwjB,aAAapjB,KAAKI,MAAMyiB,gBAAgB7f,KAAMhD,KAAKI,MAAMyiB,gBAAgBla,wDAGpF3I,KAAKJ,MAAMyjB,0BACXrjB,KAAK6O,oDAEQrF,EAAOgO,GACpBxX,KAAKQ,SAAS,CAAEqiB,gBAAiBrL,0CAGjCxX,KAAKQ,SAAS,CAAEqiB,qBAAiBxa,IACjCrI,KAAKJ,MAAMyG,wCAEHtF,EAAG6B,EAAG0gB,GACd,OAAQ,IAAIC,KAAKxiB,EAAE4T,MAAM,EAAE,GAAG5T,EAAE4T,MAAM,EAAE,GAAG,EAAE5T,EAAE4T,MAAM,EAAE,GAAG5T,EAAE4T,MAAM,EAAE,IAAI5T,EAAE4T,MAAM,GAAG,IAAI5T,EAAE4T,MAAM,GAAG,KAAO,IAAI4O,KAAK3gB,EAAE+R,MAAM,EAAE,GAAG/R,EAAE+R,MAAM,EAAE,GAAG,EAAE/R,EAAE+R,MAAM,EAAE,GAAG/R,EAAE+R,MAAM,EAAE,IAAI/R,EAAE+R,MAAM,GAAG,IAAI/R,EAAE+R,MAAM,GAAG,KAAQ,GAAK,sCAErM7E,GACX,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAAS1G,aAAcyG,EAAIC,SAAS1G,gDAEvIyG,GACV,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAASpH,MAAOmH,EAAIC,SAASpH,uCAGzI,IAAI6a,EAAe,GAOnB,OALCA,EADG,CAAC,QAAS,YAAYC,SAASzjB,KAAKJ,MAAMqD,UAC9B,CAAC,CAAEwM,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,SAAY,CAAEH,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK0jB,WAAWxhB,KAAKlC,OAAS,CAAEyP,OAAQ,cAAeC,SAAU,cAAe9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK2jB,YAAYzhB,KAAKlC,OAAS,CAAEyP,OAAQ,OAAQC,SAAU,aAAc9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUgU,WAAY5jB,KAAK6jB,SAAS3hB,KAAKlC,QAGtd,CAAC,CAAEyP,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK0jB,WAAWxhB,KAAKlC,OAAS,CAAEyP,OAAQ,cAAeC,SAAU,cAAe9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK2jB,YAAYzhB,KAAKlC,OAAS,CAAEyP,OAAQ,OAAQC,SAAU,aAAc9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUgU,WAAY5jB,KAAK6jB,SAAS3hB,KAAKlC,QAE3YA,KAAKJ,MAAMkkB,SAEdhjB,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACI5E,KAAKJ,MADT,CAGAwG,QAAkC,aAAxBpG,KAAKJ,MAAMqD,SAA2B,mBAAqB,OACrEoD,KAAMrG,KAAK+jB,KAAK7hB,KAAKlC,MACrB+F,SAAU/F,KAAK6O,YAAY3M,KAAKlC,MAChCsG,YAAatG,KAAKI,MAAMyiB,gBACxBld,kBAAkB,EAClBR,SAAU,qCACV2J,wBAAwB,EACxBC,UAAW,CAAEvN,QAAQ,qBACrBO,MAAM,WACNgF,SACCjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,MACnBpG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACwK,aAAa,QAA1B,wBAAwD3L,KAAKJ,MAAMkkB,SAAS9U,OAA5E,cACClO,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,iBACPxI,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACEC,SAAWlP,KAAKJ,MAAMkkB,SAAS9U,OAChCvN,UAAW,8BACX0N,gBAAgB,EAChBC,QAAS,EACTC,WAAW,GACXC,KAAMtP,KAAKJ,MAAMkkB,SACjBvU,QAASvP,KACTwP,QAASgU,EACTpT,WAAY,SAAChQ,EAAOiQ,EAASC,GAC5B,MAAO,CACNnP,MAAO,CACNoP,WAAcF,EAAQN,SAAS/M,QAAU5C,EAAMmP,QAAQnP,MAAMyiB,iBAAiBziB,EAAMmP,QAAQnP,MAAMyiB,gBAAgB7f,OAASqN,EAAQN,SAASpH,QAAUvI,EAAMmP,QAAQnP,MAAMyiB,iBAAiBziB,EAAMmP,QAAQnP,MAAMyiB,gBAAgBla,MAAU,YAAc,IAExP9G,QAAS,SAAC8F,GACTvH,EAAMmP,QAAQyU,cAAcrc,EAAG0I,EAAQN,gBAM3CjP,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,kBAAkBnI,MAAO,CAACC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,OAAS,UAC5FnC,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,iBAC/C9hB,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMuiB,MAC7BniB,MAAM,cACNF,QAAS7B,KAAKmkB,KAAKjiB,KAAKlC,MACxB2E,MAAO,QAER7D,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,uBAC/C9hB,KAAMb,EAAAC,EAAAC,cAACojB,GAAArjB,EAAD,CAAQI,MAAO,CAACI,OAAO,OAAOqC,MAAM,UAC1C7B,MAAM,2DACNF,QAAS7B,KAAKqjB,wBAAwBnhB,KAAKlC,MAC3C2E,MAAO,WAER7D,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,gBAC/C9hB,KAAMb,EAAAC,EAAAC,cAACqjB,GAAAtjB,EAAD,CAAOI,MAAO,CAACI,OAAO,OAAOqC,MAAM,UACzC7B,MAAM,oBACNF,QAAS7B,KAAKojB,aAAalhB,KAAKlC,MAChCgG,UAAWhG,KAAKI,MAAMyiB,iBAAmB7iB,KAAKJ,MAAMwH,QACpDzC,MAAO,cAER7D,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,iBAC/C9hB,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMiP,IAAalN,MAAM,sBAChD3B,MAAM,iBACNiE,UAAWhG,KAAKI,MAAMyiB,iBAAmB7iB,KAAKJ,MAAMwH,QACpDvF,QAAS7B,KAAK6Q,QAAQ3O,KAAKlC,MAC3B2E,MAAO,gBAQN,YA3ImBP,IAAMC,WCiBpBigB,eAxBd,SAAAA,EAAY1kB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAskB,IAClBzkB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAwkB,GAAAnkB,KAAAH,KAAMJ,KACDQ,MAAQ,CACZmkB,eAAWlc,GAHMxI,0EAMR2J,EAAOqB,GACjB7K,KAAKJ,MAAM4kB,QAAQ3Z,6CAEFrB,EAAOqB,GACxB7K,KAAKJ,MAAM6kB,eAAe5Z,oCAG1B,OACCsI,EAAA,cAACA,EAAA,SAAD,KACCA,EAAA,qBAAKhS,MAAO,CAACwK,aAAa3L,KAAKJ,MAAM8kB,gBACpCvR,EAAA,cAAC5J,GAAAxI,EAAD,CAAW+J,WAAoC,IAAzB9K,KAAKI,MAAMmkB,UAAsB,iBAAmB,GAAI1c,MAAO7H,KAAKJ,MAAM+I,KAAMC,SAAU5I,KAAK2kB,WAAWziB,KAAKlC,MAAOuI,kBAAkB,+BAA+BC,oBAAoB,IACjN2K,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKJ,MAAMyJ,YAAaT,SAAU5I,KAAK4kB,kBAAkB1iB,KAAKlC,MAAO6kB,WAAW,EAAMC,KAAM,EAAGvc,kBAAkB,sCAAsCC,oBAAoB,aAlB3KpE,aC2GR2gB,sLA7FHvb,EAAOqB,GAEjB,IAAI/B,EAAO9I,KAAKJ,MAAMolB,MAAMna,GAE5B,GAAsB,OAAlB/B,EAAKmc,SAAkB,CAC1B,IAAIA,EAAWjlB,KAAKklB,qBAAqBpc,EAAKmc,UAC9CjlB,KAAKJ,MAAMiJ,IAAIsc,UAAUF,EAAU,CAAEG,OAAQ,SAASC,GAAO,OAAO,KAIrErlB,KAAKslB,cAAcxc,EAAKyc,oBAExBvlB,KAAKJ,MAAM4lB,WAAW1c,EAAKyc,iEAGPE,GACpB,IACIR,EADQS,EAAQ,IACLC,CAAMF,GAAKG,YAAY,GACtC,MAAO,CACN,CAACX,EAAS,GAAG,GAAIA,EAAS,GAAG,IAC7B,CAACA,EAAS,GAAG,GAAIA,EAAS,GAAG,2CAKjBY,GACb7lB,KAAK6lB,gBAAkBA,EACTH,EAAQ,IACtBI,CAAQ,6BAA+B9lB,KAAKJ,MAAMmmB,WAAa,IAAMF,EAAkB,sBAAwB3gB,OAAO8gB,YAAc,UAAWhmB,KAAKimB,eAAe/jB,KAAKlC,8CAG1JoK,EAAK8b,IACLA,GAA0B,MAAnBA,EAAIC,WA8BxBhG,QAAQiG,IAAI,oCAzByB,QAFfpmB,KAAKJ,MAAMiJ,IAAIwd,WAAWC,OAAOtmB,KAAKJ,MAAMiJ,IAAIwd,WAAWC,OAAOtX,OAAS,GAAG1F,GAEhFid,OAAO,EAAG,IAC7BvmB,KAAKJ,MAAMiJ,IAAI2d,YAAYxmB,KAAKJ,MAAMiJ,IAAIwd,WAAWC,OAAOtmB,KAAKJ,MAAMiJ,IAAIwd,WAAWC,OAAOtX,OAAS,GAAG1F,IAGtGtJ,KAAKJ,MAAMiJ,IAAI4d,UAAUzmB,KAAKJ,MAAMmmB,aACvC/lB,KAAKJ,MAAMiJ,IAAI6d,aAAa1mB,KAAKJ,MAAMmmB,YAGxC/lB,KAAKJ,MAAMiJ,IAAI8d,UAAU,WAAY,CACpC9c,KAAM,SACN+c,IAAK,YAAc5mB,KAAKJ,MAAMmmB,WAAa,IAAM/lB,KAAK6lB,kBAGvD7lB,KAAKJ,MAAMiJ,IAAIge,SAAS,CACvBvd,GAAMtJ,KAAK6lB,gBACXhc,KAAQ,OACRid,OAAU9mB,KAAKJ,MAAMmmB,WACrBgB,eAAgB/mB,KAAK6lB,gBACrBmB,MAAS,CACRC,aAAc,OACdC,eAAgB,wCAUnB,OACC/T,EAAA,cAACA,EAAA,SAAD,KACCA,EAAA,cAAC7K,GAAAvH,EAAD,CACA6H,SAAU5I,KAAKwlB,WAAWtjB,KAAKlC,MAC/B6H,MAAO7H,KAAKJ,MAAMunB,cAClB1jB,cAAe,CAACzB,SAAS,QACzB0G,WAAY,CAAC1G,SAAS,QACtBuG,kBAAkB,4BAClBC,oBAAoB,EACpBrH,MAAO,CAACyC,MAAM5D,KAAKJ,MAAMgE,MAAOoN,cAAc,WAC5ChR,KAAKJ,MAAMolB,MAAMnc,IAAI,SAACC,GACvB,OAAOqK,EAAA,cAACrP,EAAA/C,EAAD,CACP8G,MAAOiB,EAAKyc,mBACZvc,YAAaF,EAAKwE,MAClBpG,IAAK4B,EAAKyc,mBACVpkB,MAAO,CAACa,SAAS,QACjByB,cAAe,CAACzB,SAAS,QACzB0G,WAAY,CAAC1G,SAAS,qBArFUoC,aC6BtBgjB,eAxCd,SAAAA,EAAYxnB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAonB,IAClBvnB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAsnB,GAAAjnB,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEinB,8BAA8B,GAF3BxnB,mFAKlB,IAAIgJ,EAAM,IAAIye,IAASC,IAAI,CAC1BC,UAAWxnB,KAAKynB,aAChBtmB,MAAO,qDACPumB,OAAQ,CAAC,EAAG,GACZC,KAAM,IAEP3nB,KAAKQ,SAAS,CAACqI,IAAKA,qCAGZ,IAAA8B,EAAA3K,KACR,OACCmT,EAAA,cAACA,EAAA,SAAD,KACCA,EAAA,qBAAK1R,UAAW,mBACf0R,EAAA,yBACCA,EAAA,qBAAKyU,IAAK,SAAAC,GAAE,OAAIld,EAAK8c,aAAeI,GAAIpmB,UAAU,iCAAiCN,MAAO,CAACyC,MAAM,QAAQrC,OAAO,QAASkE,UAAW,OAAOpD,WAAY,UACvJ8Q,EAAA,qBAAKhS,MAAO,CAAC6F,SAAU,WAAYC,IAAI,QAAS+J,cAAe,WAC9DmC,EAAA,cAAC2U,GAAD,CACCrkB,cAAe,CAACzB,SAAS,QACzB0G,WAAY,CAAC1G,SAAS,QACtBmlB,cAAennB,KAAKJ,MAAMmoB,GAC1Blf,IAAK7I,KAAKI,MAAMyI,IAChBkd,WAAY,WACZf,MAAOhlB,KAAKJ,MAAMooB,oBAClBxC,WAAYxlB,KAAKJ,MAAM4lB,WACvBxf,UAAWhG,KAAKI,MAAMinB,6BACtBzjB,MAAO,qBA/BmBQ,kCC+DnB6jB,eAzDd,SAAAA,EAAYroB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAioB,IAClBpoB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAmoB,GAAA9nB,KAAAH,KAAMJ,KACDQ,MAAQ,CAAE8nB,qBAAiB7f,GAFdxI,oFAKlBsoB,YAASC,aAAaC,oBAAqB,EAC3CF,YAASC,aAAaE,oBAAqB,wCAE9B9e,EAAOyL,GACpBjV,KAAKQ,SAAS,CAAE0nB,gBAAiBjT,0CAEpBzL,qCAGb,IAAM+e,EACLznB,EAAAC,EAAAC,cAACmV,GAAApV,EAAD,CACCqV,OAAO,EACPC,gBAAgB,eAEjBvV,EAAAC,EAAAC,cAACuV,GAAAxV,EAAD,CAAc2C,MAAO8S,cAIhBgS,EACL1nB,EAAAC,EAAAC,cAACynB,GAAA1nB,EAAD,CAAUwnB,kBAAmBA,GAC7BznB,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,aACAD,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUgB,MAAM,mBAAhB,QACAjB,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUgB,MAAM,mBAAhB,eAID,OACCjB,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAAA,OAAKS,UAAW,mBACfX,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAACqU,GAAA,KAAD,KACErV,KAAKJ,MAAM8oB,cAAc7f,IAAI,SAACC,GAC9B,OAAOhI,EAAAC,EAAAC,cAACqU,GAAA,SAAD,CACLiT,oBAAoB,EACrBtf,YAAaF,EAAKwE,MAClB0I,cAAelN,EAAKO,YACpBnC,IAAK4B,EAAKQ,GACVzB,MAAOiB,EAAKwE,MACZ4I,gBAAiBsS,OAKpB1nB,EAAAC,EAAAC,cAAC4E,GAAD,CACCjB,MAAM,SACN9C,QAAS7B,KAAKJ,MAAM+oB,2BAnDOvkB,IAAMC,WCwJxBukB,eA9Ib,SAAAA,EAAYhpB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA4oB,IACjB/oB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA8oB,GAAAzoB,KAAAH,KAAMJ,KACDQ,MAAQ,CACX8nB,qBAAiB7f,EACjBwgB,iBAAaxgB,GAJExI,yEAQjBG,KAAKJ,MAAMkpB,cAAc9oB,KAAKI,MAAM8nB,iBACpCloB,KAAKQ,SAAS,CAAC0nB,qBAAiB7f,iCAE7BmB,GACHxJ,KAAKQ,SAAS,CAAC4C,SAAUoG,EAAM9I,gBAC/BV,KAAKJ,MAAMmpB,mFAIX/oB,KAAKJ,MAAMmG,WAEX/F,KAAKJ,MAAMopB,yBAAyB,qDAIpChpB,KAAKqG,OAELrG,KAAKJ,MAAMqpB,4DAEAzf,EAAO6G,GAElB,GAAIrQ,KAAKJ,MAAMspB,uBAAwB,CAErC,GAAI1f,EAAM2f,SAAS,CAEjB,IAAIC,EAAcppB,KAAKqpB,uBAAuBrpB,KAAKI,MAAMyoB,YAAaxY,GAEtErQ,KAAKJ,MAAM0pB,eAAeF,QAE1BppB,KAAKJ,MAAM2pB,aAAalZ,EAAQN,SAAUvG,EAAM2f,SAAUnpB,KAAKI,MAAMyoB,aAEvE7oB,KAAKQ,SAAS,CAACqoB,YAAaxY,SAE5BrQ,KAAKQ,SAAS,CAAC0nB,gBAAiB7X,EAAQN,0DAKrB8Y,EAAaW,GAClC,IAAIJ,EAAcppB,KAAKJ,MAAM6pB,mBACzBC,EAAQb,EAAYnL,MAAQ8L,EAAQ9L,MAASmL,EAAYnL,MAAQ,EAAI8L,EAAQ9L,MAC7EiM,EAAQd,EAAYnL,MAAQ8L,EAAQ9L,MAAS8L,EAAQ9L,MAAQ,EAAImL,EAAYnL,MAWjF,OATsB1d,KAAKJ,MAAMgqB,YAAYjV,MAAM+U,EAAMC,GAEzCtH,QAAQ,SAACpN,GACnBmU,EAAY3F,SAASxO,EAAQ3L,IAC/B8f,EAAYS,OAAOT,EAAY5Y,QAAQyE,EAAQ3L,IAAI,GAEnD8f,EAAY3G,KAAKxN,EAAQ3L,MAGtB8f,+BAEJ9oB,GACCN,KAAKJ,MAAMspB,uBACblpB,KAAKJ,MAAMyG,OAEXrG,KAAK8pB,0DAGOxpB,GACdN,KAAKQ,SAAS,CACZ0nB,qBAAiB7f,IAEnBrI,KAAKJ,MAAMmG,4CAEJhF,EAAG6B,EAAG0gB,GACb,OAAQ,IAAIC,KAAKxiB,EAAE4T,MAAM,EAAE,GAAG5T,EAAE4T,MAAM,EAAE,GAAG,EAAE5T,EAAE4T,MAAM,EAAE,GAAG5T,EAAE4T,MAAM,EAAE,IAAI5T,EAAE4T,MAAM,GAAG,IAAI5T,EAAE4T,MAAM,GAAG,KAAO,IAAI4O,KAAK3gB,EAAE+R,MAAM,EAAE,GAAG/R,EAAE+R,MAAM,EAAE,GAAG,EAAE/R,EAAE+R,MAAM,EAAE,GAAG/R,EAAE+R,MAAM,EAAE,IAAI/R,EAAE+R,MAAM,GAAG,IAAI/R,EAAE+R,MAAM,GAAG,KAAQ,GAAK,kCAE3MoV,GACP/pB,KAAKJ,MAAMoqB,eAAeD,uCAEfja,GACX,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAAS1G,aAAcyG,EAAIC,SAAS1G,mDAEpIyG,GACb,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAM,oBAAjG,uCAEE,IAAA4I,EAAA3K,KACP,OAAIA,KAAKJ,MAAMgqB,YAEX9oB,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GAAkB5E,KAAKJ,MAAvB,CAA8BkP,wBAAyB,EAAQC,UAAY,CAAEvN,QAAS,qBAAwBO,MAAM,WAAWsE,KAAOrG,KAAKqG,KAAKnE,KAAKlC,MAAQ2F,iBAAkB3F,KAAKJ,MAAMspB,uBAAwB/jB,SAAU,qCAC1N4B,SAAWjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,OAClBpG,EAAAC,EAAAC,cAAA,OAAKG,MAAQ,CAAEwK,aAAc,QAA7B,uBACG,IAAM3L,KAAKJ,MAAMgqB,YAAY5a,OADhC,cAEAlO,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,iBACNxI,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CAAYC,SAAWlP,KAAKJ,MAAMgqB,YAAY5a,OAASvN,UAAY,8BAAgC0N,gBAAiB,EAAQC,QAAU,EAAIE,KAAOtP,KAAKJ,MAAMgqB,YAC1Jra,QAAUvP,KAAOwP,QAAU,CAAC,CAAEC,OAAQ,OAAQC,SAAU,QAAS9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,SACzG,CAAEH,OAAQ,cAAeC,SAAU,cAAe9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK2jB,YAAYzhB,KAAKlC,OAChI,CAAEyP,OAAQ,OAAQC,SAAU,gBAAiB9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUgU,WAAY5jB,KAAK6jB,SAAS3hB,KAAKlC,OAC9H,CAAEyP,OAAQ,GAAI7L,MAAO,EAAG+L,YAAa,CAAEC,UAAa,UAAYC,KAAM7P,KAAKiqB,cAAc/nB,KAAKlC,QAAWoQ,WAAa,SAAChQ,EAAOiQ,EAASC,GACxI,MAAO,CACLnP,MAAO,CACLoP,WAAcnQ,EAAMmP,QAAQ3P,MAAMspB,wBAA0B9oB,EAAMmP,QAAQ3P,MAAM6pB,mBAAmBhG,SAASpT,EAAQN,SAASzG,MAAUlJ,EAAMmP,QAAQ3P,MAAMspB,wBAA0B9oB,EAAMmP,QAAQnP,MAAM8nB,iBAAmB9nB,EAAMmP,QAAQnP,MAAM8nB,gBAAgB5e,KAAO+G,EAAQN,SAASzG,GAAO,YAAc,IAE/SzH,QAAS,SAAC8F,GACRvH,EAAMmP,QAAQga,aAAa5hB,EAAG0I,MAIpC6Z,WAAY,SAAC9pB,EAAOiQ,EAAQC,GACpC,MAAO,CACNzO,QAAS,SAAC8F,GACa,KAAlB2I,EAAOb,QAAe9E,EAAKwf,QAAQ9Z,EAAQN,gBAM1CjP,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,mBACNxI,EAAAC,EAAAC,cAAA,OAAKG,MAAQ,CAAEC,QAAUpB,KAAKJ,MAAMmX,SAASC,WAAc,QAAU,QAAWvV,UAAY,YAA5F,2EACAX,EAAAC,EAAAC,cAAC4E,GAAD,CAAenB,KAAgC,aAAxBzE,KAAKJ,MAAMqD,WAA8BjD,KAAKJ,MAAMmX,SAASC,aAAiBhX,KAAKJ,MAAMspB,uBAA0BvnB,KAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAOuiB,MAAoBniB,MAAM,cAAciE,SAAWhG,KAAKJ,MAAMwH,QAAUvF,QAAU7B,KAAKmkB,KAAKjiB,KAAKlC,MAAQ2E,MAAQ,QAE1R7D,EAAAC,EAAAC,cAACmC,EAAApC,EAAD,CAASM,KAAOrB,KAAKJ,MAAMwqB,wBAA0BhnB,SAAWpD,KAAKI,MAAMgD,SAAWiI,aAAe,CAAEC,WAAY,OAAQC,SAAU,UAAaC,aAAe,CAAEF,WAAY,OAAQC,SAAU,OAAUlI,eAAiBrD,KAAKJ,MAAMyqB,cACrOvpB,EAAAC,EAAAC,cAACsC,EAAAvC,EAAD,CAAMwC,SAAU,GACdzC,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAY,iBAAiBjH,MAAM,sDAAsDF,QAAU7B,KAAKsqB,iBAAiBpoB,KAAKlC,QACxIc,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAY,gBAAgBhD,UAAW,IACjDlF,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAUiI,YAAY,yBAAyBhD,UAAW,MAG9DlF,EAAAC,EAAAC,cAAC4E,GAAD,CAAenB,MAASzE,KAAKJ,MAAMmX,SAASC,aAAiBhX,KAAKJ,MAAMspB,wBAAoD,aAAxBlpB,KAAKJ,MAAMqD,SAA2BtB,KAAMb,EAAAC,EAAAC,cAACojB,GAAArjB,EAAD,CAAQI,MAAO,CAACI,OAAO,OAAOqC,MAAM,UAAY7B,MAAM,mCAAmCiE,SAAWhG,KAAKJ,MAAMwH,QAAUvF,QAAU7B,KAAKuqB,0BAA0BroB,KAAKlC,MAAQ2E,MAAQ,WACvU7D,EAAAC,EAAAC,cAAC4E,GAAD,CAAenB,KAAgC,UAAxBzE,KAAKJ,MAAMqD,WAA2BjD,KAAKJ,MAAMmX,SAASC,aAAiBhX,KAAKJ,MAAMspB,uBAA0BvnB,KAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAOiP,IAAalN,MAAM,sBAAyB3B,MAAM,iBAAiBiE,cAA0CqC,IAA/BrI,KAAKI,MAAM8nB,iBAAiCloB,KAAKJ,MAAMwH,SAAapH,KAAKI,MAAM8nB,iBAA6D,iBAA1CloB,KAAKI,MAAM8nB,gBAAgBsC,WAAgC3oB,QAAU7B,KAAK6Q,QAAQ3O,KAAKlC,MAAQ2E,MAAQ,WAC7b7D,EAAAC,EAAAC,cAAC4E,GAAD,CAAenB,KAAOzE,KAAKJ,MAAMspB,uBAAyBvnB,KAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAO8oB,MAAgB1oB,MAAM,qBAAqBF,QAAU7B,KAAKJ,MAAM8qB,iBAAmB/lB,MAAQ,cACpL7D,EAAAC,EAAAC,cAAC4E,GAAD,CAAenB,KAAOzE,KAAKJ,MAAMspB,uBAAyBvnB,KAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAO0b,MAAqBtb,MAAM,sBAAsBF,QAAU7B,KAAKJ,MAAM+qB,kBAAoBhmB,MAAQ,oBAKvM,YA3IgBP,IAAMC,WCyMpBumB,eAhNd,SAAAA,EAAYhrB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA4qB,IACjB/qB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA8qB,GAAAzqB,KAAAH,KAAMJ,KAmBRirB,WAAa,WAAM,IACTC,EAAcjrB,EAAKO,MAAnB0qB,UACRjrB,EAAKW,SAAS,CACZsqB,UAAWA,EAAY,KAvBRjrB,EA0BnBkrB,WAAa,WAAM,IACTD,EAAcjrB,EAAKO,MAAnB0qB,UACJA,EAAY,GACdjrB,EAAKW,SAAS,CAAEsqB,UAAWA,EAAY,KA3BzCjrB,EAAKO,MAAQ,CACX4qB,MAAO,CAAC,OAAQ,iBAAkB,WAAY,SAC9CC,iBAAiB,EACjBC,UAAU,EACVJ,UAAW,EACXniB,KAAM,GACNU,YAAa,GACb0e,GAAI,GACJoD,oBAAoB,EACpBvB,YAAa,GACbH,mBAAoB,IAZL5pB,kFAeAwX,EAAWC,GACxBD,EAAU5B,WAAazV,KAAKJ,MAAM6V,UACpCzV,KAAKQ,SAAS,CAAEopB,YAAawB,KAAKzF,MAAMyF,KAAKC,UAAUrrB,KAAKJ,MAAM6V,0DAgBpEzV,KAAKQ,SAAS,CAAE2qB,oBAAoB,oCAE9BtjB,GACN7H,KAAKQ,SAAS,CAAEmI,KAAMd,2CAETA,GACb7H,KAAKQ,SAAS,CAAE6I,YAAaxB,qCAEtBA,GACP7H,KAAKQ,SAAS,CAAEunB,GAAIlgB,iCAEjBvH,GACHN,KAAKsrB,YACLtrB,KAAKJ,MAAMyG,2CAIXrG,KAAKQ,SAAS,CAAEsqB,UAAW,kDAG3B9qB,KAAKQ,SAAS,CAAE2qB,oBAAoB,qDAGb,IAAAxgB,EAAA3K,KACnB4pB,EAAc5pB,KAAKI,MAAMwpB,YAC7BA,EAAYvH,QAAQ,SAACpN,GACftK,EAAKvK,MAAMqpB,mBAAmBhG,SAASxO,EAAQ3L,IACjDxJ,OAAO8E,OAAOqQ,EAAS,CAAEsW,UAAU,IAGnCzrB,OAAO8E,OAAOqQ,EAAS,CAAEsW,UAAU,KAEpCvrB,MAEHA,KAAKQ,SAAS,CAAEopB,YAAaA,IAC7B5pB,KAAKwrB,2DAGMvW,GACDjV,KAAKI,MAAMqpB,mBACbhG,SAASxO,EAAQ3L,IAEvBtJ,KAAKyrB,cAAcxW,GAInBjV,KAAK0rB,WAAWzW,+CAKlB,IAAI0W,EAAM,GACV3rB,KAAKI,MAAMwpB,YAAYvH,QAAQ,SAACpN,GAC9B0W,EAAIlJ,KAAKxN,EAAQ3L,MAEnBtJ,KAAKspB,eAAeqC,8CAKpB3rB,KAAKQ,SAAS,CAAEipB,mBAAoB,4CAGvBkC,GACd3rB,KAAKQ,SAAS,CAAEipB,mBAAoBkC,0CAIvB1W,GACZ,IAAI0W,EAAM3rB,KAAKI,MAAMqpB,mBAGrB,OADAkC,EAAMA,EAAIC,OAAO,SAAS/jB,EAAO6V,EAAOmO,GAAO,OAAOhkB,IAAUoN,EAAQ3L,KACjE,IAAIwiB,QAAQ,SAASC,EAASC,GACnChsB,KAAKQ,SAAS,CAAEipB,mBAAoBkC,GAAO,WACzCI,OAEF7pB,KAAKlC,0CAIEiV,GACT,IAAI0W,EAAM3rB,KAAKI,MAAMqpB,mBAErBkC,EAAIlJ,KAAKxN,EAAQ3L,IACjBtJ,KAAKQ,SAAS,CAAEipB,mBAAoBkC,+CAIpC3rB,KAAKJ,MAAMqsB,iBAAiB,CAAEtjB,KAAM3I,KAAKI,MAAMuI,KAAMU,YAAarJ,KAAKI,MAAMiJ,YAAa6iB,mBAAoBlsB,KAAKI,MAAM2nB,GAAItS,SAAUzV,KAAKI,MAAMwpB,YAAYgC,OAAO,SAAC9iB,GAAW,OAAOA,EAAKyiB,aAC7LvrB,KAAKqG,wCAGE,IACCykB,EAAc9qB,KAAKI,MAAnB0qB,UAEFhkB,EAAU,CACdhG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAQuoB,SAAU,QAASrT,OAAQ,OAAOlJ,UAAU,WAKtE9O,EAAAC,EAAAC,cAAA,OAAKG,MAPY,CAAE2X,OAAQ,WAQzBhY,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACsE,UAAW,KACtB3E,EAAAC,EAAAC,cAAC4E,GAAD,CACEjB,MAAM,OACNqB,SAAwB,IAAd8kB,EACVjpB,QAAS7B,KAAK+qB,aAEhBjqB,EAAAC,EAAAC,cAAC4E,GAAD,CACEjB,MAAOmmB,IAAe9qB,KAAKI,MAAM4qB,MAAMhc,OAAO,EAAK,SAAW,OAC9DnN,QAASipB,IAAe9qB,KAAKI,MAAM4qB,MAAMhc,OAAO,EAAKhP,KAAKisB,iBAAiB/pB,KAAKlC,MAAQA,KAAK6qB,WAC7F/kB,SAAS,QAMf8E,EAAI9J,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,MACI,IAAd4jB,EAAkBhqB,EAAAC,EAAAC,cAACorB,GAAD,CAAUzjB,KAAM3I,KAAKI,MAAMuI,KAAMU,YAAarJ,KAAKI,MAAMiJ,YAAamb,QAASxkB,KAAKwkB,QAAQtiB,KAAKlC,MAAOykB,eAAgBzkB,KAAKykB,eAAeviB,KAAKlC,MAAO0kB,cAAe,UAAa,KACxL,IAAdoG,EAAkBhqB,EAAAC,EAAAC,cAACqrB,GAAD,CAClBC,qBAAsBtsB,KAAKJ,MAAM0sB,qBACjCtE,oBAAqBhoB,KAAKJ,MAAMooB,oBAChCxC,WAAYxlB,KAAKusB,SAASrqB,KAAKlC,MAAO+nB,GAAI/nB,KAAKI,MAAM2nB,GACrDyE,6BAA8BxsB,KAAKJ,MAAM4sB,+BAAkC,KAC7D,IAAd1B,EACAhqB,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACI,OAAO,UACnBT,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAhB,uBACAX,EAAAC,EAAAC,cAACwY,GAAD,CACC/D,SAAUzV,KAAKI,MAAMwpB,YAAYgC,OAAO,SAAC9iB,GAAQ,OAAOA,EAAKyiB,WAC7DhrB,mBAAoBP,KAAKO,mBAAmB2B,KAAKlC,MACjD8V,QAAQ,EACRc,kBAAkB,EAClBE,WAAY,SAGb,KACa,IAAdgU,EAAkBhqB,EAAAC,EAAAC,cAACyrB,GAAD,CACjB9D,gBAAiB3oB,KAAKJ,MAAM+oB,gBAC5BD,cAAe1oB,KAAKJ,MAAM8oB,gBACvB,MAEX,OACE5nB,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACAH,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACM5E,KAAKJ,MADX,CAEEmC,MAAO,cACPyE,aAAc,IACdO,SAAU6D,EACV9D,QAASA,EACTV,QAAS,SACTC,KAAMrG,KAAKqG,KAAKnE,KAAKlC,MACrB+F,SAAU/F,KAAKqG,KAAKnE,KAAKlC,MACzBqD,eAAgBrD,KAAKqG,KAAKnE,KAAKlC,MAC/BmF,SAAU,0CAEXrE,EAAAC,EAAAC,cAAC0rB,GAAD,CACCrrB,KAAMrB,KAAKI,MAAM+qB,mBACjB9kB,KAAMrG,KAAK2sB,uBAAuBzqB,KAAKlC,MACvC+F,SAAU/F,KAAKwrB,oBAAoBtpB,KAAKlC,MACxCirB,gBAAiBjrB,KAAKI,MAAM6qB,gBAC5BrB,YAAa5pB,KAAKI,MAAMwpB,YACxBe,kBAAmB3qB,KAAK2qB,kBAAkBzoB,KAAKlC,MAC/C0qB,iBAAkB1qB,KAAK0qB,iBAAiBxoB,KAAKlC,MAC7CspB,eAAgBtpB,KAAKspB,eAAepnB,KAAKlC,MACzCupB,aAAcvpB,KAAKupB,aAAarnB,KAAKlC,MACrCkpB,wBAAwB,EACxBO,mBAAoBzpB,KAAKI,MAAMqpB,mBAC/B1S,SAAU,CAACC,YAAW,GACtB/T,SAAU,iBA1McmB,IAAMC,WC2CtBuoB,sLA/CF9c,GACV,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAASpH,MAAOmH,EAAIC,SAASpH,uCAGzI,IAAI6a,EAAe,GAOnB,OALCA,EADG,CAAC,SAASC,SAASzjB,KAAKJ,MAAMqD,UAClB,CAAC,CAAEwM,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,SAAY,CAAEH,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK0jB,WAAWxhB,KAAKlC,QAGzM,CAAC,CAAEyP,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK0jB,WAAWxhB,KAAKlC,QAE9HA,KAAKJ,MAAMkkB,SAEdhjB,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACI5E,KAAKJ,MADT,CAGA+F,kBAAkB,EAClBmJ,wBAAwB,EACxBC,UAAW,CAAEvN,QAAQ,qBACrBO,MAAQ,oBAAsB/B,KAAKJ,MAAMitB,WACzCrmB,aAAc,IACdrB,SAAU,mCACV4B,SACCjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,OACnBpG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACwK,aAAa,QAAS,OAAS3L,KAAKJ,MAAMitB,WAAa,uCACnE/rB,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,uBACPxI,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACEC,SAAWlP,KAAKJ,MAAMkkB,SAAS9U,OAChCvN,UAAW,qBACX0N,gBAAgB,EAChBC,QAAS,EACTC,WAAW,GACXC,KAAMtP,KAAKJ,MAAMkkB,SACjBvU,QAASvP,KACTwP,QAASgU,SAQT,YA3CyBpf,IAAMC,WCgD1ByoB,+LAhDM,IAAAjtB,EAAAG,KACnBA,KAAK6I,IAAM,IAAIye,IAASC,IAAI,CAC3BC,UAAWxnB,KAAKynB,aAChBtmB,MAAO,qDACPumB,OAAQ,CAAC,EAAG,GACZC,KAAM,EACGoF,oBAAoB,IAExB/sB,KAAK6I,IAAImkB,GAAG,OAAQ,SAAC1sB,GACjBA,EAAImQ,OAAOoW,SAAS,CAChBvd,GAAM,gBACNO,KAAQ,OACRid,OAAU,CACNjd,KAAQ,SACR+c,IAAO,YAAc/mB,EAAKD,MAAMqtB,uBAAuBC,WAE3DnG,eAAgBlnB,EAAKD,MAAMqtB,uBAAuB1H,mBAClDyB,MAAS,CACLC,aAAc,uBACdkG,qBAAsB,4BAIlCntB,KAAKJ,MAAMwtB,mBAAmBptB,KAAKJ,MAAMqtB,uBAAuBC,WAAWrV,KAAK,SAACwV,GACvD,MAAlBA,EAAQC,QAAgBztB,EAAKD,MAAM2tB,aAAa1tB,EAAKgJ,IAAKwkB,EAAQC,UACvEE,MAAM,SAAC5P,GACN/d,EAAKD,MAAM6tB,YAAY7P,oDAMvB5d,KAAK6I,KAAK7I,KAAK6I,IAAI6kB,0CAGrB,IAAA/iB,EAAA3K,KACR,OACCmT,EAAA,cAACA,EAAA,SAAD,KACCA,EAAA,qBAAK1R,UAAW,2BACf0R,EAAA,yBACCA,EAAA,qBAAKyU,IAAK,SAAAC,GAAE,OAAIld,EAAK8c,aAAeI,GAAIpmB,UAAU,iCAAiCN,MAAO,CAACyC,MAAM,QAAQrC,OAAO,QAASkE,UAAW,OAAOpD,WAAY,oBAzCjI+B,aC0FbupB,eArFd,SAAAA,EAAa/tB,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2tB,IAClB9tB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6tB,GAAAxtB,KAAAH,KAAMJ,KACDQ,MAAQ,CAACwtB,UAAU,GAFN/tB,wEAKlBG,KAAKQ,SAAS,CAACotB,UAAW5tB,KAAKI,MAAMwtB,4CAGrC,IAAIC,EAAU7tB,KAAKJ,MAAMqtB,uBAAuBa,MAAShtB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBa,MAArE,KAA6EhtB,EAAAC,EAAAC,cAAA,QAAMS,UAAU,eAAhB,MAA8CX,EAAAC,EAAAC,cAAA,WAChL+sB,EAAgB/tB,KAAKJ,MAAMqtB,uBAAuBe,WAAcltB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBe,YAAmBltB,EAAAC,EAAAC,cAAA,WAC5J,OACCF,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECyD,eAAgBrD,KAAKJ,MAAMmG,SAC3BJ,kBAAkB,EAClB5D,MAAO/B,KAAKJ,MAAMqtB,uBAAuB3f,MACzCnI,SAAU,kDACVqB,aAAc,IACdO,SACCjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,OACnBpG,EAAAC,EAAAC,cAACitB,GAAD,CACChB,uBAAwBjtB,KAAKJ,MAAMqtB,uBACnCG,mBAAoBptB,KAAKJ,MAAMwtB,mBAC/BG,aAAcvtB,KAAKJ,MAAM2tB,aACzBE,YAAaztB,KAAKJ,MAAM6tB,cAEzB3sB,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBACdX,EAAAC,EAAAC,cAAA,aACCF,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIktB,QAAQ,IAAIzsB,UAAU,qBAA1B,iBAEDX,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIktB,QAAQ,IAAIzsB,UAAU,sBAAsBzB,KAAKJ,MAAMqtB,uBAAuB5jB,cAEnFvI,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,YACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBkB,UAEtErtB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,WACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBmB,SAEtEttB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,SACCosB,GAEF/sB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,WACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBzC,aAEtE1pB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,YACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBoB,gBAEtEvtB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,WACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBnG,SAEtEhmB,EAAAC,EAAAC,cAAA,MAAIG,MAAO,CAACC,QAASpB,KAAKI,MAAMwtB,SAAY,YAAc,SACzD9sB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,WACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBqB,SAEtExtB,EAAAC,EAAAC,cAAA,MAAIG,MAAO,CAACC,QAASpB,KAAKI,MAAMwtB,SAAY,YAAc,SACzD9sB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,eACCssB,GAEFjtB,EAAAC,EAAAC,cAAA,MAAIG,MAAO,CAACC,QAASpB,KAAKI,MAAMwtB,SAAY,YAAc,SACzD9sB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,SACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuB1H,qBAEtEzkB,EAAAC,EAAAC,cAAA,MAAIG,MAAO,CAACC,QAASpB,KAAKI,MAAMwtB,SAAY,YAAc,SACzD9sB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,cACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMqtB,uBAAuBC,aAGvEpsB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAO3B,KAAKI,MAAMwtB,SAAYW,IAAYC,IAAa3sB,QAAS7B,KAAKyuB,OAAOvsB,KAAKlC,MAAO+B,MAAQ/B,KAAKI,MAAMwtB,SAAY,oBAAsB,oBAAqBnsB,UAAW,aAAcN,MAAO,CAACa,SAAU,UAC9NlB,EAAAC,EAAAC,cAAA,iFA7E0BoD,IAAMC,WCgIxBqqB,eA5Hd,SAAAA,EAAY9uB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0uB,IAClB7uB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4uB,GAAAvuB,KAAAH,KAAMJ,KACDQ,MAAQ,CAACuuB,0BAAsBtmB,GAFlBxI,yEAKlBG,KAAKJ,MAAMgvB,mBAAmB5uB,KAAKI,MAAMuuB,qBAAqBpJ,oBAC9DvlB,KAAKQ,SAAS,CAAEmuB,sBAAsB,mCAGtC3uB,KAAKJ,MAAMivB,4BACX7uB,KAAK6O,yDAGL7O,KAAKJ,MAAM4sB,+BACXxsB,KAAK6O,yDAEarF,EAAOslB,GACzB9uB,KAAKQ,SAAS,CAAEmuB,qBAAsBG,0CAGtC9uB,KAAKQ,SAAS,CAAEmuB,0BAAsBtmB,IACtCrI,KAAKJ,MAAMyG,uCAEJ4mB,GACPjtB,KAAKJ,MAAMmvB,oBAAoB9B,sCAErBnd,GACV,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAASzC,MAAQ,KAAOwC,EAAIC,SAASwV,mBAAqB,KAAMzV,EAAIC,SAASzC,2CAE/KwC,GACX,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAAS1G,aAAcyG,EAAIC,SAAS1G,mDAEpIyG,GACb,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAASoe,SAAUre,EAAIC,SAASoe,4CAEnIre,GACV,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,QAAUub,MAAMlf,EAAIC,SAAS+d,OAAU,GAAKhe,EAAIC,SAAS+d,6CAEtIhe,GACb,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAM,oBAAjG,uCAEC,IACJyhB,EADI7Y,EAAA3K,KAUR,OARAwjB,EAAe,CACd,CAAE/T,OAAQ,OAAQC,SAAU,QAAS9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK0jB,WAAWxhB,KAAKlC,OAClH,CAAEyP,OAAQ,cAAeC,SAAU,cAAe9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAK2jB,YAAYzhB,KAAKlC,OAChI,CAAEyP,OAAQ,UAAWC,SAAU,UAAW9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAKivB,cAAc/sB,KAAKlC,OACzH,CAAEyP,OAAQ,SAAUC,SAAU,SAAU9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,SAC/E,CAAEH,OAAQ,aAAcC,SAAU,QAAS9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAKkvB,WAAWhtB,KAAKlC,OACvH,CAAEyP,OAAQ,GAAI7L,MAAO,EAAG+L,YAAa,CAAEC,UAAa,UAAYC,KAAM7P,KAAKiqB,cAAc/nB,KAAKlC,QAG9Fc,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAGCyG,KAAMrG,KAAK6O,YAAY3M,KAAKlC,MAC5B2F,kBAAkB,EAClBR,SAAU,2CACV2J,wBAAwB,EACxBC,UAAW,CAAEvN,QAAQ,qBACrBO,MAAM,iBACNgF,SACCjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,MACnBpG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACwK,aAAa,QAA1B,wBAAwD3L,KAAKJ,MAAMuvB,cAAcngB,OAAjF,oBACClO,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,iBACPxI,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACEC,SAAWlP,KAAKJ,MAAMuvB,cAAcngB,OACrCvN,UAAW,8BACX0N,gBAAgB,EAChBC,QAAS,EACTC,WAAW,GACXC,KAAMtP,KAAKJ,MAAMuvB,cACjB5f,QAASvP,KACTwP,QAASgU,EACTpT,WAAY,SAAChQ,EAAOiQ,GACnB,MAAO,CACNlP,MAAO,CACNoP,WAAaF,EAAQN,SAASzC,SAAWlN,EAAMmP,QAAQnP,MAAMuuB,sBAAwBvuB,EAAMmP,QAAQnP,MAAMuuB,qBAAqBrhB,OAAU,YAAc,IAEvJzL,QAAS,SAAC8F,GACTvH,EAAMmP,QAAQ6f,mBAAmBznB,EAAG0I,EAAQN,aAI/Cma,WAAY,SAAC9pB,EAAOiQ,EAAQC,GAC3B,MAAO,CACNzO,QAAS,SAAC8F,GACa,KAAlB2I,EAAOb,QAAe9E,EAAKwf,QAAQ9Z,EAAQN,gBAMpDjP,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,kBAAkBnI,MAAO,CAACC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,OAAS,UAC3FnC,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,0BAC/C9hB,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMuiB,MAC7BniB,MAAM,oBACNF,QAAS7B,KAAKmkB,KAAKjiB,KAAKlC,MACxB2E,MAAO,QAER7D,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,0BAC/C9hB,KAAMb,EAAAC,EAAAC,cAACojB,GAAArjB,EAAD,CAAQI,MAAO,CAACI,OAAO,OAAOqC,MAAM,UAC1C7B,MAAM,0DACNF,QAAS7B,KAAKqvB,iBAAiBntB,KAAKlC,MACpC2E,MAAO,WAER7D,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,0BAC/C9hB,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMiP,IAAalN,MAAM,sBAChD3B,MAAM,uBACNiE,UAAWhG,KAAKI,MAAMuuB,sBAAwB3uB,KAAKJ,MAAMwH,SAAYpH,KAAKI,MAAMuuB,sBAAuE,iBAA/C3uB,KAAKI,MAAMuuB,qBAAqBnE,WACxI3oB,QAAS7B,KAAK6Q,QAAQ3O,KAAKlC,MAC3B2E,MAAO,uBAnHmBP,IAAMC,WCHpCirB,GAAU,CAAC,SAAU,eACrBC,GAAW,CAAC,GAAI,GAAI,GAAI,GAAI,IAC5BC,GAAS,CAAC,UAAW,UA+GVC,eA5Gd,SAAAA,EAAY7vB,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAyvB,IACjB5vB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA2vB,GAAAtvB,KAAAH,KAAMJ,KACDQ,MAAQ,CAACsvB,KAAM,GAAItB,OAAO,GAAIuB,MAAM,GAAIC,aAASvnB,GAFrCxI,0EAIPS,EAAKuH,GACf,IAAI6nB,EAAO1vB,KAAKJ,MAAMiwB,UAAUhoB,GAAO6nB,KACnC,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAOjM,SAASiM,IACxD1vB,KAAKQ,SAAS,CAACkvB,UAAMrnB,IACrBrI,KAAKJ,MAAM6tB,YAAY,8EAAgFztB,KAAKJ,MAAMkwB,YAAc,oGAEhI9vB,KAAKQ,SAAS,CAACkvB,KAAM1vB,KAAKJ,MAAMiwB,UAAUhoB,GAAO6nB,4CAGtCpvB,EAAKuH,GACjB7H,KAAKQ,SAAS,CAAC4tB,OAAQkB,GAAQznB,yCAEpBvH,EAAKuH,GAChB7H,KAAKQ,SAAS,CAACmvB,MAAOH,GAAO3nB,2CAEhBvH,EAAKuH,GAClB7H,KAAKQ,SAAS,CAACovB,QAASL,GAAS1nB,oCAIjC7H,KAAKJ,MAAMmwB,0BAA0B/vB,KAAKI,MAAMsvB,KAAM1vB,KAAKI,MAAMguB,OAAQpuB,KAAKI,MAAMwvB,QAAS5vB,KAAKI,MAAMuvB,OAAO9X,KAAK,SAASmY,GAE5HhwB,KAAKJ,MAAMmG,YACV7D,KAAKlC,wCAGP,IAAIiwB,EAAgB,CAAErsB,MAAO,SAC7B,OACCuP,EAAA,cAAC3L,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECyG,KAAMrG,KAAKqG,KAAKnE,KAAKlC,MACrBqD,eAAgBrD,KAAKJ,MAAMmG,SAC3BO,YAActG,KAAKI,MAAMsvB,OAAQ1vB,KAAKI,MAAMguB,SAAUpuB,KAAKI,MAAMwvB,SAAU5vB,KAAKJ,MAAMwH,QACtFvB,YAAa,SACbF,kBAAkB,EAClBR,SAAU,8DACVpD,MAAM,oBACNyE,aAAc,IACdO,SACCoM,EAAA,cAACA,EAAA,SAAD,CAAgBjM,IAAI,OACnBiM,EAAA,yBACCA,EAAA,cAAC7K,GAAAvH,EAAD,CAAa0C,cAAe,CAAEzB,SAAU,QAAU0G,WAAY,CAAE1G,SAAU,QAAU4G,SAAU5I,KAAKkwB,WAAWhuB,KAAKlC,MAAO6H,MAAO7H,KAAKI,MAAMsvB,KAAMnnB,kBAAkB,mBAAmBC,oBAAoB,GACzMxI,KAAKJ,MAAMiwB,UAAUhnB,IAAI,SAAAC,GACzB,OACCqK,EAAA,cAACrP,EAAA/C,EAAD,CACCI,MAAO,CAAEa,SAAU,QACnB6F,MAAOiB,EAAK4mB,KACZ1mB,YAAaF,EAAKqnB,WAClBjpB,IAAK4B,EAAK4mB,UAKdvc,EAAA,cAACvN,GAAD,CAAejE,KAAMwR,EAAA,cAACzR,EAAA,EAAD,CAAiBC,KAAMyuB,MAAwBruB,MAAM,8EAA8EZ,MAAO,CAAC6F,SAAU,WAAYC,IAAK,OAAQ3B,MAAO,WAE3M6N,EAAA,yBACCA,EAAA,cAAC7K,GAAAvH,EAAD,CAAa0C,cAAe,CAAEzB,SAAU,QAAU0G,WAAY,CAAE1G,SAAU,QAAU4G,SAAU5I,KAAKqwB,aAAanuB,KAAKlC,MAAO6H,MAAO7H,KAAKI,MAAMguB,OAAQjtB,MAAO8uB,EAAe1nB,kBAAkB,SAASC,oBAAoB,GACzN8mB,GAAQzmB,IAAI,SAAAC,GACZ,OACCqK,EAAA,cAACrP,EAAA/C,EAAD,CACCI,MAAO,CAAEa,SAAU,QACnB6F,MAAOiB,EACPE,YAAaF,EACb5B,IAAK4B,QAMVqK,EAAA,yBACCA,EAAA,cAAC7K,GAAAvH,EAAD,CAAa0C,cAAe,CAAEzB,SAAU,QAAU0G,WAAY,CAAE1G,SAAU,QAAU4G,SAAU5I,KAAKswB,YAAYpuB,KAAKlC,MAAO6H,MAAO7H,KAAKI,MAAMuvB,MAAOxuB,MAAO8uB,EAAe1nB,kBAAkB,sBAAsBC,oBAAoB,GACpOgnB,GAAO3mB,IAAI,SAAAC,GACX,OACCqK,EAAA,cAACrP,EAAA/C,EAAD,CACCI,MAAO,CAAEa,SAAU,QACnB6F,MAAOiB,EACPE,YAAaF,EACb5B,IAAK4B,QAMVqK,EAAA,yBACCA,EAAA,cAAC7K,GAAAvH,EAAD,CAAa0C,cAAe,CAAEzB,SAAU,QAAU0G,WAAY,CAAE1G,SAAU,QAAU4G,SAAU5I,KAAKuwB,cAAcruB,KAAKlC,MAAO6H,MAAO7H,KAAKI,MAAMwvB,QAASzuB,MAAO8uB,EAAe1nB,kBAAkB,6BAA6BC,oBAAoB,GAC/O+mB,GAAS1mB,IAAI,SAAAC,GACb,OACCqK,EAAA,cAACrP,EAAA/C,EAAD,CACCI,MAAO,CAAEa,SAAU,QACnB6F,MAAOiB,EACPE,YAAaF,EAAO,OACpB5B,IAAK4B,mBAhGoB1E,0CC2DrBosB,eA5Dd,SAAAA,EAAY5wB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAwwB,IAClB3wB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA0wB,GAAArwB,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEgH,SAAS,EAAMqpB,QAAO,GACrC5wB,EAAK+I,SAAW/I,EAAK+I,SAAS1G,KAAdpC,OAAA4wB,GAAA,EAAA5wB,CAAAD,IAChBA,EAAK8wB,WAAa9wB,EAAK8wB,WAAWzuB,KAAhBpC,OAAA4wB,GAAA,EAAA5wB,CAAAD,IAJAA,uEAOX8H,GACP3H,KAAKQ,SAAS,CAACiwB,QAAO,qCAEd9oB,GACJA,EAAE8I,OAAOmgB,MAAM5hB,SAClBhP,KAAK2wB,WAAWhpB,EAAE8I,OAAOmgB,MAAM,IAE/Ble,SAASC,eAAe3S,KAAKsJ,IAAIzB,MAAQ,uCAIhCA,GACV7H,KAAKQ,SAAS,CAAE4G,SAAS,IACzB,IAAMwf,EAAM5mB,KAAKJ,MAAMixB,gBAAkB,kBACnCC,EAAW,IAAIC,SACrB/wB,KAAKgxB,SAAWnpB,EAAK,KACrBipB,EAASG,OAAO,QAASppB,GACzBipB,EAASG,OAAO,WAAYjxB,KAAKgxB,UACjCF,EAASG,OAAO,OAAQjxB,KAAKJ,MAAM+I,MACnCmoB,EAASG,OAAO,cAAejxB,KAAKJ,MAAMyJ,aAC1C6nB,eAAKtK,EAAKkK,EAAU,CAACK,gBAAiBnxB,KAAKJ,MAAMwxB,mBAAmBvZ,KAAK,SAASmY,GACjFhwB,KAAKqxB,gBAAgBrB,IACpB9tB,KAAKlC,+CAGQgwB,GACVhwB,KAAKJ,MAAM0xB,eAAetB,EAAS1gB,QACvCtP,KAAKQ,SAAS,CAAE4G,SAAS,IACzBpH,KAAKJ,MAAM2xB,YAAYvxB,KAAKgxB,WAE7BhxB,KAAKQ,SAAS,CAACiwB,QAAO,qCAItB,OADAzwB,KAAKsJ,GAAK,SAAWtJ,KAAKJ,MAAM4xB,UAE/B1wB,EAAAC,EAAAC,cAAA,YACCF,EAAAC,EAAAC,cAAA,OAAKS,UAAU,cAAcN,MAAO,CAACuC,MAAQ1D,KAAKI,MAAMqwB,OAAU,mBAAqB,uBAAwBzwB,KAAKJ,MAAM+E,OAC1H7D,EAAAC,EAAAC,cAAA,OAAKS,UAAU,mBACdX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,uBACdX,EAAAC,EAAAC,cAAA,SAAOywB,QAASzxB,KAAKsJ,IAAIxI,EAAAC,EAAAC,cAAC0wB,GAAA3wB,EAAD,CAAa4H,KAAK,OAAO5G,MAAM,yBAAyBZ,MAAO,CAAC4Y,OAAS,cAClGjZ,EAAAC,EAAAC,cAAA,SAAO6I,KAAK,OAAOjB,SAAU5I,KAAK4I,SAAU/G,QAAS7B,KAAK6B,QAAQK,KAAKlC,MAAO2xB,OAAO,OAAOxwB,MAAO,CAACC,QAAU,OAAQwC,MAAQ,QAAS0F,GAAItJ,KAAKsJ,MAEjJxI,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBACdX,EAAAC,EAAAC,cAAC0wB,GAAA3wB,EAAD,CAAa4H,KAAK,qBAAqB5G,MAAM,iBAAiBZ,MAAO,CAAEuC,MAAO,gBAAiBtC,QAAqC,KAAzBpB,KAAKJ,MAAMoxB,UAAoBhxB,KAAKJ,MAAMgyB,UAAa,QAAU,WAE7K9wB,EAAAC,EAAAC,cAAA,OAAKS,UAAU,uBAAuBN,MAAO,CAACyC,MAAM,UAAW5D,KAAKJ,MAAMoxB,WAE3ElwB,EAAAC,EAAAC,cAAC0wB,GAAA3wB,EAAD,CAAa4H,KAAK,OAAOkpB,MAAI,EAAC1wB,MAAO,CAACC,QAAYpB,KAAKI,MAAMgH,QAAU,eAAiB,OAAS/E,WAAa,iBAxDpF+B,IAAMC,WCmDrBytB,eArDd,SAAAA,EAAYlyB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8xB,IAClBjyB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgyB,GAAA3xB,KAAAH,KAAMJ,KACDQ,MAAQ,CAAC8rB,mBAAmB,GAAI6F,YAAa,GAAI1oB,YAAY,IAFhDxJ,0EAIR2J,EAAOqB,GACjB7K,KAAKQ,SAAS,CAAC0rB,mBAAoBrhB,8CAElBrB,EAAOqB,GACxB7K,KAAKQ,SAAS,CAAE6I,YAAawB,2CAEfmmB,GACdhxB,KAAKQ,SAAS,CAAEuxB,YAAaf,mCAG7B,IAAIgB,EAA2C,KAA3BhyB,KAAKI,MAAMiJ,YAAsB,iDAAmDrJ,KAAKI,MAAMiJ,YACnHrJ,KAAKJ,MAAMyG,KAAKrG,KAAKI,MAAM2xB,YAAa/xB,KAAKI,MAAM8rB,mBAAoB8F,GAAcna,KAAK,SAASmY,GAElGhwB,KAAKQ,SAAS,CAAC0rB,mBAAmB,GAAI6F,YAAa,GAAI1oB,YAAY,OACjEmkB,MAAM,SAASyE,uCAKlB,OACC9e,EAAA,cAAC3L,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECmC,MAAO,uBACPyE,aAAc,IACdO,SACCoM,EAAA,cAACA,EAAA,SAAD,CAAgBjM,IAAI,MACnBiM,EAAA,cAAC+e,GAAD,CACCrB,gBAAiB7wB,KAAKJ,MAAMixB,gBAC5BO,iBAAkBpxB,KAAKJ,MAAMwxB,iBAC7BQ,WAAW,EACXZ,SAAUhxB,KAAKI,MAAM2xB,YACrBR,YAAavxB,KAAKmyB,eAAejwB,KAAKlC,MACtCsxB,eAAgBtxB,KAAKJ,MAAM0xB,eAC3B3sB,MAAM,cAEPwO,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAM8rB,mBAAoBtjB,SAAU5I,KAAK2kB,WAAWziB,KAAKlC,MAAOuI,kBAAkB,OAAOC,oBAAoB,IACpI2K,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAMiJ,YAAaT,SAAU5I,KAAK4kB,kBAAkB1iB,KAAKlC,MAAOmB,MAAO,CAACC,QAAQ,SAAUyjB,WAAW,EAAMC,KAAM,EAAGvc,kBAAkB,sBAAsBC,oBAAoB,KAGzM7C,kBAAkB,EAClBU,KAAMrG,KAAKqG,KAAKnE,KAAKlC,MACrBsG,WAAYtG,KAAKJ,MAAMwH,QACvB/D,eAAgBrD,KAAKJ,MAAMmG,SAAS7D,KAAKlC,MACzCmF,SAAU,6DAhDyBf,aCyExBguB,eAtEd,SAAAA,EAAaxyB,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAoyB,IAClBvyB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAsyB,GAAAjyB,KAAAH,KAAMJ,KACDQ,MAAQ,CAACwtB,UAAU,GAFN/tB,wEAKlBG,KAAKQ,SAAS,CAACotB,UAAW5tB,KAAKI,MAAMwtB,4CAGrC,OACC9sB,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECyD,eAAgBrD,KAAKJ,MAAMmG,SAC3BJ,kBAAkB,EAClB5D,MAAO/B,KAAKJ,MAAMmqB,iBAAiBzc,MACnCnI,SAAU,4CACVqB,aAAc,IACdO,SACCjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,OACnBpG,EAAAC,EAAAC,cAACitB,GAAD,CACChB,uBAAwBjtB,KAAKJ,MAAMmqB,iBACnCqD,mBAAoBptB,KAAKJ,MAAMwtB,mBAC/BG,aAAcvtB,KAAKJ,MAAM2tB,aACzBE,YAAaztB,KAAKJ,MAAM6tB,cAEzB3sB,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBACdX,EAAAC,EAAAC,cAAA,aACCF,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIktB,QAAQ,IAAIzsB,UAAU,qBAA1B,iBAEDX,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIktB,QAAQ,IAAIzsB,UAAU,sBAAsBzB,KAAKJ,MAAMmqB,iBAAiB1gB,cAE7EvI,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,SACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMmqB,iBAAiBsI,KAA/D,IAAqEvxB,EAAAC,EAAAC,cAAA,QAAMS,UAAU,eAAhB,OAEtEX,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,WACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMmqB,iBAAiBS,aAEhE1pB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,YACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMmqB,iBAAiBsE,gBAEhEvtB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,WACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMmqB,iBAAiBjD,SAEhEhmB,EAAAC,EAAAC,cAAA,MAAIG,MAAO,CAACC,QAASpB,KAAKI,MAAMwtB,SAAY,YAAc,SACzD9sB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,OACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMmqB,iBAAiBzgB,KAEhExI,EAAAC,EAAAC,cAAA,MAAIG,MAAO,CAACC,QAASpB,KAAKI,MAAMwtB,SAAY,YAAc,SACzD9sB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,SACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMmqB,iBAAiBxE,qBAEhEzkB,EAAAC,EAAAC,cAAA,MAAIG,MAAO,CAACC,QAASpB,KAAKI,MAAMwtB,SAAY,YAAc,SACzD9sB,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAd,YACAX,EAAAC,EAAAC,cAAA,MAAIS,UAAU,qBAAqBzB,KAAKJ,MAAMmqB,iBAAiBmD,aAGjEpsB,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAO3B,KAAKI,MAAMwtB,SAAYW,IAAYC,IAAa3sB,QAAS7B,KAAKyuB,OAAOvsB,KAAKlC,MAAO+B,MAAQ/B,KAAKI,MAAMwtB,SAAY,oBAAsB,oBAAqBnsB,UAAW,aAAcN,MAAO,CAACa,SAAU,sBA9DzMoC,IAAMC,WCmCnBiuB,eArCd,SAAAA,EAAY1yB,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAsyB,IACjBzyB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAwyB,GAAAnyB,KAAAH,KAAMJ,KACDQ,MAAQ,CAACuI,KAAK,GAAGU,YAAY,IAFjBxJ,0EAIP2J,EAAOqB,GACjB7K,KAAKQ,SAAS,CAACmI,KAAKkC,8CAEHrB,EAAOqB,GACxB7K,KAAKQ,SAAS,CAAC6I,YAAawB,+CAG5B7K,KAAKJ,MAAM2yB,iBAAiBvyB,KAAKI,MAAMuI,KAAM3I,KAAKI,MAAMiJ,8CAGxD,IAAIuB,EACHuI,EAAA,cAACA,EAAA,SAAD,CAAgBjM,IAAI,OACnBiM,EAAA,yBACCA,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAMuI,KAAMC,SAAU5I,KAAK2kB,WAAWziB,KAAKlC,MAAOmB,MAAO,CAACC,QAAQ,SAAUmH,kBAAkB,eAAeC,oBAAoB,IACxJ2K,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAMiJ,YAAaT,SAAU5I,KAAK4kB,kBAAkB1iB,KAAKlC,MAAOmB,MAAO,CAACC,QAAQ,SAAUyjB,WAAW,EAAMC,KAAM,EAAGvc,kBAAkB,sBAAsBC,oBAAoB,MAG1M,OACC2K,EAAA,cAAC3L,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECyG,KAAMrG,KAAKuyB,iBAAiBrwB,KAAKlC,MACjCsG,aAAgC,KAAlBtG,KAAKI,MAAMuI,MAAsC,KAAzB3I,KAAKI,MAAMiJ,cAAyC,IAArBrJ,KAAKJ,MAAMwH,SAChFzB,kBAAkB,EAClBa,aAAc,IACdzE,MAAM,qBACNgF,SAAU6D,EACVvH,eAAgBrD,KAAKJ,MAAMyG,KAC3BlB,SAAU,sDAhCiBf,uBCK3BouB,GAAgB,CAAExH,MAAO,CAAC,YAAa,qBAAsB,YAAaF,UAAW,EAAG2H,WAAY,GAAIC,WAAY,GAAI/pB,KAAM,GAAIU,YAAa,IAqIpIspB,eAnId,SAAAA,EAAY/yB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2yB,IAClB9yB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6yB,GAAAxyB,KAAAH,KAAMJ,KACDQ,MAAQoyB,GAFK3yB,4EAIP,IAAA8K,EAAA3K,KACH8qB,EAAc9qB,KAAKI,MAAnB0qB,UACR,OAAQA,GACP,KAAK,EAEJ9qB,KAAKJ,MAAMgzB,eAAe5yB,KAAKJ,MAAMoxB,UAAUnZ,KAAK,SAACmY,GAEpDrlB,EAAKkoB,UAAY7C,EAAS8C,aAAe,OACzCnoB,EAAKnK,SAAS,CAAEsqB,UAAWA,EAAY,MAExC,MACD,KAAM9qB,KAAKI,MAAM4qB,MAAMhc,OAAS,EAC/BhP,KAAK+yB,iBACL,MACD,QACC/yB,KAAKQ,SAAS,CAAEsqB,UAAWA,EAAY,0CAG9B,IACHA,EAAc9qB,KAAKI,MAAnB0qB,UACR9qB,KAAKQ,SAAS,CAAEsqB,UAAWA,EAAY,uCAE7BthB,EAAOqB,GACjB7K,KAAKQ,SAAS,CAAEmI,KAAMkC,8CAELrB,EAAOqB,GACxB7K,KAAKQ,SAAS,CAAE6I,YAAawB,6CAEbrB,EAAOkU,GACvB1d,KAAKQ,SAAS,CAAEkyB,WAAY1yB,KAAKI,MAAMqyB,WAAW/U,sDAE1B,IAAAsV,EAAAhzB,KAExBA,KAAKJ,MAAMqzB,uBAAuBjzB,KAAK6yB,WAAWhb,KAAK,SAACmY,GAEvDgD,EAAKxyB,SAAS,CAAEiyB,WAAYzC,EAASyC,yDAItCzyB,KAAKQ,SAAS,CAAEiyB,WAAY,8CAEZ,IAAAS,EAAAlzB,KAChBA,KAAKJ,MAAMmzB,eAAe/yB,KAAKJ,MAAMoxB,SAAUhxB,KAAKI,MAAMuI,KAAM3I,KAAKI,MAAMiJ,YAAarJ,KAAK6yB,UAAW7yB,KAAKI,MAAMsyB,YAAY7a,KAAK,SAACmY,GACpIkD,EAAKrkB,sDAKN7O,KAAKJ,MAAMuzB,gBAAgBnzB,KAAKJ,MAAMoxB,SAAUhxB,KAAK6yB,WACrD7yB,KAAKQ,SAASgyB,IACdxyB,KAAK6yB,UAAY,GACjB7yB,KAAKJ,MAAM2xB,YAAY,IACvBvxB,KAAKJ,MAAMmG,4CAGX,IAAIqtB,GAAY,EACRtI,EAAc9qB,KAAKI,MAAnB0qB,UAGR,OAAQA,GACP,KAAK,EACJsI,EAAqC,KAAxBpzB,KAAKJ,MAAMoxB,SACxB,MACD,KAAK,EACJoC,EAAapzB,KAAKJ,MAAMwH,QAK1B,IAAMN,EAAU,CACfqM,EAAA,qBAAKhS,MAAO,CAACyC,MAAO,OAAQuoB,SAAU,QAASrT,OAAQ,OAAOlJ,UAAU,WACvEuD,EAAA,qBAAKhS,MAdc,CAAE2X,OAAQ,WAe5B3F,EAAA,qBAAKhS,MAAO,CAACsE,UAAW,KACvB0N,EAAA,cAACvN,GAAD,CAAejB,MAAM,OAAOqB,SAAwB,IAAd8kB,GAAmB9qB,KAAKJ,MAAM+Z,cAAe9X,QAAS7B,KAAK+qB,WAAW7oB,KAAKlC,QACjHmT,EAAA,cAACvN,GAAD,CAAejB,MAAOmmB,IAAe9qB,KAAKI,MAAM4qB,MAAMhc,OAAO,EAAK,SAAW,OAAQnN,QAAS7B,KAAK6qB,WAAW3oB,KAAKlC,MAAOgG,SAAUotB,GAAapzB,KAAKJ,MAAM+Z,cAAe7T,SAAS,QAKpLiB,EACHoM,EAAA,qBAAKjM,IAAI,MAAM/F,MAAO,CAACI,OAAO,QAAQ+T,UAAU,UAChC,IAAdwV,EACA3X,EAAA,qBAAK1R,UAAW,yBACf0R,EAAA,cAAC+e,GAAD,CAAiBd,iBAAkBpxB,KAAKJ,MAAMwxB,iBAAkBP,gBAAiB7wB,KAAKJ,MAAMixB,gBAAiBS,eAAgBtxB,KAAKJ,MAAM0xB,eAAgBM,WAAW,EAAMZ,SAAUhxB,KAAKJ,MAAMoxB,SAAUO,YAAavxB,KAAKJ,MAAM2xB,YAAa5sB,MAAM,YAAYxD,MAAO,CAACkyB,WAAa,WAEpR,KACa,IAAdvI,EACA3X,EAAA,qBAAK1R,UAAW,yBACZ0R,EAAA,cAACmgB,GAAA,iBAAD,CAAkB3qB,KAAK,oBAAoB4qB,gBAAgB,UACzDpgB,EAAA,cAACmgB,GAAA,YAAD,CAAazrB,MAAM,SAASlD,MAAM,wBAAwBxD,MAAO,CAACK,QAAQ,QAASK,QAAS7B,KAAKwzB,gBAAgBtxB,KAAKlC,QACtHmT,EAAA,cAACmgB,GAAA,YAAD,CAAazrB,MAAM,WAAWlD,MAAM,+BAA+BxD,MAAO,CAACK,QAAQ,QAASK,QAAS7B,KAAKizB,uBAAuB/wB,KAAKlC,UAG3I,KACc,IAAd8qB,EACgC,IAAjC9qB,KAAKI,MAAMqyB,WAAWzjB,OACtBmE,EAAA,qBAAK1R,UAAW,yBACf0R,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAMuI,KAAMC,SAAU5I,KAAK2kB,WAAWziB,KAAKlC,MAAOmB,MAAO,CAACC,QAAQ,SAAUmH,kBAAkB,eAAeC,oBAAoB,IACxJ2K,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAMiJ,YAAaT,SAAU5I,KAAK4kB,kBAAkB1iB,KAAKlC,MAAOmB,MAAO,CAACC,QAAQ,SAAUyjB,WAAW,EAAMC,KAAM,EAAGvc,kBAAkB,sBAAsBC,oBAAoB,KAExM2K,EAAA,qBAAK1R,UAAW,yBACf0R,EAAA,cAAC7K,GAAAvH,EAAD,CAAa0C,cAAe,CAAEzB,SAAU,QAAU0G,WAAY,CAAE1G,SAAU,QAAU4G,SAAU5I,KAAKyzB,iBAAiBvxB,KAAKlC,MAAO6H,MAAO7H,KAAKI,MAAMsyB,WAAYnqB,kBAAkB,oBAAoBC,oBAAoB,GACtNxI,KAAKI,MAAMqyB,WAAW5pB,IAAI,SAAAC,GAC1B,OACCqK,EAAA,cAACrP,EAAA/C,EAAD,CAAUI,MAAO,CAAEa,SAAU,QAAU6F,MAAOiB,EAAME,YAAaF,EAAM5B,IAAK4B,QAK/E,MAEJ,OACCqK,EAAA,cAAC3L,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECyG,KAAMrG,KAAK6O,YAAY3M,KAAKlC,MAC5BoG,QAAS,SACTI,aAAc,IACdzE,MAAQ,kBACRgF,SAAUA,EACVD,QAASA,EACTzD,eAAgBrD,KAAK6O,YAAY3M,KAAKlC,MACtCmF,SAAU,uDA9HqBf,aCWpBsvB,oLAhBb,OACC5yB,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACI5E,KAAKJ,MADT,CAEA4G,aAAc,IACdhB,QAAS,GACTzD,MAAM,QACNgF,SACAjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,MACnBpG,EAAAC,EAAAC,cAAA,6CAVsBoD,IAAMC,qBCyFjBsvB,eArFd,SAAAA,EAAY/zB,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2zB,IAClB9zB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6zB,GAAAxzB,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEkP,KAAM,GAAIskB,eAAe,GACxC/zB,EAAKg0B,eAAiBh0B,EAAKg0B,eAAe3xB,KAApBpC,OAAA4wB,GAAA,EAAA5wB,CAAAD,IAHJA,kFAKAwX,GACdA,EAAUyc,YAAc9zB,KAAKJ,MAAMk0B,WACtC9zB,KAAKQ,SAAS,CAAE8O,KAAMtP,KAAKJ,MAAMk0B,2DAIlC9zB,KAAKJ,MAAMm0B,iEAKX/zB,KAAKQ,SAAS,CAAEozB,eAAe,IACH,aAAxB5zB,KAAKJ,MAAMqD,UAAwBjD,KAAKJ,MAAMo0B,gBAAgBh0B,KAAKI,MAAMkP,MAC7EtP,KAAKJ,MAAMyG,kDAGXrG,KAAKQ,SAAS,CAAEozB,eAAe,2CAEjBK,GAAU,IAAAtpB,EAAA3K,KACxB,MAC0B,aAAxBA,KAAKJ,MAAMqD,SACZnC,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAAA,WAAMhB,KAAKI,MAAMkP,KAAK2kB,EAASvW,OAAzB,QAGP5c,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACCH,EAAAC,EAAAC,cAAA,OACCG,MAAO,CAAEG,gBAAiB,UAAW4yB,MAAwD,QAAhDp0B,OAAAq0B,GAAA,EAAAr0B,CAAIE,KAAKI,MAAMkP,MAAM2kB,EAASvW,OAA9B,IAAyD,OAAS,QAC/GwE,iBAAe,EACfC,gCAA8B,EAC9BiS,QAASp0B,KAAKq0B,iBAAiBnyB,KAAKlC,MACpC2T,OAAQ,SAAAhM,GACN,IAAM2H,EAAIxP,OAAAq0B,GAAA,EAAAr0B,CAAO6K,EAAKvK,MAAMkP,MAC5BA,EAAK2kB,EAASvW,OAAOuW,EAAS3jB,OAAOhH,IAAM3B,EAAE8I,OAAOmR,UACpDjX,EAAKnK,SAAS,CAAE8O,WAEftP,KAAKI,MAAMkP,KAAK2kB,EAASvW,OAAzB,OACF5c,EAAAC,EAAAC,cAAC0wB,GAAA3wB,EAAD,CAAa4H,KAAK,oBAAoB9G,QAAS7B,KAAKJ,MAAM00B,mBAAoBvyB,MAAM,0CAA0CZ,MAAO,CAACC,QAA0D,QAAhDtB,OAAAq0B,GAAA,EAAAr0B,CAAIE,KAAKI,MAAMkP,MAAM2kB,EAASvW,OAA9B,IAAyD,QAAU,OAAQ3D,OAAS,UAAWsZ,WAAa,MAAOtiB,YAAc,4CAKrR,OACCjQ,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAEC4G,aAAc,IACdpB,QAAS,GACTI,QAAS,IACTa,KAAMrG,KAAKg0B,gBAAgB9xB,KAAKlC,MAChCmF,SAAU,8BACVpD,MAAM,eACNgF,SACCjG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACI,OAAO,SAAU2F,IAAI,OACjCpG,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACCE,gBAAgB,EAChB1N,UAAW,oBACX2N,QAAS,EACTF,SAAUlP,KAAKI,MAAMkP,KAAKN,OAC1BM,KAAMtP,KAAKI,MAAMkP,KACjBD,WAAW,GACXG,QAAS,CAAC,CACPC,OAAQ,YACRC,SAAU,MACV9L,MAAM,IACN+L,YAAY,CAACC,UAAY,SAC1B,CACCH,OAAQ,QACRC,SAAU,QACV9L,MAAM,IACN+L,YAAY,CAACC,UAAY,QACzBC,KAAM7P,KAAK6zB,8BA5EWzvB,IAAMC,WCmBvBkwB,wLApBD/qB,EAAOkU,EAAO7V,GAC1B7H,KAAKJ,MAAM40B,YAAY3sB,oCAGvB,IAAImB,EACA4B,EAAI5K,KAAKJ,MAAM60B,OAAO5rB,IAAI,SAACC,GAO9B,OALCE,EADoB,kBAAVF,EACIA,EAAKyd,OAAO,EAAG,GAAGmO,cAAcC,OAAO7rB,EAAK6U,QAAQ,IAAK,KAAK4I,OAAO,IAGrEzd,EAAK8rB,WAEb9zB,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAU8G,MAAOiB,EAAM5B,IAAK4B,EAAME,YAAaA,MAEvD,OACClI,EAAAC,EAAAC,cAACsH,GAAAvH,EAAD,CAAa8zB,kBAAmB70B,KAAKJ,MAAMi1B,kBAAmBpxB,cAAe,CAACzB,SAAS,QAAS0G,WAAY,CAAC1G,SAAS,QAAS2B,UAAW,CAAC3B,SAAS,QAASb,MAAO,CAACyC,MAAM,QAASkV,OAAQ,YAAagc,WAAW,EAAMvsB,kBAAmBvI,KAAKJ,MAAM2I,kBAAmBC,oBAAoB,EAAMzB,SAAU6D,EAAGhC,SAAU5I,KAAK+0B,aAAa7yB,KAAKlC,MAAO6H,MAAO7H,KAAKJ,MAAMo1B,kBAhBhV5wB,IAAMC,WCwCtB4wB,wLAtCDzrB,EAAOkU,EAAO7V,GAC1B7H,KAAKJ,MAAM40B,YAAY3sB,+CAIvB,OADQ7H,KAAKk1B,UAAUl1B,KAAKJ,MAAMo1B,UAAU,qCAGnCxZ,EAAW2Z,GAEpB,IAAIvZ,EAAa5b,KAAKJ,MAAM8b,KAAKG,gBAE7BC,EAAoBC,gCAAsB/b,KAAKJ,MAAM8b,KAAMF,GAE3DQ,EAAchc,KAAKJ,MAAM8b,KAAKO,aAAaT,GAE3CU,EAAmBN,GAAcE,EAAqBK,MAAMC,MAAM,KAAM,CAAEpN,OAAQ4M,IAAc/S,IAAI2J,OAAOrS,KAAMqS,QAAU2J,MAAMC,MAAM,KAAM,CAAEpN,OAAQ8M,IAAqBjT,IAAI2J,OAAOrS,KAAMqS,QAC7L6J,EAAgBH,EAAgBlN,OAChComB,EAAW,IAAM/Y,EACjBgZ,EAAYnZ,EAAgBrT,IAAI,SAACC,GACpC,OAAOhI,EAAAC,EAAAC,cAAA,OAAKkG,IAAK4B,EAAM3H,MAAO,CAACG,gBAAiB0a,EAAYK,GAAevT,GAAOlF,MAAOwxB,EAAU7zB,OAAO,OAAQH,QAAS,oBAExHk0B,EAAgB9Z,IAAcxb,KAAKJ,MAAMo1B,UAAcG,EAA0C,YAAtB,oBAE/E,OADAE,EAAYv0B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAQ,cAAeqE,UAAU,OAAQiO,OAAO,aAAe4hB,IAAeD,oCAIvG,IAAIrsB,EACA4B,EAAI5K,KAAKJ,MAAM60B,OAAO5rB,IAAI,SAAS2S,GACVxS,EAAb,YAAdwS,EAAyC,GAAkB,UAC5D,IAAI+Z,EAAoB,YAAd/Z,EAA2Bxb,KAAKk1B,UAAU1Z,GAAW,GAAS,KACxE,OAAO1a,EAAAC,EAAAC,cAAC8C,EAAA/C,EAAD,CAAU8G,MAAO2T,EAAWxS,YAAaA,EAAa9B,IAAKsU,EAAWzU,SAAUwuB,EAAIxzB,MAAOyZ,KAChGxb,MACH,OACCc,EAAAC,EAAAC,cAACsH,GAAAvH,EAAD,CAAa8zB,kBAAmB70B,KAAK60B,kBAAkB3yB,KAAKlC,MAAOyD,cAAe,CAACzB,SAAS,QAAS0G,WAAY,CAAC1G,SAAS,QAAS2B,UAAW,CAAC3B,SAAS,QAASb,MAAO,CAACyC,MAAM,QAASkV,OAAQ,YAAagc,WAAW,EAAMvsB,kBAAmBvI,KAAKJ,MAAM2I,kBAAmBC,oBAAoB,EAAMzB,SAAU6D,EAAGhC,SAAU5I,KAAK+0B,aAAa7yB,KAAKlC,MAAO6H,MAAO7H,KAAKJ,MAAMo1B,kBAlCxV5wB,IAAMC,oBCE9BmxB,GAAY,CAAC,iBAAkB,QAAS,gBAAiB,YACzDC,GAAa,CAAC,UAAW,OAAQ,OAAQ,OAAQ,UAAW,OAAQ,SAAU,OAAQ,OAAQ,OAAQ,SAAU,SAAU,UAAW,OAAQ,QAAS,SAAU,OAAQ,QAAS,SAAU,WAAY,SAAU,OAAQ,OAAQ,OAAQ,SAAU,OAAQ,OAAQ,OAAQ,OAAQ,SAAU,OAAQ,OAAQ,QAAS,SAAU,UAAW,WAC3UC,GAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5CC,GAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KA6C3CC,oLAxCb,IAAIja,EAAS3b,KAAKJ,MAAMi2B,WAAWhtB,IAAI,SAACC,EAAM4U,GAE7C,OAAO5c,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAeC,EAAGjtB,EAAM5B,IAAKwW,EAAOsY,OAAO,cAEnD,OACCl1B,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAEC4G,aAAc,IACdnB,OAAQ,EACRG,QAAS,GACTG,kBAAkB,EAClBR,SAAU,wDACVpD,MAAM,iBACNgF,SACCjG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACI,OAAO,SAAU2F,IAAI,MACjCpG,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAUlyB,MAAO,IAAKrC,OAAQ,IAAK+N,KAAMtP,KAAKJ,MAAMq2B,cACnDn1B,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAeI,gBAAgB,IAAIF,OAAO,YAC1Cl1B,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAOK,QAAQ,SAASC,KAAM,CAACp0B,SAAS,IAAK6H,KAAM,UAClD/I,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAOjuB,MAAM,gBAAgBwuB,OAAQ,EAAGrvB,SAAS,eAAe7F,MAAO,CAACa,SAAS,OAAO0B,MAAM,cAE/F5C,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAOM,KAAM,CAACp0B,SAAS,KACtBlB,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAOjuB,MAAM,QAAQyuB,OAAQ,GAAItvB,SAAS,aAAa7F,MAAO,CAACa,SAAS,OAAO0B,MAAM,cAEtF5C,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,MACAh1B,EAAAC,EAAAC,cAAC80B,GAAA,EAAD,CAAKK,QAAQ,QAAQI,KAAK,YACzB5a,GAEF7a,EAAAC,EAAAC,cAAA,OAAKS,UAAW,aACfX,EAAAC,EAAAC,cAACw1B,GAAD,CAAe/B,OAAQgB,GAAYjB,YAAax0B,KAAKJ,MAAM62B,gBAAiBzB,SAAUh1B,KAAKJ,MAAM82B,SAASC,UAAWpuB,kBAAmB,gBAAiBmT,KAAM1b,KAAKJ,MAAM8b,OAC1K5a,EAAAC,EAAAC,cAAC41B,GAAD,CAAkBnC,OAAQe,GAAWhB,YAAax0B,KAAKJ,MAAMi3B,eAAgB7B,SAAUh1B,KAAKJ,MAAM82B,SAASI,eAAgBvuB,kBAAmB,mBAC9IzH,EAAAC,EAAAC,cAAC41B,GAAD,CAAkBnC,OAAQiB,GAAYlB,YAAax0B,KAAKJ,MAAMm3B,iBAAkB/B,SAAUh1B,KAAKJ,MAAM82B,SAAShB,WAAYntB,kBAAmB,sBAC7IzH,EAAAC,EAAAC,cAAC41B,GAAD,CAAkBnC,OAAQkB,GAAYnB,YAAax0B,KAAKJ,MAAMo3B,qBAAsBhC,SAAUh1B,KAAKJ,MAAM82B,SAASf,WAAYptB,kBAAmB,mCAlCrHnE,IAAMC,WC8D1B4yB,+LAtES,IAAAp3B,EAAAG,KAChBA,KAAK6I,IAAM,IAAIye,IAASC,IAAI,CACxBC,UAAWxnB,KAAKynB,aAChBtmB,MAAO,kCACPumB,OAAQ1nB,KAAKJ,MAAMs3B,UACnBvP,KAAM3nB,KAAKJ,MAAMu3B,QACjBpK,oBAAoB,EACpBqK,aAAa,IAEjBp3B,KAAK6I,IAAImkB,GAAG,OAAQ,SAAC1sB,GACjBA,EAAImQ,OAAOoW,SAAS,CAChBvd,GAAMzJ,EAAKD,MAAMy3B,mBACjBxtB,KAAQ,OACRid,OAAU,CACNjd,KAAQ,SACR+c,IAAO,YAAc/mB,EAAKD,MAAMytB,QAAQ/jB,IAE5Cyd,eAAgBlnB,EAAKD,MAAMytB,QAAQ1kB,KACnCqe,MAAS,CACLC,aAAc,mBACdkG,qBAAsB,sBAG9BttB,EAAKgJ,IAAIyuB,UAAUz3B,EAAKD,MAAMs3B,WAC9Br3B,EAAK03B,0DAKMlgB,EAAWC,GACtBtX,KAAKJ,MAAM43B,gBAAkBngB,EAAUmgB,gBACC,IAApCx3B,KAAKJ,MAAM43B,cAAcxoB,QAEzBhP,KAAK6I,IAAI4uB,iBAAiBz3B,KAAKJ,MAAMy3B,mBAAoB,aAAc,oBACvEr3B,KAAK6I,IAAI4uB,iBAAiBz3B,KAAKJ,MAAMy3B,mBAAoB,qBAAsB,sBAG/Er3B,KAAK6I,IAAI4uB,iBAAiBz3B,KAAKJ,MAAMy3B,mBAAoB,aAAcr3B,KAAKJ,MAAM43B,cAAcE,WAChG13B,KAAK6I,IAAI4uB,iBAAiBz3B,KAAKJ,MAAMy3B,mBAAoB,qBAAsBr3B,KAAKJ,MAAM43B,cAAcG,aACxG33B,KAAK6I,IAAI4uB,iBAAiBz3B,KAAKJ,MAAMy3B,mBAAoB,eAAgB,MAG7Er3B,KAAKJ,MAAMs3B,YAAc7f,EAAU6f,WACnCl3B,KAAK6I,IAAIyuB,UAAUt3B,KAAKJ,MAAMs3B,WAE9Bl3B,KAAKJ,MAAMu3B,UAAY9f,EAAU8f,SACjCn3B,KAAKu3B,4DAMLv3B,KAAK6I,KAAK7I,KAAK6I,IAAI6kB,8CAKvB1tB,KAAK6I,IAAI+uB,QAAQ53B,KAAKJ,MAAMu3B,0CAGvB,IAAAxsB,EAAA3K,KACL,OACIc,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAQ,eAAgB0X,OAAO,OAAQjX,QAAU7B,KAAKJ,MAAMoG,SAAY,KAAOhG,KAAKJ,MAAMi4B,UAAU31B,KAAKlC,KAAMA,KAAKJ,MAAMk4B,WACnIh3B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACa,SAAW,SAAxB,QAAuChC,KAAKJ,MAAMk4B,UAClDh3B,EAAAC,EAAAC,cAAA,OAAK4mB,IAAK,SAAAC,GAAE,OAAIld,EAAK8c,aAAeI,GAAI1mB,MAAO,CAACyC,MAAM,QAAQrC,OAAO,QAASwY,OAAS/Z,KAAKJ,MAAMoG,SAAY,UAAY,WAAYvE,UAAW,oBAAqBM,MAAQ/B,KAAKJ,MAAMoG,SAAY,GAAI,2CAjE9L5B,IAAMC,WCI7B0zB,GAA2B,CAAEC,mBAAoB,GAAIC,mBAAoB,GAAIC,mBAAoB,GAAIC,mBAAoB,GAAIC,mBAAoB,IA2OtIC,eAxOd,SAAAA,EAAYz4B,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAq4B,IAClBx4B,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAu4B,GAAAl4B,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEk4B,UAAW,CAAC,KAAO,IAAM,GAAK,EAAG,IAAKC,OAAQ,KAAOC,OAAQ,GAAIC,YAAY,EAAOV,6BAFjFl4B,kFAMAwX,EAAWC,GACxBtX,KAAKJ,MAAMyB,OAASgW,EAAUhW,MAAUrB,KAAKJ,MAAMyB,MAEvDrB,KAAK04B,2BAED14B,KAAKJ,MAAMyB,OAASgW,EAAUhW,MAAWrB,KAAKJ,MAAMyB,OAExDrB,KAAK24B,uBAEL34B,KAAK44B,qEAKoB,IAAAjuB,EAAA3K,KAEtBA,KAAK8jB,UAAU9jB,KAAK44B,iBACxB54B,KAAKJ,MAAMi5B,KAAK,2BAA6B74B,KAAKJ,MAAM2f,MAAQ,YAAcvf,KAAKJ,MAAM4X,QAAU,uBAAyBxX,KAAKI,MAAMk4B,UAAU1Z,KAAK,MAAM/G,KAAK,SAACmY,GAEjKrlB,EAAKmZ,SAAWkM,EAAS1gB,KAEzB3E,EAAKmuB,YAAY9I,EAAS1gB,QACxBke,MAAM,SAAC5P,+CAOV,GAAI5d,KAAK8jB,SAAU,CAClB,IAAIiV,EAAe/4B,KAAK8jB,SAASjb,IAAI,SAACC,GACrC,OAAOA,EAAKkwB,cAGbh5B,KAAK8jB,cAAWzb,EAChBrI,KAAKJ,MAAMi5B,KAAK,+BAAiCE,EAAana,KAAK,MAAM/G,KAAK,SAACmY,MAE5ExC,MAAM,SAAC5P,2CAMAkG,GAAU,IAAAkP,EAAAhzB,KAErBA,KAAKi5B,YAAc,EAEnBj5B,KAAKJ,MAAMs5B,oBAAmB,GAE9BpV,EAASzB,QAAQ,SAAC7K,GACjBwb,EAAKpzB,MAAMu5B,eAAe,YAAa3hB,EAAQwhB,aAAa,GAAOnhB,KAAK,SAACmY,GAExEgD,EAAKoG,kBAAkBpJ,EAAShtB,KAAMgtB,EAASxY,QAAS,GAExDwb,EAAKiG,YAAcjG,EAAKiG,YAAc,EAEb,IAArBjG,EAAKiG,aAAmBjG,EAAKpzB,MAAMs5B,oBAAmB,KACxD1L,MAAM,SAAC5P,kDAOM5a,EAAMwU,EAAS6H,GAAU,IAAA6T,EAAAlzB,KAC1CA,KAAKJ,MAAMy5B,YAAYr2B,EAAMwU,EAAS6H,GAAUxH,KAAK,SAACmY,GACrD,IAAIsJ,EAAkBpG,EAAKtzB,MAAM25B,mBAAmBvJ,EAAS3Q,UAAU,GAAO,GAE9E,GAAI6T,EAAKpP,SAIR,OAHgBoP,EAAKpP,SAAS8H,OAAO,SAAC9iB,GAAW,OAAOA,EAAKkwB,cAAgBxhB,IAEvD,GAAGgiB,OAExB,KAAK,EACJtG,EAAK1yB,SAAS,CAAEw3B,mBAAoBsB,IACpC,MACD,KAAK,EACJpG,EAAK1yB,SAAS,CAAEy3B,mBAAoBqB,IACpC,MACD,KAAK,EACJpG,EAAK1yB,SAAS,CAAE03B,mBAAoBoB,IACpC,MACD,KAAK,EACJpG,EAAK1yB,SAAS,CAAE23B,mBAAoBmB,IACpC,MACD,KAAK,EACJpG,EAAK1yB,SAAS,CAAE43B,mBAAoBkB,4CAS5B9vB,EAAOqB,GAEnB7K,KAAKy5B,aAAa5uB,EAAU7K,KAAKI,MAAMo4B,QAEvCx4B,KAAKQ,SAAS,CAAE+3B,OAAQ1tB,yCAGZrB,EAAOqB,GAEnB7K,KAAKy5B,aAAaz5B,KAAKI,MAAMm4B,OAAQ1tB,GAErC7K,KAAKQ,SAAS,CAAEg4B,OAAQ3tB,yCAIZ6uB,EAAKC,GAKjB,IAJA,IAAIrB,EAAY,GAEZsB,GAAaD,EAAMD,GAAP,EAEPG,EAAI,EAAGA,EA7HA,EA6HiBA,IAChCvB,EAAUuB,IAAOA,EAAID,EAAapnB,OAAOknB,IAAMjY,QAAQ,GAExDzhB,KAAKQ,SAAS,CAAE83B,UAAWA,IAE3Bt4B,KAAKQ,SAAS,CAAEi4B,YAAY,0CAGf5wB,GACb,OAAKmnB,MAAM8K,WAAWjyB,KAAWkyB,SAASlyB,GAClCA,EAGA,qCAICiwB,GAET93B,KAAKJ,MAAMo6B,YAAYlC,GAEvB93B,KAAKJ,MAAMyG,sDAKXrG,KAAKQ,SAASu3B,0CAGDU,EAAYH,GAEzBt4B,KAAK24B,uBAEDF,EACHz4B,KAAK04B,2BAIL14B,KAAK84B,YAAY94B,KAAK8jB,UAGvB9jB,KAAKQ,SAAS,CAAEi4B,YAAY,6CAIvBz4B,KAAKJ,MAAMq6B,iBAAiBj6B,KAAKJ,MAAMyG,wCAGpC,IAAA6zB,EAAAl6B,KACJm6B,EAAgBr6B,OAAAq0B,GAAA,EAAAr0B,CAAIqc,MA9KR,GA8K2Bie,QAAQvxB,IAAI,SAAC2wB,GACvD,IAAIhC,EACJ,OAAQgC,GACP,KAAK,EACJhC,EAAgB0C,EAAK95B,MAAM43B,mBAC3B,MACD,KAAK,EACJR,EAAgB0C,EAAK95B,MAAM63B,mBAC3B,MACD,KAAK,EACJT,EAAgB0C,EAAK95B,MAAM83B,mBAC3B,MACD,KAAK,EACJV,EAAgB0C,EAAK95B,MAAM+3B,mBAC3B,MACD,KAAK,EACJX,EAAgB0C,EAAK95B,MAAMg4B,mBAK7B,OAAOt3B,EAAAC,EAAAC,cAACq5B,GAAD,CAAcnzB,IAAKsyB,EAAOxzB,SAAUk0B,EAAKt6B,MAAMq6B,gBAAiBpC,UAAWqC,EAAKrC,UAAU31B,KAAKg4B,GAAO7M,QAAS6M,EAAKt6B,MAAMytB,QAASgK,mBAAoB6C,EAAKt6B,MAAMy3B,mBAAoBG,cAAeA,EAAeM,SAAUoC,EAAKI,cAAcJ,EAAK95B,MAAMk4B,UAAUkB,IAAStC,UAAWgD,EAAKt6B,MAAMs3B,UAAWC,QAAS+C,EAAKt6B,MAAMu3B,YAE5U,OACCr2B,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECyH,YAAarH,KAAKJ,MAAMq6B,gBACxBzzB,aAAc,IACdpB,QAAS,GACTI,QAAS,GACTa,KAAMrG,KAAKqD,eAAenB,KAAKlC,MAC/BsG,WAAYtG,KAAKJ,MAAMq6B,gBACvBt0B,kBAAkB,EAClBR,SAAU,iCACV2B,QAAS,CACRhG,EAAAC,EAAAC,cAAC4E,GAAD,CACCjB,MAAM,UACNmB,SAAS,EACTjE,QAAS7B,KAAKu6B,cAAcr4B,KAAKlC,MACjCgG,SAAUhG,KAAKJ,MAAMq6B,kBAAqBj6B,KAAKI,MAAMq4B,cAG1D12B,MAAQ,WACRgF,SACCjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,MACJizB,EACDr5B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAQ,eAAgB0X,OAAO,MAAM9H,cAAgB,MAAMqiB,WAAa,OAAOzjB,UAAY,SAAS5N,SAAW,OAAO4B,MAAM,QAASrC,OAAO,UACvJT,EAAAC,EAAAC,cAAA,iEACAF,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACkyB,WAAa,SACzBvyB,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAMm4B,OAAQ3vB,SAAU5I,KAAKw6B,aAAat4B,KAAKlC,MAAOmB,MAAO,CAACyC,MAAM,QAAS8F,WAAY,CAACkG,UAAY,SAAU5N,SAAW,QAASsH,GAAG,SAAStD,SAAUhG,KAAKJ,MAAMq6B,kBAC5Ln5B,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKI,MAAMo4B,OAAQ5vB,SAAU5I,KAAKy6B,aAAav4B,KAAKlC,MAAOmB,MAAO,CAACyC,MAAM,QAAS8F,WAAY,CAACkG,UAAY,SAAU5N,SAAW,QAASsH,GAAG,SAAStD,SAAUhG,KAAKJ,MAAMq6B,+BA/NxK71B,IAAMC,WCkCpBq2B,eAvCd,SAAAA,EAAY96B,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA06B,IACjB76B,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA46B,GAAAv6B,KAAAH,KAAMJ,KACDQ,MAAQ,CAACu6B,iBAAmB,GAAIlK,QAAQ,GAF5B5wB,uEAIV8H,GACP3H,KAAKQ,SAAS,CAACiwB,QAAQ,qCAEf9oB,GAER3H,KAAKJ,MAAMg7B,YAAYjzB,EAAE8I,OAAOmgB,OAChC5wB,KAAKQ,SAAS,CAACm6B,iBAAkBhzB,EAAE8I,OAAOmgB,MAAM5hB,OAAS,WACzDhP,KAAKQ,SAAS,CAACiwB,QAAQ,0CAEVhR,GACTA,IACHA,EAAKob,WAAY,EACjBpb,EAAKqb,iBAAkB,oCAGhB,IAAAnwB,EAAA3K,KACR,OACCc,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,OAAKS,UAAU,cAAcN,MAAO,CAACuC,MAAQ1D,KAAKI,MAAMqwB,OAAU,mBAAqB,uBAAwBzwB,KAAKJ,MAAM+E,OAC1H7D,EAAAC,EAAAC,cAAA,OAAKS,UAAU,mBACdX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,uBACdX,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAS,gBACrBN,EAAAC,EAAAC,cAAA,SAAOywB,QAAS,kBACf3wB,EAAAC,EAAAC,cAAC0wB,GAAA3wB,EAAD,CAAa4H,KAAK,SAAS5G,MAAM,0CAA0CZ,MAAO,CAAC4Y,OAAS,UAAW3Y,QAAS,mBAGlHN,EAAAC,EAAAC,cAAA,SAAOsI,GAAG,iBAAiBse,IAAK,SAAAnI,GAAI,OAAI9U,EAAKowB,cAActb,IAAO5V,KAAK,OAAOjB,SAAU5I,KAAK4I,SAAS1G,KAAKlC,MAAO6B,QAAS7B,KAAK6B,QAAQK,KAAKlC,MAAOmB,MAAO,CAACC,QAAU,OAAQwC,MAAQ,WAEvL9C,EAAAC,EAAAC,cAAA,OAAKS,UAAU,wBAAwBzB,KAAKI,MAAMu6B,2BAjC5Bv2B,IAAMC,WCwBlB22B,eArBd,SAAAA,EAAYp7B,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAg7B,IAClBn7B,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAk7B,GAAA76B,KAAAH,KAAMJ,KACDQ,MAAQ,CAAC8rB,mBAAmB,GAAI6F,YAAa,IAFhClyB,8EAIJmxB,GACdhxB,KAAKQ,SAAS,CAAEuxB,YAAaf,IAC7BhxB,KAAKJ,MAAMq7B,eAAejK,oCAG1B,OACC7d,EAAA,cAACA,EAAA,SAAD,KACCA,EAAA,qBAAKhS,MAAO,CAACsE,UAAU,SACtB0N,EAAA,cAAC+nB,GAAD,CAAcv2B,MAAM,wBAAwBi2B,YAAa56B,KAAKJ,MAAMg7B,cACpEznB,EAAA,cAAC+e,GAAD,CAAiBrB,gBAAiB7wB,KAAKJ,MAAMixB,gBAAiBO,iBAAkBpxB,KAAKJ,MAAMwxB,iBAAkBQ,WAAW,EAAMZ,SAAUhxB,KAAKI,MAAM2xB,YAAaR,YAAavxB,KAAKmyB,eAAejwB,KAAKlC,MAAOsxB,eAAgBtxB,KAAKJ,MAAM0xB,eAAgB3sB,MAAM,iCAAiCxD,MAAO,CAACkyB,WAAa,UACpTlgB,EAAA,cAAC5J,GAAAxI,EAAD,CAAW8G,MAAO7H,KAAKJ,MAAMssB,mBAAoBtjB,SAAU5I,KAAKJ,MAAMu7B,oBAAqB5yB,kBAAkB,qBAAqBC,oBAAoB,EAAMrH,MAAO,CAACsE,UAAU,mBAfnJrB,aC+FjBg3B,eA3Fd,SAAAA,EAAYx7B,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAo7B,IAClBv7B,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAs7B,GAAAj7B,KAAAH,KAAMJ,KAGPirB,WAAa,WAAM,IACVC,EAAcjrB,EAAKO,MAAnB0qB,UACR,GAAkB,IAAdA,EAWH,OAVAjrB,EAAKW,SAAS,CAAC4G,SAAS,SAExBvH,EAAKD,MAAMy7B,cAAcx7B,EAAKO,MAAMuI,KAAM9I,EAAKO,MAAMiJ,YAAaxJ,EAAKO,MAAM2xB,YAAalyB,EAAKO,MAAMwwB,MAAO/wB,EAAKO,MAAM8rB,oBAAoBrU,KAAK,SAACmY,GAEhJnwB,EAAKwG,SACHmnB,MAAM,SAAC5P,GACT/d,EAAKW,SAAS,CAAC4G,SAAS,IACxBvH,EAAKD,MAAMwmB,IAAIxI,EAAQ,kBACvB/d,EAAKD,MAAM6tB,YAAY7P,KAIzB/d,EAAKW,SAAS,CAAEsqB,UAAWA,EAAY,KAnBrBjrB,EAqBnBkrB,WAAa,WAAM,IACVD,EAAcjrB,EAAKO,MAAnB0qB,UACJA,EAAY,GACfjrB,EAAKW,SAAS,CAAEsqB,UAAWA,EAAY,KAtBxCjrB,EAAKO,MAAQ,CAAE4qB,MAAO,CAAC,0BAA0B,QAAU5jB,SAAS,EAAO0jB,UAAW,EAAGniB,KAAM,GAAIU,YAAa,GAAI0oB,YAAa,GAAInB,MAAM,GAAI1E,mBAAmB,IAFhJrsB,2EA2BP+wB,GAEX5wB,KAAKQ,SAAS,CAACowB,MAAOA,2CAERI,GACdhxB,KAAKQ,SAAS,CAACuxB,YAAaf,gDAETxnB,EAAO0iB,GAC1BlsB,KAAKQ,SAAS,CAAC0rB,mBAAoBA,oCAE5BrkB,GACP7H,KAAKQ,SAAS,CAAEmI,KAAMd,2CAERA,GACd7H,KAAKQ,SAAS,CAAE6I,YAAaxB,mCAI7B7H,KAAKQ,SAAS,CAAC4G,SAAS,EAAO0jB,UAAW,IAC1C9qB,KAAKJ,MAAMyG,wCAEH,IACAykB,EAAc9qB,KAAKI,MAAnB0qB,UAEFhkB,EAAU,CACfhG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAQuoB,SAAU,IAAKrT,OAAQ,OAAOlJ,UAAU,WACnE9O,EAAAC,EAAAC,cAAA,OAAKG,MAHc,CAAE2X,OAAQ,WAI5BhY,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACsE,UAAW,KACvB3E,EAAAC,EAAAC,cAAC4E,GAAD,CAAejB,MAAM,OAAOqB,SAAwB,IAAd8kB,EAAiBjpB,QAAS7B,KAAK+qB,aACrEjqB,EAAAC,EAAAC,cAAC4E,GAAD,CAAejB,MAAOmmB,IAAe9qB,KAAKI,MAAM4qB,MAAMhc,OAAO,EAAK,SAAW,OAAQnN,QAAS7B,KAAK6qB,WAAW3oB,KAAKlC,MAAO8F,SAAS,EAAME,SAAUhG,KAAKI,MAAMgH,cAK9JwD,EAAI9J,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,MACzBpG,EAAAC,EAAAC,cAAA,WACgB,IAAd8pB,EAAkBhqB,EAAAC,EAAAC,cAACs6B,GAAD,CAClBV,YAAa56B,KAAK46B,YAAY14B,KAAKlC,MACnCi7B,eAAgBj7B,KAAKi7B,eAAe/4B,KAAKlC,MACzC6wB,gBAAiB7wB,KAAKJ,MAAMixB,gBAC5BO,iBAAkBpxB,KAAKJ,MAAMwxB,iBAC7BE,eAAgBtxB,KAAKJ,MAAM0xB,eAC3B6J,oBAAqBn7B,KAAKm7B,oBAAoBj5B,KAAKlC,MACnDksB,mBAAoBlsB,KAAKI,MAAM8rB,qBAC3B,KACU,IAAdpB,EAAkBhqB,EAAAC,EAAAC,cAACorB,GAAD,CAAUzjB,KAAM3I,KAAKI,MAAMuI,KAAMU,YAAarJ,KAAKI,MAAMiJ,YAAamb,QAASxkB,KAAKwkB,QAAQtiB,KAAKlC,MAAOykB,eAAgBzkB,KAAKykB,eAAeviB,KAAKlC,MAAO0kB,cAAe,SAAY,OAG1M,OACC5jB,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAECmC,MAAO,iCACPyE,aAAc,IACdO,SAAU6D,EACVxE,QAAS,SACTU,QAASA,EACTT,KAAMrG,KAAKqG,KAAKnE,KAAKlC,MACrBqD,eAAgBrD,KAAKqG,KAAKnE,KAAKlC,MAC/BmF,SAAU,8DAtFoBf,IAAMC,WCmJzBk3B,eA9Id,SAAAA,EAAY37B,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAu7B,IAClB17B,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAy7B,GAAAp7B,KAAAH,KAAMJ,KACDQ,MAAQ,CAACo7B,iBAAanzB,EAAWozB,aAAa,GAFjC57B,kFAIAwX,EAAWC,GAE7B,GAAItX,KAAKJ,MAAM87B,UAAYrkB,EAAUqkB,QAAQ,CAE5C,IAAIC,EAAc37B,KAAKJ,MAAM87B,QAAQ9P,OAAO,SAAC9iB,GAAU,MAAuB,YAAhBA,EAAKsU,SACnEpd,KAAKQ,SAAS,CAACi7B,YAAcE,EAAY3sB,OAAS,2CAInDhP,KAAKQ,SAAS,CAAEg7B,iBAAanzB,IAC7BrI,KAAKJ,MAAMyG,uCAEJ/F,GAEPN,KAAKJ,MAAMg8B,WAAW,IAAM57B,KAAKI,MAAMo7B,YAAYhjB,KAEnDxY,KAAK67B,sDAEOv7B,GACZN,KAAKJ,MAAMk8B,sDAEGx7B,GACdN,KAAKJ,MAAMm8B,aAEX/7B,KAAKQ,SAAS,CAAEg7B,iBAAanzB,8CAEZmB,EAAOwyB,GACxBh8B,KAAKQ,SAAS,CAAEg7B,YAAaQ,uCAEnBlsB,GACV,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAAS/M,MAAO8M,EAAIC,SAAS/M,4CAE7H8M,GACb,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAASyH,SAAU1H,EAAIC,SAASyH,8CAEjI1H,GACZ,IAAInO,EACF,OAAQmO,EAAIC,SAASqN,QACnB,IAAK,YACJzb,EAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAM0b,IAAelc,MAAO,CAACuC,MAAM,SAAU3B,MAAO,kBAC3E,MACF,IAAK,UACJJ,EAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMs6B,IAAe96B,MAAO,CAACuC,MAAM,YAAa3B,MAAO,4BAC9E,MACF,IAAK,SACJJ,EAAOb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAM4b,IAAuBpc,MAAO,CAACuC,MAAM,OAAQ3B,MAAO,wCACjF,MACF,IAAK,UACJJ,EAAOb,EAAAC,EAAAC,cAACmG,GAAApG,EAAD,CAAMU,UAAU,OAAON,MAAO,CAACI,OAAQ,OAAQqC,MAAO,OAAQoN,cAAe,MAAOtN,MAAO,uBAKvG,OAAO5C,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,OAAQ1R,MAAO+N,EAAIC,SAASqN,QAASzb,EAAM,KAAOmO,EAAIC,SAASqN,4CAE9ItN,GACX,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,QAAU3D,EAAIC,SAASmsB,QAAWpsB,EAAIC,SAASmsB,QAAU,0CAEtIpsB,GACb,OAAOhP,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACyC,MAAO,OAAOrC,OAAQ,OAAOD,gBAAiB,UAAUmS,aAAc,QAAU3D,EAAIC,SAAS+N,QAAWhO,EAAIC,SAAS+N,QAAU,qCAGnJ,IAAI0F,EAWJ,OAVAA,EAAe,CACd,CAAE/T,OAAQ,MAAOC,SAAU,MAAO9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,SACzE,CAAEH,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAKm8B,WAAWj6B,KAAKlC,OAChH,CAAEyP,OAAQ,UAAWC,SAAU,UAAW9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAKo8B,cAAcl6B,KAAKlC,OAC1H,CAAEyP,OAAQ,UAAWC,SAAU,YAAa9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,SACpF,CAAEH,OAAQ,QAASC,SAAU,UAAW9L,MAAO,IAAK+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAKq8B,YAAYn6B,KAAKlC,OACtH,CAAEyP,OAAQ,UAAWC,SAAU,UAAW9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,SAAWnO,UAAW,2BAA4BoO,KAAM7P,KAAKs8B,cAAcp6B,KAAKlC,OACjK,CAAEyP,OAAQ,OAAQC,SAAU,OAAQ9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,SAAWnO,UAAW,4BACjG,CAAEgO,OAAQ,SAAUC,SAAU,SAAU9L,MAAO,GAAI+L,YAAa,CAAEC,UAAa,QAAUC,KAAM7P,KAAKu8B,aAAar6B,KAAKlC,QAGtHc,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACK5E,KAAKJ,MADV,CAGCyG,KAAMrG,KAAK6O,YAAY3M,KAAKlC,MAC5B+F,SAAU/F,KAAK6O,YAAY3M,KAAKlC,MAChC2F,kBAAkB,EAClBR,SAAU,6BACV2J,wBAAwB,EACxBC,UAAW,CAAEvN,QAAQ,qBACrBO,MAAM,OACNgF,SACCjG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBiG,IAAI,MACnBpG,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACwK,aAAa,QAA1B,wBAAwD3L,KAAKJ,MAAM87B,QAAQ1sB,OAA3E,qBACClO,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,iBACPxI,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACEC,SAAWlP,KAAKJ,MAAM87B,QAAQ1sB,OAC/BvN,UAAW,8BACX0N,gBAAgB,EAChBC,QAAS,EACTC,WAAW,GACXC,KAAMtP,KAAKJ,MAAM87B,QACjBnsB,QAASvP,KACTwP,QAASgU,EACTpT,WAAY,SAAChQ,EAAOiQ,EAASC,GAC5B,MAAO,CACNnP,MAAO,CACNoP,WAAaF,EAAQN,SAASyI,OAASpY,EAAMmP,QAAQnP,MAAMo7B,aAAep7B,EAAMmP,QAAQnP,MAAMo7B,YAAYhjB,KAAQ,YAAc,IAEjI3W,QAAS,SAAC8F,GACTvH,EAAMmP,QAAQitB,kBAAkB70B,EAAG0I,EAAQN,gBAMhDjP,EAAAC,EAAAC,cAAA,OAAKsI,GAAG,kBAAkBnI,MAAO,CAACC,QAAkC,aAAxBpB,KAAKJ,MAAMqD,SAA2B,OAAS,UAC3FnC,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,cAC/C1hB,MAAM,WACNiE,cAAsCqC,IAA3BrI,KAAKI,MAAMo7B,eAAsCx7B,KAAKJ,MAAM+Z,gBAAkB3Z,KAAKI,MAAMq7B,aAAyD,YAAlCz7B,KAAKI,MAAMo7B,YAAYpe,QAClJvb,QAAS7B,KAAKy8B,QAAQv6B,KAAKlC,MAC3B2E,MAAO,OACP6V,WAAW,IAEZ1Z,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,cAC/C1hB,MAAM,mBACNJ,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAM+6B,MAC7B76B,QAAS7B,KAAK67B,eAAe35B,KAAKlC,QAEnCc,EAAAC,EAAAC,cAAC4E,GAAD,CACCnB,MAAOzE,KAAKJ,MAAMqkB,oBAAoBR,SAAS,gBAC/C1hB,MAAM,iBACNJ,KAAMb,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAMqY,MAC7BnY,QAAS7B,KAAK87B,aAAa55B,KAAKlC,oBArIboE,IAAMC,WC0BlBs4B,oLA5BX,OACE77B,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACM5E,KAAKJ,MADX,CAEE4G,aAAc,IACdhB,QAAS,GACTzD,MAAM,iBACNoD,SAAU,gCACV4B,SACEjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,MACPpG,EAAAC,EAAAC,cAAA,OAAKS,UAAU,YAAf,SAAqCX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBAAiBzB,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAaU,MACtH7H,EAAAC,EAAAC,cAAA,OAAKS,UAAU,YAAf,SAAqCX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBAAiBzB,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAamB,MACtHtI,EAAAC,EAAAC,cAAA,OAAKS,UAAU,YAAf,gBAA4CX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBAAiBzB,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAaoB,aAC7HvI,EAAAC,EAAAC,cAAA,OAAKS,UAAU,YAAf,WAAuCX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBAAiBzB,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAa20B,QACxH97B,EAAAC,EAAAC,cAAA,OAAKS,UAAU,YAAf,0BAAsDX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBAAiBzB,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAa40B,gBACvI/7B,EAAAC,EAAAC,cAAA,OAAKS,UAAU,YAAf,iBAA6CX,EAAAC,EAAAC,cAAA,OAAKS,UAAU,iBAAiBzB,KAAKJ,MAAMqI,cAAcjI,KAAKJ,MAAMqI,aAAa60B,cAC9Hh8B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAUpB,KAAKJ,MAAMm9B,eAAiB,QAAU,SAC3Dj8B,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKS,UAAU,WAAW6P,wBAAyB,CAAEC,OAAQrM,OAAO83B,KAAKC,eAAiB,mCAAqC/3B,OAAO83B,KAAKE,YAAc,yDAChKp8B,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAC4E,GAAD,CAAe7D,MAAM,cAAcF,QAAS7B,KAAKJ,MAAMu9B,WAAYx4B,MAAM,SAASqB,SAAUhG,KAAKJ,MAAMwH,sBAzB5EhD,IAAMC,WCkBzB+4B,oLAhBX,OACEt8B,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACM5E,KAAKJ,MADX,CAEE4G,aAAc,IACdhB,QAAS,GACTzD,MAAM,QACNgF,SACEjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,OACLpG,EAAAC,EAAAC,cAAA,OAAKS,UAAW,eAAhB,2CAAuEX,EAAAC,EAAAC,cAAA,WAAvE,mEAVYoD,IAAMC,WCwDjBg5B,eAvDb,SAAAA,EAAYz9B,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAq9B,IAChBx9B,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAu9B,GAAAl9B,KAAAH,KAAMJ,KACDQ,MAAQ,CAACk9B,gBAAiB,GAAIC,aAAc,GAAIC,aAAc,IAFnD39B,kFAIC2J,EAAOqB,GACxB7K,KAAKQ,SAAS,CAAC88B,gBAAiBzyB,4CAElBrB,EAAOqB,GACrB7K,KAAKQ,SAAS,CAAC+8B,aAAc1yB,4CAEfrB,EAAOqB,GACrB7K,KAAKQ,SAAS,CAACg9B,aAAc3yB,iCAE1BvK,GAAI,IAAAqK,EAAA3K,KACHA,KAAKI,MAAMo9B,eAAiBx9B,KAAKI,MAAMm9B,aAI3Cv9B,KAAKJ,MAAM69B,cAAcz9B,KAAKJ,MAAMoD,KAAMhD,KAAKI,MAAMk9B,iBAAiBzlB,KAAK,SAACmY,GAC1ErlB,EAAK/K,MAAM8N,WAAW,CAACgwB,SAAU/yB,EAAKvK,MAAMm9B,eAAe1lB,KAAK,SAACmY,GAC/DrlB,EAAK/K,MAAM6tB,YAAY,oBACvB9iB,EAAK/K,MAAMyG,SACVmnB,MAAM,SAAC5P,GACRjT,EAAK/K,MAAM6tB,YAAY,4BAExBD,MAAM,SAACwC,GACRrlB,EAAK/K,MAAM6tB,YAAY,sBAXvBztB,KAAK29B,kEAeP39B,KAAKJ,MAAM6tB,YAAY,0DAGvB,OACE3sB,EAAAC,EAAAC,cAACwG,GAAD1H,OAAA8E,OAAA,GACM5E,KAAKJ,MADX,CAEEyG,KAAMrG,KAAKqG,KAAKnE,KAAKlC,MACrB2F,kBAAkB,EAClBI,SAAU/F,KAAKJ,MAAMyG,KACrBlB,SAAU,iCACVqB,aAAc,IACdhB,QAAS,GACTzD,MAAM,kBACNgF,SACEjG,EAAAC,EAAAC,cAAA,OAAKkG,IAAI,MACbpG,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,mBAAmBC,oBAAoB,EAAMI,SAAY5I,KAAK49B,mBAAmB17B,KAAKlC,MAAOmO,yBAA0B,CAACnM,SAAS,QAASoM,wBAAyB,CAACpM,SAAS,QAASb,MAAO,CAACa,SAAS,QAAS6H,KAAK,aAClP/I,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,eAAeC,oBAAoB,EAAMI,SAAY5I,KAAK69B,gBAAgB37B,KAAKlC,MAAOmO,yBAA0B,CAACnM,SAAS,QAASoM,wBAAyB,CAACpM,SAAS,QAASb,MAAO,CAACa,SAAS,QAAS6H,KAAK,aAC3O/I,EAAAC,EAAAC,cAACuI,GAAAxI,EAAD,CAAWwH,kBAAkB,kBAAkBC,oBAAoB,EAAMI,SAAY5I,KAAK89B,gBAAgB57B,KAAKlC,MAAOmO,yBAA0B,CAACnM,SAAS,QAASoM,wBAAyB,CAACpM,SAAS,QAASb,MAAO,CAACa,SAAS,QAAS6H,KAAK,wBAhDjNzF,IAAMC,WC0B1B05B,oLA1BJ,IAAAl+B,EAAAG,KACHsP,EAAOtP,KAAKJ,MAAMo+B,UAAYl+B,OAAOs6B,KAAKp6B,KAAKJ,MAAMo+B,WAAWn1B,IAAI,SAAA3B,GAAG,MAAK,CAAEA,MAAKW,MAAOhI,EAAKD,MAAMo+B,UAAU92B,MAAW,GAC1H3B,EAAOvF,KAAKJ,MAAMq+B,GAAGlI,EAAI,GAAK,KAC9B9uB,EAAMjH,KAAKJ,MAAMq+B,GAAGC,EAAI,GAAK,KACjC,OACEp9B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAWkO,EAAKN,OAAO,EAAI,QAAU,OAAOzJ,KAAQA,EAAK0B,IAAMA,GAAMqC,GAAG,SACnFxI,EAAAC,EAAAC,cAAA,OAAKS,UAAW,eAAhB,4BACAX,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACCE,gBAAgB,EAChBD,SAAUI,EAAKN,OACfI,QAAS,EACTC,WAAW,GACXC,KAAMA,EACNE,QAAS,CAAC,CACRC,OAAQ,WACRC,SAAU,OACV,CACAD,OAAQ,QACRC,SAAU,oBAnBDtL,IAAMC,WC2BX85B,oLAxBb,IAAI54B,EAAOvF,KAAKJ,MAAMq+B,GAAGlI,EAAI,GAAK,KAC9B9uB,EAAMjH,KAAKJ,MAAMq+B,GAAGC,EAAI,GAAK,KACjC,OACCp9B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAWpB,KAAKJ,MAAM6V,UAAYzV,KAAKJ,MAAM6V,SAASzG,OAAS,EAAI,QAAU,OAAQzJ,KAAQA,EAAK0B,IAAMA,GAAMqC,GAAG,SAC7HxI,EAAAC,EAAAC,cAAA,OAAKS,UAAW,eAAhB,YACAX,EAAAC,EAAAC,cAACmG,GAAApG,EAAD,CAAMU,UAAU,OAAON,MAAO,CAACC,QAASpB,KAAKJ,MAAMwH,QAAU,eAAiB,OAAQ1D,MAAO,oBAAqBsD,SAAU,WAAYC,IAAK,MAAO3B,MAAO,OAAQ4B,IAAK,YACxKpG,EAAAC,EAAAC,cAACiO,GAAA,EAAD,CACCE,gBAAgB,EAChBD,SAAWlP,KAAKJ,MAAMwH,QAAW,EAAIpH,KAAKJ,MAAM6V,UAAYzV,KAAKJ,MAAM6V,SAASzG,OAChFI,QAAS,EACTC,WAAW,GACXC,KAAMtP,KAAKJ,MAAM6V,SACjBjG,QAAS,CAAC,CACRC,OAAQ,UACRC,SAAU,QACV9L,MAAO,IACP+L,YAAa,CAAEvO,QAAQ,oBAlBCgD,IAAMC,WCYtB+5B,oLAVb,IAAIz8B,EAA4B,mBAApB3B,KAAKJ,MAAMiK,KAA6B/I,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAM4b,IAAuBpc,MAAO,CAACuC,MAAM,MAAO26B,aAAa,SAAY,KAChJ,OACCv9B,EAAAC,EAAAC,cAAA,OAAKS,UAAW,gBACfX,EAAAC,EAAAC,cAAA,OAAKS,UAAW,oBAAqBE,EAAM3B,KAAKJ,MAAMiK,KAAK/I,EAAAC,EAAAC,cAAA,QAAMS,UAAW,qBAAsBI,QAAS7B,KAAKJ,MAAM0+B,mBAAoBv8B,MAAO,WAAtF,MACxDjB,EAAAC,EAAAC,cAAA,OAAKsQ,wBAAyB,CAACC,OAAQvR,KAAKJ,MAAMoiB,gBAN9B5d,IAAMC,WCkBlBk6B,oLAhBL,IAAA1+B,EAAAG,KAEJw+B,EAAgBx+B,KAAKJ,MAAM4+B,eAAiBx+B,KAAKJ,MAAM4+B,cAAc5S,OAAO,SAAA9iB,GAAI,OAAIA,EAAKsK,UAI7F,OAHGorB,EAAgBA,EAAc31B,IAAI,SAACC,GAC/B,OAAOhI,EAAAC,EAAAC,cAACy9B,GAAD,CAAczc,KAAMlZ,EAAKkZ,KAAMnY,KAAMf,EAAKe,KAAM3C,IAAK4B,EAAKQ,GAAIg1B,mBAAoBz+B,EAAKD,MAAM0+B,mBAAmBp8B,KAAKrC,EAAMiJ,OAGrIhI,EAAAC,EAAAC,cAAA,OAAKS,UAAW,gBAAiBN,MAAO,CAACC,QAAUpB,KAAKJ,MAAMyB,MAAQm9B,EAAcxvB,OAAS,EAAK,QAAU,SACrGlO,EAAAC,EAAAC,cAAA,OAAKS,UAAU,sBAAqBX,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAiBC,KAAM+8B,IAAQv9B,MAAO,CAACa,SAAU,UAAUlB,EAAAC,EAAAC,cAAA,QAAMS,UAAW,0BAAjB,iBAA+DX,EAAAC,EAAAC,cAAA,QAAMS,UAAW,cAAeI,QAAS7B,KAAKJ,MAAM++B,kBAAmB58B,MAAO,SAA9E,MAChKy8B,EACD19B,EAAAC,EAAAC,cAAA,OAAKS,UAAW,gCAXE2C,IAAMC,WCYnBu6B,oLAbb,IAAIr5B,EAAOvF,KAAKJ,MAAMq+B,GAAGlI,EAAI,GAAK,KAC9B9uB,EAAMjH,KAAKJ,MAAMq+B,GAAGC,EAAI,GAAK,KAC7Bn3B,EAAW/G,KAAKJ,MAAM6V,SAAS5M,IAAI,SAACC,GACvC,OAAOhI,EAAAC,EAAAC,cAAA,OAAKS,UAAW,YAAayF,IAAK4B,EAAK+1B,QAAQ/9B,EAAAC,EAAAC,cAAA,KAAGqQ,KAAM,mCAAqCvI,EAAK+1B,OAAQpuB,OAAO,SAAUgB,IAAI,sBAAsB1P,MAAM,oEAAoE+G,EAAKH,KAAK7H,EAAAC,EAAAC,cAAA,QAAMG,MAAO,CAACk9B,aAAa,SAArN,IAAgOv1B,EAAKg2B,SAArO,QAEvD,OACCh+B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAACC,QAAWpB,KAAKJ,MAAM6V,UAAYzV,KAAKJ,MAAM6V,SAASzG,OAAS,EAAI,QAAU,OAAQzJ,KAAQA,EAAK0B,IAAMA,GAAMqC,GAAG,QAAQy1B,YAAa/+B,KAAKJ,MAAMmb,aAAcvX,aAAcxD,KAAKJ,MAAM4D,cACnMuD,UATqB3C,IAAMC,WCkDjB26B,eA9CX,SAAAA,EAAYp/B,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAg/B,IACfn/B,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAk/B,GAAA7+B,KAAAH,KAAMJ,KACDQ,MAAQ,CAAEqS,aAAc,GAAIwsB,aAAa,GAF/Bp/B,8EAIP8H,GACY,UAAtBA,EAAEC,YAAYV,KAAiBlH,KAAKk/B,0DAGlC,IAAIC,EAAetd,6BAAmB7hB,KAAKI,MAAMqS,cACjDzS,KAAKQ,SAAS,CAAEy+B,YAAaE,IACzBA,IACAn/B,KAAKJ,MAAMw/B,6BAA6Bp/B,KAAKI,MAAMqS,cACnDzS,KAAKJ,MAAMyG,uCAIfrG,KAAKk/B,kDAEA,IAAAv0B,EAAA3K,KACL,OACImT,EAAA,cAAC3L,GAAD1H,OAAA8E,OAAA,GACQ5E,KAAKJ,MADb,CAEI4G,aAAc,IAC1BpB,QAAS,GACTI,QAAS,IACGzD,MAAM,SACNsE,KAAMrG,KAAKqG,KAAKnE,KAAKlC,MACrB+G,SACAoM,EAAA,cAACA,EAAA,SAAD,KACIA,EAAA,cAAC5J,GAAAxI,EAAD,CACIyH,oBAAoB,EACpBI,SAAY,SAACY,EAAMqB,GAAP,OAAoBF,EAAKnK,SAAS,CAACiS,aAAe5H,KAC9DoD,aAAejO,KAAKI,MAAMqS,aAC1B9I,WAAY3J,KAAK4J,eAAe1H,KAAKlC,MACrCmO,yBAA0B,CAACnM,SAAS,QACpCoM,wBAAyB,CAACpM,SAAS,QACnCb,MAAO,CAACa,SAAS,OAAO4B,MAAM,QAC9BkH,UAAW9K,KAAKI,MAAM6+B,YAAe,GAAK,8BAtCvC76B,iBC2CZi7B,2LAxCK/+B,GACZ4E,OAAOo6B,UAAUC,UAAUC,UAAUx/B,KAAKJ,MAAM6/B,kBAAkB5nB,KAAK,aAEpE,WACCkK,MAAM,4DAIL,IAAAliB,EAAAG,KACL,OACImT,EAAA,cAAC3L,GAAD1H,OAAA8E,OAAA,GACQ5E,KAAKJ,MADb,CAEI4G,aAAc,IACdjF,OAAQ,IACpB6D,QAAS,GACTI,QAAS,IACGzD,MAAM,iBACNgF,SACAoM,EAAA,cAACA,EAAA,SAAD,KACIA,EAAA,cAAC5J,GAAAxI,EAAD,CACI8jB,WAAW,EAAMC,KAAM,EACvBtc,oBAAoB,EACpBI,SAAY,SAACY,EAAMqB,GAAP,OAAoBhL,EAAKW,SAAS,CAACiS,aAAe5H,KAC9DoD,aAAejO,KAAKJ,MAAM6/B,iBAC1BtxB,yBAA0B,CAACnM,SAAS,QACpCoM,wBAAyB,CAACpM,SAAS,QACnCb,MAAO,CAACa,SAAS,OAAO4B,MAAM,WAEjDuP,EAAA,cAACvN,GAAD,CACCjE,KAAMwR,EAAA,cAACzR,EAAA,EAAD,CAAiBC,KAAM+9B,MAC7B39B,MAAM,OACNF,QAAS7B,KAAK2/B,gBAAgBz9B,KAAKlC,mBAhCPoE,iBCgE9Bw7B,GAAwBC,EAAYC,QACpCzzB,GAAY,2DACZyjB,GAAczjB,GAAY,mBAM1B0zB,GAAyB,CAAC,EAAG,EAAG,GAKhCC,GAAgB,uBAChBC,GAAoB,8BAEpBC,GAAoB,8BAQpBC,GAAoC,GAEpCC,GAA0B,GAE1BC,GAAyB,kDAGzBje,GAAqB,CAAC,CAAEzZ,KAAM,KAAMzB,IAAK,KAAKya,KAAM,wCAAyCa,YAAY,EAAOD,YAAY,GAC9H,CAAE5Z,KAAM,QAASzB,IAAK,QAAQya,KAAM,wCAAyCa,YAAY,EAAOD,YAAY,GAC5G,CAAE5Z,KAAM,qBAAsBzB,IAAK,qBAAqBya,KAAM,4DAA6Da,YAAY,EAAOD,YAAY,GAC1J,CAAE5Z,KAAM,cAAezB,IAAK,cAAcya,KAAM,kCAAmCa,YAAY,EAAOD,YAAY,GAClH,CAAE5Z,KAAM,gBAAiBzB,IAAK,gBAAgBya,KAAM,+CAAgDa,YAAY,EAAOD,YAAY,GACnI,CAAE5Z,KAAM,YAAazB,IAAK,YAAYya,KAAM,yDAA0Da,YAAY,EAAOD,YAAY,GACrI,CAAE5Z,KAAM,OAAQzB,IAAK,aAAaya,KAAM,wDAAyDa,YAAY,EAAOD,YAAY,GAChI,CAAE5Z,KAAM,eAAgBzB,IAAK,iBAAiBya,KAAM,iEAAkEa,YAAY,EAAMD,YAAY,GACpJ,CAAE5Z,KAAM,MAAOzB,IAAK,yBAAyBya,KAAM,kGAAmGa,YAAY,EAAMD,YAAY,GACpL,CAAE5Z,KAAM,eAAgBzB,IAAK,eAAeya,KAAM,0EAA2Ea,YAAY,EAAOD,YAAY,GAC5J,CAAE5Z,KAAM,WAAYzB,IAAK,sBAAsBya,KAAM,6FAA8Fa,YAAY,EAAMD,YAAY,GACjL,CAAE5Z,KAAM,UAAWzB,IAAK,qBAAqBya,KAAM,6FAA8Fa,YAAY,EAAMD,YAAY,GAC/K,CAAE5Z,KAAM,cAAezB,IAAK,cAAcya,KAAM,qHAAsHa,YAAY,EAAMD,YAAY,GACpM,CAAE5Z,KAAM,iBAAkBzB,IAAK,iBAAiBya,KAAM,2FAA4Fa,YAAY,EAAMD,YAAY,IA+8HnK+d,eA38Hb,SAAAA,EAAY1gC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAsgC,IACjBzgC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAwgC,GAAAngC,KAAAH,KAAMJ,KACDQ,MAAQ,CACX2H,cAAe,GACfE,aAAc,GACds4B,iBAAiB,EACjBC,iBAAiB,EACjBC,iBAAiB,EACjBC,mBAAmB,EACnBC,iBAAiB,EACjBC,gBAAgB,EAChBC,yBAAyB,EACzBC,mBAAmB,EACnBC,iBAAiB,EACjBC,oBAAoB,EACpBC,oBAAoB,EACpBC,oBAAoB,EACpBC,oBAAoB,EACpBC,oBAAoB,EACpBC,sBAAsB,EACtBC,yBAAyB,EACzBC,0BAA0B,EAC1BC,0BAA0B,EAC1BC,2BAA2B,EAC3BC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,0BAA0B,EAC1BC,0BAA0B,EAC1BC,yBAAyB,EACzBC,yBAAyB,EACzBC,wBAAwB,EACxBC,sBAAsB,EACtB9W,oBAAoB,EACpB+W,mBAAmB,EACnBC,kBAAkB,EAClB5/B,eAAe,EACfG,kBAAkB,EAClB0/B,kBAAkB,EAClBC,mBAAmB,EACnBl6B,kBAAkB,EAClBm6B,cAAc,EACdC,cAAc,EACd3zB,MAAO,GACP5L,KAAM,GACNgF,SAAU,GACVwP,QAAS,GACTgrB,uBAAwB,GACxBjjB,MAAO,GACPkjB,UAAU,EACVC,eAAe,EACf50B,SAAU,GACVmW,oBAAqB,GACrBlN,SAAU,GACV2f,SAAU,GACV5C,UAAW,GACXlD,MAAO,GACP+R,YAAa,CAAE5M,EAAG,EAAGmI,EAAG,GACxB0E,cAAc,EACdC,gBAAiB,GACjBC,SAAU,GACVC,WAAY,GACZC,WAAY,GACZ57B,SAAS,EACTuS,eAAe,EACfiD,kBAAkB,EAClBqmB,eAAe,GACfC,gBAAiB,GACjBC,uBAAwB,GACxBtN,WAAY,GACZjM,YAAa,GACbwZ,gBAAiB,GACjB3Z,mBAAoB,GACpBP,wBAAwB,EACxBvM,sBAAuBwjB,GACvBrjB,mBAAoBsjB,GACpBiD,MAAO,GACP3a,cAAe,GACfmH,UAAW,GACXyT,eAAgB,GAChBtb,oBAAqB,GACrBiF,uBAAuB,GACvBlD,iBAAiB,GACjBhR,UAAW,UACX0H,iBAAkB,SAClB8iB,YAAa,GACbvL,mBAAoB,GACpBC,mBAAoB,GACpBC,mBAAoB,GACpBC,mBAAoB,GACpBC,mBAAoB,GACpB6B,iBAAiB,EACjBpN,WAAW,GACXrU,IAAK,EACLtL,SAAU,GACVD,QAAS,aACTiqB,UAAW,CAACsM,IAAK,EAAGC,IAAK,GACzBtM,QAAS,GACTuE,QAAQ,GACR3jB,WAAW,EACXvG,gBAAiB,GACjBiuB,iBAAkB,GAClBjB,cAAc,IArGC3+B,mFAyGC,IAAA8K,EAAA3K,KAEa,KAA3BkF,OAAOw+B,SAASC,QAAe3jC,KAAKQ,SAAS,CAACiiC,UAAS,EAAMC,eAAc,IAE/E1iC,KAAK4jC,qBAAqB/rB,KAAK,WAE7B,GAA+B,KAA3B3S,OAAOw+B,SAASC,OAAe,CAEjC,IAAIE,EAAe,IAAIC,gBAAgB5+B,OAAOw+B,SAASC,QAEvDh5B,EAAKo5B,kBAAkBF,MAI3B7jC,KAAKQ,SAAS,CAAEkb,KAAM,IAAIsoB,mDAIR,IAAAhR,EAAAhzB,KAClB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B1E,IAAS2c,YAAc/+B,OAAO8gB,YAE9BgN,EAAKxyB,SAAS,CAAC0M,SAAUhI,OAAOg/B,kBAEhClR,EAAKmR,kBAAkBj/B,OAAOk/B,gBAAgBvsB,KAAK,SAACmY,GAClDjE,EAAQiE,iDAMI6T,GAAa,IAAA3Q,EAAAlzB,KAC7B,IACE,KAAI6jC,EAAaQ,IAAI,WAAaR,EAAaQ,IAAI,SAAWR,EAAaQ,IAAI,YAmB7E,MAAM,IAAI35B,MAAM,8CAjBhB,IAAI45B,EAAatkC,KAAKI,MAAM2H,cAAcw8B,KAAK,SAAAC,GAAM,OAAIA,EAAO77B,OAASk7B,EAAaY,IAAI,YAC1F,QAAmBp8B,IAAfi8B,EAA0B,MAAM,IAAI55B,MAAM,8CAC9C,GAAI45B,GAAcA,EAAWp8B,QAAS,MAAM,IAAIwC,MAAM,qBACtD,GAAI45B,IAAeA,EAAWn8B,iBAAkB,MAAM,IAAIuC,MAAM,2CAEhE1K,KAAK8H,aAAaw8B,GAElBtkC,KAAK0kC,oBAAoB7sB,KAAK,WAE5Bqb,EAAKyR,eAAe9sB,KAAK,SAACmY,GACxBkD,EAAKhQ,YAAY2gB,EAAaY,IAAI,WAAWZ,EAAaY,IAAI,SAAS5sB,KAAK,WAE1Eqb,EAAK1yB,SAAS,CAACkiC,eAAc,UAQzC,MAAOt4B,GACL2X,MAAM3X,iCASHw6B,GAA0B,IAAA1K,EAAAl6B,KAAlB6kC,EAAkBtjB,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,GAAAA,UAAA,GArNnB,EAsNV,OAAO,IAAIuK,QAAQ,SAACC,EAASC,GAE3BkO,EAAK15B,SAAS,CAAC4G,SAAS,IACxB09B,IAAM5K,EAAK95B,MAAM6H,aAAa88B,SAAWH,EAAQ,CAAEC,QAASA,IAAWG,QAAQntB,KAAK,SAACmY,GACnFkK,EAAK15B,SAAS,CAAC4G,SAAS,IACnB8yB,EAAK5I,eAAetB,GAIvBhE,EAAOgE,EAASpS,OAHhBmO,EAAQiE,IAKT,SAAC5lB,GACF8vB,EAAK15B,SAAS,CAAC4G,SAAS,IACxB8yB,EAAKzM,YAAY,kCAAoCqC,GAAc,6CACnE9D,EAAO5hB,qCAMP66B,EAAQnU,GAAgE,IAAAoU,EAAAllC,KAAnCmxB,GAAmC5P,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,IAAAA,UAAA,KAAAA,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,KAAAA,UAAA,IAC5E,OAAO,IAAIuK,QAAQ,SAACC,EAASC,GAE3BkZ,EAAK1kC,SAAS,CAAC4G,SAAS,IACxB8pB,eAAKgU,EAAK9kC,MAAM6H,aAAa88B,SAAWE,EAAQnU,EAAU,CAACK,gBAAiBA,IAAkBtZ,KAAK,SAACmY,GAC7FkV,EAAK5T,eAAetB,EAAS1gB,OAKhC41B,EAAK1kC,SAAS,CAAC4G,SAAS,IACxB4kB,EAAOgE,EAAS1gB,KAAKsO,SALrBsnB,EAAK1kC,SAAS,CAAC4G,SAAS,IACxB2kB,EAAQiE,EAAS1gB,QAMlB,SAAClF,GACF86B,EAAK1kC,SAAS,CAAC4G,SAAS,IACxB89B,EAAKzX,YAAYrjB,EAAIC,SACrB2hB,EAAO5hB,mCAMTw6B,EAAQO,GAAY,IAAAC,EAAAplC,KACtB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B,IAAIqZ,EAAK,IAAIC,UAAUF,EAAKhlC,MAAM6H,aAAas9B,kBAAoBX,GAEnES,EAAGG,UAAY,SAACllC,GACd,IAAI+J,EAAU+gB,KAAKzF,MAAMrlB,EAAIgP,MAExB81B,EAAK9T,eAAejnB,IAavB86B,EAAY96B,GAEZ+6B,EAAK5kC,SAAS,CAACmZ,eAAe,IAC9BqS,EAAO3hB,EAAQuT,QAfQ,aAAnBvT,EAAQ+S,QAEV+nB,EAAY96B,GAEZ+6B,EAAK5kC,SAAS,CAACmZ,eAAe,IAE9BoS,EAAQ1hB,IAER86B,EAAY96B,IAUlBg7B,EAAGI,OAAS,SAACnlC,KAGb+kC,EAAGK,QAAU,SAACplC,GAEZ8kC,EAAK5kC,SAAS,CAACmZ,eAAe,IAC9BqS,EAAO1rB,IAET+kC,EAAGM,QAAU,SAACrlC,GAEZ8kC,EAAK5kC,SAAS,CAACmZ,eAAe,IACzBrZ,EAAIslC,SAGP5Z,EAAO1rB,GAFP6kC,EAAY,CAAC/nB,OAAO,2DASb4S,GAA+B,IAArB6V,IAAqBtkB,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,KAAAA,UAAA,GACxCukB,EAAe9lC,KAAK+lC,yBAAyB/V,EAAU6V,GAEvDG,EAAchmC,KAAKimC,cAAcjW,EAAU6V,GAC3CK,EAAWJ,GAAgBE,EAC/B,GAAIE,EAAS,CAEX,IAAItoB,EAASoS,EAAS1S,eAAe,SAAY0S,EAASmW,MAASnW,EAAS1S,eAAe,SAAY0S,EAASpS,MAAQ,4BACxHuC,QAAQvC,MAAM,8BAAgCA,GAEhD,OAAOsoB,mDAIgBlW,GAA+B,IAArB6V,IAAqBtkB,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,KAAAA,UAAA,GACtD,GAAKyO,EAMH,OAAO,EAHP,OADI6V,GAAc7lC,KAAKytB,YADb,qCAEH,wCAQGuC,EAAU6V,GAEtB,GAAK7V,GAAYA,EAASpS,OAAWoS,GAAYA,EAAS1S,eAAe,aAAe0S,EAASjZ,SAASuG,eAAe,UAAuC,MAA3B0S,EAASjZ,SAAS6G,MAAgB,CACrK,IAAIxT,EAAO4lB,EAASpS,MAAUoS,EAASpS,MAASoS,EAASjZ,SAAS6G,MAElE,OADIioB,GAAc7lC,KAAKytB,YAAYrjB,IAC5B,EAOP,OAHI4lB,EAASoW,SACPP,GAAc7lC,KAAKytB,YAAauC,EAASoW,UAExC,4CAKO/7B,GAEhB,IAAIrK,KAAKI,MAAM65B,gBAGf,OADAj6B,KAAKqmC,WAAWh8B,GACRA,EAAQ+S,QACd,IAAK,UACL,IAAK,gBAEHpd,KAAKQ,SAAS,CAACmZ,eAAe,IAC9B,MACF,IAAK,MACH3Z,KAAKQ,SAAS,CAACgY,IAAKnO,EAAQmO,MAC5B,MACF,IAAK,iBACHxY,KAAKsmC,kBAAkBj8B,EAAQf,IAC/B,MACF,IAAK,WAEHtJ,KAAKQ,SAAS,CAACgY,IAAK,wCAQfnO,GAET,GAAuB,iBAAnBA,EAAQ+S,OACVpd,KAAKomB,IAAI,CAAC6e,OAAO56B,EAAQ46B,OAAQ7nB,OAAO,WAAYQ,MAAM,sDAG1D,GAAIvT,EAAQiT,eAAe,OAAQ,CAEjC,IAAIipB,EAAYvmC,KAAKI,MAAMmjC,YAAY3X,OAAO,SAAC4a,GAC7C,QAAIA,EAASlpB,eAAe,QACnBkpB,EAAShuB,MAAQnO,EAAQmO,MAMhC+tB,EAAUv3B,OAAS,EAEjB3E,EAAQ+S,SAAWmpB,EAAUA,EAAUv3B,OAAO,GAAGoO,SAE5B,aAAnB/S,EAAQ+S,QAAuBpd,KAAKymC,qBAAqB,eAAgBp8B,EAAQmO,KACrFxY,KAAKomB,IAAI/b,IAGXrK,KAAKomB,IAAI/b,OAER,CAEH,GAAuB,gBAAnBA,EAAQ+S,OAKe,IAHTpd,KAAKI,MAAMmjC,YAAY3X,OAAO,SAAC4a,GAC7C,MAA4B,gBAApBA,EAASppB,SAELpO,QAAchP,KAAKomB,IAAI/b,OAGd,eAAnBA,EAAQ+S,QAAyBpd,KAAKymC,qBAAqB,eAC/DzmC,KAAKomB,IAAI/b,iDAOI+S,EAAQ5E,GAC3B,IAAI+tB,EAAYvmC,KAAKI,MAAMmjC,YAE3BgD,EAAYA,EAAU3a,OAAO,SAAC4a,GAC5B,YAAYn+B,IAARmQ,GACEguB,EAASlpB,eAAe,UAChBkpB,EAAShuB,MAAQA,GAAOguB,EAASppB,SAAWA,KAK9CopB,EAASppB,SAAWA,KAGlCpd,KAAKQ,SAAS,CAAC+iC,YAAagD,wCAIlBl8B,GAAwBkX,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,IAAAA,UAAA,IACrBvhB,KAAKQ,SAAS,CAACoiC,cAAc,EAAMC,gBAAiBx4B,8CAQjDtC,GAAc,IAAA2+B,EAAA1mC,KAC9B,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAE3B,IAAI2a,EAAQ5+B,EAAcc,IAAI,SAAC27B,GAC7B,OAAOA,EAAOp7B,OAGZT,EAAqC,cAA7BzD,OAAOw+B,SAASkD,SAA4B,YAAc1hC,OAAOw+B,SAASkD,SACtF7+B,EAAc0a,KAAM,CAAC9Z,KAAMA,EAAMk+B,SAAU3hC,OAAOw+B,SAASmD,SAAUz9B,KAAMlE,OAAOw+B,SAASkD,SAAUE,KAAM,KAAMz9B,YAAY,gBAAiBQ,KAAK,UAEnJ68B,EAAKK,yBAAyBh/B,GAAe8P,KAAK,SAAC2sB,IAEjDz8B,EAAgBA,EAAc6jB,OAAO,SAAC9iB,GACpC,MAAoB,WAAZA,EAAKe,MAAgC,UAAZf,EAAKe,OAAmBf,EAAKZ,UAAyC,IAA9By+B,EAAMn2B,QAAQ1H,EAAKM,OAAgC,cAAdN,EAAKM,QAGvG49B,KAAK,SAACjmC,EAAG6B,GACrB,OAAK7B,EAAE4H,KAAK8B,cAAgB7H,EAAE+F,KAAK8B,eAA4B,UAAX1J,EAAE8I,MAC5C,EACN9I,EAAE4H,KAAK8B,cAAgB7H,EAAE+F,KAAK8B,cACzB,EACF,IAETi8B,EAAKlmC,SAAS,CAACuH,cAAeA,GAAgB,WAC5CgkB,EAAQ,+EAOShkB,GAGvB,IAFA,IAAIk/B,EAAe,GAEVpN,EAAI,EAAGA,EAAI9xB,EAAciH,SAAU6qB,EAC1CoN,EAAaxkB,KAAKziB,KAAKknC,sBAAsBn/B,EAAc8xB,KAG7D,OAAO/N,QAAQqb,IAAIF,iDAICzC,GACpB,OAAO,IAAI1Y,QAAQ,SAACC,EAASC,GAE3B,IAAI+Y,EAAWP,EAAOqC,SAAW,KAAOrC,EAAOp7B,KAAO,IAAMo7B,EAAOsC,KA1etD,kBA4eTvB,EAAwC,UAAnBf,EAAOqC,SAAuB,QAAUrC,EAAOp7B,KAAO,IAAMo7B,EAAOsC,KA5e/E,kBA4eqG,SAAWtC,EAAOp7B,KAAO,IAAMo7B,EAAOsC,KA5e3I,kBA8ebtC,EAAS1kC,OAAO8E,OAAO4/B,EAAQ,CAACO,SAAUA,EAAUQ,kBAAmBA,EAAmBr9B,SAAS,EAAMC,kBAAkB,EAAOC,aAAa,IAE/Ig/B,IAAWrC,EAAW,gBAAgB,CAACF,QAAS,MAAOhtB,KAAK,SAACmY,GAC3D,OAAOA,EAASqX,SACfxvB,KAAK,SAACwvB,GACP,GAAIA,EAAK/pB,eAAe,QAAQ,CAE9B,IAAIlV,EAAgBi/B,EAAK/C,WAAWgD,kBAAkB92B,QAAQtL,OAAOw+B,SAASkD,WAAW,GAAKpC,EAAOp7B,OAASlE,OAAOw+B,SAASkD,SAE9HpC,EAAS1kC,OAAO8E,OAAO4/B,EAAQ,CAACr8B,iBAAkBk/B,EAAK/C,WAAWiD,kBAAmBn/B,YAAaA,EAAaF,SAAS,EAAOs/B,QAASH,EAAK/C,WAAWmD,QAASC,eAAgBL,EAAK/C,WAAW1E,sBAAuB/C,eAAgBwK,EAAK/C,WAAWqD,sBAAuBloB,KAAM4nB,EAAK/C,WAAWsD,KAAMC,UAAWR,EAAK/C,WAAWwD,UAAWC,QAASV,EAAK/C,WAAW0D,QAASpL,OAAOyK,EAAK/C,WAAW2D,OAAQnI,QAASuH,EAAK/C,WAAW4D,QAASpL,aAAcuK,EAAK/C,WAAW6D,aAAcC,0BAA2B51B,OAAO60B,EAAK/C,WAAW+D,2BAA4BC,WAAY91B,OAAO60B,EAAK/C,WAAWiE,mBAEhjB,KAA9BlB,EAAK/C,WAAWkE,cACjBhE,EAAS1kC,OAAO8E,OAAO4/B,EAAQ,CAAC77B,KAAK0+B,EAAK/C,WAAWkE,eAGf,KAArCnB,EAAK/C,WAAWmE,qBACjBjE,EAAS1kC,OAAO8E,OAAO4/B,EAAQ,CAACn7B,YAAYg+B,EAAK/C,WAAWmE,sBAIhE1c,EAAQyY,KACLhX,MAAM,SAACyE,GAERlG,EAAQyY,2DAMY1H,GAE1B,IAAIgD,EAAUhD,EAAaryB,cAAc8b,OAAO,EAAE,GAAK,IAAMuW,EAAavW,QAAQ,GAElFvmB,KAAK0oC,uBAAyB,QAAU5I,EAAU,iDAGvCj4B,GACX7H,KAAKQ,SAAS,CAACyH,aAAcJ,IAE7B7H,KAAK2oC,4BAA4B9gC,EAAMi1B,cAElCj1B,EAAMK,SAAYL,EAAMO,cAAeP,EAAMM,kBAChDnI,KAAK0kC,4DAKP1kC,KAAKQ,SAAS,CAAEoiC,cAAc,2CAGF,IAAjBxhB,EAAiBG,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,IAAAA,UAAA,GAE5BvhB,KAAKghB,iBAEDI,GAAUphB,KAAKohB,8CAKnBphB,KAAKQ,SAAS,CAAC+iC,YAAa,iCAI1Bl5B,GACF,IAAIk8B,EAAYvmC,KAAKI,MAAMmjC,YAC3BgD,EAAU9jB,KAAKpY,GACfrK,KAAKQ,SAAS,CAAC+iC,YAAagD,uDAIHqC,GACzB,IAAIC,EAAQ,GAIZ,OAHAD,EAAevmB,QAAQ,SAACvZ,GACtB+/B,EAAQA,EAAMlU,OAAO7rB,EAAK,MAErB+/B,yCAGM7lC,GACbhD,KAAKQ,SAAS,CAAEwC,KAAMA,2CAGTgF,GACbhI,KAAKQ,SAAS,CAAEwH,SAAUA,0CAIdhF,EAAMgF,GAAU,IAAA8gC,EAAA9oC,KAC5B,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B8c,EAAKjQ,KAAK,qBAAsB71B,EAAO,aAAegF,EAAU,KAAO6P,KAAK,SAACmY,GAC3EjE,MACCyB,MAAM,SAAC5P,GACRoO,EAAOpO,8CAKE,IAAAmrB,EAAA/oC,KACb,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B+c,EAAKtL,cAAcsL,EAAK3oC,MAAM4C,KAAM+lC,EAAK3oC,MAAM4H,UAAU6P,KAAK,WAE5DkxB,EAAKC,QAAQnxB,KAAK,SAACmY,GACjBjE,EAAQ,sBAETyB,MAAM,SAAC5P,wCAON,IAAAqrB,EAAAjpC,KACN,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3Bid,EAAKpQ,KAAK,gBAAkBoQ,EAAK7oC,MAAM4C,MAAM6U,KAAK,SAACmY,GACjDiZ,EAAKzoC,SAAS,CAACsN,SAAUkiB,EAASliB,SAAUmW,oBAAqB+L,EAAS/L,oBAAqBzM,QAASwY,EAASliB,SAASo7B,YAAaC,uBAAyBnZ,EAASmZ,uBAAyBnZ,EAASmZ,uBAAyB,IAAM,WAExOF,EAAKG,sBAGP,IAAIn8B,EAAUg8B,EAAK7oC,MAAM8M,SAAS0e,OAAO,SAAC9iB,GAAU,OAAQA,EAAKH,OAASqnB,EAASliB,SAASu7B,UAAY,GACxGJ,EAAKK,WAAWr8B,GAAS4K,KAAK,WAE5BoxB,EAAKjmB,iBAAiBnL,KAAK,WAEzBoxB,EAAK/lB,YAAY8M,EAASliB,SAASo7B,YAAaD,EAAK7oC,MAAM4C,MAAM6U,KAAK,SAACmY,GACrEjE,EAAQ,iBAIZkd,EAAK3c,2BAENkB,MAAM,SAAC5P,yCAQZ5d,KAAKyL,eACLzL,KAAKQ,SAAS,CAAEiiC,UAAU,EAAOz/B,KAAM,GAAIgF,SAAU,GAAIwP,QAAS,GAAG+H,MAAO,GAAIuU,UAAW,GAAIlD,MAAO,GAAI7Z,SAAU,GAAI2f,SAAU,GAAI4M,eAAgB,GAAIF,gBAAgB,GAAI7gC,eAAe,EAAOG,kBAAkB,EAAOgZ,KAAM,IAAIsoB,IAAcxF,cAAc,KACnQx+B,KAAKupC,eAELvpC,KAAK64B,KAAK,UAAUhhB,KAAK,SAACmY,kDAKT,IAAAwZ,EAAAxpC,KACjB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3Bwd,EAAKhpC,SAAS,CAACwC,KAAM,QAASgF,SAAS,YAAa,WAClD+jB,EAAQ,kEAKFlkB,GACR7H,KAAKQ,SAAS,CAAEipC,YAAa5hC,6CAGhB,IAAA6hC,EAAA1pC,KACfA,KAAK64B,KAAK,uBAAyB74B,KAAKI,MAAM4C,MAAM6U,KAAK,SAACmY,GAExD0Z,EAAKjc,YAAYuC,EAASxS,MAE1BksB,EAAKC,8BACJnc,MAAM,SAAC5P,yCAMD,IAAAgsB,EAAA5pC,KACTA,KAAK64B,KAAK,YAAYhhB,KAAK,SAACmY,GAC1B4Z,EAAKppC,SAAS,CAAEoO,MAAOohB,EAASphB,UAC/B4e,MAAM,SAAC5P,GACRgsB,EAAKppC,SAAS,CAAEoO,MAAO,0CAKhB5L,GAAM,IAAA6mC,EAAA7pC,KACfA,KAAK64B,KAAK,mBAAqB71B,GAAM6U,KAAK,SAACmY,GACzC6Z,EAAKpc,YAAY,gBAEjB,IAAIqc,EAAYD,EAAKzpC,MAAMwO,MAE3Bk7B,EAAYA,EAAUle,OAAO,SAAC9iB,GAAU,OAAOA,EAAK9F,OAASA,IAE7D6mC,EAAKrpC,SAAS,CAACoO,MAAOk7B,IAElBD,EAAKzpC,MAAMmf,QAAUvc,IACvB6mC,EAAKpc,YAAY,6DAEjBoc,EAAKzpC,MAAM0jB,SAASimB,KAAK,SAACvyB,GAExB,OADIA,EAAQxU,OAASA,GAAM6mC,EAAK3mB,YAAY1L,EAAQ7O,KAAM6O,EAAQxU,MAC3DwU,EAAQ7O,OAASkhC,EAAKzpC,MAAMoX,UAGrCqyB,EAAKG,sBAAsBhnC,oDAMXA,GACpB,IAAI8gB,EAAW9jB,KAAKI,MAAM0jB,SAASjb,IAAI,SAAC2O,GACtC,OAAQA,EAAQxU,OAASA,IAE3BhD,KAAKQ,SAAS,CAACsjB,SAAUA,uCAIhB9gB,EAAMinC,GACfjqC,KAAK0N,WAAW,CAACyC,KAAM85B,GAAOjnC,GAE9B,IAAI8mC,EAAY9pC,KAAKI,MAAMwO,MAE3Bk7B,EAAYA,EAAUjhC,IAAI,SAACC,GACzB,OAAIA,EAAK9F,OAASA,EACTlD,OAAO8E,OAAOkE,EAAM,CAACqH,KAAQ85B,IAE7BnhC,IAIX9I,KAAKQ,SAAS,CAACoO,MAAOk7B,oDAID,IAAAI,EAAAlqC,KACrBA,KAAK64B,KAAK,yBAAyBhhB,KAAK,SAACmY,GAEvCka,EAAK1pC,SAAS,CAAE2H,iBAAkB6nB,EAASma,yDAK1Bt/B,GAAS,IAAAu/B,EAAApqC,KAC5BA,KAAKqqC,uBAAuB,UAAWx/B,GAAUgN,KAAK,SAACmY,GACrDoa,EAAK5pC,SAAS,CAAEuW,SAAUjX,OAAO8E,OAAOwlC,EAAKhqC,MAAM2W,SAAU,CAAEsC,QAAuB,SAAbxO,oDAOvE3F,OAAOolC,cAAct7B,OAAO,IAC9BhP,KAAKuqC,iBAAiBrlC,OAAOolC,eAC7BtqC,KAAKQ,SAAS,CAAC6hC,mBAAmB,KAGhCriC,KAAKI,MAAM6H,aAAa60B,eAAiB53B,OAAO83B,KAAKC,gBACvDj9B,KAAKQ,SAAS,CAACu8B,gBAAgB,IAC/B/8B,KAAKuqC,iBAAiB,CAAC,CAACjhC,GAAG,eAAiBpE,OAAO83B,KAAKC,eAAgBjb,KAAK,oGAAqGnY,KAAK,cAAe2gC,aAAc,CAAC,aAErNxqC,KAAKQ,SAAS,CAACu8B,gBAAgB,IAG7B6C,KAA0B16B,OAAOulC,gBAAgBzqC,KAAKuqC,iBAAiB,CAAC,CAACjhC,GAAG,wBAA0BpE,OAAOulC,eAAgBzoB,KAAK,gDAAkD9c,OAAOulC,eAAiB,sDAAuD5gC,KAAK,kBAAmB2gC,aAAc,CAAC,YAE1SxqC,KAAKI,MAAM6H,aAAa40B,iBAAmB33B,OAAOwlC,gBAAgB1qC,KAAKuqC,iBAAiB,CAAC,CAACjhC,GAAG,wBAA0BpE,OAAOwlC,eAAgB1oB,KAAK,gDAAkD9c,OAAOwlC,eAAiB,+DAAgE7gC,KAAK,kBAAmB2gC,aAAc,CAAC,YAEpUxqC,KAAKI,MAAM6H,aAAaqgC,WAAa,IACvCtoC,KAAKuqC,iBAAiB,CAAC,CAACjhC,GAAG,gBAAiB0Y,KAAK,mBAAoBnY,KAAK,iBAAkB2gC,aAAc,CAAC,YAEvGxqC,KAAKI,MAAM6H,aAAaqgC,WAAa,IACvCtoC,KAAKuqC,iBAAiB,CAAC,CAACjhC,GAAG,gBAAiB0Y,KAAK,mBAAoBnY,KAAK,iBAAkB2gC,aAAc,CAAC,YAEvGxqC,KAAKI,MAAM6H,aAAaqgC,WAAa,KAAMtoC,KAAKuqC,iBAAiB,CAAC,CAACjhC,GAAG,gBAAiB0Y,KAAK,mBAAoBnY,KAAK,iBAAkB2gC,aAAc,CAAC,wDAO9JxqC,KAAKQ,SAAS,CAAC6hC,mBAAmB,6CAInB7D,GAAc,IAAAmM,EAAA3qC,KACzB4qC,EAAiB5qC,KAAKI,MAAMo+B,cAEhCA,EAAgBA,EAAc31B,IAAI,SAAAC,GAChC,IAAI+hC,EAAkB/hC,EAAK0hC,aAAah6B,QAAQm6B,EAAKvqC,MAAM0N,SAASqC,OAAO,EACvE26B,GAAgF,IAAhEH,EAAKvqC,MAAM+oC,uBAAuB34B,QAAQhG,OAAO1B,EAAKQ,KACtEyhC,GAAa,EAEjB,GAAKjiC,EAAKwU,eAAe,YAAgBxU,EAAKwU,eAAe,YAAgC,KAAjBxU,EAAKkiC,QACjF,IACI,IAAIC,EAAI1nB,KAAKoC,MAAM7c,EAAKkiC,SACpB,IAAIznB,KAAS0nB,IAAGF,GAAa,GAErC,MAAO3gC,IAIP,IAAIgJ,EAAUy3B,GAAkBC,GAAgBC,EAChD,OAAOjrC,OAAO8E,OAAOkE,EAAM,CAACsK,QAASA,MAEvCw3B,EAAenoB,KAAKrG,MAAMwuB,EAAgBpM,GAC1Cx+B,KAAKQ,SAAS,CAACg+B,cAAeoM,+CAIbM,GAEjB,IAAIN,EAAkB5qC,KAAKI,MAAMo+B,cAAc5S,OAAO,SAAAuf,GAAa,OAAIA,EAAc7hC,KAAO4hC,EAAa5hC,KAEzGtJ,KAAKorC,oBAAoBF,GAEzBlrC,KAAKQ,SAAS,CAACg+B,cAAeoM,gDAIZM,GAClBlrC,KAAK64B,KAAK,4BAA8B74B,KAAKI,MAAM4C,KAAO,mBAAqBkoC,EAAa5hC,iDAI1E,IAAA+hC,EAAArrC,KAClBA,KAAK64B,KAAK,2BAA6B74B,KAAKI,MAAM4C,MAAM6U,KAAK,WAC3DwzB,EAAK7qC,SAAS,CAACg+B,cAAc,KAC7B6M,EAAKjC,+DAIQtY,EAAUhP,GAEzB,IAAK,IAAI5a,KAAO4a,EAEVA,EAAIxE,eAAepW,IACrB4pB,EAASG,OAAO/pB,EAAK4a,EAAI5a,IAG7B,OAAO4pB,qCAIEhP,EAAKsY,GAKd,OAJAA,EAAKvxB,IAAI,SAAC3B,GAER,cADO4a,EAAI5a,GACJ,OAEF4a,qCAIEwpB,GAAoC,IAAAC,EAAAvrC,KAAxBgD,EAAwBue,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,GAAAA,UAAA,GAAjBvhB,KAAKI,MAAM4C,KACvC,OAAO,IAAI8oB,QAAQ,SAACC,EAASC,GAE3Bsf,EAAaC,EAAKC,WAAWF,EAAY,CAAC,UAAW,eAErD,IAAIxa,EAAW,IAAIC,SAEnBD,EAASG,OAAO,OAAQjuB,GAExBuoC,EAAKE,iBAAiB3a,EAAUwa,GAEhCC,EAAKG,MAAM,uBAAwB5a,GAAUjZ,KAAK,SAACmY,GAE7Cub,EAAKnrC,MAAM4C,OAASA,GAAMuoC,EAAK/qC,SAAS,CAAEsN,SAAUy9B,EAAKI,cAC7DJ,EAAK/qC,SAAS,CAACsgC,mBAAmB,IAClC/U,MACCyB,MAAM,SAAC5P,GACRoO,EAAOpO,KAGL2tB,EAAKnrC,MAAM4C,OAASA,IAAMuoC,EAAKI,YAAc7rC,OAAO8E,OAAO2mC,EAAKnrC,MAAM0N,SAAUw9B,0CAK5Ex+B,GAEV9M,KAAK4rC,YACL5rC,KAAK0N,WAAWZ,0CAGH0K,GACb,OAAOxX,KAAK64B,KAAK,uBAAyB74B,KAAKI,MAAM4C,KAAO,YAAcwU,+CAIxDA,EAAS8zB,GAE3B,IAAIxa,EAAW,IAAIC,SAQnB,OANAD,EAASG,OAAO,OAAQjxB,KAAKI,MAAMmf,OAEnCuR,EAASG,OAAO,UAAWzZ,GAE3BxX,KAAKyrC,iBAAiB3a,EAAUwa,GAEzBtrC,KAAK0rC,MAAM,0BAA2B5a,kDAIxBU,EAAW3pB,GAChC,IAAIia,EAAM,GAGV,OAFAA,EAAI0P,GAAa3pB,EAEV7H,KAAK6rC,oBAAoB7rC,KAAKI,MAAMoX,QAASsK,2CAItCgqB,GAAO,IAAAC,EAAA/rC,KAEjBsrC,EAAa,GACjBQ,EAAMjjC,IAAI,SAACiZ,GAA2C,OAAjCwpB,EAAWxpB,EAAI5a,KAAO4a,EAAIja,MAAc,OAE7D7H,KAAK6rC,oBAAoB7rC,KAAKI,MAAMoX,QAAS8zB,GAAYzzB,KAAK,SAACmY,GAE7D+b,EAAKvrC,SAAS,CAAEszB,UAAWiY,EAAKjY,cAGlC9zB,KAAK8zB,UAAYgY,iDAII,IAAAE,EAAAhsC,KACrBA,KAAK64B,KAAK,wBAAwBhhB,KAAK,SAACmY,GACtCgc,EAAKxrC,SAAS,CAAEwnB,oBAAqBgI,EAAShI,4DAKtCxQ,EAASxU,GAAM,IAAAipC,EAAAjsC,KACzB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAE3BigB,EAAK1C,eACL0C,EAAKpT,KAAK,mBAAqB71B,EAAO,YAAcwU,GAASK,KAAK,SAACmY,GAEjEic,EAAKzrC,SAAS,CAAEiiC,UAAU,EAAMjrB,QAASwY,EAASxY,QAAS+H,MAAOvc,EAAM8wB,UAAW9D,EAASkc,cAAetb,MAAO9wB,OAAO8E,OAAOorB,EAASY,OAAQ7Z,SAAUiZ,EAASjZ,SAAU2f,SAAU1G,EAAS0G,SAAU4M,eAAgBtT,EAASsT,eAAgB/gC,eAAe,EAAMG,kBAAkB,IAEvRstB,EAASjZ,SAASo1B,oBACpBF,EAAK7c,mBAAmBgd,YAAoBpc,EAASjZ,SAASo1B,oBAAoBt0B,KAAK,WAErFo0B,EAAKI,WAAWrpC,EAAMgtB,EAASxY,SAASK,KAAK,SAACmY,GAC5CjE,EAAQ,sBAKdkgB,EAAKK,sBAAwBtc,EAASsc,sBAEtCL,EAAKM,6BAA+Bvc,EAASuc,6BAE7CN,EAAKO,qBAAuBxc,EAASjZ,SAAS6C,cAE9CqyB,EAAKQ,2BAA2Bzc,EAASjZ,SAASC,WAAYgZ,EAASva,YACtE+X,MAAM,SAAC5P,GACFA,EAAMpN,QAAQ,sCAAsC,IACtDy7B,EAAKzrC,SAAS,CAACiiC,UAAU,IACzB1W,EAAQ,2DAENnO,EAAMpN,QAAQ,mBAAmB,IAEnCy7B,EAAKxe,YAAY,mCAEjBwe,EAAK/oB,YAAY,GAAI+oB,EAAK7rC,MAAM4C,gDAO7B6oB,EAAKviB,GAChB,IAAIojC,EAAS7gB,EAAID,OAAO,SAAC9iB,GAAW,OAAOA,EAAK,KAAOQ,IAEvD,OADmBojC,EAAO19B,OAAS,EAAK09B,EAAO,QAAKrkC,qDAK3B0a,EAAYqgB,GAAiB,IAAAuJ,EAAA3sC,KAElDyV,EAAYsN,EAAcqI,KAAKzF,MAAMyF,KAAKC,UAAU+X,IAAoBpjC,KAAKI,MAAMwpB,YAEnF+B,EAAMyX,EAAgBv6B,IAAI,SAACC,GAC7B,OAAOA,EAAKQ,KAGVsjC,EAAcn3B,EAAS5M,IAAI,SAACC,GAE9B,IAAI+jC,EAAkBlhB,EAAInb,QAAQ1H,EAAKQ,KAAO,EAAK85B,EAAgBzX,EAAInb,QAAQ1H,EAAKQ,KAAO,KAEvFqQ,EAAgBgzB,EAAKG,aAAaH,EAAKL,sBAAuBxjC,EAAKQ,IAavE,OAXAqjC,EAAKI,qBAAqBjkC,EAAMia,GAE5B8pB,IACF/jC,EAAI,UAAe,EACnBA,EAAI,eAAmB6Q,EACvB7Q,EAAI,QAAc6Q,EAAgBA,EAAc,IAAM,EACtD7Q,EAAI,SAAe6Q,EAAgBA,EAAc,IAAM,EACvD7Q,EAAI,IAAU+jC,EAAc,IAC5B/jC,EAAI,aAAmB+jC,EAAc,aACrC/jC,EAAI,wBAA8BA,EAAI,SAAe,GAEhDA,IAGT9I,KAAKgtC,wBAELhtC,KAAKQ,SAAS,CAAEopB,YAAagjB,EAAaxJ,gBAAiBwJ,EAAYhhB,OAAO,SAAC9iB,GAAW,OAAOA,EAAKyiB,0DAInFziB,EAAMia,GAEvBja,EAAI,UAAe,EACnBA,EAAI,cAAmB,EACvBA,EAAI,SAAe,EACnBA,EAAI,UAAgB,EACpBA,EAAI,IAAU,GACdA,EAAI,aAAmB,GACvBA,EAAI,aAAmB,EACvBA,EAAI,gBAAsB,EAC1BA,EAAI,sBAA2B,EAC/BA,EAAI,YAAkBia,EACtBja,EAAI,yBAA8B,yCAKpC9I,KAAKitC,kBAAoB,GACzBjtC,KAAKQ,SAAS,CAAE8d,UAAW,KAE3Bte,KAAKktC,mBAELltC,KAAKmtC,UAAUjN,0CAIHl9B,EAAMgF,EAAUW,EAAMsB,GAAO,IAAAmjC,EAAAptC,KACrC8wB,EAAW,IAAIC,SACnBD,EAASG,OAAO,OAAQjuB,GACxB8tB,EAASG,OAAO,WAAYjpB,GAC5B8oB,EAASG,OAAO,WAAYtoB,GAC5BmoB,EAASG,OAAO,QAAShnB,GACzBjK,KAAK0rC,MAAM,aAAc5a,GAAUjZ,KAAK,SAACmY,GAEvCod,EAAK3f,YAAYuC,EAASxS,MAE1B4vB,EAAKC,sBAELD,EAAK5sC,SAAS,CAACwC,KAAMA,EAAMgF,SAAS,gDAKvBwP,GAAS,IAAA81B,EAAAttC,KACpB8wB,EAAW,IAAIC,SACnBD,EAASG,OAAO,OAAQjxB,KAAKI,MAAM4C,MACnC8tB,EAASG,OAAO,UAAWzZ,EAAQ7O,MACnCmoB,EAASG,OAAO,cAAezZ,EAAQnO,aACvCynB,EAASG,OAAO,qBAAsBzZ,EAAQ0U,oBAC9C,IAAIqhB,EAAoB,GACpBC,EAAgB,GAChBC,EAAa,GACjBj2B,EAAQ/B,SAAS4M,QAAQ,SAACvZ,GACxBykC,EAAkB9qB,KAAK3Z,EAAKQ,IAC5BkkC,EAAc/qB,KAAK,IACnBgrB,EAAWhrB,KAAK,MAGlBqO,EAASG,OAAO,oBAAqBsc,EAAkB3uB,KAAK,MAC5DkS,EAASG,OAAO,gBAAiBuc,EAAc5uB,KAAK,MACpDkS,EAASG,OAAO,aAAcwc,EAAW7uB,KAAK,MAC9C5e,KAAK0rC,MAAM,gBAAiB5a,GAAUjZ,KAAK,SAACmY,GAC1Csd,EAAK7f,YAAYuC,EAASxS,MAC1B8vB,EAAK9sC,SAAS,CAAC2gC,oBAAoB,IACnCmM,EAAKpqB,YAAY8M,EAASrnB,KAAMqnB,EAAShtB,oDAKzBwU,GAClB,IAAIsZ,EAAW,IAAIC,SAGnB,OAFAD,EAASG,OAAO,OAAQjxB,KAAKI,MAAM4C,MACnC8tB,EAASG,OAAO,UAAWzZ,GACpBxX,KAAK0rC,MAAM,sBAAuB5a,yCAI7B9tB,EAAMwU,GAAyB,IAAAk2B,EAAA1tC,KAAhB2tC,EAAgBpsB,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,IAAAA,UAAA,GAC3CvhB,KAAK64B,KAAK,sBAAwB71B,EAAO,YAAcwU,GAASK,KAAK,SAACmY,GAEpE0d,EAAKE,cAELF,EAAKjgB,YAAYuC,EAASxS,KAAMmwB,GAE5B3d,EAASxY,UAAYk2B,EAAKttC,MAAMoX,UAElCk2B,EAAKjgB,YAAY,qDAEjBigB,EAAKttC,MAAM0jB,SAASimB,KAAK,SAACvyB,GAExB,OADIA,EAAQ7O,OAAS+kC,EAAKttC,MAAMoX,SAASk2B,EAAKxqB,YAAY1L,EAAQ7O,KAAM+kC,EAAKttC,MAAM4C,MAC5EwU,EAAQ7O,OAAS+kC,EAAKttC,MAAMoX,kDAM9BxU,EAAMwU,GAAS,IAAAq2B,EAAA7tC,KAC1BA,KAAK64B,KAAK,qBAAuB71B,EAAO,YAAcwU,GAASK,KAAK,SAACmY,GAEnE6d,EAAKD,cAELC,EAAKpgB,YAAYuC,EAASxS,QACzBgQ,MAAM,SAAC5P,4CAMEkwB,GAAS,IAAAC,EAAA/tC,KACrB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GACX,KAAZ8hB,GAAkBA,IAAYC,EAAK3tC,MAAMoX,SAC3Cu2B,EAAKlV,KAAK,sBAAwBkV,EAAK3tC,MAAMmf,MAAQ,YAAcwuB,EAAK3tC,MAAMoX,QAAU,YAAcs2B,GAASj2B,KAAK,SAACmY,GACnH+d,EAAKvtC,SAAS,CAAEgX,QAASs2B,IACzBC,EAAKtgB,YAAYuC,EAASxS,MAC1BuO,EAAQ,qBACPyB,MAAM,SAAC5P,kDAOEowB,GAAS,IAAAC,EAAAjuC,KACzB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3BiiB,EAAK5D,uBAAuB,cAAe2D,GAASn2B,KAAK,SAACmY,GACxDie,EAAKztC,SAAS,CAAEuW,SAAUjX,OAAO8E,OAAOqpC,EAAK7tC,MAAM2W,SAAU,CAAEU,YAAau2B,MAC5EjiB,EAAQ,iEAKA,IAAAmiB,EAAAluC,KACZA,KAAK64B,KAAK,oBAAsB74B,KAAKI,MAAM4C,MAAM6U,KAAK,SAACmY,GACrD,IAAIlM,EAAW,GAEfkM,EAASlM,SAASzB,QAAQ,SAAC7K,GACnBA,EAAQ22B,SAAW32B,EAAQxU,OAASkrC,EAAK9tC,MAAM4C,MAAqC,UAA7BkrC,EAAK9tC,MAAM0N,SAASqC,MAAmB2T,EAASrB,KAAKjL,KAEpH02B,EAAK1tC,SAAS,CAAEsjB,SAAUA,wCASpBnc,GAAG,IAAAymC,EAAApuC,KAEXA,KAAKquC,eAELruC,KAAKsuC,sBAELtuC,KAAKuuC,iBAAiB12B,KAAK,SAAChQ,GAE1BumC,EAAKI,eAELJ,EAAKK,mBAAmB52B,KAAK,SAAChQ,GAE5BumC,EAAKjV,eAAeiV,EAAKhuC,MAAMmf,MAAO6uB,EAAKhuC,MAAMoX,SAASK,KAAK,SAACmY,GAE9Doe,EAAKrS,aACAqS,EAAK9c,eAAetB,GAKvBoe,EAAKM,YAAY,IAHjBN,EAAK/B,WAAWrc,EAAShtB,KAAMgtB,EAASxY,WAKzCgW,MAAM,SAAC5P,GAENwwB,EAAKO,cAAc/wB,OAEtB4P,MAAM,SAAC5P,GACRuC,QAAQvC,MAAMA,OAEf4P,MAAM,SAAC5P,GACRuC,QAAQvC,MAAMA,yCAKNpF,GAAK,IAAAo2B,EAAA5uC,KACfA,KAAK64B,KAAK,mBAAqBrgB,EAAK,KAAOgV,MAAM,SAAC5P,GAEhDgxB,EAAK7S,qDAKKne,GAEZ5d,KAAK+7B,2DAKL/7B,KAAKI,MAAMwpB,YAAYvH,QAAQ,SAACpN,GAC9BA,EAAQU,gBAAkB,EAC1BV,EAAQW,aAAe,6CAMzB,IAAIkb,EAAW,IAAIC,SACnBD,EAASG,OAAO,OAAQjxB,KAAKI,MAAMmf,OACnCuR,EAASG,OAAO,UAAWjxB,KAAKI,MAAMoX,SACtC,IAAI+1B,EAAoB,GACpBC,EAAgB,GAChBC,EAAa,GAUjB,OATAztC,KAAKI,MAAMgjC,gBAAgB/gB,QAAQ,SAACvZ,GAClCykC,EAAkB9qB,KAAK3Z,EAAKQ,IAC5BkkC,EAAc/qB,KAAK3Z,EAAK2J,cACxBg7B,EAAWhrB,KAAK3Z,EAAK+lC,OAGvB/d,EAASG,OAAO,oBAAqBsc,EAAkB3uB,KAAK,MAC5DkS,EAASG,OAAO,gBAAiBuc,EAAc5uB,KAAK,MACpDkS,EAASG,OAAO,aAAcwc,EAAW7uB,KAAK,MACvC5e,KAAK0rC,MAAM,iBAAkB5a,sFAWpC,OADc9wB,KAAK8uC,gHAKS75B,mEAC5BjV,KAAK+uC,mBACL/uC,KAAKquC,eACLruC,KAAKgvC,kBAAkB/5B,sQAOd4kB,EAAI,cAAGA,EAAI75B,KAAKI,MAAMgjC,gBAAgBp0B,6BAC7CiG,EAAUjV,KAAKI,MAAMgjC,gBAAgBvJ,IACxBoV,6CACLjvC,KAAKgvC,kBAAkB/5B,kCAHwB4kB,8JAWzC5kB,GAAS,IAAAi6B,EAAAlvC,KACzB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAE3BkjB,EAAKluB,iBAELkuB,EAAKC,IAAI,0BAA4BD,EAAK9uC,MAAMmf,MAAQ,YAAc2vB,EAAK9uC,MAAMoX,QAAU,uBAAyB03B,EAAK9uC,MAAM2W,SAASo1B,mBAAqB,uBAAyBl3B,EAAQsQ,mBAAqB,UAAYtQ,EAAQ3H,MAAQ,OAAS2H,EAAQ3L,GAAI4lC,EAAKE,kBAAkBltC,KAAKgtC,IAAOr3B,KAAK,SAACxN,GAE3S6kC,EAAK95B,cAAcH,EAAS,CAACg6B,cAAc,EAAMI,SAAU78B,OAAOnI,EAAQglC,UAAW35B,QAASlD,OAAOnI,EAAQqL,SAAU45B,wBAA0B98B,OAAOnI,EAAQglC,UAAW,IAC3KtjB,EAAQ1hB,KACPmjB,MAAM,SAAC5P,GACRoO,EAAOpO,8CAME5a,EAAMwU,GAAS,IAAA+3B,EAAAvvC,KAC5B,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAE3BujB,EAAK/uC,SAAS,CAACw9B,eAAW31B,IAE1BknC,EAAKJ,IAAI,kBAAoBnsC,EAAO,YAAcwU,EAAS+3B,EAAKH,kBAAkBltC,KAAKqtC,IAAO13B,KAAK,SAACxN,GAClG0hB,EAAQ1hB,KACPmjB,MAAM,SAAC5P,GACRoO,EAAOpO,0CAMF5a,EAAMwU,GAAQ,IAAAg4B,EAAAxvC,KACvB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3BwjB,EAAK3W,KAAK,mBAAqB71B,EAAO,YAAcwU,GAASK,KAAK,SAACmY,GACjEwf,EAAKC,aAAazf,GAClBjE,EAAQ,uBACPyB,MAAM,SAAC5P,GACRoO,EAAO,kEAMAgE,GACX,IAAI1R,EAEJte,KAAKitC,kBAAoBjd,EAErBhwB,KAAKitC,kBAAkByC,OAAS1vC,KAAKitC,kBAAkByC,MAAM1gC,OAAS,GACxEhP,KAAKytB,YAAYuC,EAASxS,MAE1Bxd,KAAK2vC,eAAe3vC,KAAKitC,kBAAkByC,OAAO,IAIlDpxB,GAFAA,EAAY0R,EAAS4f,SAEC/mC,IAAI,SAACC,GACzB,MAAO,CAAE0X,WAAc1X,EAAK,GAAI+mC,MAASr9B,OAAO1J,EAAK,IAAI2Y,QAAQ,GAAIquB,KAAQt9B,OAAO1J,EAAK,IAAI2Y,QAAQ,GAAIsuB,eAAkBjnC,EAAK,GAAIknC,eAAkBlnC,EAAK,QAGnJ+gB,OAAO,EAAG,EAAG,CAAErJ,WAAc,MAAOqvB,MAAS,GAAIC,KAAQ,GAAIC,eAAkB,GAAIC,eAAkB,KAI/GhwC,KAAKiwC,sBAAsBjwC,KAAKitC,kBAAkBiD,SAElD5xB,EAAY,GAGdte,KAAK0uC,YAAYpwB,uCAGPA,GACVte,KAAKQ,SAAS,CAAE8d,UAAWA,kDAIP6xB,GAEpB,IAAI16B,EAAWzV,KAAKI,MAAMwpB,YAE1BnU,EAAS4M,QAAQ,SAACpN,GAEhB,IAAIm7B,EAAkBD,EAAOE,UAAU,SAACvnC,GAAW,OAAOA,EAAK,KAAOmM,EAAQ3L,KAC9E,GAAI8mC,GAAiB,EAAE,CAErB,IAAIE,EAASH,EAAOC,GACpBtwC,OAAO8E,OAAOqQ,EAAS,CAACW,YAAa06B,EAAO,GAAI36B,eAAgB26B,EAAO,QAI3EtwC,KAAKuwC,iBAAiB96B,yCAOV+B,EAASnO,EAAa0oB,EAAanB,EAAO1E,GAAmB,IAAAskB,EAAAxwC,KACzE,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B,IAA6BykB,EAAzBlrB,EAAqB,GAEzBirB,EAAKnC,eAELmC,EAAKpqB,IAAI,CAAC6e,OAAO,gBAAgB7nB,OAAO,YAAYI,KAAK,sBAGzDgzB,EAAKE,oBAAoBl5B,GAASK,KAAK,SAACmY,GACtCwgB,EAAKpqB,IAAI,CAAC6e,OAAO,gBAAgB7nB,OAAO,YAAYI,KAAK,YAAchG,EAAU,cAEjFg5B,EAAKG,0BAA0B5e,EAAa7F,EAAoB,8BAAgC1U,EAAU,KAAKK,KAAK,SAACmY,GAEnHzK,EAAqByK,EAASzK,mBAE9BkrB,EAAWzgB,EAASygB,SACpBD,EAAKpqB,IAAI,CAAC6e,OAAO,gBAAgB7nB,OAAO,YAAYI,KAAK,2BAEzDgzB,EAAKI,YAAYhgB,EAAOpZ,GAASK,KAAK,SAACmY,GACrCwgB,EAAKpqB,IAAI,CAAC6e,OAAO,gBAAgB7nB,OAAO,YAAYI,KAAK,uBAEzDgzB,EAAKK,eAAer5B,GAASK,KAAK,SAACmY,GACjCwgB,EAAKpqB,IAAI,CAAC6e,OAAO,gBAAgB7nB,OAAO,YAAYI,KAAK,mCAEzD,IAAIytB,EAAI,IAAI1nB,KACRutB,GAAiB,KAAO7F,EAAE8F,WAAWp8B,OAAO,GAAK,KAAO,MAAQs2B,EAAE+F,WAAa,IAAIr8B,OAAO,GAAK,IAAMs2B,EAAEgG,cAAcrc,WAAWjgB,OAAO,GAAK,KAAO,KAAOs2B,EAAEiG,YAAYv8B,OAAO,GAAK,KAAO,KAAOs2B,EAAEkG,cAAcx8B,OAAO,GAAK,KAAO,KAAOs2B,EAAEmG,cAAcz8B,OAAO,GACvQ67B,EAAK3E,oBAAoBr0B,EAAS,CAACC,YAAapO,EAAc,8CAA+C+P,WAAY03B,EAAe95B,WAAY,OAAQm1B,mBAAoB5mB,EAAoB8rB,UAAW,WAAWx5B,KAAK,SAACmY,GAE9NwgB,EAAKc,WAAWb,GAAU54B,KAAK,SAACmY,GAE9BwgB,EAAKlkB,uBACLkkB,EAAKpqB,IAAI,CAAC6e,OAAO,gBAAgB7nB,OAAO,WAAWI,KAAK,oBAExDgzB,EAAKttB,YAAY1L,EAASg5B,EAAKpwC,MAAM4C,MACrC+oB,EAAQ,uBAETyB,MAAM,SAAC5P,GACNoO,EAAOpO,OAEV4P,MAAM,SAAC5P,GACRoO,EAAOpO,OAER4P,MAAM,SAAC5P,GACNoO,EAAOpO,OAEV4P,MAAM,SAAC5P,GACR4yB,EAAK1tB,cAAc0tB,EAAKpwC,MAAM4C,KAAMwU,GAAS,GAC7CwU,EAAOpO,OAER4P,MAAM,SAAC5P,GACRoO,EAAOpO,mFAMKgT,EAAOpZ,+EAEdqiB,EAAI,cAAGA,EAAIjJ,EAAM5hB,4BAGI,UAF5BuiC,EAAO3gB,EAAM9nB,KAAK+wB,IAETlxB,KAAKgM,OAAO,2BACbmc,EAAW,IAAIC,UACZE,OAAO,OAAQjxB,KAAKI,MAAMmf,OACnCuR,EAASG,OAAO,UAAWzZ,GAE3Bg6B,EAAWD,EAAKE,mBAAmBC,MAAM,KAAK/8B,MAAM,GAAGiK,KAAK,KAC5DkS,EAASG,OAAO,WAAYugB,GAC5B1gB,EAASG,OAAO,QAASsgB,GACzBvxC,KAAKomB,IAAI,CAAC6e,OAAO,cAAc7nB,OAAO,YAAYI,KAAK,cAAgB+zB,EAAKE,+BACtEzxC,KAAK2xC,WAAW7gB,WAZQ+I,oDAe3B,+JAIE/I,GACT,OAAO9wB,KAAK0rC,MAAM,aAAc5a,+BAI9BzL,EAAKhS,GAEP,IADA,IAAIu+B,EAAIvsB,EAAM,GACPusB,EAAE5iC,OAASqE,GAAMu+B,EAAI,IAAMA,EAClC,OAAOA,uCAIIvyB,GAAU,IAAAwyB,EAAA7xC,KACJ,QAAbqf,GACFrf,KAAKiwC,sBAAsBjwC,KAAKitC,kBAAkBiD,QAElDlwC,KAAK2vC,eAAe3vC,KAAKitC,kBAAkByC,OAAO,IAGlD1vC,KAAKq5B,YAAYr5B,KAAKI,MAAMmf,MAAOvf,KAAKI,MAAMoX,QAAS6H,GAAUxH,KAAK,SAACmY,GACnE6hB,EAAK5B,sBAAsBjgB,EAAS8hB,IACpCD,EAAKlC,eAAe3f,EAAS3Q,UAAU,+CAM7Brc,EAAMwU,EAAS6H,GAAU,IAAA0yB,EAAA/xC,KACzCA,KAAKq5B,YAAYr2B,EAAMwU,EAAS6H,GAAUxH,KAAK,SAACmY,GAC9C,IAAIsJ,EAAkByY,EAAKxY,mBAAmBvJ,EAAS3Q,UAAU,GAAO,GAExE,GAAI0yB,EAAKjuB,SAIP,OAHgBiuB,EAAKjuB,SAAS8H,OAAO,SAAC9iB,GAAU,OAAOA,EAAKkwB,cAAgBxhB,IAEtD,GAAGgiB,OAEvB,KAAK,EACHuY,EAAKvxC,SAAS,CAACw3B,mBAAoBsB,IACnC,MACF,KAAK,EACHyY,EAAKvxC,SAAS,CAACy3B,mBAAoBqB,IACnC,MACF,KAAK,EACHyY,EAAKvxC,SAAS,CAAC03B,mBAAoBoB,IACnC,MACF,KAAK,EACHyY,EAAKvxC,SAAS,CAAC23B,mBAAoBmB,IACnC,MACF,KAAK,EACHyY,EAAKvxC,SAAS,CAAC43B,mBAAoBkB,2CAUjCt2B,EAAMwU,EAAS6H,GACzB,OAAOrf,KAAK64B,KAAK,oBAAsB71B,EAAO,YAAcwU,EAAU,aAAe6H,yCAIzE/P,GACZ,IAAI0iC,EAAQ,EACR/b,EAAe,GAOnB,OANA3mB,EAAKzG,IAAI,SAACC,GAGR,OAFAmtB,EAAaxT,KAAK,CAAEwvB,OAAQnpC,EAAK,GAAIopC,MAAOppC,EAAK,GAAGkG,SACpDgjC,GAASlpC,EAAK,GAAGkG,OACV,OAEThP,KAAKQ,SAAS,CAAEy1B,aAAcA,IACvB+b,yCAGM1iC,EAAM6iC,GACnB,IAAIC,EAAS,GACX/sB,EAAM,EACJgtB,EAAcryC,KAAKsyC,cAAchjC,GAOrC,OANAA,EAAKzG,IAAI,SAACC,GAIR,OAFAuc,EAAM/Q,KAAKi+B,KAAMzpC,EAAK,GAAGkG,OAASqjC,EAAeF,GACjDC,EAAO3vB,KAAKtG,MAAMkJ,GAAOkR,KAAKztB,EAAK,KAC5B,OAEF,GAAG6rB,OAAOvY,MAAM,GAAIg2B,wCAIhB9iC,GACX,IAAIkjC,EAASljC,EAAKzG,IAAI,SAACC,GACrB,OAAOA,EAAK,KAEd,MAAO,GAAG6rB,OAAOvY,MAAM,GAAIo2B,wCAGhBljC,EAAMsM,EAAYJ,EAAWi3B,GAAgB,IAAAC,EAAA1yC,KAEpDoyC,EAASpyC,KAAK2yC,eAAerjC,EAAM,KAKvC,GAFAtP,KAAKI,MAAMsb,KAAKk3B,UAAUR,GAER,YAAd52B,SAE4CnT,IAAzCrI,KAAKI,MAAMsb,KAAKO,aAAanH,SAA4B9U,KAAKI,MAAMsb,KAAKO,aAAanH,UAAY9U,KAAKI,MAAMsb,KAAKO,aAAanH,QAAQ9U,KAAKI,MAAMs2B,SAAShB,aAAc,CAE5K,IAAImd,EAAW7yC,KAAKI,MAAMsb,KACtBo3B,EAAqB32B,MAAM3J,OAAOxS,KAAKI,MAAMs2B,SAAShB,aAAaa,KAAK,mBAAmB1tB,IAAI,SAACC,EAAM4U,GAAY,OAAO5U,EAAS,EAAI4pC,GAASh1B,EAAQ,GAAM,KAAQ1d,KAAKI,MAAMs2B,SAAShB,iBAEvJrtB,IAAlCwqC,EAAS52B,aAAanH,UAAuB+9B,EAAS52B,aAAanH,QAAU,IACjF+9B,EAAS52B,aAAanH,QAAQ9U,KAAKI,MAAMs2B,SAAShB,YAAcod,EAEhE9yC,KAAKQ,SAAS,CAACkb,KAAMm3B,IAIzB7yC,KAAKI,MAAMsb,KAAKq3B,aAAav3B,GAE7B,IAAIM,EAAoBC,gCAAsB/b,KAAKI,MAAMsb,KAAMF,GAE3DI,EAAaE,IAEfF,EAAaE,EAEb9b,KAAKQ,SAAS,CAAEk2B,SAAU52B,OAAO8E,OAAO5E,KAAKI,MAAMs2B,SAAU,CAAEhB,WAAY9Z,OAG7E5b,KAAKI,MAAMsb,KAAKs3B,cAAcp3B,GAE9B5b,KAAKI,MAAMsb,KAAKu3B,SAASR,GACzBzyC,KAAKQ,SAAS,CAAEq1B,WAAY71B,KAAKI,MAAMsb,KAAKw3B,2DAIzB1hB,EAAW3pB,GAC9B7H,KAAK2vC,eAAe3vC,KAAKitC,kBAAkByC,OAAO,GACjB,aAA7B1vC,KAAKI,MAAM0N,SAASqC,MAAqBnQ,KAAKqqC,uBAAuB7Y,EAAW3pB,0CAGvE6uB,GAAU,IAAAyc,EAAAnzC,KACvBA,KAAKQ,SAAS,CAAEk2B,SAAU52B,OAAO8E,OAAO5E,KAAKI,MAAMs2B,SAAU,CAAEI,eAAgBJ,KAAe,WAC5Fyc,EAAKC,qBAAqB,iBAAkB1c,8CAI/B9a,GAAY,IAAAy3B,EAAArzC,KAC3BA,KAAKQ,SAAS,CAAEk2B,SAAU52B,OAAO8E,OAAO5E,KAAKI,MAAMs2B,SAAU,CAAEhB,WAAY9Z,KAAiB,WAC1Fy3B,EAAKD,qBAAqB,aAAcx3B,6CAI5BJ,GAAW,IAAA83B,EAAAtzC,KAErBA,KAAKI,MAAMs2B,SAAShB,WAAa11B,KAAKI,MAAMsb,KAAKG,iBACnD7b,KAAKQ,SAAS,CAAEk2B,SAAU52B,OAAO8E,OAAO5E,KAAKI,MAAMs2B,SAAU,CAAEhB,WAAY11B,KAAKI,MAAMsb,KAAKG,oBAE7F7b,KAAKQ,SAAS,CAAEk2B,SAAU52B,OAAO8E,OAAO5E,KAAKI,MAAMs2B,SAAU,CAAEC,UAAWnb,KAAgB,WACxF83B,EAAKF,qBAAqB,YAAa53B,kDAItBI,GAAY,IAAA23B,EAAAvzC,KAC/BA,KAAKQ,SAAS,CAAEk2B,SAAU52B,OAAO8E,OAAO5E,KAAKI,MAAMs2B,SAAU,CAAEf,WAAY/Z,KAAiB,WAC1F23B,EAAKH,qBAAqB,aAAcx3B,4CAI7BtM,EAAMkkC,GACnB,GAAKlkC,EAAL,CACA,IAAIgqB,EAAkBt5B,KAAKu5B,mBAAmBjqB,EAAMkkC,GAAK,GAEzDxzC,KAAK6I,IAAI4uB,iBAxjDY,gBAwjDyB,aAAc6B,EAAgB5B,WAC5E13B,KAAK6I,IAAI4uB,iBAzjDY,gBAyjDyB,qBAAsB6B,EAAgB3B,aACpF33B,KAAK6I,IAAI4uB,iBA1jDY,gBA0jDyB,eAAgBz3B,KAAKI,MAAMuc,mEAIxDrN,EAAMkkC,EAAKC,GAAY,IAAAC,EAAA1zC,KAEpC2zC,EAAwB3zC,KAAK4zC,8BAA8B,QAC3DC,EAAgC7zC,KAAK4zC,8BAA8B,QACvE,GAAItkC,EAAKN,OAAO,EAAG,CACjB,IAAItL,EAAOowC,EAAcjsC,EAIzB,GAFI4rC,GAAazzC,KAAK+zC,aAAazkC,EAAMkD,OAAOxS,KAAKI,MAAMs2B,SAAShB,YAAa11B,KAAKI,MAAMs2B,SAASC,UAAW32B,KAAKI,MAAMs2B,SAASI,gBAEhI92B,KAAKI,MAAMs2B,SAASf,WAAa31B,KAAKI,MAAMs2B,SAAShB,WAAY,CACnE,IAAI/Z,EAAS3b,KAAKI,MAAMsb,KAAKw3B,YAC7BY,EAAen4B,EAAO3b,KAAKI,MAAMs2B,SAAShB,WAAa11B,KAAKI,MAAMs2B,SAASf,WAAa,QAGxFme,EAAe,EAGjBxkC,EAAK+S,QAAQ,SAACvS,EAAK4N,GACb81B,GACF3rC,EAAQiI,EAAI,GAEZpM,EAAQgwC,EAAKtzC,MAAMsb,KAAKs4B,gBAAgBnsC,GAEpCA,GAASisC,GACXH,EAAsBlxB,KAAK3S,EAAI,GAAIpM,GACnCmwC,EAA8BpxB,KAAK3S,EAAI,GAAI,8BAG3C6jC,EAAsBlxB,KAAK3S,EAAI,GAAI,oBACnC+jC,EAA8BpxB,KAAK3S,EAAI,GAAI,uBAI7C6jC,EAAsBlxB,KAAK3S,EAAI,GAAI,uBACnC+jC,EAA8BpxB,KAAK3S,EAAI,GAAI,+BAI/C6jC,EAAsBlxB,KAAK,iBAC3BoxB,EAA8BpxB,KAAK,sBAEnCkxB,EAAwB,mBACxBE,EAAgC,mBAElC,MAAO,CAACnc,UAAWic,EAAuBhc,YAAakc,yDAI3BI,GAC5B,MAAO,CAAC,QAAS,CAAC,MAAOA,gDAKzB,IAAIC,EACAl0C,KAAKI,MAAMkjC,eAAet0B,OAAS,GAErCklC,EAAa,CAAC,QAAS,CAAC,MAAO,SAE/Bl0C,KAAKI,MAAMkjC,eAAejhB,QAAQ,SAACvS,EAAK4N,GACtC,IAAIha,EAEJ,OAAQoM,EAAI,IAIV,KAAK,EACHpM,EAAQ,uBACR,MACF,KAAK,EACHA,EAAQ,uBAMZwwC,EAAWzxB,KAAK3S,EAAI,GAAIpM,KAG1BwwC,EAAWzxB,KAAK,2BAIhByxB,EAAa,yBAGfl0C,KAAK6I,IAAI4uB,iBAAiBwI,GAAmB,aAAciU,GAC3Dl0C,KAAK6I,IAAI4uB,iBAAiBwI,GAAmB,aAjpDnB,+CAqpDVkU,GAChB,IAAID,EACAC,EAAUnlC,OAAS,GAErBklC,EAAa,CAAC,QAAS,CAAC,MAAO,SAE/BC,EAAU9xB,QAAQ,SAACvS,EAAK4N,GACtB,IAAIha,EAEJ,OAAQoM,EAAI,IACV,KAAK,IACHpM,EAAQ,uBACR,MACF,KAAK,QACHA,EAAQ,uBACR,MACF,KAAK,QACHA,EAAQ,uBACR,MACF,QACEA,EAAQ,uBAIZwwC,EAAWzxB,KAAK3S,EAAI,GAAIpM,KAG1BwwC,EAAWzxB,KAAK,2BAIhByxB,EAAa,2BAGfl0C,KAAK6I,IAAI4uB,iBA7rDU,cA6rDyB,aAAcyc,qCAIlDvsC,GAIR,GAFI3H,KAAKI,MAAM2iC,YAAc/iC,KAAKI,MAAM2iC,WAAW/zB,OAAS,GAAGhP,KAAKQ,SAAS,CAACuiC,WAAW,KAEpF/iC,KAAKI,MAAM0N,SAASsmC,UAAzB,CAEA,IAAI3+B,EAAWzV,KAAK6I,IAAIwrC,sBAAsB1sC,EAAE2sC,MAAO,CAAEhuB,OAAQ,CArsD5C,mBAusDrB,GAAI7Q,EAASzG,OAAQ,GAEdhP,KAAKI,MAAM49B,WAAch+B,KAAKI,MAAM49B,WAAah+B,KAAKI,MAAM49B,UAAUuW,OAAS9+B,EAAS,GAAG++B,WAAWD,OAAOv0C,KAAKQ,SAAS,CAAEmiC,YAAah7B,EAAE2sC,QAEjJ,IAAIG,EAAyBh/B,EAAS,GAAG++B,WAErCE,EAAiB10C,KAAKitC,mBAAqBjtC,KAAKitC,kBAAkByC,MAAQ1vC,KAAKitC,kBAAkByC,MAAM9jB,OAAO,SAAA9iB,GAAI,OAAIA,EAAK,GAAG0H,QAAQikC,EAAuBF,OAAS,IAAG,GAAK,GAClL,GAAIG,EAAgB,CAElB,IAAIC,EAAsB,CAAEJ,KAAQE,EAAuBF,KAAM/hC,OAAUkiC,EAAe,IAEtF1W,EAAYl+B,OAAO8E,OAAO+vC,EAAqBF,GAEnDz0C,KAAKQ,SAAS,CAAEw9B,UAAWA,SAG3Bh+B,KAAK4rC,iBAIP5rC,KAAK4rC,iDAKP5rC,KAAKQ,SAAS,CAAEw9B,eAAW31B,sCAQnBue,GACR5mB,KAAK6I,IAAM,IAAIye,IAASC,IAAI,CAC1BC,UAAWxnB,KAAKynB,aAChBtmB,MAAOylB,EACPc,OAAQ,CAAC,EAAG,GACZC,KAAM,IAGR3nB,KAAK6I,IAAImkB,GAAG,OAAQhtB,KAAK40C,UAAU1yC,KAAKlC,OACxCA,KAAK6I,IAAImkB,GAAG,QAAShtB,KAAK60C,SAAS3yC,KAAKlC,OACxCA,KAAK6I,IAAImkB,GAAG,QAAShtB,KAAK80C,SAAS5yC,KAAKlC,OACxCA,KAAK6I,IAAImkB,GAAG,aAlvDM,OAkvDyBhtB,KAAK+0C,aAAa7yC,KAAKlC,OAClEA,KAAK6I,IAAImkB,GAAG,aAnvDM,OAmvDyBhtB,KAAKg1C,aAAa9yC,KAAKlC,KAAK,4CAE5D2H,GACX3H,KAAK6I,IAAIosC,YAAY9zC,MAAM4Y,OAAS,UAEpC,IADA,IAAI6L,EAAcje,EAAEutC,OACb5gC,KAAK6gC,IAAIxtC,EAAEutC,OAAO1R,IAAM5d,EAAY,IAAM,KAC/CA,EAAY,IAAMje,EAAEutC,OAAO1R,IAAM5d,EAAY,GAAK,KAAO,IAE3D5lB,KAAKo1C,wBAAwBztC,EAAE8N,SAAU9N,wCAG/B0tC,EAAI1tC,GAAG,IAAA2tC,EAAAt1C,KACjBu1C,WAAW,WACJD,EAAKE,iBACRF,EAAKzsC,IAAIosC,YAAY9zC,MAAM4Y,OAAS,GACpCu7B,EAAK90C,SAAS,CAACwiC,WAAW,OAE3BqS,uCAGO1tC,GACV3H,KAAKw1C,gBAAiB,qCAGb7tC,GACT3H,KAAKw1C,gBAAiB,EACtBx1C,KAAKg1C,aAAa,mDAIIv/B,EAAU9N,GAChC,IAAIq7B,EAAY,GACZyS,EAAU,GACdhgC,EAAS4M,QAAQ,SAACpN,GAEZwgC,EAAQjlC,QAAQyE,EAAQu/B,WAAW3V,QAAU,IAC9CmE,EAAWvgB,KAAKxN,EAAQu/B,YACxBiB,EAAQhzB,KAAKxN,EAAQu/B,WAAW3V,WAGrC7+B,KAAKQ,SAAS,CAACwiC,WAAYA,EAAYL,YAAah7B,EAAE2sC,0CAG9C3sC,GAAG,IAAA+tC,EAAA11C,KAEXA,KAAK6I,IAAI8sC,WAAW,IAAIruB,IAASsuB,cACjC51C,KAAK6I,IAAI8sC,WAAW,IAAIruB,IAASuuB,kBAAqB,gBAEtD71C,KAAK81C,mBAAqB,IAAIC,IAAW,CACvCC,wBAAwB,EACxBC,SAAU,CACRC,SAAS,EACTC,OAAO,GAETC,YAAa,iBAEfp2C,KAAK6I,IAAImkB,GAAG,YAAahtB,KAAKq2C,UAAUn0C,KAAKlC,OAC7CA,KAAK6I,IAAImkB,GAAG,UAAW,SAAC1sB,GAClBo1C,EAAKt1C,MAAM6gC,oBAAoByU,EAAKY,2BAE1Ct2C,KAAK6I,IAAImkB,GAAG,cAAehtB,KAAKu2C,aAAar0C,KAAKlC,wDAIlDA,KAAKQ,SAAS,CAAC02B,UAAWl3B,KAAK6I,IAAI2tC,YAAarf,QAASn3B,KAAK6I,IAAI4tC,6CAI3D9uC,GACP,IAAI0C,EAAU,GACd,OAAQ1C,EAAEiW,MAAMvT,SACd,IAAK,YACHA,EAAU,gBAAkB1C,EAAEmf,OAAOF,IAAM,kBAC3C,MACF,IAAK,cACHvc,EAAU,4BAA8B1C,EAAE+uC,SAAW,iCAAmC5mB,GAAc,yEACtG,MACF,QACEzlB,EAAU1C,EAAEiW,MAAMvT,QAGR,8CAAVA,IACFrK,KAAKytB,YAAY,aAAepjB,GAChC8V,QAAQvC,MAAMvT,qCAKT1C,GACP,IAAM3H,KAAKI,MAAM2X,YAAc/X,KAAK6I,IAAI4d,UAAU,uBAAwB,CACxE,IAAIhR,EAAWzV,KAAK6I,IAAIwrC,sBAAsB1sC,EAAE2sC,MAAO,CAAEhuB,OAAQ,CA90D9C,mBAg1DnBtmB,KAAKQ,SAAS,CAAEmiC,YAAah7B,EAAE2sC,QAE3B7+B,EAASzG,QAAUyG,EAAS,GAAG++B,WAAWD,MAAMv0C,KAAK22C,iBAAiBlhC,EAAS,GAAG++B,WAAWD,gDAKpFA,GAAK,IAAAqC,EAAA52C,KACpBA,KAAK64B,KAAK,yBAA2B74B,KAAKI,MAAMmf,MAAQ,YAAcvf,KAAKI,MAAMoX,QAAU,SAAW+8B,GAAM18B,KAAK,SAACmY,GAChH4mB,EAAKp2C,SAAS,CAACuiC,WAAY/S,EAAS1gB,8CAK3BunC,GACX,OAAO,IAAI/qB,QAAQ,SAACC,EAASC,GAC3B8qB,MAAMD,GACHh/B,KAAK,SAAAmY,GACJ,OAAOA,EAASqX,OACbxvB,KAAK,SAAA1W,GAEJ,IAAM41C,EAAW51C,EAAM61C,QAAQC,KAAKrwB,IACpCkwB,MAAMC,GACHl/B,KAAK,SAAAmY,GACF,OAAOA,EAASqX,OACfxvB,KAAK,SAAAd,GACJ,IAAImgC,EAA8C,MAAlCngC,EAASogC,MAAM,GAAG5wB,OAAO,EAAE,GAAcwwB,EAAWhgC,EAASogC,MAAM,GAAKJ,EAAW,IAAMhgC,EAASogC,MAAM,GACxHh2C,EAAM61C,QAAQC,KAAO,CACnBptC,KAAM,SACNutC,OAAQ,MACRC,SAAUtgC,EAASsgC,UAAY,QAC/BC,OAASvgC,EAASwgC,UAAYxgC,EAASwgC,SAASD,QAAW,MAG3DE,QAAS,GACTL,MAAO,CACLD,GAEF7tC,YAAa0N,EAAS1N,YACtBV,KAAMoO,EAASpO,MAEjBojB,EAAQ5qB,gDASjB8L,GAAQ,IAAAwqC,EAAAz3C,KACjB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAE3ByrB,EAAKj3C,SAAS,CAACyM,QAASA,EAAQtE,OAEhC8uC,EAAKC,cAAczqC,GAAS4K,KAAK,SAAC1W,GAEhCs2C,EAAKE,aAAax2C,GAAO0W,KAAK,SAACvX,GAE7Bm3C,EAAKG,gBACLH,EAAKI,eAEDJ,EAAKr3C,MAAMitB,SACboqB,EAAKK,sBAAsBL,EAAKr3C,MAAMitB,SAEtCoqB,EAAKpL,WAAWoL,EAAKr3C,MAAMmf,MAAOk4B,EAAKr3C,MAAMoX,SAE7CigC,EAAKM,yBAAyBN,EAAKr3C,MAAM2W,SAAS6C,eAErB,mBAAzB69B,EAAKr3C,MAAM2Y,WAAgC0+B,EAAKh+B,gBACpDsS,KAEAA,gDAQI9e,GAAQ,IAAA+qC,EAAAh4C,KACpB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GACF,SAArB/e,EAAQgrC,SACVlsB,EA76DkB,mBA66DY9e,EAAQ3D,IAEtC0uC,EAAKE,aAAajrC,EAAQ3D,IAAIuO,KAAK,SAACsgC,GAClCpsB,EAAQosB,4CAOHh3C,GAAM,IAAAi3C,EAAAp4C,KACjB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GACtBosB,EAAKvvC,IAIRuvC,EAAKvvC,IAAIwvC,SAASl3C,EAAO,CAACm3C,MAAK,IAH/BF,EAAKG,UAAUp3C,GAKjBi3C,EAAKvvC,IAAImkB,GAAG,aAAc,SAAC1sB,GACzByrB,EAAQ,mEAMKmB,GAAW,IAAAsrB,EAAAx4C,KAC5B,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAE3BwsB,EAAKC,YAAYvrB,GAAWrV,KAAK,SAACwV,GAEhCmrB,EAAKE,2BAELF,EAAKV,sBAAsBzqB,GAEL,MAAlBA,EAAQC,QAAgBkrB,EAAKjrB,aAAairB,EAAK3vC,IAAKwkB,EAAQC,QAEhEkrB,EAAKh4C,SAAS,CAAE6sB,QAASA,IAEzBmrB,EAAKT,yBAAyBS,EAAKp4C,MAAM2W,SAAS6C,eAClDmS,MACCyB,MAAM,SAAC5P,GACR46B,EAAK/qB,YAAY7P,GACjBoO,EAAOpO,2CAMD+6B,GACV,OAAO,IAAI7sB,QAAQ,SAACC,EAASC,GAC3B8qB,MAAM,6BAA+B6B,EAAY,6BAA+BzzC,OAAO8gB,aACtFnO,KAAK,SAAAmY,GAAQ,OAAIA,EAASqX,SAC1BxvB,KAAK,SAAC+gC,GACqB,MAArBA,EAAUvuC,SAAqBuuC,EAAUvuC,QAAQmG,QAAQ,kBAAoB,EAChFwb,EAAO,gBAAkB2sB,EAAY,iCAAmC7oB,GAAc,0EAEtF/D,EAAQ6sB,qDAOMvrB,GACpB,IAAIwrB,GAAe74C,KAAKI,MAAM6M,QAA2B,IAEzDjN,KAAK6I,IAAI8d,UA5+DmB,wBA4+DiB,CACzC9c,KAAQ,SACR+c,IAAO,YAAcyG,EAAQ/jB,KAIjCtJ,KAAK6I,IAAIge,SAAS,CAChBvd,GA5+DmB,gBA6+DnBO,KAAQ,OACRid,OAr/D0B,wBAs/D1BC,eAAgBsG,EAAQ1kB,KACxBqe,MAAS,CACPC,aAAc,mBACdkG,qBAAsB,qBAEvB0rB,GAEH74C,KAAKQ,SAAS,CAACkc,aAAc1c,KAAK6I,IAAIiwC,SAt/DjB,mBAw/DrB94C,KAAK6I,IAAIge,SAAS,CAChBvd,GAAM02B,GACNn2B,KAAQ,OACRid,OAlgE0B,wBAmgE1BiyB,OAAU,CACRC,WAAc,QAEhBjyB,eAAgBsG,EAAQ1kB,KACxBqe,MAAS,CACPC,aAAc,mBACdkG,qBAAsB,6BAEvB0rB,GAEH74C,KAAK6I,IAAIge,SAAS,CAChBvd,GAAM22B,GACNp2B,KAAQ,OACRid,OAhhE0B,wBAihE1BiyB,OAAU,CACRC,WAAc,QAEhBjyB,eAAgBsG,EAAQ1kB,KACxBqe,MAAS,CACPiyB,aAAc,yBACdC,aA5gEsB,MA8gEvBL,GAEH74C,KAAK6I,IAAIge,SAAS,CAChBvd,GAvhEiB,cAwhEjBO,KAAQ,OACRid,OA9hE0B,wBA+hE1BiyB,OAAU,CACRC,WAAc,QAEhBjyB,eAAgBsG,EAAQ1kB,KACxBqe,MAAS,CACPC,aAAc,qBACdkG,qBAAsB,2BAEvB0rB,GAEH74C,KAAK6I,IAAIge,SAAS,CAChBvd,GAAM42B,GACNr2B,KAAQ,OACRid,OA5iE0B,wBA6iE1BiyB,OAAU,CACRC,WAAc,QAEhBjyB,eAAgBsG,EAAQ1kB,KACxBqe,MAAS,CACPiyB,aAAc,yBACdC,aAviEsB,MAyiEvBL,sDAGsB,IAAAM,EAAAn5C,KACZA,KAAK6I,IAAIwd,WAAWC,OAENsF,OAAO,SAAC9iB,GACjC,MA5jE0B,0BA4jElBA,EAAKge,SAGDzE,QAAQ,SAACvZ,GACrBqwC,EAAKtwC,IAAI2d,YAAY1d,EAAKQ,WAG0BjB,IAAlDrI,KAAK6I,IAAI4d,UAnkEe,0BAmkEqCzmB,KAAK6I,IAAI6d,aAnkE9C,iEAykE5B,IACI0yB,EAAc,uBADTp5C,KAAKI,MAAM6H,aAAa60B,aAAavW,QAAQ,GACN,mDAAqDvmB,KAAKI,MAAM6H,aAAa60B,aAAe,iHACxIqa,EAAQ,CAACjyC,OAAO83B,KAAKqc,SAAW,gBAAkBr5C,KAAK0oC,uBAAyB,6KACpF1oC,KAAKQ,SAAS,CAACgR,gBAAiB4nC,IAChCp5C,KAAK6I,IAAI8d,UA5kEU,cA4kEiB,CAChCyyB,YAAeA,EACfvvC,KAAQ,SACRstC,MAASA,2CAObn3C,KAAK6I,IAAIge,SAAS,CAChBvd,GAhlEgB,OAilEhBO,KAAQ,OACRid,OAzlEiB,cA0lEjBC,eAAgB/mB,KAAK0oC,uBACrBqQ,OAAU,CACRC,WAAc,WAEhBptB,OAAU,CAAC,KAAM,UAAW,GAC5B5E,MAAS,CACPC,aAAc,CACZpd,KAAQ,cACRmrB,SAAY,SACZskB,MAAS,CACP,CAAC,IAAK,kBACN,CAAC,IAAK,mBACN,CAAC,IAAK,qBAGVnsB,qBAAsB,CACpBtjB,KAAQ,cACRmrB,SAAY,SACZskB,MAAS,CACP,CAAC,IAAK,kBACN,CAAC,IAAK,mBACN,CAAC,IAAK,qBAGVpyB,eAAgBlnB,KAAKI,MAAM0c,sBAI/B9c,KAAKQ,SAAS,CAACqc,UAAW7c,KAAK6I,IAAIiwC,SA/mEjB,4CAknEVxvC,GACJtJ,KAAK6I,KAAK7I,KAAK6I,IAAIiwC,SAASxvC,IAAKtJ,KAAK6I,IAAI0wC,kBAAkBjwC,EAAI,aAAc,6CAE1EA,GACJtJ,KAAK6I,KAAK7I,KAAK6I,IAAIiwC,SAASxvC,IAAKtJ,KAAK6I,IAAI0wC,kBAAkBjwC,EAAI,aAAc,+CAGrEkwC,GACb,OAAQx5C,KAAK6I,KAAO7I,KAAK6I,IAAIiwC,SAASU,IAAsE,YAAxDx5C,KAAK6I,IAAI4wC,kBAAkBD,EAAW,oDAI9EE,EAAS5kC,GACjB9U,KAAK6I,KAAO7I,KAAK6I,IAAIiwC,SAASY,KAChC15C,KAAK6I,IAAI4uB,iBAAiBiiB,EAAS,eAAgB5kC,GAjoEhC,kBAmoEf4kC,GAAgC15C,KAAKQ,SAAS,CAACmc,sBAAuB7H,IAloE1D,SAmoEZ4kC,GAA6B15C,KAAKQ,SAAS,CAACsc,mBAAoBhI,mDAMlE9U,KAAKI,MAAMitB,SAAWrtB,KAAKI,MAAMitB,QAAQC,QAAQttB,KAAKutB,aAAavtB,KAAK6I,IAAK7I,KAAKI,MAAMitB,QAAQC,6CAIzFqsB,EAAMrsB,GACjB,IAAIssB,EAAUtsB,EAAO,IAAM,KAAQ,IAAMA,EAAO,GAC5CusB,EAAUvsB,EAAO,IAAM,IAAO,GAAKA,EAAO,GAC1CwsB,EAAUxsB,EAAO,GAAK,IAAO,IAAMA,EAAO,GAC1CysB,EAAUzsB,EAAO,GAAK,GAAM,GAAKA,EAAO,GAC5CqsB,EAAKx0B,UAAU,CAACy0B,EAAQC,EAAQC,EAAQC,GAAS,CAAEv4C,QAAS,CAAEyF,IAAK,GAAI+yC,OAAQ,GAAIz0C,KAAM,GAAID,MAAO,IAAM8f,OAAQ,SAACC,GAAU,OAAO,yCAG1H5gB,GAAK,IAAAw1C,EAAAj6C,KAEXyE,EACFzE,KAAKk6C,2BAA2BriC,KAAK,SAACs8B,GACpC8F,EAAKE,kBAAkBhG,GACvB8F,EAAKG,UA7pEU,iBAgqEjBp6C,KAAKmtC,UAhqEY,4DA0qEnBntC,KAAKQ,SAAS,CAAEuY,UAAW,YAC3B/Y,KAAKq6C,gEAKwB,aAAzBr6C,KAAKI,MAAM2Y,YACb/Y,KAAKQ,SAAS,CAAEuY,UAAW,aAI3B/Y,KAAKq6C,2DAMPr6C,KAAKQ,SAAS,CAAEuY,UAAW,mBAE3B/Y,KAAKs6C,qBAAuBt6C,KAAKu6C,eAAera,IAEhDlgC,KAAKmtC,UAAUjN,IAEflgC,KAAKo6C,UAAUpa,IAEfhgC,KAAK8a,cAjsEgB,gBAQiB,GA2rEtC9a,KAAKw6C,uBAAyBx6C,KAAKI,MAAMuc,sBAEzC3c,KAAKo6C,UAAUna,IAEfjgC,KAAKy6C,kBAAkBxa,8CAMnBjgC,KAAKs6C,sBAAsBt6C,KAAKo6C,UAAUla,IAE9ClgC,KAAK8a,cA/sEgB,gBA+sEmB9a,KAAKw6C,uBAA0Bx6C,KAAKw6C,uBAAyBra,IAErGngC,KAAKmtC,UAAUnN,IAEfhgC,KAAKmtC,UAAUlN,gDAKfjgC,KAAKQ,SAAS,CAACigB,iBAAkB,0DAKjCzgB,KAAKQ,SAAS,CAACigB,iBAAkB,uDAKjCzgB,KAAKQ,SAAS,CAACigB,iBAAkB,qDASjCzgB,KAAKQ,SAAS,CAACuX,WAAW,IAE1B/X,KAAK6I,IAAIosC,YAAY9zC,MAAM4Y,OAAS,YAEpC/Z,KAAK06C,WAAa16C,KAAK26C,aAAaz4C,KAAKlC,MACzCA,KAAK6I,IAAImkB,GAAG,QAASgT,GAAehgC,KAAK06C,YAEzC16C,KAAK46C,cAAgB56C,KAAK66C,YAAY34C,KAAKlC,MAC3CA,KAAK6I,IAAImkB,GAAG,cAAegT,GAAehgC,KAAK46C,2DAK/C56C,KAAKQ,SAAS,CAACuX,WAAW,IAE1B/X,KAAK6I,IAAIosC,YAAY9zC,MAAM4Y,OAAS,UAEpC/Z,KAAK6I,IAAIiyC,IAAI,QAAS9a,GAAehgC,KAAK06C,YAE1C16C,KAAK6I,IAAIiyC,IAAI,cAAe9a,GAAehgC,KAAK46C,eAEhD56C,KAAK+6C,6DAIW,IAAAC,EAAAh7C,KAEdA,KAAKQ,SAAS,CAAE8iC,eAAgB,IAAM,WAEpC,IAAIuF,EAAQmS,EAAKC,yBAAyBD,EAAK56C,MAAM2W,SAAS6C,eAE9DohC,EAAKE,oBAAoB,GAAIrS,+CAOjC,IAAI/X,EAAW,IAAIC,SAEnBD,EAASG,OAAO,OAAQjxB,KAAKI,MAAMmf,OAEnCuR,EAASG,OAAO,UAAWjxB,KAAKI,MAAMoX,SAElCxX,KAAKI,MAAMkjC,eAAet0B,OAAS,GACrChP,KAAKI,MAAMkjC,eAAejhB,QAAQ,SAACvZ,GAEjC,IAAIqyC,EAAa,SAAWryC,EAAK,GAEjCgoB,EAASG,OAAOkqB,EAAYryC,EAAK,MAIrC9I,KAAK0rC,MAAM,eAAgB5a,GAAUjZ,KAAK,SAACmY,2CAMhCroB,GACX3H,KAAKo7C,aAAazzC,EAAG,0CAIXA,GACV3H,KAAKo7C,aAAazzC,EAAG,8CAGVA,EAAG0zC,GAEd,IAAI5lC,EAAWzV,KAAK6I,IAAIwrC,sBAAsB1sC,EAAE2sC,MAAO,CAAEhuB,OAAQ,CAAC0Z,MAElE,GAAIvqB,EAASzG,OAAS,EAAG,CAEvB,IAAIulC,EAAO9+B,EAAS,GAAG++B,WAAWD,KAE9Bn3B,EAASpd,KAAKs7C,eAAe/G,GAE7BgH,EAAcv7C,KAAKw7C,mBAAmBp+B,EAAQi+B,GAE9CI,EAAWz7C,KAAKI,MAAMkjC,eAEX,IAAXlmB,GAAcpd,KAAK07C,oBAAoBD,EAAUr+B,EAAQm3B,GAEzC,IAAhBgH,GAAmBv7C,KAAK27C,eAAeF,EAAUF,EAAahH,GAElEv0C,KAAKQ,SAAS,CAAE8iC,eAAgBmY,IAEhCz7C,KAAKy6C,4DAIMlG,GAAM,IAAAqH,EAAA57C,KAEf67C,EAAe,EAOnB,OANA9b,GAAuB1d,QAAQ,SAACvZ,GACT8yC,EAAKE,yBAAyBhzC,GAChC0H,QAAQ+jC,IAAS,IAClCsH,EAAe/yC,KAGZ+yC,4CAISz+B,GAChB,IAAIpW,GAAY,EAIhB,OAHAhH,KAAKI,MAAMkjC,eAAejhB,QAAQ,SAACvZ,EAAM4U,GACnC5U,EAAK,KAAOsU,IAAQpW,EAAW0W,KAE9B1W,mDAIgBoW,GAEvB,IAAIpW,EAAWhH,KAAK+7C,kBAAkB3+B,GAGtC,OADmBpW,GAAY,EAAKhH,KAAKI,MAAMkjC,eAAet8B,GAAU,GAAK,8CAK5DoW,EAAQi+B,GACzB,IAAIW,EACJ,OAAQ5+B,GACN,KAAK,EACH4+B,EAA4B,OAAdX,EAAsB,EAAI,EACxC,MACF,KAAK,EAGL,KAAK,EACHW,EAAoC,EACpC,MACF,KAAK,EACHA,EAA4B,OAAdX,EAAsB,EAAI,EAK5C,OAAOW,8CAIWP,EAAUr+B,EAAQm3B,GACpC,OAAOv0C,KAAKi8C,qBAAqBR,EAAUr+B,EAAQ,CAACm3B,2CAGvCkH,EAAUr+B,EAAQm3B,GAC/B,OAAOv0C,KAAKk8C,wBAAwBT,EAAUr+B,EAAQ,CAACm3B,oDAIjCkH,EAAUr+B,EAAQyrB,GAExC,IAAI7hC,EAAWhH,KAAK+7C,kBAAkB3+B,GAQtC,OAPkB,IAAdpW,IAEFy0C,EAASh5B,KAAK,CAACrF,EAAQ,KACvBpW,EAAWy0C,EAASzsC,OAAS,GAG/BysC,EAASz0C,GAAU,GAAKmV,MAAMggC,KAAK,IAAIC,IAAIX,EAASz0C,GAAU,GAAG2tB,OAAOkU,KACjE4S,+CAIYA,EAAUr+B,EAAQyrB,GAErC,IAAI7hC,EAAWhH,KAAK+7C,kBAAkB3+B,GACtC,GAAIpW,GAAY,EAAG,CACjB,IACIq1C,EADaZ,EAASz0C,GAAU,GACT4kB,OAAO,SAAC9iB,GACjC,OAAO+/B,EAAMr4B,QAAQ1H,GAAQ,IAE/B2yC,EAASz0C,GAAU,GAAKq1C,EAEC,IAArBA,EAAUrtC,QAAcysC,EAAS5xB,OAAO7iB,EAAU,GAExD,OAAOy0C,qDAMiB,IAAAa,EAAAt8C,KACxB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3BswB,EAAKzjB,KAAK,iCAAmCyjB,EAAKl8C,MAAMmf,MAAQ,YAAc+8B,EAAKl8C,MAAMoX,SAASK,KAAK,SAACmY,GACtGjE,EAAQiE,EAAS1gB,QAChBke,MAAM,SAAC5P,oDAWMqP,GAClBjtB,KAAKQ,SAAS,CAACysB,uBAAuBA,IACtCjtB,KAAKu8C,2EAImB7sB,EAAMtB,EAAQwB,EAASD,GAAO,IAAA6sB,EAAAx8C,KACtD,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3BwwB,EAAKnO,eACLmO,EAAKrN,IAAI,+BAAiCzf,EAAO,WAAatB,EAAS,YAAcwB,EAAU,UAAYD,EAAO6sB,EAAKpN,kBAAkBltC,KAAKs6C,IAAO3kC,KAAK,SAACxN,GACzJmyC,EAAKC,uBAAuBpyC,GAASwN,KAAK,WACxC2kC,EAAKE,6BAEL3wB,EAAQ1hB,OAETmjB,MAAM,SAAC5P,GAERoO,EAAOpO,sDAMUmU,EAAazkB,EAAOjE,GAAY,IAAAszC,EAAA38C,KACrD,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B2wB,EAAKtO,eACLsO,EAAKv2B,IAAI,CAAC6e,OAAO,yBAAyB7nB,OAAO,UAAUI,KAAK,8BAChEm/B,EAAKhM,0BAA0B5e,EAAazkB,EAAOjE,GAAawO,KAAK,SAACmY,GACpE2sB,EAAKv2B,IAAI,CAAC6e,OAAO,yBAAyB7nB,OAAO,WAAWI,KAAMwS,EAASxS,OAC3Em/B,EAAKF,uBAAuBzsB,GAAUnY,KAAK,WACzC8kC,EAAKC,oCAENpvB,MAAM,SAAC5P,GACR++B,EAAKE,uBAAuBvvC,GAAO,GACnCqvC,EAAKv2B,IAAI,CAAC6e,OAAO,yBAAyB7nB,OAAO,WAAWQ,MAAMA,IAClEoO,EAAOpO,sDAMUoS,GAAS,IAAA8sB,EAAA98C,KAC9B,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAE3B8wB,EAAKxL,WAAWthB,EAASygB,UAAU54B,KAAK,WAEtCilC,EAAKxwB,uBACLP,EAAQ,4EAMSxG,GAAmC,IAAAw3B,EAAA/8C,KAAAuhB,UAAAvS,OAAA,QAAA3G,IAAAkZ,UAAA,IAAAA,UAAA,GAEtDvhB,KAAK4uB,mBAAmBrJ,GAAoB,GAG5CvlB,KAAK64B,KAAK,kDAAoDtT,GAAoB1N,KAAK,SAACmY,GAErD,IAA7BA,EAASlM,SAAS9U,OACpB+tC,EAAKnuB,mBAAmBrJ,GAAoB,GAG5Cw3B,EAAKv8C,SAAS,CAACgiC,uBAAwBxS,EAASlM,SAAU+I,WAAY,iBAAkB,WACtFkwB,EAAKC,0EAQIz3B,EAAoBooB,GAAO,IAAAsP,EAAAj9C,KAC1CA,KAAK64B,KAAK,6CAA+CtT,GAAoB1N,KAAK,SAACmY,GAEjFitB,EAAK3wB,uBACL2wB,EAAKxvB,YAAYuC,EAASxS,KAAMmwB,KAC/BngB,MAAM,SAAC5P,6CAKC,IAAAs/B,EAAAl9C,KACbA,KAAK64B,KAAK,gBAAgBhhB,KAAK,SAACmY,GAC9BktB,EAAK18C,SAAS,CAAEqvB,UAAWG,EAASmtB,mDAKzB53B,EAAoB63B,GAAmB,IAAAC,EAAAr9C,KACpD,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3BqxB,EAAKxkB,KAAK,4CAA8CtT,EAAqB,sBAAwB63B,EAAmB,KAAQvlC,KAAK,SAACmY,GACpIqtB,EAAK78C,SAAS,CAAC4G,SAAS,IAExBi2C,EAAK/L,WAAWthB,EAASstB,UAAUzlC,KAAK,SAAC+gC,GACvC7sB,EAAQ,0BAETyB,MAAM,SAAC5P,GACRoO,EAAOpO,0CAMF0/B,GAAS,IAAAC,EAAAv9C,KAGlB,OAFAA,KAAKQ,SAAS,CAAC4G,SAAS,IACxBpH,KAAKomB,IAAI,CAAC5I,KAAM,wBAAwBJ,OAAO,cACxC,IAAI0O,QAAQ,SAACC,EAASC,GAC3BuxB,EAAK1+B,MAAQC,YAAY,WACvBg4B,MAAM,8CAA2DwG,EAAW,iBAAmBp4C,OAAOs4C,MACnG3lC,KAAK,SAAAmY,GAAQ,OAAIA,EAASqX,SAC1BxvB,KAAK,SAACmY,GACDA,EAASytB,WACXF,EAAKn3B,IAAI,CAAC5I,KAAM,WAAWJ,OAAO,mBAElCgC,cAAcm+B,EAAK1+B,OACnB0+B,EAAK1+B,MAAQ,KAEb0+B,EAAK/8C,SAAS,CAAC4G,SAAS,IACxB2kB,EAAQ,yBAGXyB,MAAM,SAAC5P,GACN2/B,EAAK/8C,SAAS,CAAC4G,SAAS,IACxB4kB,EAAOpO,MAEV,kDAIY8/B,GACjB19C,KAAKQ,SAAS,CAAE2qB,oBAAoB,EAAMjC,uBAAwBw0B,IAC9DA,GAAoB19C,KAAKgtC,sEAG7BhtC,KAAKQ,SAAS,CAAE2qB,oBAAoB,EAAOf,yBAAyB,mDAGpEpqB,KAAKQ,SAAS,CAAEyhC,sBAAsB,oDAGtCjiC,KAAKQ,SAAS,CAAEyhC,sBAAsB,IAEtCjiC,KAAK29C,wEAGL39C,KAAKQ,SAAS,CAAEqhC,0BAA0B,wDAG1C7hC,KAAKQ,SAAS,CAAEqhC,0BAA0B,sDAG1C7hC,KAAKQ,SAAS,CAACuhC,yBAAyB,uDAGxC/hC,KAAKQ,SAAS,CAACuhC,yBAAyB,qDAGxC/hC,KAAKQ,SAAS,CAACwhC,wBAAwB,sDAGvChiC,KAAKQ,SAAS,CAACwhC,wBAAwB,gDAGvChiC,KAAKQ,SAAS,CAAC0hC,mBAAmB,iDAGlCliC,KAAKQ,SAAS,CAAC0hC,mBAAmB,2DAGlCliC,KAAKQ,SAAS,CAAE4pB,yBAAyB,2CAGzCpqB,KAAKQ,SAAS,CAAE4pB,yBAAyB,8CAGzCpqB,KAAKQ,SAAS,CAAEugC,iBAAiB,+CAGjC/gC,KAAKQ,SAAS,CAAEugC,iBAAiB,yDAEN/P,GAC3BhxB,KAAKQ,SAAS,CAAE2iC,uBAAwBnS,sDAGhB4sB,EAAStwC,EAAOjE,GAExC,OAAOrJ,KAAK64B,KAAK,mCAAqC+kB,EAAU,SAAWtwC,EAAQ,gBAAkBjE,yCAQzF4L,EAAS4oC,GACrB,IAAIpoC,EAAWzV,KAAKI,MAAMwpB,YAEtBlM,EAAQjI,EAAS46B,UAAU,SAACyN,GAAc,OAAOA,EAAQx0C,KAAO2L,EAAQ3L,MAC/D,IAAToU,IACF5d,OAAO8E,OAAO6Q,EAASiI,GAAQmgC,GAE/B79C,KAAKuwC,iBAAiB96B,oDAMxB,IAAIkW,EAAM,GACV3rB,KAAKI,MAAMwpB,YAAYvH,QAAQ,SAACpN,GAC1BA,EAAQsW,UAAUI,EAAIlJ,KAAKxN,EAAQ3L,MAEzCtJ,KAAKQ,SAAS,CAACipB,mBAAoBkC,yCAIxB1W,GACDjV,KAAKI,MAAMqpB,mBACbhG,SAASxO,EAAQ3L,IAEvBtJ,KAAKyrB,cAAcxW,GAGnBjV,KAAK0rB,WAAWzW,yCAKNA,GAAQ,IAAA8oC,EAAA/9C,KAChB2rB,EAAM3rB,KAAKI,MAAMqpB,mBAGrB,OADAkC,EAAMA,EAAIC,OAAO,SAAC/jB,EAAO6V,EAAOmO,GAAS,OAAOhkB,IAAUoN,EAAQ3L,KAC3D,IAAIwiB,QAAQ,SAACC,EAASC,GAC3B+xB,EAAKv9C,SAAS,CAAEipB,mBAAoBkC,GAAO,WACzCI,EAAQ,0DAMH9W,GACT,IAAI0W,EAAM3rB,KAAKI,MAAMqpB,mBAErBkC,EAAIlJ,KAAKxN,EAAQ3L,IACjBtJ,KAAKQ,SAAS,CAAEipB,mBAAoBkC,mDAM/B3rB,KAAK6I,IAAI4d,UAAU,wBAAwBzmB,KAAK6I,IAAI8sC,WAAW31C,KAAK81C,iEAMzE91C,KAAK6I,IAAIm1C,cAAch+C,KAAK81C,yDAGjBx1C,GAEXN,KAAKi+C,uBAELj+C,KAAKk+C,kBAAoB59C,EAAImV,qDAK7B,IAAIkW,EAAM,GACV3rB,KAAKI,MAAMwpB,YAAYvH,QAAQ,SAACpN,GAC9B0W,EAAIlJ,KAAKxN,EAAQ3L,MAEnBtJ,KAAKspB,eAAeqC,8CAKpB3rB,KAAKQ,SAAS,CAACipB,mBAAoB,4CAItBkC,GACb3rB,KAAKQ,SAAS,CAACipB,mBAAoBkC,qDAIb,IAAAwyB,EAAAn+C,KAClB4pB,EAAc5pB,KAAKI,MAAMwpB,YAC7BA,EAAYvH,QAAQ,SAACpN,GACfkpC,EAAK/9C,MAAMqpB,mBAAmBhG,SAASxO,EAAQ3L,IACjDxJ,OAAO8E,OAAOqQ,EAAS,CAACsW,UAAU,KAE9B4yB,EAAK/9C,MAAM2W,SAASC,WAEtBlX,OAAO8E,OAAOqQ,EAAS,CAACsW,UAAU,IAElCzrB,OAAO8E,OAAOqQ,EAAS,CAACsW,UAAU,EAAO0jB,cAAc,EAAOt5B,gBAAiB,EAAGD,SAAU,EAAG25B,UAAW,EAAGz5B,aAAc,EAAG05B,yBAAyB,IAGrJr6B,EAAQmpC,sBAAsBD,EAAKE,mBAAmBppC,GAEtDA,EAAQ3L,KAAO60C,EAAKG,eAAeH,EAAKI,yBAAyBtpC,MAIzEjV,KAAKuwC,iBAAiB3mB,EAAa,WAEA,aAA7Bu0B,EAAK/9C,MAAM0N,SAASqC,MAAqBguC,EAAK5P,iBAElD4P,EAAK3yB,6EAKoB/Y,GAAa,IAAA+rC,EAAAx+C,KACpC4pB,EAAc5pB,KAAKI,MAAMwpB,YAE7BA,EAAYvH,QAAQ,SAACpN,GACnBnV,OAAO8E,OAAOqQ,EAAS,CAACxC,aAAcA,MAGxCzS,KAAKuwC,iBAAiB3mB,EAAa,WAEA,aAA7B40B,EAAKp+C,MAAM0N,SAASqC,MAAqBquC,EAAKjQ,4DAKrCkQ,EAAaC,GAE5B1+C,KAAKQ,SAAS,CAAEopB,YAAa60B,EAAarb,gBAAiBqb,EAAY7yB,OAAO,SAAC9iB,GAAW,OAAOA,EAAKyiB,YAAemzB,wCAI1GzpC,GAAS,IAAA0pC,EAAA3+C,KAEpBA,KAAKyrB,cAAcxW,GAAS4C,KAAK,WAE/B8mC,EAAKhyB,kEAKM5C,GACb/pB,KAAKQ,SAAS,CAACupB,iBAAiBA,IAChC/pB,KAAK4+C,2DAIQ5tB,GAAS,IAAA6tB,EAAA7+C,KACtB,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B6yB,EAAKhmB,KAAK,2BAA6B7H,GAAUnZ,KAAK,SAACmY,GACrDjE,EAAQiE,KACPxC,MAAM,SAAC5P,GACRoO,EAAOpO,+CAMGkhC,EAASjsB,GAAU,IAAAksB,EAAA/+C,KACjC,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3B+yB,EAAKlmB,KAAK,2BAA6BimB,EAAU,cAAgBjsB,GAAWhb,KAAK,SAACmY,GAChFjE,EAAQiE,KACPxC,MAAM,SAAC5P,GACRoO,EAAOpO,sDAMUoT,GAAS,IAAAguB,EAAAh/C,KAC9B,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3BgzB,EAAKnmB,KAAK,mCAAqC7H,GAAUnZ,KAAK,SAACmY,GAC7DjE,EAAQiE,KACPxC,MAAM,SAAC5P,GACRoO,EAAOpO,8CAMEkhC,EAASn2C,EAAMU,EAAawpB,EAAYosB,GAAW,IAAAC,EAAAl/C,KAGhE,OADAA,KAAKquC,eACE,IAAIviB,QAAQ,SAACC,EAASC,GAE3B,IAAIpF,EAAgB,KAATje,EAAe,0BAA4Bm2C,EAAU,cAAgBjsB,EAAY,SAAWlqB,EAAO,gBAAkBU,EAAc,0BAA4By1C,EAAU,cAAgBjsB,EAAY,eAAiBosB,EACjOC,EAAK/P,IAAIvoB,EAAKs4B,EAAK9P,kBAAkBltC,KAAKg9C,IAAOrnC,KAAK,SAACxN,GAErD0hB,EAAQ1hB,KACPmjB,MAAM,SAAC5P,GACRoO,EAAOpO,gDAMIjV,EAAMU,GAAY,IAAA81C,EAAAn/C,KAEjCA,KAAKquC,eACLruC,KAAKomB,IAAI,CAAC6e,OAAO,mBAAmB7nB,OAAO,UAAUI,KAAK,uBAE1D,IAAIsT,EAAW,IAAIC,SACnBD,EAASG,OAAO,OAAQtoB,GACxBmoB,EAASG,OAAO,cAAe5nB,GAE/B,IAAI+1C,EAASp/C,KAAKk+C,kBAAkB,GAAGmB,SAASz5B,YAAY,GAAG/c,IAAI,SAACy2C,GAClE,OAAOA,EAAW,GAAK,IAAMA,EAAW,KACvC1gC,KAAK,KACRkS,EAASG,OAAO,aAAc,cAAgBmuB,EAAS,KACvDp/C,KAAK0rC,MAAM,8BAA+B5a,GAAUjZ,KAAK,SAACmY,GACtDmvB,EAAK/4B,IAAI,CAAC6e,OAAO,mBAAmB7nB,OAAO,WAAYI,KAAMwS,EAASxS,OAEtE2hC,EAAK7N,WAAWthB,EAASygB,UAAU54B,KAAK,WACtCsnC,EAAK7Y,kBAAkBtW,EAAS1mB,IAEhC61C,EAAKI,4BAER/xB,MAAM,SAAC5P,GACRuhC,EAAK/4B,IAAI,CAAChJ,OAAO,WAAYQ,MAAOA,gDAKtBtU,GAChBtJ,KAAKw/C,mBAAmBl2C,8CAGPA,GAAI,IAAAm2C,EAAAz/C,KAErBA,KAAK64B,KAAK,kBAAoBvvB,EAAK,gBAAgBuO,KAAK,SAACmY,GAEvDyvB,EAAK1S,qBAAqB/c,EAAS1gB,KAAK,IAExCmwC,EAAKC,cAAc1vB,EAAS1gB,KAAK,4CAKvB2F,GAEZ,IAAI0qC,EAAe3/C,KAAKI,MAAMwpB,YAC9B+1B,EAAal9B,KAAKxN,GAClBjV,KAAKQ,SAAS,CAACopB,YAAa+1B,0CAIhB1qC,GAAS,IAAA2qC,EAAA5/C,KACrBA,KAAK64B,KAAK,2CAA6C5jB,EAAQ3L,IAAIuO,KAAK,SAACmY,GACtC,IAA7BA,EAASlM,SAAS9U,OACpB4wC,EAAKC,eAAe5qC,GAEpB2qC,EAAKp/C,SAAS,CAACgiC,uBAAwBxS,EAASlM,SAAU+I,WAAY,WAAY,WAChF+yB,EAAK5C,sEAOE/nC,GAAQ,IAAA6qC,EAAA9/C,KACrBA,KAAK64B,KAAK,8BAAgC5jB,EAAQsQ,oBAAoB1N,KAAK,SAACmY,GAC1E8vB,EAAKryB,YAAY,mBAEjBqyB,EAAKr0B,cAAcxW,GAEnB6qC,EAAKC,6BAA6B9qC,sDAKbA,EAAS6O,GAChC3D,QAAQiG,IAAItC,wDAIe7O,GAC3B,IAAI0qC,EAAe3/C,KAAKI,MAAMwpB,YAE9B+1B,EAAeA,EAAa/zB,OAAO,SAAC9iB,GAAU,OAAOA,EAAKQ,KAAO2L,EAAQ3L,KAEzEtJ,KAAKQ,SAAS,CAACopB,YAAa+1B,6CAId,IAAAK,EAAAhgD,KACd,OAAO,IAAI8rB,QAAQ,SAACC,EAASC,GAC3Bg0B,EAAKnnB,KAAK,qBAAqBhhB,KAAK,SAACmY,GAEnCgwB,EAAKx/C,SAAS,CAACopB,YAAaoG,EAAS1gB,OACrCyc,EAAQ,uBACPyB,MAAM,SAAC5P,gDAMEtd,EAAK2U,GAEnB,IAAIiuB,EAAkBljC,KAAKigD,0BAA0BhrC,GACrDjV,KAAKQ,SAAS,CAACigC,iBAAiB,EAAMwC,eAAgBhuB,EAASxU,WAAYH,EAAII,cAAewiC,gBAAiBA,6CAEhG5iC,GACfN,KAAKQ,SAAS,CAACigC,iBAAiB,sDAIRxrB,GAExB,IAAI7B,EAAUpT,KAAKu6C,eAAera,IAE9BggB,EAAejrC,EAAQ3L,KAAOtJ,KAAKs+C,oBAA0Cj2C,IAAvBrI,KAAKs+C,cAG/D,OADuBlrC,EAAY8sC,EAAejrC,EAAQg6B,aAAgB5O,GA76FjD,gCA66FoGprB,EAAQg6B,aA76F5G,gCA66FqJ5O,GAAyBA,8CAKvL,IAAA8f,EAAAngD,KAChBA,KAAKI,MAAMgjC,gBAAgB/gB,QAAQ,SAACpN,GAC9BA,EAAQmpC,sBAAsB+B,EAAK9B,mBAAmBppC,gDAK3CA,GAEjB,IAAImrC,EAAYnrC,EAAQiY,UAAUwkB,MAAM,KAAK,GACzC1xC,KAAK6I,IAAIiwC,SAASsH,IACpBpgD,KAAK6I,IAAI2d,YAAY45B,GACrBpgD,KAAK6I,IAAI6d,aAAa05B,GACtBpgD,KAAKoV,cAAcH,EAAS,CAACmpC,sBAAsB,MAEnDp+C,KAAK6I,IAAIge,SAAS,CAChBvd,GAAM82C,EACNv2C,KAAQ,OACRid,OAAU,CACRjd,KAAQ,SACR+c,IAAO,YAAc3R,EAAQiY,WAE/BnG,eAAgBq5B,EAChBp5B,MAAS,CACPC,aAAc,qBACdkG,qBAAsB,uBAEvB+S,IACHlgC,KAAKoV,cAAcH,EAAS,CAACmpC,sBAAsB,sDAI9BnpC,GAl9FE,kCAo9FrBjV,KAAKI,MAAM8iC,iBACbljC,KAAKmtC,UAAUjN,IAEflgC,KAAKQ,SAAS,CAAC0iC,gBAAiB7C,KAEhCrgC,KAAKs+C,eAAiB,IAGtBt+C,KAAKQ,SAAS,CAAC0iC,gBA59FQ,kCA89FvBljC,KAAKqgD,wBAAwBprC,EAAQ3L,qDAKjBg3C,GAAI,IAAAC,EAAAvgD,KAC1BA,KAAK64B,KAAK,gCAAkC74B,KAAKI,MAAMmf,MAAQ,YAAcvf,KAAKI,MAAMoX,QAAU,QAAU8oC,GAAKzoC,KAAK,SAACmY,GAErH,IAAIwwB,EAAwBD,EAAK3M,8BAA8B,QAC/D5jB,EAAS1gB,KAAK+S,QAAQ,SAACkyB,GACnBiM,EAAsB/9B,KAAK8xB,EA5+FJ,wBA++F3BiM,EAAsB/9B,KAAK,iBAC3B89B,EAAK13C,IAAI4uB,iBAAiByI,GAAmB,aAAcsgB,GAE3DD,EAAKnG,UAAUla,IAEfqgB,EAAKjC,cAAgBgC,8CAKPrrC,GAChBjV,KAAK+uC,mBACL/uC,KAAKygD,aAAaxrC,yCAINA,GACZjV,KAAK+uC,mBAEL,IAEI2R,EAFSzrC,EAAQ0rC,OAAOp6B,OAAO,EAAGtR,EAAQ0rC,OAAO3xC,OAAO,GAAG2O,QAAQ,KAAK,KAAK+zB,MAAM,KAErE7oC,IAAI,SAACC,GAAU,OAAO0J,OAAO1J,KAE/C9I,KAAK6I,IAAIsc,UAAU,CAAC,CAACu7B,EAAK,GAAIA,EAAK,IAAI,CAACA,EAAK,GAAIA,EAAK,KAAM,CAAEl/C,QAAS,2CAO5DmG,GACXA,EAAEi5C,iBACF5gD,KAAKQ,SAAS,CAAE8hC,cAAc,EAAM7hC,WAAYkH,EAAEjH,qDAEvCiH,GACX3H,KAAKQ,SAAS,CAAE8hC,cAAc,yCAEnB36B,GACXA,EAAEi5C,iBACF5gD,KAAKQ,SAAS,CAAE+hC,cAAc,EAAM9hC,WAAYkH,EAAEjH,qDAEvCiH,GACX3H,KAAKQ,SAAS,CAAE+hC,cAAc,iDAG9BviC,KAAKQ,SAAS,CAAEwgC,oBAAoB,kDAGpChhC,KAAKQ,SAAS,CAAEwgC,oBAAoB,uDAGpChhC,KAAKQ,SAAS,CAAEghC,0BAA0B,wDAG1CxhC,KAAKQ,SAAS,CAAEghC,0BAA0B,iDAG1CxhC,KAAKQ,SAAS,CAAE2gC,oBAAoB,IACpCnhC,KAAK4tC,4DAGL5tC,KAAKQ,SAAS,CAAE2gC,oBAAoB,mDAGpCnhC,KAAKQ,SAAS,CAAE6gC,sBAAsB,oDAGtCrhC,KAAKQ,SAAS,CAAE6gC,sBAAsB,wDAGtCrhC,KAAK6gD,eACL7gD,KAAKQ,SAAS,CAAEihC,2BAA2B,yDAG3CzhC,KAAKQ,SAAS,CAAEihC,2BAA2B,2DAG3CzhC,KAAKQ,SAAS,CAAEkhC,8BAA8B,4DAG9C1hC,KAAKQ,SAAS,CAAEkhC,8BAA8B,6CAG5C1hC,KAAKQ,SAAS,CAAE4gC,oBAAoB,EAAMX,iBAAiB,8CAG3DzgC,KAAKQ,SAAS,CAAE4gC,oBAAoB,gDAItCphC,KAAKQ,SAAS,CAAEsgC,mBAAmB,IACnC9gC,KAAKyL,4DAILzL,KAAKQ,SAAS,CAAEsgC,mBAAmB,gDAInC9gC,KAAKQ,SAAS,CAAEkgC,mBAAmB,IACnC1gC,KAAKyL,4DAGLzL,KAAKQ,SAAS,CAAEkgC,mBAAmB,8CAInC1gC,KAAKQ,SAAS,CAAEmgC,iBAAiB,IACjC3gC,KAAKsM,0DAILtM,KAAKQ,SAAS,CAAEmgC,iBAAiB,oDAIjC3gC,KAAKQ,SAAS,CAAE0gC,oBAAoB,qDAIpClhC,KAAKQ,SAAS,CAAE0gC,oBAAoB,uDAIpClhC,KAAKQ,SAAS,CAAE+gC,0BAA0B,wDAG1CvhC,KAAKQ,SAAS,CAAE+gC,0BAA0B,sDAI1CvhC,KAAKQ,SAAS,CAAEqgC,yBAAyB,gDAGzC7gC,KAAKQ,SAAS,CAAEqgC,yBAAyB,8CAGzC7gC,KAAK8gD,WACL9gD,KAAKQ,SAAS,CAAE+/B,iBAAiB,+CAGjCvgC,KAAKQ,SAAS,CAAE+/B,iBAAiB,+CAGjCvgC,KAAKQ,SAAS,CAACggC,iBAAiB,0CAGhCxgC,KAAKQ,SAAS,CAAEkC,kBAAkB,0CAGlC1C,KAAKQ,SAAS,CAAEkC,kBAAkB,8CAIlC1C,KAAKQ,SAAS,CAAE+B,eAAgBvC,KAAKI,MAAMmC,6DAG3CvC,KAAKQ,SAAS,CAAEkC,kBAAmB1C,KAAKI,MAAMsC,8DAI9C1C,KAAK+7B,aACL/7B,KAAKQ,SAAS,CAAC2hC,kBAAkB,gDAGjCniC,KAAKQ,SAAS,CAAC2hC,kBAAkB,sDAGjCniC,KAAKQ,SAAS,CAACshC,yBAAyB,IACxC9hC,KAAKsM,kEAGLtM,KAAKQ,SAAS,CAACshC,yBAAyB,uDAGxC9hC,KAAKyL,eACLzL,KAAKQ,SAAS,CAACohC,0BAA0B,wDAGzC5hC,KAAKQ,SAAS,CAACohC,0BAA0B,uDAIzC5hC,KAAKQ,SAAS,CAACmhC,0BAA0B,wDAGzC3hC,KAAKQ,SAAS,CAACmhC,0BAA0B,+CAGzC3hC,KAAKQ,SAAS,CAAC4hC,kBAAiB,gDAGhCpiC,KAAKQ,SAAS,CAAC4hC,kBAAiB,sDAIhCpiC,KAAKQ,SAAS,CAAC8gC,yBAAyB,uDAGxCthC,KAAKQ,SAAS,CAAC8gC,yBAAyB,+CAMvByf,GAEjB,IAAIC,EAAYhhD,KAAKI,MAAM2W,SAC3BiqC,EAAUpnC,cAAgBmnC,EAC1B/gD,KAAKQ,SAAS,CAAEuW,SAAUiqC,IAE1BhhD,KAAKqqC,uBAAuB,gBAAiB0W,GAE7C/gD,KAAK+3C,yBAAyBgJ,GAE9B/gD,KAAKihD,0BAA0BF,oDAGRA,GAEvB,IAAIG,EAAiBlhD,KAAKmhD,4BAA4BJ,GAIlDK,EAAa,CAAC,MAAO,CAAC,KAAM,YAAYzsB,OAAOusB,IACnDlhD,KAAK6I,IAAIw4C,UArtGS,OAqtGkBD,GAElB,SAAjBL,EAA2B/gD,KAAKshD,eAAiBthD,KAAKuhD,mEAG7BR,GAC1B,IAAIS,EAAW,GACf,OAAQT,GACN,IAAK,OACHS,EAAW,CAAC,IACZ,MACF,IAAK,YACHA,EAAW,CAAC,KAAM,KAAM,MACxB,MACF,IAAK,YACHA,EAAW,CAAC,KAAM,KAAM,KAAM,MAAO,MACrC,MACF,IAAK,WACHA,EAAW,CAAC,KAAM,KAAM,KAAM,MAAO,KAAM,KAC3C,MACF,IAAK,YACHA,EAAW,CAAC,KAAM,KAAM,KAAM,MAAO,KAAM,IAAK,MAChD,MACF,IAAK,MACHA,EAAW,CAAC,KAAM,KAAM,KAAM,MAAO,KAAM,IAAK,KAAK,gBAIzD,OAAOA,mDAIgBT,GACvB,IAAIU,EAA4BzhD,KAAK0hD,iBAAiBX,GAGtD,OADY/gD,KAAK2hD,2BAA2BF,6FAKdV,8FACxB/gD,KAAK4hD,yBAAyBb,GAAclpC,KAAK,SAACgqC,GAEtD,IAAIhZ,EAAQiZ,EAAK7G,yBAAyB8F,GAGtCgB,EADsBD,EAAKhG,yBAAyB,GAAGnnB,OAAOmtB,EAAKhG,yBAAyB,IACxDlwB,OAAO,SAAA/jB,GAAK,OAAK,IAAMghC,EAAMr4B,QAAQ3I,KACzEk6C,EAAc/yC,OAAS,IAEzB65B,EAAQA,EAAMjd,OAAO,SAAC9iB,GAAD,OAAWi5C,EAAct+B,SAAS3a,KACvDg5C,EAAKr0B,YAAY,wDAA0DqC,GAAc,qEAI3F,IAAIkyB,OAAwC35C,IAAvBy5C,EAAKE,cAA+BF,EAAKE,cAAgBF,EAAK7G,yBAAyB6G,EAAKtV,sBAEjHsV,EAAKE,cAAgBnZ,EAErBiZ,EAAKtV,qBAAuBuU,EAE5Be,EAAK5G,oBAAoB8G,EAAenZ,KACvCrb,MAAM,SAAC5P,GACRkkC,EAAKr0B,YAAY7P,oJAKDokC,EAAenZ,GAEjC,IAAI4S,EAAWz7C,KAAKI,MAAMkjC,eAEtB2e,EAAWjiD,KAAKkiD,YAAYF,EAAenZ,GAC/C,GAAwB,IAApBoZ,EAASjzC,OAAc,CAEzB,IAAImzC,EAAWniD,KAAKkiD,YAAYrZ,EAAOmZ,GACvChiD,KAAKi8C,qBAAqBR,EAAU,EAAG0G,QAIvCniD,KAAKk8C,wBAAwBT,EAAU,EAAGwG,GAG5CjiD,KAAKQ,SAAS,CAAE8iC,eAAgBmY,IAEhCz7C,KAAKy6C,oBAELz6C,KAAK+6C,sDAGKiH,EAAenZ,GACzB,OAAOA,EAAMjd,OAAO,SAACiO,GACnB,OAAqC,IAA9BmoB,EAAcxxC,QAAQqpB,4CAM/B75B,KAAKQ,SAAS,CAACoc,kBAAiB,2CAKhC5c,KAAKQ,SAAS,CAACoc,kBAAiB,qDAETmkC,GAAc,IAAAqB,EAAApiD,KAErC,OAAIA,KAAKusC,6BAA6Bv9B,OAAO,EACpC8c,QAAQC,QAAQ/rB,KAAKusC,8BAIrB,IAAIzgB,QAAQ,SAACC,EAASC,GAE3Bo2B,EAAK/T,eAEL+T,EAAKjT,IAAI,iCAAmCiT,EAAKhiD,MAAMmf,MAAQ,YAAc6iC,EAAKhiD,MAAMoX,QAAU,uBAAyB4qC,EAAKhiD,MAAM2W,SAASo1B,mBAAoBiW,EAAKhT,kBAAkBltC,KAAKkgD,IAAOvqC,KAAK,SAACxN,GAE1M+3C,EAAK7V,6BAA+BliC,EAAQw3C,cAE5C91B,EAAQ1hB,KACPmjB,MAAM,SAAC5P,GACRoO,EAAOpO,gDAMEmjC,GAEf,IAAIsB,EAAkBriD,KAAKmhD,4BAA4BJ,GAEvD,OAAO/gD,KAAKusC,6BAA6B3gB,OAAO,SAAC9iB,GAAW,OAAQu5C,EAAgB7xC,QAAQ1H,EAAK,KAAO,yCAI9F,IAAAw5C,EAAAtiD,KAIV,OAFAA,KAAKquC,eAEE,IAAIviB,QAAQ,SAACC,EAASC,GAC3Bs2B,EAAKnT,IAAI,0BAA4BjqC,OAAO83B,KAAKulB,YAAc,gBAAkBr9C,OAAO83B,KAAKC,eAAgBqlB,EAAKlT,kBAAkBltC,KAAKogD,IAAOzqC,KAAK,SAACxN,GAEpJ,IAAIyX,EAAMhiB,OAAO8E,OAAO09C,EAAKliD,MAAM6H,aAAc,CAAC60B,aAAc53B,OAAO83B,KAAKC,iBAE5EqlB,EAAK9hD,SAAS,CAACu8B,gBAAgB,EAAO90B,aAAc6Z,GAAM,WAExDwgC,EAAK3Z,4BAA4BzjC,OAAO83B,KAAKC,gBAE7CqlB,EAAKz5C,IAAI2d,YAz2GG,QA02GR87B,EAAKz5C,UAAgDR,IAAzCi6C,EAAKz5C,IAAI4d,UAj3GZ,gBAi3GuD67B,EAAKz5C,IAAI6d,aAj3GhE,eAm3Gb47B,EAAK1K,gBACL0K,EAAKzK,eAELyK,EAAK/V,6BAA+B,GAEpC+V,EAAKpqC,mBAAmBoqC,EAAKliD,MAAM2W,SAAS6C,iBAE9CmS,EAAQ1hB,KACPmjB,MAAM,SAAC5P,GACRoO,EAAOpO,iGASmBmjC,kFAC1B/gD,KAAKI,MAAMwwB,MAAM4xB,mDACZ12B,QAAQC,2CAGR,IAAID,QAAQ,SAACC,EAASC,GAE3By2B,EAAKpU,eAELoU,EAAKtT,IAAI,gCAAkCsT,EAAKriD,MAAMmf,MAAQ,YAAckjC,EAAKriD,MAAMoX,QAASirC,EAAKrT,kBAAkBltC,KAAKugD,IAAO5qC,KAAK,SAACxN,GAEvI,IAAIq4C,EAAeD,EAAKriD,MAAMwwB,MAC9B8xB,EAAaF,UAAY,aACzBC,EAAKjiD,SAAS,CAACowB,MAAO8xB,IAEtB32B,EAAQ1hB,KACPmjB,MAAM,SAAC5P,GACRoO,EAAOpO,wJAMK,IAAA+kC,EAAA3iD,KAElBA,KAAKs2C,yBAELt2C,KAAK4iD,4BAA4B/qC,KAAK,SAACgqC,GAErCc,EAAKpU,iBAAiB12B,KAAK,SAAChQ,GAE1B86C,EAAKnU,eAELmU,EAAKlU,mBAAmB52B,KAAK,SAAChQ,GAE5B86C,EAAKniD,SAAS,CAAEygC,oBAAoB,EAAMhH,iBAAiB,QAE5DzM,MAAM,SAAC5P,QAGT4P,MAAM,SAAC5P,GACRuC,QAAQiG,IAAIxI,kDAMd5d,KAAK44B,iBAEL54B,KAAK24B,uBAEL34B,KAAKQ,SAAS,CAAEygC,oBAAoB,qDAIb3I,GAAU,IAAAuqB,EAAA7iD,KAGjC,OADIA,KAAK8jB,UAAU9jB,KAAK44B,iBACjB,IAAI9M,QAAQ,SAACC,EAASC,GAC3B62B,EAAKhqB,KAAK,2BAA6BgqB,EAAKziD,MAAMmf,MAAQ,YAAcsjC,EAAKziD,MAAMoX,QAAU,uBAAyB8gB,EAAU1Z,KAAK,MAAM/G,KAAK,SAACmY,GAE/I6yB,EAAK/+B,SAAWkM,EAAS1gB,KAEzBuzC,EAAK/pB,YAAY9I,EAAS1gB,MAC1Byc,EAAQ,2BACPyB,MAAM,SAAC5P,GAERoO,EAAOpO,gDAMG,IAAAklC,EAAA9iD,KACd,GAAIA,KAAK8jB,SAAS,CAChB,IAAIiV,EAAe/4B,KAAK8jB,SAASjb,IAAI,SAACC,GACpC,OAAOA,EAAKkwB,cAId,OADAh5B,KAAK8jB,cAAWzb,EACT,IAAIyjB,QAAQ,SAACC,EAASC,GAC3B82B,EAAKjqB,KAAK,+BAAiCE,EAAana,KAAK,MAAM/G,KAAK,SAACmY,GACvEjE,EAAQ,sBACPyB,MAAM,SAAC5P,GACRoO,EAAOpO,4CAMHkG,GAAS,IAAAi/B,EAAA/iD,KAEnBA,KAAKi5B,YAAc,EAEnBj5B,KAAKQ,SAAS,CAACy5B,iBAAiB,IAEhCnW,EAASzB,QAAQ,SAAC7K,GAChBurC,EAAK5pB,eAAe,YAAa3hB,EAAQwhB,aAAa,GAAOnhB,KAAK,SAACmY,GAC5D+yB,EAAKzxB,eAAetB,GAAU,IAEjC+yB,EAAK3pB,kBAAkBpJ,EAAShtB,KAAMgtB,EAASxY,QAAS,GAG1DurC,EAAK9pB,YAAc8pB,EAAK9pB,YAAc,EAEf,IAAnB8pB,EAAK9pB,aAAiB8pB,EAAKviD,SAAS,CAACy5B,iBAAiB,8CAKlDxB,EAAYH,GAExBt4B,KAAK24B,uBAEDF,EACFz4B,KAAK04B,yBAAyBJ,GAG9Bt4B,KAAK84B,YAAY94B,KAAK8jB,8CAIdgU,GACV,IAAuBjwB,EAAnBm7C,EAAe,GAEnBhjD,KAAKI,MAAM0zB,UAAUzR,QAAQ,SAACvZ,GAC5BjB,EAAsB,QAAbiB,EAAK5B,IAAiBsD,OAAOstB,GAAYhvB,EAAKjB,MACvDm7C,EAAavgC,KAAK,CAACvb,IAAK4B,EAAK5B,IAAKW,MAAOA,MAG3C7H,KAAKg0B,gBAAgBgvB,kDAKrBhjD,KAAKQ,SAAS,CAACw3B,mBAAmB,GAAGC,mBAAmB,GAAGC,mBAAmB,GAAGC,mBAAmB,GAAGC,mBAAmB,0CAQhH,IAAA6qB,EAAAjjD,KACLA,KAAKI,MAAM6jB,oBAAoBR,SAAS,eAC3CzjB,KAAK64B,KAAK,cAAchhB,KAAK,SAACmY,GAC1BizB,EAAKziD,SAAS,CAACk7B,QAAS1L,EAAS1gB,gDAM3B,IAAA4zC,EAAAljD,KACZA,KAAK64B,KAAK,gBAAgBhhB,KAAK,SAACmY,GAC5BkzB,EAAKnnB,0DAKT/7B,KAAKmjD,2DAGE,IAAAC,EAAApjD,KACDqK,EAAWvJ,EAAAC,EAAAC,cAAA,QAAMsI,GAAG,sBAAsBgI,wBAAyB,CAAEC,OAAQvR,KAAKI,MAAMyiC,mBAC9F,OACE/hC,EAAAC,EAAAC,cAACqiD,EAAAtiD,EAAD,KACED,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAAA,OAAK4mB,IAAK,SAAAC,GAAE,OAAIu7B,EAAK37B,aAAeI,GAAIpmB,UAAU,mCAClDX,EAAAC,EAAAC,cAACsiD,GAAD,CACEjiD,KAAMrB,KAAKI,MAAMsiC,gBAEnB5hC,EAAAC,EAAAC,cAACuiD,GAAD,CACEliD,MAAOrB,KAAKI,MAAMqiC,SAClBp8B,KAAMrG,KAAK2kC,aAAaziC,KAAKlC,MAC7B+F,SAAU/F,KAAKwjD,mBAAmBthD,KAAKlC,MACvCoH,QAASpH,KAAKI,MAAMgH,QACpBpE,KAAMhD,KAAKI,MAAM4C,KACjBgF,SAAUhI,KAAKI,MAAM4H,SACrByB,eAAgBzJ,KAAKyJ,eAAevH,KAAKlC,MACzC8J,eAAgB9J,KAAK8J,eAAe5H,KAAKlC,MACzCyjD,yBAA0BzjD,KAAKyjD,yBAAyBvhD,KAAKlC,MAC7D+H,cAAe/H,KAAKI,MAAM2H,cAC1BD,aAAc9H,KAAK8H,aAAa5F,KAAKlC,MACrCiI,aAAcjI,KAAKI,MAAM6H,eAE3BnH,EAAAC,EAAAC,cAAC0iD,GAAD,CACEriD,KAAMrB,KAAKI,MAAM4gC,mBACjB36B,KAAMrG,KAAK+K,cAAc7I,KAAKlC,MAC9B+F,SAAU/F,KAAKqtC,oBAAoBnrC,KAAKlC,MACxCoH,QAASpH,KAAKI,MAAMgH,UAEtBtG,EAAAC,EAAAC,cAAC2iD,GAAD,CACEtiD,KAAMrB,KAAKI,MAAMohC,yBACjBn7B,KAAMrG,KAAKiL,eAAe/I,KAAKlC,MAC/B+F,SAAU/F,KAAK2pC,0BAA0BznC,KAAKlC,MAC9CoH,QAASpH,KAAKI,MAAMgH,QACpB+D,YAAanL,KAAKmL,YAAYjJ,KAAKlC,MACnCiK,MAAOjK,KAAKI,MAAMqpC,cAEpB3oC,EAAAC,EAAAC,cAAC4iD,GAAD,CACEviD,KAAMrB,KAAKI,MAAMkiC,aACjB7hC,WAAYT,KAAKI,MAAMK,WACvBuC,KAAMhD,KAAKI,MAAM4C,KACjBC,SAAUjD,KAAKI,MAAM0N,SAASqC,KAC9B1E,aAAczL,KAAKyL,aAAavJ,KAAKlC,MACrC0L,kBAAmB1L,KAAK0L,kBAAkBxJ,KAAKlC,MAC/C6L,kBAAmB7L,KAAK6L,kBAAkB3J,KAAKlC,MAC/CiM,OAAQjM,KAAKiM,OAAO/J,KAAKlC,MACzBiI,aAAcjI,KAAKI,MAAM6H,aACzB8D,yBAA0B/L,KAAK+L,yBAAyB7J,KAAKlC,QAE/Dc,EAAAC,EAAAC,cAAC6iD,GAAD,CACExiD,KAAMrB,KAAKI,MAAMmiC,aACjB9hC,WAAYT,KAAKI,MAAMK,WACvB6L,aAActM,KAAKsM,aAAapK,KAAKlC,MACrC0M,gBAAiB1M,KAAK0M,gBAAgBxK,KAAKlC,MAC3CuM,wBAAyBvM,KAAKuM,wBAAwBrK,KAAKlC,MAC3DqM,UAAWA,KAEbvL,EAAAC,EAAAC,cAAC8iD,GAAD,CACEziD,KAAMrB,KAAKI,MAAM0gC,kBACjBz6B,KAAMrG,KAAK+jD,mBAAmB7hD,KAAKlC,MACnC+F,SAAU/F,KAAK+jD,mBAAmB7hD,KAAKlC,MACvCoH,QAASpH,KAAKI,MAAMgH,QACpB0G,SAAU9N,KAAKI,MAAM0N,SACrBf,YAAa/M,KAAK+M,YAAY7K,KAAKlC,MACnCmN,cAAenN,KAAKspC,WAAWpnC,KAAKlC,MACpCkN,SAAUlN,KAAKI,MAAM8M,SACrBD,QAASjN,KAAKI,MAAM6M,QACpBM,mBAAoBvN,KAAKuN,mBAAmBrL,KAAKlC,QAEnDc,EAAAC,EAAAC,cAACgjD,GAAD,CACE3iD,KAAMrB,KAAKI,MAAMmgC,gBACjBl6B,KAAMrG,KAAKikD,iBAAiB/hD,KAAKlC,MACjC+F,SAAU/F,KAAKikD,iBAAiB/hD,KAAKlC,MACrCoH,QAASpH,KAAKI,MAAMgH,QACpBpE,KAAMhD,KAAKI,MAAM4C,KACjB4L,MAAO5O,KAAKI,MAAMwO,MAClBD,WAAY3O,KAAK2O,WAAWzM,KAAKlC,MACjC0O,WAAY1O,KAAK0O,WAAWxM,KAAKlC,MACjCmI,iBAAkBnI,KAAKI,MAAM+H,iBAC7B8I,sBAAuBjR,KAAKiR,sBAAsB/O,KAAKlC,QAEzDc,EAAAC,EAAAC,cAACkjD,GAAD,CACE7iD,KAAMrB,KAAKI,MAAMsgC,kBACjBr6B,KAAMrG,KAAK+N,mBAAmB7L,KAAKlC,MACnC+F,SAAU/F,KAAK+N,mBAAmB7L,KAAKlC,MACvCoH,QAASpH,KAAKI,MAAMgH,QACpB0G,SAAU9N,KAAKI,MAAM0N,SACrBJ,WAAY1N,KAAK0N,WAAWxL,KAAKlC,QAEnCc,EAAAC,EAAAC,cAACmjD,GAAD,CACE9iD,KAAMrB,KAAKI,MAAMugC,gBACjBt6B,KAAMrG,KAAKokD,iBAAiBliD,KAAKlC,MACjCoR,2BAA4BwuB,GAC5BpuB,gBAAiBxR,KAAKI,MAAMoR,kBAE9B1Q,EAAAC,EAAAC,cAACqjD,GAAD,CACEhjD,KAAMrB,KAAKI,MAAMmC,cACjBwW,UAAW/Y,KAAKI,MAAM2Y,UACtBvB,QAASxX,KAAKI,MAAMoX,QACpBT,SAAU/W,KAAKI,MAAM2W,SACrB0D,UAAWza,KAAKya,UAAUvY,KAAKlC,MAC/BuY,YAAavY,KAAKuY,YAAYrW,KAAKlC,MACnCwY,IAAKxY,KAAKI,MAAMoY,IAChBZ,cAAe5X,KAAK4X,cAAc1V,KAAKlC,MACvC8X,kBAAmB9X,KAAK8X,kBAAkB5V,KAAKlC,MAC/CyV,SAAUzV,KAAKI,MAAMgjC,gBACrBnqB,mBAAoBjZ,KAAKiZ,mBAAmB/W,KAAKlC,MACjDuZ,oBAAqBvZ,KAAKuZ,oBAAoBrX,KAAKlC,MACnDyZ,cAAezZ,KAAKyZ,cAAcvX,KAAKlC,MACvCiY,mBAAoBjY,KAAKiY,mBAAmB/V,KAAKlC,MACjDgY,kBAAmBhY,KAAKgY,kBAAkB9V,KAAKlC,MAC/C+X,UAAW/X,KAAKI,MAAM2X,UACtBkC,iBAAkBja,KAAKia,iBAAiB/X,KAAKlC,MAC7Cua,sBAAuBva,KAAKua,sBAAsBrY,KAAKlC,MACvDkV,gBAAiBlV,KAAKkV,gBAAgBhT,KAAKlC,MAC3C2Z,cAAe3Z,KAAKI,MAAMuZ,cAC1BpZ,mBAAoBP,KAAKO,mBAAmB2B,KAAKlC,MACjDkY,mBAAoBlY,KAAKkY,mBAAmBhW,KAAKlC,MACjDoV,cAAepV,KAAKoV,cAAclT,KAAKlC,MACvCiD,SAAUjD,KAAKI,MAAM0N,SAASqC,KAC9BkI,qBAAsBrY,KAAKqY,qBAAqBnW,KAAKlC,MACrDsY,YAAatY,KAAKsY,YAAYpW,KAAKlC,MACnC2W,iBAAkB3W,KAAK2W,iBAAiBzU,KAAKlC,MAC7Cma,oBAAqBna,KAAKma,oBAAoBjY,KAAKlC,MACnDqa,iBAAkBra,KAAKqa,iBAAiBnY,KAAKlC,MAC7CiI,aAAcjI,KAAKI,MAAM6H,eAE3BnH,EAAAC,EAAAC,cAACsjD,GAAD,CACEjjD,KAAMrB,KAAKI,MAAMsC,iBACjBiX,cAAe3Z,KAAKI,MAAMuZ,cAC1B2E,UAAWte,KAAKI,MAAMke,UACtBgB,aAActf,KAAKsf,aAAapd,KAAKlC,MACrC4gB,yBAA0B5gB,KAAK4gB,yBAAyB1e,KAAKlC,MAC7DukD,YAAavkD,KAAKukD,YAAYriD,KAAKlC,MACnC0b,KAAM1b,KAAKI,MAAMsb,KACjB+B,SAAUzd,KAAKI,MAAMmjC,YACrB9iB,iBAAkBzgB,KAAKI,MAAMqgB,iBAC7BC,kBAAmB1gB,KAAK0gB,kBAAkBxe,KAAKlC,MAC/C6gB,qBAAsB7gB,KAAK6gB,qBAAqB3e,KAAKlC,MACrDghB,eAAgBhhB,KAAKghB,eAAe9e,KAAKlC,MACzCohB,SAAUphB,KAAKohB,SAASlf,KAAKlC,MAC7Buf,MAAOvf,KAAKI,MAAMmf,MAClB7C,aAAc1c,KAAKI,MAAMsc,aACzBG,UAAY7c,KAAKI,MAAMyc,UACvBD,iBAAkB5c,KAAKI,MAAMwc,iBAC7B9B,cAAe9a,KAAK8a,cAAc5Y,KAAKlC,MACvC2c,sBAAuB3c,KAAKI,MAAMuc,sBAClCG,mBAAoB9c,KAAKI,MAAM0c,mBAC/B7Z,SAAUjD,KAAKI,MAAM0N,SAASqC,OAEhCrP,EAAAC,EAAAC,cAACwjD,GAAD,CACEnjD,KAAMrB,KAAKI,MAAMghC,mBACjB/6B,KAAMrG,KAAKykD,gBAAgBviD,KAAKlC,MAChC+F,SAAU/F,KAAKykD,gBAAgBviD,KAAKlC,MACpCoH,QAASpH,KAAKI,MAAMgH,QACpB6N,QAASjV,KAAKI,MAAM6iC,eACpB7tB,cAAepV,KAAKoV,cAAclT,KAAKlC,MACvCoiB,mBAAoBA,GACpBnf,SAAUjD,KAAKI,MAAM0N,SAASqC,OAEhCrP,EAAAC,EAAAC,cAAC0jD,GAAD,CACE1mB,UAAWh+B,KAAKI,MAAM49B,UACtBC,GAAIj+B,KAAKI,MAAMuiC,cAEjB7hC,EAAAC,EAAAC,cAAC2jD,GAAD,CACE1mB,GAAIj+B,KAAKI,MAAMuiC,YACfltB,SAAUzV,KAAKI,MAAM2iC,WACrB37B,QAASpH,KAAKI,MAAMgH,UAEtBtG,EAAAC,EAAAC,cAAC4jD,GAAD,CACE3mB,GAAIj+B,KAAKI,MAAMuiC,YACfltB,SAAUzV,KAAKI,MAAM4iC,WACrB57B,QAASpH,KAAKI,MAAMgH,QACpB2T,aAAc/a,KAAK6kD,YAAY3iD,KAAKlC,MACpCwD,aAAcxD,KAAKwe,WAAWtc,KAAKlC,QAErCc,EAAAC,EAAAC,cAAC8jD,GAAD,CACEzjD,KAAMrB,KAAKI,MAAM+gC,mBACjB96B,KAAMrG,KAAK+kD,oBAAoB7iD,KAAKlC,MACpC+F,SAAU/F,KAAK+kD,oBAAoB7iD,KAAKlC,MACxCoH,QAASpH,KAAKI,MAAMgH,QACpB0c,SAAU9jB,KAAKI,MAAM0jB,SACrBf,WAAY/iB,KAAKI,MAAM2W,SAASC,WAChC8L,cAAe9iB,KAAK8iB,cAAc5gB,KAAKlC,MACvCkjB,YAAaljB,KAAKkjB,YAAYhhB,KAAKlC,MACnCojB,aAAcpjB,KAAKojB,aAAalhB,KAAKlC,MACrCmjB,qBAAsBnjB,KAAKmjB,qBAAqBjhB,KAAKlC,MACrDqjB,wBAAyBrjB,KAAKqjB,wBAAwBnhB,KAAKlC,MAC3DikB,oBAAqBjkB,KAAKI,MAAM6jB,oBAChChhB,SAAUjD,KAAKI,MAAM0N,SAASqC,KAC9B6S,eAAgBhjB,KAAKgjB,eAAe9gB,KAAKlC,QAE3Cc,EAAAC,EAAAC,cAACgkD,GAAD,CACE3jD,KAAMrB,KAAKI,MAAMihC,qBACjBh7B,KAAMrG,KAAKilD,sBAAsB/iD,KAAKlC,MACtCoH,QAASpH,KAAKI,MAAMgH,QACpBklB,qBAAsBtsB,KAAKssB,qBAAqBpqB,KAAKlC,MACrDgoB,oBAAqBhoB,KAAKI,MAAM4nB,oBAChCznB,mBAAoBP,KAAKO,mBAAmB2B,KAAKlC,MACjDyV,SAAUzV,KAAKI,MAAMwpB,YACrBjB,gBAAiB3oB,KAAK2oB,gBAAgBzmB,KAAKlC,MAC3C0oB,cAAe1oB,KAAKI,MAAMsoB,cAC1BuD,iBAAkBjsB,KAAKisB,iBAAiB/pB,KAAKlC,QAE/Cc,EAAAC,EAAAC,cAACkkD,GAAD,CACE7jD,KAAMrB,KAAKI,MAAMqhC,0BACjB17B,SAAU/F,KAAK08C,2BAA2Bx6C,KAAKlC,MAC/CoH,QAASpH,KAAKI,MAAMgH,SAAWpH,KAAKI,MAAMuZ,cAC1CoW,0BAA2B/vB,KAAK+vB,0BAA0B7tB,KAAKlC,MAC/D6vB,UAAW7vB,KAAKI,MAAMyvB,UACtBpC,YAAaztB,KAAKytB,YAAYvrB,KAAKlC,MACnC8vB,YAAaA,KAEfhvB,EAAAC,EAAAC,cAACmkD,GAAD,CACE9jD,KAAMrB,KAAKI,MAAMshC,6BACjBr7B,KAAMrG,KAAKolD,uBAAuBljD,KAAKlC,MACvC+F,SAAU/F,KAAK48C,8BAA8B16C,KAAKlC,MAClDoH,QAASpH,KAAKI,MAAMgH,QACpBypB,gBAAiB7wB,KAAKI,MAAM6H,aAAa88B,SACzC3T,kBA1wHW,EA2wHXE,eAAgBtxB,KAAKsxB,eAAepvB,KAAKlC,QAE3Cc,EAAAC,EAAAC,cAAC0rB,GAAD,CACErrB,KAAMrB,KAAKI,MAAM+qB,mBACjB9kB,KAAMrG,KAAK2sB,uBAAuBzqB,KAAKlC,MACvC+F,SAAU/F,KAAKwrB,oBAAoBtpB,KAAKlC,MACxCoH,QAASpH,KAAKI,MAAMgH,QACpB2P,SAAU/W,KAAKI,MAAM2W,SACrB6S,YAAa5pB,KAAKI,MAAMwpB,YACxBd,cAAe9oB,KAAK8oB,cAAc5mB,KAAKlC,MACvCgpB,yBAA0BhpB,KAAKgpB,yBAAyB9mB,KAAKlC,MAC7D2qB,kBAAmB3qB,KAAK2qB,kBAAkBzoB,KAAKlC,MAC/C0qB,iBAAkB1qB,KAAK0qB,iBAAiBxoB,KAAKlC,MAC7CspB,eAAgBtpB,KAAKspB,eAAepnB,KAAKlC,MACzCiD,SAAUjD,KAAKI,MAAM0N,SAASqC,KAC9BoZ,aAAcvpB,KAAKupB,aAAarnB,KAAKlC,MACrCkpB,uBAAwBlpB,KAAKI,MAAM8oB,uBACnCO,mBAAoBzpB,KAAKI,MAAMqpB,mBAC/BR,qBAAsBjpB,KAAKipB,qBAAqB/mB,KAAKlC,MACrDoqB,wBAAyBpqB,KAAKI,MAAMgqB,wBACpCC,aAAcrqB,KAAKqqB,aAAanoB,KAAKlC,MACrC+oB,6BAA8B/oB,KAAK+oB,6BAA6B7mB,KAAKlC,MACrEgqB,eAAgBhqB,KAAKgqB,eAAe9nB,KAAKlC,QAE3Cc,EAAAC,EAAAC,cAACqkD,GAAD,CACEhkD,KAAMrB,KAAKI,MAAM8hC,kBACjB77B,KAAMrG,KAAKslD,mBAAmBpjD,KAAKlC,MACnC+F,SAAU/F,KAAKslD,mBAAmBpjD,KAAKlC,MACvCoH,QAASpH,KAAKI,MAAMgH,QACpB2iB,iBAAkB/pB,KAAKI,MAAM2pB,iBAC7BqD,mBAAoBptB,KAAKy4C,YAAYv2C,KAAKlC,MAC1CutB,aAAcvtB,KAAKutB,aAAarrB,KAAKlC,MACrCytB,YAAaztB,KAAKytB,YAAYvrB,KAAKlC,QAErCc,EAAAC,EAAAC,cAACukD,GAAD,CACElkD,KAAMrB,KAAKI,MAAM6hC,qBACjB57B,KAAMrG,KAAKu/C,sBAAsBr9C,KAAKlC,MACtC+F,SAAU/F,KAAKu/C,sBAAsBr9C,KAAKlC,MAC1CoH,QAASpH,KAAKI,MAAMgH,QACpBmrB,iBAAkBvyB,KAAKuyB,iBAAiBrwB,KAAKlC,QAE/Cc,EAAAC,EAAAC,cAACwkD,GAAD,CACEnkD,KAAMrB,KAAKI,MAAMyhC,yBACjB9O,eAAgB/yB,KAAK+yB,eAAe7wB,KAAKlC,MACzC+F,SAAU/F,KAAKylD,0BAA0BvjD,KAAKlC,MAC9CoH,QAASpH,KAAKI,MAAMgH,QACpBmqB,YAAavxB,KAAK0lD,6BAA6BxjD,KAAKlC,MACpDoxB,kBA1zHW,EA2zHXJ,SAAUhxB,KAAKI,MAAM+iC,uBACrB7R,eAAgBtxB,KAAKsxB,eAAepvB,KAAKlC,MACzC6wB,gBAAiB7wB,KAAKI,MAAM6H,aAAa88B,SACzCprB,cAAe3Z,KAAKI,MAAMuZ,cAC1BiZ,eAAgB5yB,KAAK4yB,eAAe1wB,KAAKlC,MACzCizB,uBAAwBjzB,KAAKizB,uBAAuB/wB,KAAKlC,MACzDmzB,gBAAiBnzB,KAAKmzB,gBAAgBjxB,KAAKlC,QAE7Cc,EAAAC,EAAAC,cAAC2kD,GAAD,CACEtkD,KAAMrB,KAAKI,MAAM2hC,wBACjB17B,KAAMrG,KAAK4lD,yBAAyB1jD,KAAKlC,MACzC+F,SAAU/F,KAAK4lD,yBAAyB1jD,KAAKlC,MAC7CoH,QAASpH,KAAKI,MAAMgH,QACpBklB,qBAAsBtsB,KAAKssB,qBAAqBpqB,KAAKlC,MACrDikB,oBAAqBjkB,KAAKI,MAAM6jB,oBAChCkL,cAAenvB,KAAKI,MAAM4nB,oBAC1B6G,0BAA2B7uB,KAAK6uB,0BAA0B3sB,KAAKlC,MAC/DwsB,6BAA8BxsB,KAAKwsB,6BAA6BtqB,KAAKlC,MACrE4uB,mBAAoB5uB,KAAK68C,uBAAuB36C,KAAKlC,MACrD+uB,oBAAqB/uB,KAAK+uB,oBAAoB7sB,KAAKlC,QAErDc,EAAAC,EAAAC,cAAC6kD,GAAD,CACExkD,KAAMrB,KAAKI,MAAMuhC,yBACjB7d,SAAU9jB,KAAKI,MAAMoiC,uBACrBv/B,SAAUjD,KAAKI,MAAM0N,SAASqC,KAC9B9J,KAAMrG,KAAK8lD,0BAA0B5jD,KAAKlC,MAC1C6sB,WAAY7sB,KAAKI,MAAMysB,aAEzB/rB,EAAAC,EAAAC,cAAC+kD,GAAD,CACE1kD,KAAMrB,KAAKI,MAAM4hC,uBACjB37B,KAAMrG,KAAKgmD,wBAAwB9jD,KAAKlC,MACxC+F,SAAU/F,KAAKgmD,wBAAwB9jD,KAAKlC,MAC5CoH,QAASpH,KAAKI,MAAMgH,QACpB6lB,uBAAwBjtB,KAAKI,MAAM6sB,uBACnCG,mBAAoBptB,KAAKy4C,YAAYv2C,KAAKlC,MAC1CutB,aAAcvtB,KAAKutB,aAAarrB,KAAKlC,MACrCytB,YAAaztB,KAAKytB,YAAYvrB,KAAKlC,QAErCc,EAAAC,EAAAC,cAACilD,GAAD,CACE5kD,KAAMrB,KAAKI,MAAM2gC,gBACjB16B,KAAMrG,KAAKkmD,iBAAiBhkD,KAAKlC,MACjC+F,SAAU/F,KAAKkmD,iBAAiBhkD,KAAKlC,MACrCqjC,MAAOrjC,KAAKI,MAAMijC,QAEpBviC,EAAAC,EAAAC,cAACmlD,GAAD,CACE9kD,KAAMrB,KAAKI,MAAM8gC,mBACjB76B,KAAMrG,KAAKomD,uBAAuBlkD,KAAKlC,MACvC+F,SAAU/F,KAAKomD,uBAAuBlkD,KAAKlC,MAC3CoH,QAASpH,KAAKI,MAAMgH,QACpB4sB,gBAAiBh0B,KAAKg0B,gBAAgB9xB,KAAKlC,MAC3C8zB,UAAW9zB,KAAKI,MAAM0zB,UACtBQ,mBAAoBt0B,KAAKs0B,mBAAmBpyB,KAAKlC,MACjDiD,SAAUjD,KAAKI,MAAM0N,SAASqC,OAEhCrP,EAAAC,EAAAC,cAACqlD,GAAD,CACEhlD,KAAMrB,KAAKI,MAAMmhC,yBACjBl7B,KAAMrG,KAAKsmD,0BAA0BpkD,KAAKlC,MAC1C+F,SAAU/F,KAAKsmD,0BAA0BpkD,KAAKlC,MAC9CoH,QAASpH,KAAKI,MAAMgH,QACpBsvB,SAAU12B,KAAKI,MAAMs2B,SACrBD,gBAAiBz2B,KAAKy2B,gBAAgBv0B,KAAKlC,MAC3C62B,eAAgB72B,KAAK62B,eAAe30B,KAAKlC,MACzC+2B,iBAAkB/2B,KAAK+2B,iBAAiB70B,KAAKlC,MAC7Cg3B,qBAAsBh3B,KAAKg3B,qBAAqB90B,KAAKlC,MACrDi2B,aAAcj2B,KAAKI,MAAM61B,aACzBva,KAAM1b,KAAKI,MAAMsb,KACjBma,WAAY71B,KAAKI,MAAMy1B,aAEzB/0B,EAAAC,EAAAC,cAACulD,GAAD,CACEllD,KAAMrB,KAAKI,MAAM6gC,mBACjB56B,KAAMrG,KAAKwmD,mBAAmBtkD,KAAKlC,MACnC+F,SAAU/F,KAAKwmD,mBAAmBtkD,KAAKlC,MACvCqtB,QAASrtB,KAAKI,MAAMitB,QACpBgK,mBAt3Ha,gBAu3HbW,mBAAoBh4B,KAAKI,MAAM43B,mBAC/BC,mBAAoBj4B,KAAKI,MAAM63B,mBAC/BC,mBAAoBl4B,KAAKI,MAAM83B,mBAC/BC,mBAAoBn4B,KAAKI,MAAM+3B,mBAC/BC,mBAAoBp4B,KAAKI,MAAMg4B,mBAC/BlB,UAAWl3B,KAAKI,MAAM82B,UACtBC,QAASn3B,KAAKI,MAAM+2B,QACpBuB,yBAA0B14B,KAAK04B,yBAAyBx2B,KAAKlC,MAC7Du6B,cAAev6B,KAAKu6B,cAAcr4B,KAAKlC,MACvCg6B,YAAah6B,KAAKg6B,YAAY93B,KAAKlC,MACnCi6B,gBAAiBj6B,KAAKI,MAAM65B,kBAE9Bn5B,EAAAC,EAAAC,cAACylD,GAAD,CACEplD,KAAMrB,KAAKI,MAAMygC,wBACjBx6B,KAAMrG,KAAK0mD,kBAAkBxkD,KAAKlC,MAClCoH,QAASpH,KAAKI,MAAMgH,QACpBypB,gBAAiB7wB,KAAKI,MAAM6H,aAAa88B,SACzC3T,kBAt5HW,EAu5HXiK,cAAer7B,KAAKq7B,cAAcn5B,KAAKlC,MACvCsxB,eAAgBtxB,KAAKsxB,eAAepvB,KAAKlC,MACzComB,IAAKpmB,KAAKomB,IAAIlkB,KAAKlC,MACnBytB,YAAaztB,KAAKytB,YAAYvrB,KAAKlC,QAErCc,EAAAC,EAAAC,cAAC2lD,GAAD,CACEtlD,KAAMrB,KAAKI,MAAM+hC,iBACjB97B,KAAMrG,KAAK4mD,kBAAkB1kD,KAAKlC,MAClCqD,eAAgBrD,KAAK4mD,kBAAkB1kD,KAAKlC,MAC5CoH,QAASpH,KAAKI,MAAMgH,QACpBuS,cAAe3Z,KAAKI,MAAMuZ,cAC1BsK,oBAAqBjkB,KAAKI,MAAM6jB,oBAChCyX,QAAS17B,KAAKI,MAAMs7B,QACpBK,WAAY/7B,KAAK+7B,WAAW75B,KAAKlC,MACjC87B,aAAc97B,KAAK87B,aAAa55B,KAAKlC,MACrC47B,WAAY57B,KAAKuY,YAAYrW,KAAKlC,QAEpCc,EAAAC,EAAAC,cAAC6lD,GAAD,CACExlD,KAAMrB,KAAKI,MAAM0hC,wBACjBz7B,KAAMrG,KAAK8mD,yBAAyB5kD,KAAKlC,MACzCqD,eAAgBrD,KAAK8mD,yBAAyB5kD,KAAKlC,MACnD+8B,eAAgB/8B,KAAKI,MAAM28B,eAC3B90B,aAAcjI,KAAKI,MAAM6H,aACzBk1B,WAAYn9B,KAAKm9B,WAAWj7B,KAAKlC,MACjCoH,QAASpH,KAAKI,MAAMuZ,gBAEtB7Y,EAAAC,EAAAC,cAAC+lD,GAAD,CACE1lD,KAAMrB,KAAKI,MAAMwhC,yBACjBv7B,KAAMrG,KAAKgnD,0BAA0B9kD,KAAKlC,MAC1CgD,KAAMhD,KAAKI,MAAM4C,KACjBK,eAAgBrD,KAAKgnD,0BAA0B9kD,KAAKlC,MACpDy9B,cAAez9B,KAAKy9B,cAAcv7B,KAAKlC,MACvCytB,YAAaztB,KAAKytB,YAAYvrB,KAAKlC,MACnC0N,WAAY1N,KAAK0N,WAAWxL,KAAKlC,QAEnCc,EAAAC,EAAAC,cAACimD,GAAD,CACE5lD,KAAMrB,KAAKI,MAAMogC,gBACjBn6B,KAAMrG,KAAKknD,iBAAiBhlD,KAAKlC,QAEnCc,EAAAC,EAAAC,cAACmmD,EAAApmD,EAAD,CACEM,KAAMrB,KAAKI,MAAMwiC,aACjBv4B,QAASA,EACThH,eAAgBrD,KAAKonD,cAAcllD,KAAKlC,MACxCmB,MAAO,CAACgrB,SAAS,oBACjB5lB,aAAc,CAAC4lB,SAAS,oBACxBpd,UAAW,CAACod,SAAS,sBAEvBrrB,EAAAC,EAAAC,cAACqmD,GAAD,CACEhmD,KAAMrB,KAAKI,MAAMiiC,mBAAqBriC,KAAKI,MAAMqiC,SACjD9D,kBAAmB3+B,KAAK2+B,kBAAkBz8B,KAAKlC,MAC/Cs+B,mBAAoBt+B,KAAKs+B,mBAAmBp8B,KAAKlC,MACjDw+B,cAAex+B,KAAKI,MAAMo+B,gBAE5B19B,EAAAC,EAAAC,cAACmC,EAAApC,EAAD,CAASM,KAAMrB,KAAKI,MAAMqgC,gBAAiBr9B,SAAUpD,KAAKI,MAAMK,WAAY4C,eAAgBrD,KAAK+uC,iBAAiB7sC,KAAKlC,MAAOmB,MAAO,CAACyC,MAAM,UAC1I9C,EAAAC,EAAAC,cAACsC,EAAAvC,EAAD,CAAMI,MAAO,CAACyC,MAAM,SAAUJ,aAAcxD,KAAK+uC,iBAAiB7sC,KAAKlC,OACrEc,EAAAC,EAAAC,cAACsmD,GAAD,CAAoBvjD,SAAUjD,EAAAC,EAAAC,cAACumD,EAAAxmD,EAAD,CAAYI,MAAO,CAAC2X,OAAQ,SAAWjX,QAAS7B,KAAKwnD,eAAetlD,KAAKlC,OAAvG,cACAc,EAAAC,EAAAC,cAACsmD,GAAD,CAAoBvjD,SAAUjD,EAAAC,EAAAC,cAACymD,EAAA1mD,EAAD,CAAmBI,MAAO,CAAC2X,OAAQ,SAAW3X,MAAO,CAACC,QAAWpB,KAAKI,MAAM6iC,eAAe3gB,aAA4C,aAA7BtiB,KAAKI,MAAM0N,SAASqC,KAAwB,OAAS,SAAUtO,QAAS7B,KAAK0nD,kBAAkBxlD,KAAKlC,KAAMA,KAAKI,MAAM6iC,iBAA7P,uBACAniC,EAAAC,EAAAC,cAACsmD,GAAD,CAAoBvjD,SAAW/D,KAAKI,MAAM6iC,eAAemb,qBAAwBt9C,EAAAC,EAAAC,cAAC2mD,EAAA5mD,EAAD,CAAeI,MAAO,CAAC2X,OAAQ,SAAYhY,EAAAC,EAAAC,cAAC4mD,EAAA7mD,EAAD,CAAUI,MAAO,CAAC2X,OAAQ,SAAW3X,MAAO,CAACC,QAAUpB,KAAKI,MAAM6iC,eAAe/V,UAAa,QAAU,QAASrrB,QAAS7B,KAAKq+C,mBAAmBn8C,KAAKlC,KAAMA,KAAKI,MAAM6iC,iBAAmBjjC,KAAKI,MAAM6iC,eAAemb,qBAAwB,kBAAoB,cAC7Xt9C,EAAAC,EAAAC,cAACsmD,GAAD,CAAoBvjD,SAz7HL,kCAy7HgB/D,KAAKI,MAAM8iC,gBAA8CpiC,EAAAC,EAAAC,cAAC2mD,EAAA5mD,EAAD,CAAeI,MAAO,CAAC2X,OAAQ,SAAYhY,EAAAC,EAAAC,cAAC4mD,EAAA7mD,EAAD,CAAUI,MAAO,CAAC2X,OAAQ,SAAWjX,QAAS7B,KAAKu+C,yBAAyBr8C,KAAKlC,KAAMA,KAAKI,MAAM6iC,gBAAiBj9B,WAAYhG,KAAKI,MAAM6iC,eAAegM,cAAgBjvC,KAAKI,MAAM6iC,eAAeqM,0BAA2BtvC,KAAKI,MAAM8iC,iBAC5WpiC,EAAAC,EAAAC,cAACsmD,GAAD,CAAoBvjD,SAAUjD,EAAAC,EAAAC,cAAC6mD,EAAA9mD,EAAD,CAAQI,MAAO,CAAC2X,OAAQ,SAAW3X,MAAO,CAACC,QAAUpB,KAAKI,MAAM6iC,eAAe0d,OAAU,QAAU,QAAS9+C,QAAS7B,KAAK8nD,cAAc5lD,KAAKlC,KAAMA,KAAKI,MAAM6iC,iBAA5L,0BACAniC,EAAAC,EAAAC,cAACsmD,GAAD,CAAoBvjD,SAAUjD,EAAAC,EAAAC,cAAC+mD,EAAAhnD,EAAD,CAAYI,MAAO,CAAC2X,OAAQ,SAAW3X,MAAO,CAACC,QAAWpB,KAAKI,MAAM6iC,eAAe3gB,aAA4C,aAA7BtiB,KAAKI,MAAM0N,SAASqC,KAAwB,OAAS,SAAUtO,QAAS7B,KAAKgoD,wBAAwB9lD,KAAKlC,KAAMA,KAAKI,MAAM6iC,gBAAiBj9B,SAAUhG,KAAKI,MAAM6iC,eAAegM,cAAgBjvC,KAAKI,MAAMuZ,eAA5U,iBAGJ7Y,EAAAC,EAAAC,cAACinD,GAAD,CACE5mD,KAAMrB,KAAKI,MAAMgiC,iBACjB/7B,KAAMrG,KAAKkoD,kBAAkBhmD,KAAKlC,MAClC2F,kBAAkB,EAClBI,SAAU/F,KAAKkoD,kBAAkBhmD,KAAKlC,MACtCo/B,6BAA8Bp/B,KAAKo/B,6BAA6Bl9B,KAAKlC,QAEvEc,EAAAC,EAAAC,cAACmnD,GAAD,CACE9mD,KAAMrB,KAAKI,MAAMkhC,wBACjBj7B,KAAMrG,KAAKooD,yBAAyBlmD,KAAKlC,MACzCy/B,iBAAkBv6B,OAAOw+B,SAAW,WAAa1jC,KAAKI,MAAM6H,aAAaU,KAAO,SAAW3I,KAAKI,MAAM4C,KAAO,YAAchD,KAAKI,MAAMoX,UAExI1W,EAAAC,EAAAC,cAACqnD,GAAD,CACEhnD,KAAMrB,KAAKI,MAAMqiC,SACjBz/B,KAAMhD,KAAKI,MAAM4C,KACjBC,SAAUjD,KAAKI,MAAM0N,SAASqC,KAC9B5N,cAAevC,KAAKI,MAAMmC,cAC1BG,iBAAkB1C,KAAKI,MAAMsC,iBAC7BZ,mBAAoB9B,KAAK8B,mBAAmBI,KAAKlC,MACjDO,mBAAoBP,KAAKO,mBAAmB2B,KAAKlC,MACjDoC,wBAAyBpC,KAAKoC,wBAAwBF,KAAKlC,MAC3DyC,gBAAiBzC,KAAKyC,gBAAgBP,KAAKlC,MAC3C6C,mBAAoB7C,KAAK6C,mBAAmBX,KAAKlC,MACjD+C,aAAc/C,KAAK+C,aAAab,KAAKlC,MACrCmE,aAAcnE,KAAKmE,aAAajC,KAAKlC,MACrCW,gBAAiBX,KAAKW,gBAAgBuB,KAAKlC,MAC3Ca,iBAAkBb,KAAKa,iBAAiBqB,KAAKlC,iBAr8HvCoE,IAAMC,WC3GlBikD,YAAcC,QACW,cAA7BrjD,OAAOw+B,SAASkD,UAEe,UAA7B1hC,OAAOw+B,SAASkD,UAEhB1hC,OAAOw+B,SAASkD,SAAS4hB,MACvB,4DAsCN,SAASC,GAAgBC,GACvBppB,UAAUqpB,cACPC,SAASF,GACT7wC,KAAK,SAAAgxC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB3oD,QACfk/B,UAAUqpB,cAAcO,WAK1B/oC,QAAQiG,IAAI,6CAKZjG,QAAQiG,IAAI,2CAMrBoH,MAAM,SAAA5P,GACLuC,QAAQvC,MAAM,4CAA6CA,KCxEjEurC,IAASC,OAAOtoD,EAAAC,EAAAC,cAACqoD,GAAD,MAAS32C,SAASC,eAAe,SDalC,WACb,GAA6C,kBAAmB2sB,UAAW,CAGzE,GADkB,IAAIgqB,IAAIC,IAAwBrkD,OAAOw+B,UAC3C8lB,SAAWtkD,OAAOw+B,SAAS8lB,OAIvC,OAGFtkD,OAAOukD,iBAAiB,OAAQ,WAC9B,IAAMf,EAAK,GAAA/zB,OAAM40B,IAAN,sBAEPjB,IAiDV,SAAiCI,GAE/B5R,MAAM4R,GACH7wC,KAAK,SAAAmY,GAGkB,MAApBA,EAAS5S,SACuD,IAAhE4S,EAAS05B,QAAQjlB,IAAI,gBAAgBj0B,QAAQ,cAG7C8uB,UAAUqpB,cAAcgB,MAAM9xC,KAAK,SAAAgxC,GACjCA,EAAae,aAAa/xC,KAAK,WAC7B3S,OAAOw+B,SAASmmB,aAKpBpB,GAAgBC,KAGnBl7B,MAAM,WACLrN,QAAQiG,IACN,mEArEA0jC,CAAwBpB,GAIxBppB,UAAUqpB,cAAcgB,MAAM9xC,KAAK,WACjCsI,QAAQiG,IACN,+GAMJqiC,GAAgBC,MCxCxBqB,mjCCRAC,EAAAC,QAAA,ouHCAAD,EAAAC,QAAA,4gOCAAD,EAAAC,QAAA,opGCAAD,EAAAC,QAAA,g+MCAAD,EAAAC,QAAA,w1WCAAD,EAAOC,QAAU,CAEhB13C,SAAU,SAAUD,GAEnB,MADc,QACC/H,KAAK+H,IAErBuP,mBAAoB,SAAUha,GAC7B,SAAImiD,EAAOC,QAAQ13C,SAAS1K,IACtBA,GAAO,KAAOA,GAAO,IAM5BkU,sBAAuB,SAASL,EAAMF,GAErC,IAAIQ,EAAcN,EAAKO,aAAaT,GASpC,OAPiB1b,OAAOs6B,KAAKpe,GAAa4P,OAAO,SAAS1kB,GAAO,MAAgB,eAARA,IAEhD2B,IAAI,SAACmsB,GAAe,OAAOxiB,OAAOwiB,KAE3Bk1B,OAAO,SAASnpD,EAAG6B,GAClD,OAAO0R,KAAKqlB,IAAI54B,EAAG6B","file":"static/js/main.cdbb9b95.chunk.js","sourcesContent":["import React from 'react';\nimport Popover from 'material-ui/Popover';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBookOpen} from '@fortawesome/free-solid-svg-icons';\nimport {faFish} from '@fortawesome/free-solid-svg-icons';\nimport {faThLarge} from '@fortawesome/free-solid-svg-icons';\nimport {faArrowAltCircleLeft} from '@fortawesome/free-solid-svg-icons';\nimport {faArrowAltCircleRight} from '@fortawesome/free-solid-svg-icons'; \nimport {faArrowAltCircleLeft as a} from '@fortawesome/free-regular-svg-icons';\nimport {faArrowAltCircleRight as b} from '@fortawesome/free-regular-svg-icons';\nimport {faQuestionCircle} from '@fortawesome/free-regular-svg-icons';\nimport {faUser} from '@fortawesome/free-solid-svg-icons';\nimport {faUsers} from '@fortawesome/free-solid-svg-icons';\nimport {faRunning} from '@fortawesome/free-solid-svg-icons';\nimport {Toolbar, ToolbarGroup, ToolbarSeparator} from 'material-ui/Toolbar';\n\nclass AppBar extends React.Component {\n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {adminMenuOpen: false};\n\t}\n\t//opens the features dialog without the ability to add/remove features (i.e. different from the dialog that is opened from a project)\n  openFeaturesDialog(evt) {\n    this.props.openFeaturesDialog(false);\n }\n  //opens the admin menu\n  openAdminMenu(evt){\n  \tthis.setState({adminMenuOpen: true, menuAnchor: evt.currentTarget});\n }\n  //closes the admin menu\n closeAdminMenu(evt){\n  \tthis.setState({adminMenuOpen: false});\n }\n openUsersDialog(){\n\t\tthis.props.openUsersDialog();\n\t\tthis.closeAdminMenu();\n }\n openRunLogDialog(){\n\t\tthis.props.openRunLogDialog();\n\t\tthis.closeAdminMenu();\n }\n  render() {\n    return (\n      <React.Fragment>\n        <Toolbar style={{display: (this.props.open) ? 'block' : 'none', backgroundColor: 'rgb(0, 188, 212)', height: '36px', padding: '0px 18px'}} className={'appBar'}>\n        \t<ToolbarGroup>\n            <FontAwesomeIcon icon={faBookOpen} onClick={this.props.openProjectsDialog} title=\"Projects\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <FontAwesomeIcon icon={faFish} onClick={this.openFeaturesDialog.bind(this)} title=\"Features\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <FontAwesomeIcon icon={faThLarge} onClick={this.props.openPlanningGridsDialog.bind(this)} title=\"Planning grids\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <ToolbarSeparator style={{marginLeft:'12px', marginRight:'12px'}}/>\n            <FontAwesomeIcon style={{fontSize: '20px'}} icon={(this.props.infoPanelOpen) ? faArrowAltCircleLeft : a} onClick={this.props.toggleInfoPanel} title={(this.props.infoPanelOpen) ? \"Hide the project window\" : \"Show the project window\"} className={'appBarIcon'}/>\n            <FontAwesomeIcon style={{fontSize: '20px'}} icon={(this.props.resultsPanelOpen) ? faArrowAltCircleRight : b} onClick={this.props.toggleResultsPanel} title={(this.props.resultsPanelOpen) ? \"Hide the results window\" : \"Show the results window\"} className={'appBarIcon'} />\n            <ToolbarSeparator style={{marginLeft:'12px', marginRight:'12px'}}/>\n            <FontAwesomeIcon icon={faUser} onClick={this.props.showUserMenu} title={\"User: \" + this.props.user + \" (\" + this.props.userRole + \")\"} className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <div className={'adminDiv appBarIcon'} onClick={this.openAdminMenu.bind(this)} style={{display: (this.props.userRole === 'Admin') ? 'inline-block' : 'none'}}>Admin</div>\n\t          <Popover open={this.state.adminMenuOpen} anchorEl={this.state.menuAnchor} onRequestClose={this.closeAdminMenu.bind(this)}>\n\t            <Menu desktop={true} onMouseLeave={this.closeAdminMenu.bind(this)} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}}>\n\t              <MenuItem leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faUsers} color={'white'}/>} onClick={this.openUsersDialog.bind(this)} title={\"Manage Users\"}>Users</MenuItem>\n\t              <MenuItem leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faRunning} color={'white'}/>} onClick={this.openRunLogDialog.bind(this)} title={\"View Run Log and stop runs\"}>Run log</MenuItem>\n\t            </Menu>\n\t          </Popover>   \n            <FontAwesomeIcon icon={faQuestionCircle} onClick={this.props.showHelpMenu} title={\"Help and support\"} className={'appBarIcon'} style={{fontSize: '20px'}}/>\n          </ToolbarGroup>\n        </Toolbar>\n      </React.Fragment>\n      );\n }\n}\n\nexport default AppBar;\n","import React from 'react';\nimport RaisedButton from 'material-ui/RaisedButton';\n\nclass ToolbarButton extends React.Component {\n\trender() {\n\t\t//merge any user passed style\n\t\tlet _style1 = (this.props.style) ? this.props.style : {};\n\t\tlet _style2 = { display: (this.props.show !== false) ? 'inline-block' : 'none', marginLeft:'4px', marginRight:'4px',padding: '0px',minWidth: '30px',width: (this.props.label) ? '' :'24px', height: '24px'};\n\t\tObject.assign(_style1, _style2);\n\t\treturn (\n\t\t\t<RaisedButton \n\t\t\t\t{...this.props}  \n\t\t\t\tstyle={_style1}\n\t\t\t\toverlayStyle={{lineHeight:'24px',height:'24px'}}\n\t\t\t\tbuttonStyle={{lineHeight:'24px',height:'24px'}} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ToolbarButton;\n","import React from 'react';\nimport Dialog from 'material-ui/Dialog';\nimport ToolbarButton from './ToolbarButton';\nimport Sync from 'material-ui/svg-icons/notification/sync'; \nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {faQuestionCircle} from '@fortawesome/free-regular-svg-icons';\n \n//properties can be:\n//contentWidth - the width of the content area\n//offsetX - the distance from the left edge (mutually exclusive with rightX)\n//rightX - the distance from the right edge (mutually exclusive with offsetX)\n//offsetY - the distance from the top\n//onOk - fired when the OK button is clicked\n//onCancel - fired when the Cancel button is clicked or when the dialog needs to be closed\n//showCancelButton - set to true to show the cancel button\n//actions - an array of components to add to the actions array in the dialog\n//helpLink - a relative url to the bookmark in the user documentation that describes the particular dialog box\nlet DOCS_ROOT = \"https://andrewcottam.github.io/marxan-web/documentation/\";\n\nclass MarxanDialog extends React.Component {\n\topenDocumentation(){\n\t\twindow.open(DOCS_ROOT + this.props.helpLink);\n\t}\n\n\trender() {\n\t\t//if the offsetX or rightX is set, then make this into a style\n\t\tlet offsetX = (this.props.offsetX) ? {marginLeft: this.props.offsetX + 'px', width: '400px'} : (this.props.rightX) ? {right: this.props.rightX + 'px', width: '400px', left:null} : {};\n\t\tlet offsetY = (this.props.offsetY) ? {marginTop: this.props.offsetY - 60 + 'px'} : {};\n\t\tlet style = Object.assign(offsetX, offsetY);\n\t\tlet cancelButton = (this.props.showCancelButton) ? <ToolbarButton label={(this.props.cancelLabel) ? this.props.cancelLabel : \"Cancel\"} primary={true} onClick={this.props.onCancel} disabled={this.props.cancelDisabled}/> : null;\n\t\tlet okButton = (this.props.hideOKButton) ?  null : <ToolbarButton label={(this.props.okLabel) ? this.props.okLabel : \"OK\"} primary={true} onClick={this.props.onOk} disabled={this.props.okDisabled}/>;\n\t\tlet contentStyle = (this.props.contentStyle) ? this.props.contentStyle : (this.props.contentWidth) ? {width: this.props.contentWidth + 'px'} : {};\n\t\treturn (\n\t\t\t<Dialog      \n\t\t\t\t{...this.props} \n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\toverlayStyle={(this.props.showOverlay) ? {display:'block'} : {display:'none'}}\n\t\t\t\ttitleClassName={'dialogTitleStyle'}\n\t\t\t\tcontentStyle={contentStyle} \n\t\t\t\ttitleStyle={(this.props.titleBarIcon) ? {marginLeft: '27px'} : null}\n\t\t\t\tclassName={'dialogGeneric'}\n\t\t\t\tstyle={style} \n\t\t\t\tactions={[\n\t\t\t\t\tthis.props.actions,\n\t\t\t\t\tcancelButton, \n\t\t\t\t\tokButton,\n\t\t\t\t]} \n\t\t\t\tchildren={[\n\t\t\t\t\t(this.props.titleBarIcon) ? <FontAwesomeIcon icon={this.props.titleBarIcon} style={{position: 'absolute', top: '18px', left: '24px'}} key=\"k1\"/> : null,\n\t\t\t\t\t<Sync className='spin' style={{display: (this.props.loading || this.props.showSpinner) ? \"inline-block\" : \"none\", color: 'rgb(255, 64, 129)', position: 'absolute', top: '13px', right: '45px'}} key={\"spinner\"}/>, this.props.children,\n\t\t\t\t\t(this.props.helpLink) ? <FontAwesomeIcon icon={faQuestionCircle} onClick={this.openDocumentation.bind(this)} title={\"Open documentation for this window\"} className={'appBarIcon docs'} style={{fontSize: '18px'}} key=\"helpLink\"/> : null\n\t\t\t\t]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default MarxanDialog;","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\n\nclass LoadingDialog extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tshowOverlay={true}\n\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\thideOKButton={true}\n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\ttitle=\"Loading..\" \n\t\t\t\t\tmodal={true} \n\t\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default LoadingDialog;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUnlink } from '@fortawesome/free-solid-svg-icons';\nimport { faLock } from '@fortawesome/free-solid-svg-icons';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass LoginDialog extends React.Component {\n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.props.onOk(); \n\t} \n\tselectServer(evt, key, value){\n\t\tthis.props.selectServer(this.props.marxanServers[key]);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tshowOverlay={true}\n\t\t\t\t\tokDisabled={(!this.props.user || !this.props.password || this.props.loading ||!this.props.marxanServer||(this.props.marxanServer&&this.props.marxanServer.offline)||(this.props.marxanServer&&!this.props.marxanServer.guestUserEnabled)) ? true : false} \n\t\t\t\t\tokLabel={(this.props.marxanServer&&!this.props.marxanServer.offline&&!this.props.marxanServer.corsEnabled&&this.props.marxanServer.guestUserEnabled) ? \"Login (Read-Only)\" : \"Login\"}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\tcancelLabel={\"Register\"}\n\t\t\t\t\tcancelDisabled={((this.props.marxanServer===undefined) || this.props.loading || (this.props.marxanServer&&this.props.marxanServer.offline) || (this.props.marxanServer&&!this.props.marxanServer.corsEnabled)) ? true : false} \n\t\t\t\t\thelpLink={\"docs_user.html#log-in-window\"}\n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\toffsetY={200}\n\t\t\t\t\tchildren={[\n\t\t\t\t\t<div key=\"21\">\n\t\t\t\t\t\t<SelectField  \n\t\t\t\t\t\t\tfloatingLabelText={'Marxan Server'} \n\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\tunderlineShow={false}\n\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\tstyle={{width:'320px'}}\n\t\t\t\t\t\t\tvalue={this.props.marxanServer&&this.props.marxanServer.name} \n\t\t\t\t\t\t\tonChange={this.selectServer.bind(this)}\n\t\t\t\t\t\t\tchildren= {this.props.marxanServers.map((item)=> {\n\t\t\t\t\t\t\t\t//if the server is offline - just put that otherwise: if CORS is enabled for this domain then it is read/write otherwise: if the guest user is enabled then put the domain and read only otherwise: put the domain and guest user disabled\n\t\t\t\t\t\t\t\tlet text = (item.offline) ? item.name  : (item.corsEnabled) ? item.name : (item.guestUserEnabled) ? item.name : item.name + \" (Guest user disabled)\";\n\t\t\t\t\t\t\t\treturn  <MenuItem \n\t\t\t\t\t\t\t\t\tvalue={item.name} \n\t\t\t\t\t\t\t\t\tkey={item.name} \n\t\t\t\t\t\t\t\t\tprimaryText={text} \n\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\tinnerDivStyle={{padding:'0px 10px 0px 52px'}}\n\t\t\t\t\t\t\t\t\tleftIcon={(item.offline) ? <FontAwesomeIcon style={{height: '12px', marginTop:'5px'}} icon={faUnlink}/> : (item.corsEnabled) ? null : <FontAwesomeIcon style={{height: '12px', marginTop:'5px'}} icon={faLock}/>}\n\t\t\t\t\t\t\t\t\ttitle={(item.offline) ? item.host + \" (offline)\\n\" + item.description  : (item.corsEnabled) ? item.host + \"\\n\" + item.description : (item.guestUserEnabled) ? item.host + \" (read-only)\\n\" + item.description : item.host + \" (guest user disabled)\\n\" + item.description}\n\t\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{height:'124px'}} id=\"logindiv\" key=\"logindiv\">\n\t\t\t\t\t\t\t<TextField \n\t\t\t\t\t\t\t\tfloatingLabelText=\"Username\" \n\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\tonChange = {(event, value)=>this.props.changeUserName(value)} \n\t\t\t\t\t\t\t\tinputStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\tvalue={this.props.user} \n\t\t\t\t\t\t\t\tclassName='loginUserField' \n\t\t\t\t\t\t\t\tdisabled = {(this.props.loading||(this.props.marxanServer&&!this.props.marxanServer.corsEnabled)) ? true : false} \n\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span><TextField \n\t\t\t\t\t\t\t\tfloatingLabelText=\"Password\" \n\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\t\t\tonChange = {(event, value)=>this.props.changePassword(value)} \n\t\t\t\t\t\t\t\tvalue={this.props.password} \n\t\t\t\t\t\t\t\tclassName='loginUserField' \n\t\t\t\t\t\t\t\tdisabled = {this.props.loading||(this.props.marxanServer&&!this.props.marxanServer.corsEnabled) ? true : false} \n\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress.bind(this)}\n\t\t\t\t\t\t\t/></span>\n\t\t\t\t\t\t\t{/*<span onClick={this.props.openResendPasswordDialog.bind(this)} className=\"forgotLink\" title=\"Click to resend password\">Forgot</span>*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t]} \n\t\t\t\t\tonRequestClose={this.props.onOk} \n\t\t\t\t\ttitle=\"Login\" \n\t\t\t\t\tmodal={true} \n\t\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default LoginDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass RegisterDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { validForm: false, user: undefined, name: undefined, email: undefined, validEmail: true};\n\t}\n\t//\n\tcreateNewUser() {\n\t\t//check the required FIELDS\n\t\ttry {\n\t\t\tthis.validateEmail();\n\t\t}\n\t\t//any errors will not create a new user\n\t\tcatch (err) {\n\t\t\tswitch (err.message) {\n\t\t\t\tdefault:\n\t\t\t\t\t// code\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t//create a new user\n\t\tthis.props.onOk(this.state.user, this.state.password, this.state.name, this.state.email);\n\t}\n\n\tvalidateEmail() {\n\t\tvar re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tlet valid = re.test(String(this.state.email).toLowerCase());\n\t\tthis.setState({ validEmail: valid });\n\t\tif (!valid) {\n\t\t\tthrow new Error(\"Invalid email address\");\n\t\t}\n\t}\n\n\trender() {\n\t\tlet c = [<div key=\"RegisterDialogDiv\">\n\t\t\t\t\t<TextField floatingLabelText=\"Username\" floatingLabelFixed={true} onChange = {(event,newValue) => this.setState({user:newValue})}/>\n\t\t\t\t\t<TextField floatingLabelText=\"Password\" floatingLabelFixed={true} type=\"password\" onChange = {(event,newValue) => this.setState({password:newValue})}/>\n\t\t\t\t\t<TextField floatingLabelText=\"Full name\" floatingLabelFixed={true} onChange = {(event,newValue) => this.setState({name:newValue})}/>\n\t\t\t\t\t<TextField floatingLabelText=\"Email address\" floatingLabelFixed={true} errorText={this.state.validEmail ?  '' : \"Invalid email address\"} onChange = {(event,newValue) => this.setState({email:newValue})}/>\n\t\t\t\t</div>];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={358}\n\t\t\t\tonOk={this.createNewUser.bind(this)}\n\t\t\t\tokDisabled={!(this.state.user && this.state.password && this.state.name && this.state.email) || this.props.loading} \n\t\t\t\tshowCancelButton={true}\n\t\t\t\tcancelDisabled={this.props.loading} \n\t\t\t\thelpLink={\"docs_user.html#new-user-registration\"}\n\t\t\t\ttitle=\"Register\" \n\t\t\t\tchildren={c} \n\t\t\t\tonRequestClose={this.props.onCancel} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default RegisterDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass ResendPasswordDialog extends React.Component {\n \n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.props.resendPassword();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\tokDisabled={!this.props.email || this.props.loading}\n\t\t\t\t\tcancelDisabled={this.props.resending}\n\t\t\t\t\ttitle=\"Resend password\" \n\t\t\t\t\tchildren={[<div key=\"resendDiv\">\n\t\t\t\t\t\t<TextField floatingLabelText=\"email address\" floatingLabelFixed={true} onChange = {(event, value)=>this.props.changeEmail(value)}  value={this.props.email} className='loginUserField' disabled = {this.props.loading} onKeyPress={this.handleKeyPress.bind(this)}/>\n\t\t\t\t</div>]}\n\t\t\t\t\tonRequestClose={this.props.onCancel} \n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ResendPasswordDialog;\n","import React from 'react';\nimport Menu from 'material-ui/Menu'; \nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport LogOut from 'material-ui/svg-icons/action/exit-to-app';\nimport {white} from 'material-ui/styles/colors';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport { faUserLock } from '@fortawesome/free-solid-svg-icons';\n\nclass UserMenu extends React.Component { \n\trender() { \n\t\treturn (\n\t\t\t<React.Fragment> \n\t\t\t\t<Popover\n\t\t\t\t\topen={this.props.open} \n\t\t\t\t\tanchorEl={this.props.menuAnchor}\n\t\t\t\t\tanchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\n\t\t\t\t\ttargetOrigin={{horizontal: 'left', vertical: 'top'}}\n\t\t\t\t\tonRequestClose={this.props.hideUserMenu}\n\t\t\t\t>\n\t\t\t\t\t<Menu desktop={true} onMouseLeave={this.props.hideUserMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}}>\n\t\t\t\t\t\t<MenuItem primaryText={this.props.user + \" (\" + this.props.userRole + \")\"} style={{marginLeft:'40px'}}/>\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Settings\" onClick={this.props.openOptionsDialog.bind(this)} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faCog} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Profile\" onClick={this.props.openProfileDialog} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faEdit} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Change password\" onClick={this.props.openChangePasswordDialog} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faUserLock} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem primaryText=\"Log out\" onClick={this.props.logout.bind(this)} leftIcon={<LogOut color={white}/>}/> \n\t\t\t\t\t</Menu>\n\t\t\t\t</Popover>\n\t\t\t</React.Fragment>\n\t\t); \n\t}\n}\n\nexport default UserMenu;\n","import React from 'react';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport Help from 'material-ui/svg-icons/action/help-outline';\nimport Info from 'material-ui/svg-icons/action/info';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {white} from 'material-ui/styles/colors';\nimport {faServer} from '@fortawesome/free-solid-svg-icons';\n\nclass HelpMenu extends React.Component {\n\topenDocumentation(){\n\t\twindow.open(this.props.DOCS_ROOT + \"docs_overview.html\");\n\t}\n\n  render() {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Popover\n\t\t\t\topen={this.props.open} \n\t\t\t\tanchorEl={this.props.menuAnchor}\n\t\t\t\tanchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\n\t\t\t\ttargetOrigin={{horizontal: 'left', vertical: 'top'}}\n\t\t\t\tonRequestClose={this.props.hideHelpMenu}\n\t\t\t\t>\n\t\t\t\t<Menu desktop={true} onMouseLeave={this.props.hideHelpMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}} width={'102px'}>\n\t\t\t\t\t<MenuItem primaryText=\"Server Details\" onClick={this.props.openServerDetailsDialog} leftIcon={<FontAwesomeIcon style={{height: '16px', marginTop:'4px',fontSize: '18px'}} icon={faServer} color={'white'}/>}/>\n\t\t\t\t\t<MenuItem primaryText=\"Documentation\" onClick={this.openDocumentation.bind(this)} leftIcon={<Help color={white}/>}/>\n\t\t\t\t\t<MenuItem primaryText=\"About\" onClick={this.props.openAboutDialog} leftIcon={<Info color={white}/>}/>\n\t\t\t\t</Menu>\n\t\t\t</Popover>\n\t\t</React.Fragment>\n\t);\n  }\n}\n\nexport default HelpMenu;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport ToolbarButton from './ToolbarButton';\n\nclass OptionsDialog extends React.Component {\n        constructor(props){\n                super(props);\n                this.state = {saveEnabled: false};\n                this.options = {}; \n        }\n        setOption(key, value){\n                this.setState({saveEnabled: true});\n                this.options[key] = value;\n        }\n        updateOptions(){\n                this.props.saveOptions(this.options);\n                this.props.onOk();\n        }\n        changeBasemap(event, key, payload){\n                var basemap = this.props.basemaps[key];\n                this.props.changeBasemap(basemap);    \n                this.setOption(\"BASEMAP\", basemap.name);\n        }\n        \n        render() {\n                return (\n                        <MarxanDialog \n                                {...this.props} \n                                contentWidth={370}\n                                offsetY={80}\n                                showCancelButton={false}\n                                onOk={this.updateOptions.bind(this)}\n                                helpLink={\"docs_user.html#settings\"}\n                                title=\"Settings\" \n                                children={\n                                        <div key=\"k14\">\n                                                <SelectField \n                                                        floatingLabelText={'Basemap style'} \n                                                        floatingLabelFixed={true} \n                                                        underlineShow={false}\n                                                        menuItemStyle={{fontSize:'12px'}}\n                                                        labelStyle={{fontSize:'12px'}} \n                                                        style={{width:'260px'}}\n                                                        value={this.props.basemap} \n                                                        onChange={this.changeBasemap.bind(this)}\n                                                        children= {this.props.basemaps.map((item)=> {\n                                                                return  <MenuItem \n                                                                        value={item.name} \n                                                                        key={item.name} \n                                                                        primaryText={item.alias}\n                                                                        style={{fontSize:'12px'}}\n                                                                        title={item.description}\n                                                                />;\n                                                        })}\n                                                />\n                                                <ToolbarButton label=\"Reset notifications\" onClick={this.props.resetNotifications} className={\"resetNotifications\"}/>\n                                        </div>\n                                } \n                        />\n                );\n        }\n}\n\nexport default OptionsDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass ProfileDialog extends React.Component {\n\tconstructor(props) { \n\t\tsuper(props);\n\t\tthis.state = { updated: false, validEmail: true };\n\t} \n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.updateUser();\n\t}\n\tupdateState(name, value) { \n\t\tthis.setState({\n\t\t\t[name]: value, updated: true });\n\t}\n\tvalidateEmail() {\n\t\tvar re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tlet email = this.state.EMAIL ? this.state.EMAIL : this.props.userData.EMAIL;\n\t\tlet valid = re.test(String(email).toLowerCase());\n\t\tthis.setState({ validEmail: valid });\n\t\tif (!valid) {\n\t\t\tthrow new Error(\"Invalid email address\");\n\t\t}\n\t}\n\tupdateUser() {\n\t\ttry {\n\t\t\tthis.validateEmail();\n\t\t}\n\t\t//any errors will not create a new user\n\t\tcatch (err) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.updateUser(this.state);\n\t\tthis.closeProfileDialog();\n\t}\n\tcloseProfileDialog() {\n\t\tthis.props.onOk();\n\t\tthis.setState({ updated: false, validEmail: true });\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props}  \n\t\t\t\tcontentWidth={330}\n\t\t\t\toffsetY={80}\n\t\t\t\tonCancel={this.closeProfileDialog.bind(this)}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonOk={this.updateUser.bind(this)}\n\t\t\t\thelpLink={\"docs_user.html#profile\"}\n\t\t\t\ttitle=\"Profile\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div key=\"k15\">\n\t\t\t\t\t\t<TextField floatingLabelText=\"Full name\" floatingLabelFixed={true} onChange = {(event,newValue) => this.updateState(\"NAME\",newValue)} defaultValue ={this.props.userData && this.props.userData.NAME} onKeyPress={this.handleKeyPress.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} />\n\t\t\t\t\t\t<TextField floatingLabelText=\"Email address\" floatingLabelFixed={true} errorText={this.state.validEmail ?  '' : \"Invalid email address\"} onChange = {(event,newValue) => this.updateState(\"EMAIL\",newValue)} defaultValue={this.props.userData && this.props.userData.EMAIL} onKeyPress={this.handleKeyPress.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} />\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ProfileDialog;\n","import React from 'react';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\nimport Checkbox from 'material-ui/Checkbox';\n\nlet USER_ROLES = [\"User\",\"ReadOnly\",\"Admin\"];\nclass UsersDialog extends React.Component { \n\t\t\tconstructor(props) {\n\t\t\t\t\tsuper(props);\n\t\t\t\t\tthis.state = { selectedUser: undefined };\n\t\t\t}\n\t\t\tchangeRole(user, oldRole, evt, key, newRole){\n\t\t\t\tthis.props.changeRole(user, newRole);\n\t\t\t}\n\t\t\t_delete() {\n\t\t\t\t\tthis.props.deleteUser(this.state.selectedUser.user);\n\t\t\t\t\tthis.setState({ selectedUser: false });\n\t\t\t}\n\t\t\tchangeUser(event, user) {\n\t\t\t\t\tthis.setState({ selectedUser: user });\n\t\t\t}\n\t\t\tcloseDialog() {\n\t\t\t\t\tthis.setState({ selectedUser: undefined });\n\t\t\t\t\tthis.props.onOk();\n\t\t\t}\n\t\t\trender() {\n\t\t\t\t\tif (this.props.users) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\t\t\t\tonRequestClose={this.closeDialog.bind(this)}\n\t\t\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\t\t\thelpLink={\"docs_user.html#the-users-window-admin-users-only\"}\n\t\t\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\t\t\ttitle=\"Users\"   \n\t\t\t\t\t\t\tchildren={\n\t\t\t\t\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t\t\t\t\t<div style={{marginBottom:'5px'}}>There are a total of {this.props.users.length} users:</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"usersTable\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(this.props.users&&this.props.users.length>0) ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpageSize={this.props.users.length}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={'projectsReactTable noselect'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata={this.props.users}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthisRef={this} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns={[{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Name', accessor: 'NAME', width: 200, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'email', accessor: 'EMAIL', width: 250, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Role', accessor: 'ROLE', width: 180, headerStyle: { 'textAlign': 'left' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCell: row => \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(row.original.user === 'guest') ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>ReadOnly</div> :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: 130,height: 15,lineHeight: 15,position: 'relative',fontSize: '12px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmenuStyle={{position: 'absolute',top: -22}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunderlineStyle={{position: 'relative',top: 20}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonStyle={{lineHeight:'24px',height:'24px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={row.original.ROLE}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.changeRole.bind(this, row.original.user, row.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{USER_ROLES.map(item => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.user === (state.thisRef.state.selectedUser&&state.thisRef.state.selectedUser.user)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (USER_ROLES.indexOf(e.target.textContent)===-1) state.thisRef.changeUser(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:null}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"projectsToolbar\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete user\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedUser || this.props.loading || (this.props.user === this.state.selectedUser.user)||(this.state.selectedUser.user === 'guest')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Enable guest user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px',paddingLeft: '10px', width:'200px',display:'inline-block',verticalAlign:'bottom'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.toggleEnableGuestUser}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={this.props.guestUserEnabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t} \n\t\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default UsersDialog;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport iucn from './images/iucn.png';\nimport wcmc from './images/wcmc.png';\nimport mapbox_small from './images/mapbox_small.png';\nimport biopama_small from './images/biopama_small.png';\nimport jrc_logo_color_small from './images/jrc_logo_color_small.png';\n\nclass AboutDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"About\"\n        helpLink={\"docs_user.html#about-window\"}\n        children={\n          <div key=\"k5\">\n            <div className={\"aboutTitle\"}>Software development</div>\n            <div className={\"aboutText\"}>\n              Marxan Web v{this.props.marxanClientReleaseVersion} Feedback:{\" \"}\n              <a href=\"mailto:andrew.cottam@ec.europa.eu\" className=\"email\">\n                Andrew Cottam\n              </a>\n            </div>\n            <div className={\"aboutText\"}>\n              Marxan 2.4.3 - Ian Ball, Matthew Watts &amp; Hugh Possingham\n            </div>\n            <div className={\"aboutTitle\"}>Data providers</div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}} dangerouslySetInnerHTML={{__html: this.props.wdpaAttribution}}></div>\n            <div className={\"aboutTitle\"}>Funding and in-kind contributions</div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}}>\n              Marxan Web funded by the BIOPAMA project of the European Commission. With in-kind contributions from Mapbox. \n            </div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}}>\n              Marxan funded by a range of donors - see <a href='http://marxan.org/credits.html' target='_blank' rel=\"noopener noreferrer\">here</a>.\n            </div>\n           <div className={\"logos\"}>\n            <a href=\"https://www.iucn.org/\">\n\t            <img\n\t              src={iucn}\n\t              alt=\"IUCN logo\"\n\t              title={\"IUCN logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n            </a>\n            <a href=\"https://www.unep-wcmc.org/\">\n\t            <img\n\t              src={wcmc}\n\t              alt=\"UN Environment WCMC logo\"\n\t              title={\"UN Environment WCMC logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n            </a>\n            <a href=\"https://www.biopama.org\">\n\t            <img\n\t              src={biopama_small}\n\t              alt=\"BIOPAMA logo\"\n\t              title={\"BIOPAMA logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n\t            </a>\n\t            <a href=\"https://ec.europa.eu/jrc/en\">\n\t            <img\n\t              src={jrc_logo_color_small}\n\t              alt=\"Joint Research Centre of the European Commission logo\"\n\t              title={\"Joint Research Centre of the European Commission logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n\t            </a>\n              <a href=\"https://www.mapbox.com\">\n  \t            <img\n  \t              src={mapbox_small}\n  \t              alt=\"Mapbox logo\"\n  \t              title={\"Mapbox logo\"}\n  \t              className={\"aboutLogo\"}\n  \t            />\n              </a>\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AboutDialog;\n","import React from 'react';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass MenuItemWithButton extends React.Component {\n\trender() {\n\t\treturn <MenuItem className={'smallMenuItem'} {...this.props} innerDivStyle={{paddingLeft:'40px'}}/>;\n\t}\n}\n\nexport default MenuItemWithButton;\n","import * as React from 'react';\nimport { blue300} from 'material-ui/styles/colors';\n\nclass TargetIcon extends React.PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { editing: false, localTargetValue: undefined };\n\t}\n\tonClick(event) {\n\t\tthis.startEditing();\n\t}\n\tisNumber(str) {\n\t\tvar pattern = /^\\d+$/;\n\t\treturn pattern.test(str); // returns a boolean\n\t}\n\tonChange(event) {\n\t\tlet newValue = event.nativeEvent.target.value;\n\t\tif (newValue > 100) return;\n\t\tif (this.isNumber(newValue) || (newValue === \"\")) {\n\t\t\tnewValue = (newValue === \"\") ? 0 : Number(newValue); \n\t\t\tthis.setState({localTargetValue:newValue});\n\t\t}\n\t}\n\tonKeyPress(event) {\n\t\tif (event.nativeEvent.key === \"Enter\") this.setState({ editing: false }); //will trigger the onBlur event of the input box\n\t}\n\tstartEditing() {\n\t\tthis.setState({ editing: true, localTargetValue: this.props.target_value });\n\t\tdocument.getElementById(\"input_\" + this.props.interestFeature.id).focus();\n\t\tdocument.getElementById(\"input_\" + this.props.interestFeature.id).select();\n\t}\n\tstopEditing() {\n\t\tthis.setState({ editing: false });\n\t\tthis.props.updateTargetValue(this, this.state.localTargetValue); \n\t}\n\trender() {\n\t\tlet backgroundColor = (this.props.targetStatus === \"Does not occur in planning area\") ? \"lightgray\" : (this.props.targetStatus === \"Unknown\") ? \"white\" : (this.props.targetStatus === \"Target achieved\") ? \"white\" : \"rgb(255, 64, 129)\";\n\t\tlet fontColor = (this.props.targetStatus === \"Does not occur in planning area\") ? \"white\" : (this.props.targetStatus === \"Unknown\") ? blue300 : (this.props.targetStatus === \"Target achieved\") ? blue300 : \"white\";\n\t\t return (\n\t\t\t<div onClick={(this.props.userRole === \"ReadOnly\") ? null : this.onClick.bind(this)} style={{position:'absolute',left:'8px',top:'17px', display: (this.props.visible) ? 'block' : 'none'}}>\n\t\t\t\t<div title={this.props.targetStatus} style={{'display': (this.state.editing) ? 'none' : 'inline-flex', backgroundColor: backgroundColor, size:'0', color:fontColor, userSelect:'none', alignItems:'center', justifyContent:'center', fontSize:'12px', borderRadius:'50%', height:'33px', width:'33px', left:'8px', border:'1px lightgray solid'}}\n\t\t\t\t>{this.props.target_value}%</div>\n\t\t\t\t<div style={{'display': (this.state.editing) ? 'inline-flex' : 'none',size:'30','backgroundColor':'#2F6AE4','userSelect':'none','alignItems':'center','justifyContent':'center','borderRadius':'50%',height:'33px',width:'33px',left:'8px'}}>\n\t\t\t\t\t<input id={\"input_\" + this.props.interestFeature.id} onBlur={this.stopEditing.bind(this)} onKeyPress={this.onKeyPress.bind(this)} onChange={this.onChange.bind(this)} style={{'backgroundColor':'transparent','border':'0px',height:'33px',width:'33px','fontSize':'13px',display:'inline-flex','textAlign':'center',color:blue300}} value={this.state.localTargetValue}/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TargetIcon;\n","import * as React from 'react';\n\nclass LinearGauge extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t//alwaysShowPercent - set to false then if the percent protected is smaller than 30 pixels it will not be shown\n\t\t//showUnprotectedPercent - set to false to not show the unprotected percent\n\t\t//targetAsLine - shows the target as a line - otherwise it is a grey rectangle\n\t\tthis.state = { alwaysShowPercent: false, showUnprotectedPercent: false,targetAsLine:false };\n\t} \n\trender() {\n\t\tlet protectedWidth = 0; \n\t\tlet protectedHidden = true; \n\t\t//the scaledWidth is the desired width of the LinearGauge\n\t\tlet scaleFactor = this.props.scaledWidth / 100;\n\t\t//the number of pixels from the left hand side to offset the target line\n\t\tlet targetPxOffset = (this.props.target_value * scaleFactor);\n\t\t//the number of pixels from the left hand side to the protected line\n\t\tprotectedWidth = Math.round((this.props.protected_percent === -1) ? 0 : (this.props.protected_percent * scaleFactor));\n\t\t//protected percent text - if protected_percent < target_value then if the rounded protected_percent is the same as the rounded target_value, show the protected_percent to 1dp\n\t\tlet protNum = this.props.protected_percent;\n\t\tlet percentageProtectedText = (protNum < Number(this.props.target_value)) ? (Math.round(protNum)===this.props.target_value) ? String(protNum).slice(0,String(protNum).indexOf(\".\") + 2) : Math.round(protNum) : Math.round(protNum);\n\t\t//get whether or not the % protected should be visible or hidden\n\t\tprotectedHidden = (protectedWidth < 26 && !(this.state.alwaysShowPercent));\n\t\t//get the width of the target shortfall\n\t\tlet targetShortfallWidth = (this.props.protected_percent >= this.props.target_value) ? 0 : (targetPxOffset - protectedWidth);\n\t\t//if targetShortfallWidth is less than zero if causes the linear guage to go off-scale\n\t\ttargetShortfallWidth = (targetShortfallWidth<0) ? 0 : targetShortfallWidth;\n\t\t//get the width of the rest of the bar\n\t\tlet unprotectedWidth = (100 * scaleFactor) - protectedWidth - targetShortfallWidth;\n\t\treturn (\n\t\t\t<div className={(this.props.visible) ? 'linearGauge' : 'linearGaugeNoBorder'} style={{opacity: (this.props.protected_percent === -1) ? '0.3' : 1}}>\n\t\t\t\t<div title={percentageProtectedText + '% protected'} className={'percentBar protectedPercentBar'} style={{width: protectedWidth + 'px'}}>{protectedHidden ? <span>&nbsp;</span> : percentageProtectedText + '%'}</div>\n\t\t\t\t<div title={'Target of ' + this.props.target_value + '%'} className={'percentBar targetShortfall'} style={{width: (this.props.visible) ? targetShortfallWidth + 'px' : '0px'}}></div>\n\t\t\t\t<div className={'percentBar totalShortFall'} style={{width: unprotectedWidth + 'px', color:'rgba(0,0,0,0.7)', 'textAlign': (this.props.visible) ? null : 'left', 'fontStyle': (this.props.visible) ? null : 'italic'}}>{(this.props.visible) ? null : 'Does not occur'}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LinearGauge;\n","import * as React from 'react';\nimport { List, ListItem } from 'material-ui/List';\nimport TargetIcon from './TargetIcon';\nimport { grey400 } from 'material-ui/styles/colors';\nimport IconButton from 'material-ui/IconButton';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport LinearGauge from './LinearGauge';\n \nclass FeaturesList extends React.Component { \n\ticonClick(feature, evt){\n\t\tthis.props.openFeatureMenu(evt, feature);\n\t}\n\tupdateTargetValue(targetIcon, newValue) {\n\t\tthis.props.updateFeature(targetIcon.props.interestFeature, {target_value: newValue});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<List style={{padding:'0px !important', maxHeight: this.props.maxheight, overflow: 'auto'}}>\n\t\t\t\t\t{this.props.features.map((item)=>{\n\t\t\t\t\t\t//get the total area of the feature in the planning unit\n\t\t\t\t\t\tlet pu_area = item.pu_area;\n\t\t\t\t\t\t//TODO: This needs to be done differently when we are using the old version of Marxan because it does not have a value for the pu_area\n\t\t\t\t\t\t\n\t\t\t\t\t\t//get the protected percent\n\t\t\t\t\t\tlet protected_percent = (item.protected_area === -1) ? -1 : (pu_area >= 0) ? (item.protected_area > 0) ? (item.protected_area / pu_area) * 100 : 0 : 0;\n\t\t\t\t\t\t//this is a hack to round the protected percent as there are some bugs in Marxan that calculate the target area required wrongly\n\t\t\t\t\t\t//TODO - sort out \n\t\t\t\t\t\t// protected_percent = Math.round(protected_percent);\n\t\t\t\t\t\tlet targetStatus = (pu_area === 0) ? \"Does not occur in planning area\" : (protected_percent === -1) ? \"Unknown\" : (item.protected_area >= item.target_area) ? \"Target achieved\" : \"Target missed\";\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem \n\t\t\t\t\t\t\t\tleftAvatar={this.props.simple ? \n\t\t\t\t\t\t\t\t\t<span/> \n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t  <TargetIcon \n\t\t\t\t\t\t\t\t\t  style={{left: 8}} \n\t\t\t\t\t\t\t\t\t  target_value={item.target_value} \n\t\t\t\t\t\t\t\t\t  updateTargetValue={this.updateTargetValue.bind(this)} \n\t\t\t\t\t\t\t\t\t  interestFeature={item}\n\t\t\t\t\t\t\t\t\t  targetStatus={targetStatus}\n\t\t\t\t\t\t\t\t\t  visible={(item.pu_area!==0)}\n\t\t\t\t\t\t\t\t\t  userRole={this.props.userRole}\n\t\t\t\t\t\t\t\t  /> \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\t\t\t\tsecondaryText={this.props.simple ? \n\t\t\t\t\t\t\t\t\t<span />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<LinearGauge \n\t\t\t\t\t\t\t\t\t\tscaledWidth={220}\n\t\t\t\t\t\t\t\t\t\ttarget_value={item.target_value} \n\t\t\t\t\t\t\t\t\t\tprotected_percent={protected_percent}\n\t\t\t\t\t\t\t\t\t\tvisible={(item.pu_area!==0)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\tkey={item.id} \n\t\t\t\t\t\t\t\tvalue={item.alias}\n\t\t\t\t\t\t\t\trightIconButton={this.props.simple ?\n\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<IconButton touch={true} tooltipPosition=\"bottom-left\" onClick={this.iconClick.bind(this, item)}>\n\t\t\t\t\t\t\t\t\t\t<MoreVertIcon color={grey400} />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tinnerDivStyle={{padding: (this.props.simple) ? '5px 5px 5px 5px' : '9px 5px 11px 53px' }}\n\t\t\t\t\t\t\t\tstyle={{borderRadius:'3px',fontSize:'14px', color: 'rgba(0,0,0,0.8)'}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</List>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default FeaturesList;\n","import React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport FeaturesList from './FeaturesList';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faCrosshairs } from '@fortawesome/free-solid-svg-icons';\n\nclass SelectFeatures extends React.Component {\n\topenFeaturesDialog(evt){\n\t\tthis.props.openFeaturesDialog(true);\n\t}\n\trender() { \n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>   \n\t\t\t\t\t<FeaturesList \n\t\t\t\t\t\tfeatures={this.props.features}  \n\t\t\t\t\t\topenFeatureMenu={this.props.openFeatureMenu}\n\t\t\t\t\t\tsimple={this.props.simple} \n\t\t\t\t\t\tmaxheight={'387px'}\n\t\t\t\t\t\tupdateFeature={this.props.updateFeature}\n\t\t\t\t\t\tuserRole={this.props.userRole}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton onClick={this.props.openTargetDialog} show={(this.props.userRole!==\"ReadOnly\")&&(this.props.showTargetButton)}  icon={ <FontAwesomeIcon icon={ faCrosshairs }/>} style={{marginLeft:this.props.leftmargin,width:'30px', marginTop:'5px'}} title={'Set a target for all features'}/>\n\t\t\t\t\t<ToolbarButton label=\"+/-\" onClick={this.openFeaturesDialog.bind(this)} show={!((this.props.metadata && this.props.metadata.OLDVERSION)||(this.props.userRole === \"ReadOnly\"))} style={{marginLeft:this.props.leftmargin,width:'30px', marginTop:'5px'}} title={'Add/remove features from the project'}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n} \n\nexport default SelectFeatures;\n","import React from 'react';\nimport 'react-table/react-table.css';\nimport Paper from 'material-ui/Paper';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport SelectField from 'material-ui/SelectField';\nimport SelectFeatures from './SelectFeatures';\nimport MenuItem from 'material-ui/MenuItem';\nimport Settings from 'material-ui/svg-icons/action/settings';\nimport ToolbarButton from './ToolbarButton';\nimport Checkbox from 'material-ui/Checkbox';\nimport Textarea from 'react-textarea-autosize';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLock } from '@fortawesome/free-solid-svg-icons';\nimport { faUnlock } from '@fortawesome/free-solid-svg-icons';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport { faHome } from '@fortawesome/free-solid-svg-icons';\nimport { faShareAlt } from '@fortawesome/free-solid-svg-icons';\n\nlet IUCN_CATEGORIES = ['None','IUCN I-II','IUCN I-IV','IUCN I-V','IUCN I-VI','All'];\n\nclass InfoPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {editingProjectName:false, editingDescription: false};\n\t}\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\t//if the input box for renaming the project has been made visible and it has no value, then initialise it with the project name and focus it\n\t\tif (prevState.editingProjectName === false && this.state.editingProjectName) {\n\t\t\tdocument.getElementById(\"projectName\").value = this.props.project;\n\t\t\tdocument.getElementById(\"projectName\").focus();\n\t\t}\n\t\t//if the input box for renaming the description has been made visible and it has no value, then initialise it with the description and focus it\n\t\tif (prevState.editingDescription === false && this.state.editingDescription) {\n\t\t\tdocument.getElementById(\"descriptionEdit\").value = this.props.metadata.DESCRIPTION;\n\t\t\tdocument.getElementById(\"descriptionEdit\").focus();\n\t\t}\n\t}\n\n\tonKeyPress(e) {\n\t\tif (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n\t\t\tdocument.getElementById(e.nativeEvent.target.id).blur(); //call the onBlur event which will call the REST service to rename the project\n\t\t}\n\t}\n\n\tonBlur(e) {\n\t\tif (e.nativeEvent.target.id === 'projectName') {\n\t\t\tthis.props.renameProject(e.target.value).then(()=> {\n\t\t\t    this.setState({ editingProjectName: false });\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.props.renameDescription(e.target.value).then(()=> {\n\t\t\t\tthis.setState({ editingDescription: false });\n\t\t\t});\n\t\t}\n\t}\n\n\tstartEditingProjectName() {\n\t\tif (this.props.project) { //a project may not be loaded\n\t\t\tthis.setState({editingProjectName: true});\n\t\t}\n\t}\n\tstartEditingDescription() {\n\t\tif (this.props.project) { //a project may not be loaded\n\t\t\tthis.setState({editingDescription: true});\n\t\t}\n\t}\n\tstartStopPuEditSession(evt) {\n\t\t(this.props.puEditing) ? this.stopPuEditSession(): this.startPuEditSession();\n\t}\n\tstartPuEditSession() {\n\t\tthis.setState({ puEditing: true });\n\t\tthis.props.startPuEditSession();\n\t}\n\n\tstopPuEditSession() { \n\t\tthis.setState({ puEditing: false});\n\t\tthis.props.stopPuEditSession();\n\t}\n\t\n\tchangeIucnCategory(event,key,payload){\n\t\tthis.props.changeIucnCategory(IUCN_CATEGORIES[key]);\n\t}\n\ttoggleProjectPrivacy(evt, isInputChecked){\n\t\tlet checkedString = (isInputChecked) ? \"True\" : \"False\";\n\t\tthis.props.toggleProjectPrivacy(checkedString);\n\t}\n\ttoggleCosts(event, isInputChecked){\n\t\tthis.props.toggleCosts(isInputChecked);\n\t}\n\tstopProcess(){\n\t\tthis.props.stopProcess(this.props.pid);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>  \n\t\t\t\t<div className={'infoPanel'} style={{display: this.props.open ? 'block' : 'none'}}>\n\t\t\t\t\t<Paper zDepth={2} className=\"InfoPanelPaper\"> \n\t\t\t\t\t\t<Paper zDepth={2} className=\"titleBar\">\n\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? <span className={'projectNameEditBox'} title={this.props.project + \" (Read-only)\"}><FontAwesomeIcon style={{color: 'white', height: '16px', marginTop:'4px',marginBottom: '2px', marginRight: '5px'}} icon={faLock}/>{this.props.project}</span> : <span onClick={this.startEditingProjectName.bind(this)} className={'projectNameEditBox'} title=\"Click to rename the project\">{this.props.project}</span>}\n\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? null : <input id=\"projectName\" style={{position:'absolute', 'display': (this.state.editingProjectName) ? 'block' : 'none',left:'39px',top:'32px',width:'365px', border:'1px lightgray solid'}} className={'projectNameEditBox'} onKeyPress={this.onKeyPress.bind(this)} onBlur={this.onBlur.bind(this)}/>}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<Tabs contentContainerStyle={{'margin':'20px'}} className={'tabs'} value={this.props.activeTab}>\n\t\t\t\t\t\t\t<Tab label=\"Project\" onActive={this.props.project_tab_active} value=\"project\" disabled={(this.props.puEditing) ? true : false}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Description</div>\n\t\t\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? null : <Textarea minRows='5' id=\"descriptionEdit\" style={{'display': (this.state.editingDescription) ? 'block' : 'none'}} className={'descriptionEditBox'} onKeyPress={this.onKeyPress.bind(this)} onBlur={this.onBlur.bind(this)}/>}\n\t\t\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? <div className={'description'} title={this.props.metadata.DESCRIPTION} dangerouslySetInnerHTML={{__html: this.props.metadata.DESCRIPTION}}/> : <div className={'description'} onClick={this.startEditingDescription.bind(this)} style={{'display': (!this.state.editingDescription) ? 'block' : 'none'}} title=\"Click to edit\" dangerouslySetInnerHTML={{__html: this.props.metadata.DESCRIPTION}}/>}\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>Created</div>\n\t\t\t\t\t\t\t\t\t<div className={'createDate'}>{this.props.metadata.CREATEDATE}</div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>{(this.props.metadata.OLDVERSION) ? \"Imported project\" : \"\"}</div>\n\t\t\t\t\t\t\t\t\t<div style={{position:'absolute', top:'413px', display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Private\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\t\t\tchecked={this.props.metadata.PRIVATE}\n\t\t\t\t\t\t\t\t\t\t\tonCheck={this.toggleProjectPrivacy.bind(this)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Features\" onActive={this.props.features_tab_active} value=\"features\" disabled={(this.props.puEditing) ? true : false}>\n\t\t\t\t\t\t\t\t<SelectFeatures\n\t\t\t\t\t\t\t\t\tfeatures={this.props.features}\n\t\t\t\t\t\t\t\t\topenFeatureMenu={this.props.openFeatureMenu}\n\t\t\t\t\t\t\t\t\topenFeaturesDialog={this.props.openFeaturesDialog} \n\t\t\t\t\t\t\t\t\tmetadata={this.props.metadata}\n\t\t\t\t\t\t\t\t\tupdateFeature={this.props.updateFeature}\n\t\t\t\t\t\t\t\t\tleftmargin={'10px'}\n\t\t\t\t\t\t\t\t\tsimple={false}\n\t\t\t\t\t\t\t\t\tshowTargetButton={true}\n\t\t\t\t\t\t\t\t\topenTargetDialog={this.props.openTargetDialog}\n\t\t\t\t\t\t\t\t\tuserRole={this.props.userRole}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Planning units\" onActive={this.props.pu_tab_active} value=\"planning_units\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Planning grid</div>\n\t\t\t\t\t\t\t\t\t<div className={'description'}>{this.props.metadata.pu_alias}</div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>Protected areas</div>\n\t\t\t\t\t\t\t\t\t<SelectField \n\t\t\t\t\t\t\t\t\t\tfloatingLabelText={'Include'} \n\t\t\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\t\t\tunderlineShow={false}\n\t\t\t\t\t\t\t\t\t\tdisabled={(this.props.preprocessing)||(this.props.userRole === \"ReadOnly\")}\n\t\t\t\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tstyle={{marginTop:'-15px',width:'140px'}}\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.metadata.IUCN_CATEGORY} \n\t\t\t\t\t\t\t\t\t\tonChange={this.changeIucnCategory.bind(this)}\n\t\t\t\t\t\t\t\t\t\tchildren= {IUCN_CATEGORIES.map((item)=> {\n\t\t\t\t\t\t\t\t\t\t\treturn  <MenuItem \n\t\t\t\t\t\t\t\t\t\t\t\tvalue={item} \n\t\t\t\t\t\t\t\t\t\t\t\tkey={item} \n\t\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>; \n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t\t<div style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Statuses</div>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={(this.props.puEditing) ? faUnlock : faLock} onClick={this.startStopPuEditSession.bind(this)} title={(this.props.puEditing) ? \"Save\" : \"Click to edit\"} style={{cursor:'pointer', marginRight: '10px', color: 'rgba(255, 64, 129, 0.7)'}}/>\n\t\t\t\t\t\t\t\t\t\t<div className={'description'} style={{display: 'inline-block'}}>{(this.props.puEditing) ? \"Click on the map to change the status\" : \"Click to edit\"}</div>\n\t\t\t\t\t\t\t\t\t\t<div style={{display: (this.props.puEditing) ? \"block\" : \"none\"}}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={\"statusRow\"}><div className={\"statusSwatch\"} style={{ border: '1px rgba(63, 63, 191, 1) solid'}}></div><div className={\"puStatus\"}>Locked in the reserve system</div></div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={\"statusRow\"}><div className={\"statusSwatch\"} style={{ border: '1px rgba(191, 63, 63, 1) solid'}}></div><div className={\"puStatus\"}>Locked out of the reserve system</div></div>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Clear all manual edits\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.clearManualEdits.bind(this)} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle'} style={{display:'none'}}>Costs</div>\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tlabel=\"Show costs\"\n\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px',display:'none'}}\n\t\t\t\t\t\t\t\t\t\tonCheck={this.toggleCosts.bind(this)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>  \n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t</Tabs>     \n\t\t\t\t\t\t<Paper className={'lowerToolbar'}>\n\t\t\t\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faHome}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Zoom to project extent\"\n\t\t\t\t\t\t\t\t\tonClick={this.props.zoomToProjectBounds} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faShareAlt}/>} \n\t\t\t\t\t\t\t\t\ttitle={\"Get a shareable link to this project\"}\n\t\t\t\t\t\t\t\t\tonClick={this.props.getShareableLink} \n\t\t\t\t\t\t\t\t\tshow={(this.props.marxanServer.type ==='remote')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\t\t\t\ticon={<Settings style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Run Settings\"\n\t\t\t\t\t\t\t\t\tonClick={this.props.showRunSettingsDialog} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='toolbarSpacer'/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tlabel=\"Stop\" \n\t\t\t\t\t\t\t\t\ttitle=\"Click to stop the current run\"  \n\t\t\t\t\t\t\t\t\tshow={this.props.userRole !== \"ReadOnly\"}\n\t\t\t\t\t\t\t\t\tstyle={{marginLeft: '194px'}}\n\t\t\t\t\t\t\t\t\tonClick={this.stopProcess.bind(this)} \n\t\t\t\t\t\t\t\t\tdisabled={this.props.pid===0}  \n\t\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t\t/>  \n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tlabel=\"Run\" \n\t\t\t\t\t\t\t\t\ttitle=\"Click to run this project\"  \n\t\t\t\t\t\t\t\t\tshow={this.props.userRole !== \"ReadOnly\"}\n\t\t\t\t\t\t\t\t\tonClick={this.props.runMarxan} \n\t\t\t\t\t\t\t\t\tdisabled={this.props.preprocessing || (this.props.features.length === 0) || this.props.puEditing}  \n\t\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t\t/>  \n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default InfoPanel;\n","import React from \"react\";\nimport Slider from 'material-ui/Slider';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEye } from '@fortawesome/free-regular-svg-icons';\nimport { faEyeSlash } from '@fortawesome/free-regular-svg-icons';\n\nclass TransparencyControl extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshowSlider: false\n\t\t};\n\t\tthis.old_opacity = 0.5;\n\t}\n\tonChange(evt, newValue) {\n\t\tif (this.props.layer) {\n\t\t\t//set a local property to capture the old opacity\n\t\t\tthis.old_opacity = this.props.opacity;\n\t\t\tthis.props.changeOpacity(this.props.layer.id, newValue);\n\t\t}\n\t}\n\n\ttoggleLayer() {\n\t\tif (this.props.layer) {\n\t\t\t//see if the layer is currently visible\n\t\t\tif (this.props.opacity > 0) {\n\t\t\t\t//hide the layer\n\t\t\t\tthis.onChange(undefined, 0);\n\t\t\t} else {\n\t\t\t\t//show the layer\n\t\t\t\tthis.onChange(undefined, this.old_opacity);\n\t\t\t}\n\t\t}\n\t}\n\tmouseEnter(event) {\n\t\tthis.setState({\n\t\t\tshowSlider: true\n\t\t});\n\t}\n\n\tmouseLeave(event) {\n\t\tthis.setState({\n\t\t\tshowSlider: false\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div style={ this.props.style }>\n\t\t\t\t<div onMouseEnter={ this.mouseEnter.bind(this) } onMouseLeave={ this.mouseLeave.bind(this) } style={ { position: 'absolute', width: '132px', height: '23px' } } title={ \"Change transparency - click to toggle layer\" }>\n\t\t\t\t\t<FontAwesomeIcon icon={(this.props.opacity === 0 ) ? faEyeSlash : faEye } style={ { color: 'gainsboro' } } onClick={ this.toggleLayer.bind(this) } />\n\t\t\t\t\t<Slider value={ this.props.opacity } onChange={ this.onChange.bind(this) } style={ { display: (this.state.showSlider) ? \"inline-block\" : \"none\", width: '100px', position: 'absolute', top: '2px', left: '26px' } } sliderStyle={ { margin: '0px' } } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t);\n\t}\n}\n\nexport default TransparencyControl;\n","import * as React from 'react';\nimport TransparencyControl from './TransparencyControl';\nimport { getMaxNumberOfClasses } from './genericFunctions.js';\n\nclass Legend extends React.Component {\n\t getPlanningUnitsLegend(colorCode) {\n\t\tlet legendItems;\n\t\t//get the data value for the highest break in the data to see if we are viewing the sum solutions or an individual solution\n\t\tlet summed = (this.props.brew.breaks[this.props.brew.breaks.length - 1] === 1) ? false : true;\n\t\tif (summed) {\n\t\t\t//get the number of classes the user currently has selected\n\t\t\tlet numClasses = this.props.brew.getNumClasses();\n\t\t\t//get the maximum number of colors in this scheme\n\t\t\tlet colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n\t\t\t//get the color scheme\n\t\t\tlet colorScheme = this.props.brew.colorSchemes[colorCode];\n\t\t\t//get the number of colors to show as an array\n\t\t\tlet numClassesArray = (numClasses <= colorSchemeLength) ? Array.apply(null, {\n\t\t\t\tlength: numClasses\n\t\t\t}).map(Number.call, Number) : Array.apply(null, {\n\t\t\t\tlength: colorSchemeLength\n\t\t\t}).map(Number.call, Number);\n\t\t\tlet classesToShow = numClassesArray.length;\n\t\t\tlegendItems = numClassesArray.map((item) => {\n\t\t\t\t//see if the data is a range - if the difference in the number of solutions is only 1, then it is not a range\n\t\t\t\tlet range = (this.props.brew.breaks[item + 1] - this.props.brew.breaks[item] > 1) ? true : false;\n\t\t\t\tlet suffix = (this.props.brew.breaks[item + 1] === 1) ? \" solution\" : \" solutions\";\n\t\t\t\tlet legendLabel = (range) ? (this.props.brew.breaks[item] + 1) + ' - ' + this.props.brew.breaks[item + 1] + suffix : this.props.brew.breaks[item + 1] + suffix;\n\t\t\t\treturn <div key={ item }>\n\t\t\t\t\t <div key={ 'swatch' + item } style={ { backgroundColor: colorScheme[classesToShow][item], width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }>\n\t\t\t\t\t </div>\n\t\t\t\t\t <div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '7px', fontSize: '12px' } } key={ 'label' + item }>\n\t\t\t\t\t\t { legendLabel }\n\t\t\t\t\t </div>\n\t\t\t\t </div>;\n\t\t\t});\n\t\t} else {\n\t\t\tlegendItems = <div>\n\t\t\t\t<div style={ { backgroundColor: 'rgba(255, 0, 136,1)', width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }>\n\t\t\t\t</div>\n\t\t\t\t<div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '3px', fontSize: '12px' } }>\n\t\t\t\t\tProposed addition to network\n\t\t\t\t</div>\n\t\t\t</div>;\n\t\t}\n\t\tlegendItems = <div>\n\t\t\t<div className={ \"tabTitle\" }>Planning units</div>\n\t\t\t<div>{  legendItems }</div>\n\t\t\t<TransparencyControl layer={ this.props.resultsLayer } changeOpacity={this.props.changeOpacity} opacity={this.props.results_layer_opacity}/>\n\t\t\t</div>;\n\t\treturn  legendItems;\n\t}\n\t\n\tgetProtectedAreasLegend(){\n\t\tlet legend_items = (this.props.pa_layer_visible) ?\n\t\t<div>\n\t\t\t<div className={ \"tabTitle\" }>Protected areas</div>\n\t\t\t<div key={'marine'} style={ { backgroundColor: 'rgba(63,127,191)', width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }></div>\n\t\t\t<div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '7px', fontSize: '12px' } } key={ 'label_marine'}>Marine</div>\n\t\t\t<div>\n\t\t\t\t<div key={'terrestrial'} style={ { backgroundColor: 'rgba(99,148,69)', width: '12px', height: '16px', border: '1px lightgray solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }></div>\n\t\t\t\t<div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '7px', fontSize: '12px' } } key={ 'label_terrestrial'}>Terrestrial</div>\n\t\t\t</div>\n\t\t\t<TransparencyControl layer={ this.props.wdpaLayer } changeOpacity={this.props.changeOpacity} opacity={this.props.wdpa_layer_opacity}/>\n\t\t</div>\n\t\t:\n\t\tnull;\n\t\treturn legend_items;\n\t}\n\t\n\trender() {\n\t\tlet planning_units_legend_items = (this.props.brew && this.props.brew.breaks && this.props.brew.colorCode) ? this.getPlanningUnitsLegend(this.props.brew.colorCode) : <div/> ;\n\t\tlet protected_areas_legend_items = this.getProtectedAreasLegend();\n\t\treturn <div>\n\t\t\t<div>{planning_units_legend_items}</div>\n\t\t\t<div style={{marginTop:'32px'}}>{protected_areas_legend_items}</div>\n\t\t</div>;\n\t}\n}\n\nexport default Legend;\n","import * as React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faArrowAltCircleRight } from '@fortawesome/free-solid-svg-icons';\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nclass Log extends React.Component {\n\t\n\trender() {\n    \treturn (\n    \t    <div className={this.props.className}>\n    \t    \t<Sync className='spin' style={{display: ((this.props.message.status === 'RunningQuery')||(this.props.message.status === 'Downloading')) ? 'inline' : 'none', height: '16px', width: '16px', verticalAlign: 'sub', color: 'rgb(255, 64, 129)', marginRight:'6px'}} title={'Preprocessing..'}/>\n    \t    \t<FontAwesomeIcon icon={faCheckCircle} style={{display: ((this.props.message.status === 'Finished')&&(!this.props.message.hasOwnProperty('error'))) ? 'inline' : 'none', color:'green', marginRight:'6px'}} title={'Preprocessing completed'}/>\n    \t    \t<FontAwesomeIcon icon={faArrowAltCircleRight} style={{display: (this.props.message.status === 'UploadComplete') ? 'inline' : 'none', color:'green', marginRight:'6px'}} title={'Upload complete'}/>\n    \t        <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display:(this.props.message.hasOwnProperty('error') ? 'inline' : 'none'), marginRight:'6px'}} title={this.props.message.info}/>\n    \t        <div style={{display: 'inline'}} dangerouslySetInnerHTML={{__html: this.props.message.info}}/>\n    \t    </div>\n    \t);\n\t}\n}\n\nexport default Log;\n","import * as React from 'react';\nimport LogItem from './LogItem';\n\nclass Log extends React.Component {\n\trender() {\n\t\tlet children = this.props.messages.map((message, index) => {\n\t\t\tlet className = '';\n\t\t\t//message cleaning and formatting\n\t\t\tswitch (message.status) {\n\t\t\t\tcase 'RunningMarxan': //from marxan runs - remove all the double line endings\n\t\t\t\t\tObject.assign(message, { info: message.info.replace(/(\\n\\n {2}Init)/gm, \"\\n  Init\").replace(/(\\n\\n {2}ThermalAnnealing)/gm, \"\\n  ThermalAnnealing\").replace(/(\\n\\n {2}Iterative)/gm, \"\\n  Iterative\").replace(/(\\n\\n {2}Best)/gm, \"\\n  Best\") });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Started':\n\t\t\t\tcase 'Uploading':\n\t\t\t\t\tclassName = (index === 0) ? 'logItem logFirstStart' : 'logItem logStart';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Finished':\n\t\t\t\tcase 'UploadComplete':\n\t\t\t\t\tclassName = 'logItem logFinish';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tclassName = 'logItem logMessage';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//if there is an error, then set that as the message\n\t\t\tif (message.hasOwnProperty('error')) Object.assign(message, { info: message.error });\n\t\t\treturn <LogItem message={message} key={index} preprocessing={this.props.preprocessing} className={className}/>;\n\t\t});\n\t\treturn (\n\t\t\t<div id=\"log\" onMouseEnter={this.props.mouseEnter} onMouseLeave={this.props.mouseLeave}>{children}</div>\n\t\t);\n\t}\n}\n\nexport default Log;\n","import React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport ReactTable from \"react-table\";\nimport Paper from 'material-ui/Paper';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport Legend from './Legend';\nimport Log from './Log'; \nimport Settings from 'material-ui/svg-icons/action/settings';\nimport Clipboard from 'material-ui/svg-icons/action/assignment';\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nlet runtime=0;\n\nclass ResultsPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { showClipboard: false, selectedSolution: undefined,runtimeStr:'00:00s' };\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t//scroll the log div to the bottom\n\t\t// if (this.props.messages.length !== prevProps.messages.length) {\n\t\t// \tvar objDiv = document.getElementById(\"log\");\n\t\t// \tif (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n\t\t// }\n\t\t\tvar objDiv = document.getElementById(\"log\");\n\t\t\tif (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n\t\tif (this.props.solutions !== prevProps.solutions) {\n\t\t\tthis.resetSolution();//unselect a solution\n\t\t}\n\t\tif (this.props && this.props.preprocessing && prevProps && !prevProps.preprocessing) this.startTimer();\n\t\tif (prevProps && prevProps.preprocessing && this.props && !this.props.preprocessing) this.stopTimer();\n\t}\n\tstr_pad_left(string,pad,length) {\n\t    return (new Array(length+1).join(pad)+string).slice(-length);\n\t}\n\tstartTimer(){\n\t\truntime = 0;\n\t    this.timer = setInterval(() => {\n\t    \tvar minutes = Math.floor(runtime / 60);\n\t    \tvar seconds = runtime - (minutes * 60);\n\t\t\tvar finalTime = this.str_pad_left(minutes,'0',2)+':'+this.str_pad_left(seconds,'0',2);\n\t\t\tthis.setState({runtimeStr: finalTime });\n\t\t\truntime = runtime + 1;\n\t    }, 1000);\n\t}\n\tstopTimer(){\n    //clear the timer\n    clearInterval(this.timer);\n    this.timer = null;\n\t}\n\tloadSolution(solution) { //loads the solution using the projects owner\n\t\tthis.props.loadSolution(solution, this.props.owner);\n\t}\n\n\tmouseEnter(event) {\n\t\tthis.setState({ showClipboard: true });\n\t}\n\n\tmouseLeave(event) {\n\t\tif (event.relatedTarget.id !== 'buttonsDiv') this.setState({ showClipboard: false });\n\t}\n\n\tselectText(node) {\n\t\tnode = document.getElementById(node);\n\t\tif (document.body.createTextRange) {\n\t\t\tconst range = document.body.createTextRange();\n\t\t\trange.moveToElementText(node);\n\t\t\trange.select();\n\t\t}\n\t\telse if (window.getSelection) {\n\t\t\tconst selection = window.getSelection();\n\t\t\tconst range = document.createRange();\n\t\t\trange.selectNodeContents(node);\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t}\n\t\telse {\n\t\t\tconsole.warn(\"Could not select text in node: Unsupported browser.\");\n\t\t}\n\t}\n\n\tcopyLog(evt) {\n\t\tthis.selectText(\"log\");\n\t\tevt.target.focus();\n\t\tdocument.execCommand('copy');\n\t}\n\n\t//resets the currently selected solution\n\tresetSolution(){\n\t\tif (this.state.selectedSolution) this.changeSolution(undefined, undefined); \n\t}\n\t\n\t//fired in the onClick event handler of the react table\n\tchangeSolution(event, solution) {\n\t\tthis.setState({ selectedSolution: solution });\n\t\tif (solution) this.loadSolution(solution.Run_Number);\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{width:'300px',height:'400px', position:'absolute',right:'140px','display': (this.props.open ? 'block' : 'none')}}>\n\t\t\t\t\t<Paper zDepth={2} className='ResultsPanelPaper'>\n\t\t\t\t\t\t<div className=\"resultsTitle\">Results</div>\n\t\t\t\t\t\t<Tabs contentContainerStyle={{'margin':'20px'}} className={'resultsTabs'} value={this.props.activeResultsTab} id='resultsTabs'>\n\t\t\t\t\t\t\t<Tab label=\"Legend\" value=\"legend\" onActive={this.props.legend_tab_active} >\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Legend\n\t\t\t\t\t\t\t\t\t\tbrew={this.props.brew}\n\t\t\t\t\t\t\t\t\t\tresultsLayer={ this.props.resultsLayer }\n\t\t\t\t\t\t\t\t\t\twdpaLayer={ this.props.wdpaLayer }\n\t\t\t\t\t\t\t\t\t\tpa_layer_visible={this.props.pa_layer_visible}\n\t\t\t\t\t\t\t\t\t\tchangeOpacity={this.props.changeOpacity}\n\t\t\t\t\t\t\t\t\t\tresults_layer_opacity={this.props.results_layer_opacity}\n\t\t\t\t\t\t\t\t\t\twdpa_layer_opacity={this.props.wdpa_layer_opacity}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\ticon={<Settings style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Legend Settings\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.openClassificationDialog} \n\t\t\t\t\t\t\t\t\t\tstyle={{ top:'447px', position:'absolute', marginLeft:'-7px'}}\n\t\t\t\t\t\t\t\t\t\tshow={(this.props.resultsLayer !== undefined)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Solutions\" value=\"solutions\" onActive={this.props.solutions_tab_active} >\n\t\t\t\t\t\t\t\t<div id=\"solutionsPanel\" style={{'display': (!this.props.processing ? 'block' : 'none')}}>\n\t\t\t\t\t\t\t\t{(this.props.solutions&&this.props.solutions.length>0) ? \n\t\t\t\t\t\t\t\t\t<ReactTable\n\t\t\t\t\t\t\t\t\t\tthisRef={this}\n\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column, instance) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn { \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.thisRef.changeSolution(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: { \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.Run_Number === (state.thisRef.state.selectedSolution&&state.thisRef.state.selectedSolution.Run_Number)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Click to show on the map'\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName={'solutions_infoTable -highlight'}\n\t\t\t\t\t\t\t\t\t\tshowPagination={false}\n\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\tpageSize={this.props.solutions.length} \n\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\tdata={this.props.solutions}\n\t\t\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Run', \n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Run_Number',\n\t\t\t\t\t\t\t\t\t\t\t width:40,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}                             \n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Score',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Score',\n\t\t\t\t\t\t\t\t\t\t\t width:80,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Cost',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Cost' ,\n\t\t\t\t\t\t\t\t\t\t\t width:80,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Planning Units', \n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Planning_Units' ,\n\t\t\t\t\t\t\t\t\t\t\t width:50,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'} \n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Missing Values',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Missing_Values' ,\n\t\t\t\t\t\t\t\t\t\t\t width:105,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Log\" value=\"log\" onActive={this.props.log_tab_active} style={{ display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t<Log messages={this.props.messages} id=\"log\" mouseEnter={this.mouseEnter.bind(this)} mouseLeave={this.mouseLeave.bind(this)} preprocessing={this.props.preprocessing}/>\n\t\t\t\t\t\t\t\t<div className={\"runtime\"} style={{'display': (this.props.preprocessing ? 'block' : 'none')}}>Runtime: {this.state.runtimeStr}s</div>\n\t\t\t\t\t\t\t\t<div id='buttonsDiv' style={{position:'absolute',top:'430px',right:'16px',padding:'10px'}}>\n\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\ticon={<Clipboard style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Copy to clipboard\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.copyLog.bind(this)} \n\t\t\t\t\t\t\t\t\t\tshow={this.state.showClipboard}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Clear log\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.clearLog.bind(this)} \n\t\t\t\t\t\t\t\t\t\tshow={this.state.showClipboard}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t</Tabs>     \n\t\t\t\t\t\t<div className=\"processingDiv\" style={{display:(this.props.preprocessing) ? 'block' : 'none'}} title=\"Processing..\">\n\t\t\t\t\t\t\t<Paper zDepth={2}>\n\t\t\t\t\t\t\t\t<div className=\"processingText\"></div>\n\t\t\t\t\t\t\t\t<Sync className='spin processingSpin' style={{color: 'rgb(255, 64, 129)'}}/>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ResultsPanel;","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\nimport {isNumber, isValidTargetValue} from './genericFunctions.js'; \n\nclass FeatureInfoDialog extends React.Component {\n\tonKeyPress(key, e) {\n\t\tif (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n\t\t\t//update the feature\n\t\t\tthis.updateFeatureValue(key,e);\n\t\t\t//closes this window\n\t\t\tthis.props.onOk();\n\t\t}\n\t}\n\tgetHTML(value, title = ''){\n\t\treturn <div title={(title !== '') ? title : value}>{value}</div>;\n\t}\n\t//adds Kms to the area values and rounds to 1 decimal place \n\tgetAreaHTML(props){\n\t\t//set the font color to red if the area protected is less than the target area\n\t\tlet color = (this.props.feature.protected_area < this.props.feature.target_area) && (props.row.key === 'Area protected') ? \"red\" : \"rgba(0, 0, 0, 0.6)\";\n\t\t//rounded to 1 dp\n\t\tlet roundedText = ((Number(props.row.value/1000000).toFixed(1) === \"0.0\") && (props.row.value > 0)) ? \" (approx.)\" : \"\";\n\t\tlet html = <div title={props.row.value/1000000 + ' Km2'} style={{color:color}}>{String(Number(props.row.value/1000000).toFixed(1)).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")} Km<span style={{verticalAlign: 'super', fontSize: 'smaller'}}>2</span>{roundedText}</div>;\n\t\treturn html;   \n\t}\n\trenderKeyCell(props){\n\t\treturn this.getHTML(props.row.key, props.original.hint);\n\t}\n\t//called when the user moves away from an editable property, e.g. target percent or spf\n\tupdateFeatureValue(key, evt){\n\t\tvar value = evt.currentTarget.innerHTML;\n\t\tif (((key === \"target_value\") && (isValidTargetValue(value))) || ((key === \"spf\") && (isNumber(value)))) {\n\t\t\tvar obj = {};\n\t\t\tobj[key] = value;\n\t\t\tthis.props.updateFeature(this.props.feature, obj);      \n\t\t}else{\n\t\t\talert(\"Invalid value\");\n\t\t}\n\t}\n\trenderValueCell(props){\n\t\tlet html;\n\t\tswitch (props.row.key) {\n\t\t\tcase 'ID':\n\t\t\tcase 'Alias':\n\t\t\tcase 'Feature class name':\n\t\t\t\thtml = this.getHTML(props.row.value, props.original.hint);\n\t\t\t\tbreak;\n\t\t\tcase 'Description':\n\t\t\t\thtml = this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Creation date': \n\t\t\t\thtml = this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Mapbox ID':\n\t\t\t\thtml = ((props.row.value === \"\")||(props.row.value === null)) ? this.getHTML(\"Not available\", \"The feature was not uploaded to Mapbox\") : this.getHTML(props.row.value, \"The feature was uploaded to Mapbox with this identifier\");\n\t\t\t\tbreak;\n\t\t\tcase 'Total area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Total areas are not available for imported projects\") : this.getAreaHTML(props, props.original.hint);\n\t\t\t\tbreak;\n\t\t\tcase 'Target percent':\n\t\t\t\thtml = (this.props.userRole === \"ReadOnly\") ? <div>{props.row.value}</div> : <div contentEditable suppressContentEditableWarning title=\"Click to edit\" onBlur={this.updateFeatureValue.bind(this, \"target_value\")} onKeyPress={this.onKeyPress.bind(this, \"target_value\")}>{props.row.value}</div>;\n\t\t\t\tbreak;\n\t\t\tcase 'Species Penalty Factor':\n\t\t\t\thtml = (this.props.userRole === \"ReadOnly\") ? <div>{props.row.value}</div> : <div contentEditable suppressContentEditableWarning title=\"Click to edit\" onBlur={this.updateFeatureValue.bind(this, \"spf\")} onKeyPress={this.onKeyPress.bind(this, \"spf\")}>{props.row.value}</div>;\n\t\t\t\tbreak;\n\t\t\tcase 'Preprocessed':\n\t\t\t\thtml = (props.row.value) ? this.getHTML(\"Yes\", \"The feature has been intersected with the planning units\") : this.getHTML(\"No\", \"The feature has not yet been intersected with the planning units\");\n\t\t\t\tbreak;\n\t\t\tcase 'Planning grid area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tcase 'Planning unit count':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\") : this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Target area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tcase 'Area protected':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn html;\n\t} \n\t\trender(){\n\t\t\tif (this.props.feature){\n\t\t\t\tlet data =[];\n\t\t\t\t//iterate through the feature properties and set the data to bind to the table - if it is a feature from the old version of marxan then showForOld must be true for that property to be shown\n\t\t\t\tthis.props.FEATURE_PROPERTIES.forEach((item)=>{\n\t\t\t\t\tif ((!this.props.feature.old_version && item.showForNew) || (this.props.feature.old_version && item.showForOld)){\n\t\t\t\t\t\tdata.push({key: item.key, value: this.props.feature[item.name], hint: item.hint});\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog title=\"Properties\" \n\t\t\t\t\t\t{...this.props}  \n\t\t\t\t\t\tcontentWidth={380}\n\t\t\t\t\t\thelpLink={\"docs_user.html#feature-properties-window\"}\n\t\t\t\t\t\toffsetX={135}\n\t\t\t\t\t\toffsetY={250}\n\t\t\t\t\t\tchildren={\n\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\tclassName={(this.props.feature.old_version) ? 'infoTableOldVersion' : 'infoTable'}\n\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\tpageSize={data.length}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t Header: 'Key', \n\t\t\t\t\t\t\t\t\t accessor: 'key',\n\t\t\t\t\t\t\t\t\t width:150,\n\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t\t\t Cell: props => this.renderKeyCell(props)\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t Header: 'Value',\n\t\t\t\t\t\t\t\t\t accessor: 'value',\n\t\t\t\t\t\t\t\t\t width:185,\n\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t\t\t Cell: props => this.renderValueCell(props)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t key=\"k9\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>);\n\t\t\t}else{\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default FeatureInfoDialog;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport Clone from 'material-ui/svg-icons/content/content-copy';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\n\nclass ProjectsDialog extends React.Component { \n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = { selectedProject: undefined };\n\t\t}\n\t\t_delete() {\n\t\t\tthis.props.deleteProject(this.state.selectedProject.user, this.state.selectedProject.name);\n\t\t\tthis.setState({ selectedProject: false });\n\t\t}\n\t\tload() {\n\t\t\tif ((this.props.oldVersion === true) && (this.state.selectedProject.oldVersion === false)) {\n\t\t\t\t//get all the features again otherwise the allFeatures state will be bound to the old versions features\n\t\t\t\tthis.props.getAllFeatures().then(function() {\n\t\t\t\t\tthis.loadAndClose();\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.loadAndClose();\n\t\t\t}\n\t\t}\n\t\tloadAndClose() {\n\t\t\t//load the project\n\t\t\tthis.props.loadProject(this.state.selectedProject.name, this.state.selectedProject.user);\n\t\t\tthis.closeDialog();\n\t\t}\n\t\t_new() {\n\t\t\t//get all the features again otherwise the allFeatures state may be bound to an old version of marxans features\n\t\t\tthis.props.getAllFeatures().then(function() {\n\t\t\t\tthis.props.openNewProjectDialog();\n\t\t\t\tthis.closeDialog();\n\t\t\t}.bind(this));\n\t\t}\n\t\tcloneProject() {\n\t\t\tthis.props.cloneProject(this.state.selectedProject.user, this.state.selectedProject.name);\n\t\t}\n\t\topenImportProjectDialog() {\n\t\t\tthis.props.openImportProjectDialog();\n\t\t\tthis.closeDialog();\n\t\t}\n\t\tchangeProject(event, project) {\n\t\t\tthis.setState({ selectedProject: project });\n\t\t}\n\t\tcloseDialog() {\n\t\t\tthis.setState({ selectedProject: undefined });\n\t\t\tthis.props.onOk(); \n\t\t}\n\t\tsortDate(a, b, desc){\n\t\t\treturn (new Date(a.slice(6,8),a.slice(3,5)-1,a.slice(0,2),a.slice(9,11),a.slice(12,14),a.slice(15,17)) > new Date(b.slice(6,8),b.slice(3,5)-1,b.slice(0,2),b.slice(9,11),b.slice(12,14),b.slice(15,17))) ? 1 : -1;\n\t\t}\n\t\trenderTitle(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;        \n\t\t}\n\t\trenderName(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.name}>{row.original.name}</div>;        \n\t\t}\n\t\trender() {\n\t\t\t\tlet tableColumns = [];\n\t\t\t\tif (['Admin', 'ReadOnly'].includes(this.props.userRole)) {\n\t\t\t\t\ttableColumns = [{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, { Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, { Header: 'Description', accessor: 'description', width: 315, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, { Header: 'Date', accessor: 'createdate', width: 115, headerStyle: { 'textAlign': 'left' }, sortMethod: this.sortDate.bind(this)}];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttableColumns = [{ Header: 'Name', accessor: 'name', width: 170, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, { Header: 'Description', accessor: 'description', width: 330, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, { Header: 'Date', accessor: 'createdate', width: 220, headerStyle: { 'textAlign': 'left' }, sortMethod: this.sortDate.bind(this) }];\n\t\t\t\t}\n\t\t\t\tif (this.props.projects) {\n\t\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\t\tokLabel={(this.props.userRole === \"ReadOnly\") ? \"Open (Read-only)\" : \"Open\"}\n\t\t\t\t\tonOk={this.load.bind(this)}\n\t\t\t\t\tonCancel={this.closeDialog.bind(this)}\n\t\t\t\t\tokDisabled={!this.state.selectedProject}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\thelpLink={\"docs_user.html#the-projects-window\"}\n\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\ttitle=\"Projects\"  \n\t\t\t\t\tchildren={\n\t\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t<div style={{marginBottom:'5px'}}>There are a total of {this.props.projects.length} projects:</div>\n\t\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\t\t  pageSize={ this.props.projects.length }\n\t\t\t\t\t\t\t\t\t\tclassName={'projectsReactTable noselect'}\n\t\t\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\tdata={this.props.projects}\n\t\t\t\t\t\t\t\t\t\tthisRef={this} \n\t\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: ((rowInfo.original.user === (state.thisRef.state.selectedProject&&state.thisRef.state.selectedProject.user))&&(rowInfo.original.name === (state.thisRef.state.selectedProject&&state.thisRef.state.selectedProject.name))) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.thisRef.changeProject(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t  <div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createProject\")}\n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faPlusCircle} />} \n\t\t\t\t\t\t\t\t\ttitle=\"New project\" \n\t\t\t\t\t\t\t\t\tonClick={this._new.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"New\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createImportProject\")}\n\t\t\t\t\t\t\t\t\ticon={<Import style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Import an existing Marxan project from the local machine\"\n\t\t\t\t\t\t\t\t\tonClick={this.openImportProjectDialog.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"Import\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"cloneProject\")}\n\t\t\t\t\t\t\t\t\ticon={<Clone style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Duplicate project\" \n\t\t\t\t\t\t\t\t\tonClick={this.cloneProject.bind(this)} \n\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedProject || this.props.loading}\n\t\t\t\t\t\t\t\t\tlabel={\"Duplicate\"}\n\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"deleteProject\")}\n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Delete project\" \n\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedProject || this.props.loading}\n\t\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t} \n\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default ProjectsDialog;\n","import * as React from 'react';\nimport TextField from 'material-ui/TextField';\n\nclass Metadata extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props); \n\t\tthis.state = {\n\t\t\tvalidName: undefined\n\t\t};\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.props.setName(newValue);\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.props.setDescription(newValue);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{marginBottom:this.props.paddingBottom}}> \n\t\t\t\t\t<TextField errorText={this.state.validName === false ? 'Required field' : ''} value={this.props.name} onChange={this.changeName.bind(this)} floatingLabelText=\"Enter a name for the project\" floatingLabelFixed={true} />\n\t\t\t\t\t<TextField value={this.props.description} onChange={this.changeDescription.bind(this)} multiLine={true} rows={3} floatingLabelText=\"Enter a description for the project\" floatingLabelFixed={true} />\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Metadata;\n","import * as React from 'react';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\n\n//this is a generic component for selecting and dynamically displaying a layer from mapbox on a mapbox map\n//the following are property requirements:\n// map:         the mapbox map where the layer will be displayed\n// mapboxUser   the mapbox user id where the tilesets are stored, e.g. blished\n// items:       the items that you want to display in the select box. these must contain the following properties: \n//  alias               - a string for the text that will be shown in the select box\n//  feature_class_name  - the actual value that determines which item is selected - this should be the tileset name, e.g. pupng_terrestrial_hexagon_50\n//  envelope            - a well-known-text representation of the bounds of the mapbox layer, e.g. \"POLYGON((60.4758290002083 29.3772500001874,60.4758290002083 38.4906960004201,74.8898619998315 38.4906960004201,74.8898619998315 29.3772500001874,60.4758290002083 29.3772500001874))\" (optional)\n// selectedValue the value that is selected (controlled from the controlling component)\n//prerequisitives:\n// request library\n\nclass SelectFieldMapboxLayer extends React.Component {\n\tchangeItem(event, newValue) {\n\t\t//get the selected item\n\t\tlet item = this.props.items[newValue];\n\t\t//zoom to the layer\n\t\tif (item.envelope !== null){\n\t\t\tvar envelope = this.getLatLngLikeFromWKT(item.envelope);\n\t\t\tthis.props.map.fitBounds(envelope, { easing: function(num) { return 1; } });\n\t\t}\n\t\t// this.props.map.setPitch(60);\n\t\t//add the layer to the map\n\t\tthis.addLayerToMap(item.feature_class_name);\n\t\t//update the state in the owner\n\t\tthis.props.changeItem(item.feature_class_name);\n\t}\n\n\tgetLatLngLikeFromWKT(wkt) {\n\t\tvar parse = require('wellknown');\n\t\tlet envelope = parse(wkt).coordinates[0];\n\t\treturn [\n\t\t\t[envelope[0][0], envelope[0][1]],\n\t\t\t[envelope[2][0], envelope[2][1]]\n\t\t];\n\t}\n\n\t//check the layer exists\n\taddLayerToMap(mapboxlayername) {\n\t\tthis.mapboxlayername = mapboxlayername;\n\t\tvar request = require('request');\n\t\trequest('https://api.mapbox.com/v4/' + this.props.mapboxUser + '.' + mapboxlayername + '.json?access_token=' + window.MBAT_PUBLIC + '&secure', this.parseUrlExists.bind(this));\n\t}\n\n\tparseUrlExists(err, res) {\n\t\tlet exists = (res && res.statusCode === 200) ? true : false;\n\t\tif (exists) {\n\t\t\t//remove the previous planning unit layer\n\t\t\tlet previousLayerId = this.props.map.getStyle().layers[this.props.map.getStyle().layers.length - 1].id;\n\t\t\t//check it is a planning unit layer\n\t\t\tif (previousLayerId.substr(0, 3) === \"pu_\") {\n\t\t\t\tthis.props.map.removeLayer(this.props.map.getStyle().layers[this.props.map.getStyle().layers.length - 1].id);\n\t\t\t}\n\t\t\t//remove the source if it already exists\n\t\t\tif (this.props.map.getSource(this.props.mapboxUser)) {\n\t\t\t\tthis.props.map.removeSource(this.props.mapboxUser);\n\t\t\t}\n\t\t\t//add the source for this layer\n\t\t\tthis.props.map.addSource('blishten', {\n\t\t\t\ttype: 'vector',\n\t\t\t\turl: \"mapbox://\" + this.props.mapboxUser + \".\" + this.mapboxlayername\n\t\t\t});\n\t\t\t//add the layer\n\t\t\tthis.props.map.addLayer({\n\t\t\t\t'id': this.mapboxlayername,\n\t\t\t\t'type': \"fill\",\n\t\t\t\t'source': this.props.mapboxUser,\n\t\t\t\t'source-layer': this.mapboxlayername, \n\t\t\t\t'paint': {\n\t\t\t\t\t'fill-color': '#f08',\n\t\t\t\t\t'fill-opacity': 0.4\n\t\t\t\t}\n\t\t\t});\n\t\t} \n\t\telse {\n\t\t\tconsole.log(\"The MapBox layer does not exist\"); \n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<SelectField \n\t\t\t\tonChange={this.changeItem.bind(this)} \n\t\t\t\tvalue={this.props.selectedValue} \n\t\t\t\tmenuItemStyle={{fontSize:'12px'}} \n\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\tfloatingLabelText=\"Select the planning units\" \n\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\tstyle={{width:this.props.width, verticalAlign:'middle'}}>\n\t\t\t\t\t{this.props.items.map((item)=>{\n\t\t\t\t\treturn <MenuItem \n\t\t\t\t\tvalue={item.feature_class_name} \n\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\tkey={item.feature_class_name}\n\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t/>;\n\t\t\t\t\t})}\n\t\t\t\t</SelectField>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default SelectFieldMapboxLayer;\n","import * as React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport SelectFieldMapboxLayer from './SelectFieldMapboxLayer';\n\nclass PlanningUnitsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { planning_unit_grids_received: false };\n\t} \n\tcomponentDidMount() {\n\t\tlet map = new mapboxgl.Map({\n\t\t\tcontainer: this.mapContainer,\n\t\t\tstyle: 'mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd', //north star + marine PAs in pacific\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 2\n\t\t});\n\t\tthis.setState({map: map});\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" style={{width:'352px',height:'300px', marginTop: '50px',marginLeft: '24px'}}/>\n\t\t\t\t\t\t<div style={{position: 'absolute', top:'380px', verticalAlign: 'middle'}}>\n\t\t\t\t\t\t\t<SelectFieldMapboxLayer \n\t\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\tselectedValue={this.props.pu} \n\t\t\t\t\t\t\t\tmap={this.state.map} \n\t\t\t\t\t\t\t\tmapboxUser={'blishten'} \n\t\t\t\t\t\t\t\titems={this.props.planning_unit_grids} \n\t\t\t\t\t\t\t\tchangeItem={this.props.changeItem} \n\t\t\t\t\t\t\t\tdisabled={!this.state.planning_unit_grids_received}\n\t\t\t\t\t\t\t\twidth={'352px'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default PlanningUnitsDialog;\n","import React from 'react';\nimport { List, ListItem} from 'material-ui/List';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport { grey400 } from 'material-ui/styles/colors';\nimport IconButton from 'material-ui/IconButton';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport ToolbarButton from './ToolbarButton';\n\nclass SelectCostFeatures extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { selectedFeature: undefined };\n\t}\n\tcomponentWillMount() {\n\t\tListItem.defaultProps.disableTouchRipple = true;\n\t\tListItem.defaultProps.disableFocusRipple = true;\n\t}\n\tchangeFeature(event, feature) {\n\t\tthis.setState({ selectedFeature: feature });\n\t} \n\tclickListItem(event) {\n\t}\n\trender() {\n\t\tconst iconButtonElement = (\n\t\t\t<IconButton\n\t\t\t\ttouch={true}\n\t\t\t\ttooltipPosition=\"bottom-left\"\n\t\t\t>\n\t\t\t<MoreVertIcon color={grey400} />\n\t\t\t</IconButton>\n\t\t);\n\n\t\tconst rightIconMenu = (\n\t\t\t<IconMenu iconButtonElement={iconButtonElement}>\n\t\t\t<MenuItem>Info</MenuItem>\n\t\t\t<MenuItem title=\"Not implemented\">View</MenuItem>\n\t\t\t<MenuItem title=\"Not implemented\">Prioritise</MenuItem>\n\t\t</IconMenu>\n\t\t);\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>\n\t\t\t\t\t<div>Select the costs</div>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t{this.props.selectedCosts.map((item)=>{\n\t\t\t\t\t\t\treturn <ListItem \n\t\t\t\t\t\t\t  disableFocusRipple={true}\n\t\t\t\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\t\t\t\tsecondaryText={item.description} \n\t\t\t\t\t\t\t\tkey={item.id} \n\t\t\t\t\t\t\t\tvalue={item.alias}\n\t\t\t\t\t\t\t\trightIconButton={rightIconMenu}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</List>\n\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\tlabel=\"Select\" \n\t\t\t\t\t\tonClick={this.props.openCostsDialog}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default SelectCostFeatures;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\nimport { faCheckCircle } from '@fortawesome/free-regular-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\nimport Popover from 'material-ui/Popover';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\n//import gbif_logo from './gbif.jpg';\n//import FontIcon from 'material-ui/FontIcon';\n// add this to the gbif item: leftIcon={<FontIcon className=\"gbifLogo\"/> \n\nclass FeaturesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFeature: undefined,\n      previousRow: undefined\n    };\n  }\n  _delete() {\n    this.props.deleteFeature(this.state.selectedFeature);\n    this.setState({selectedFeature: undefined});\n  }\n  _new(event) {\n    this.setState({anchorEl: event.currentTarget});\n    this.props.showNewFeaturesDialogPopover();\n  }\n  _openImportFeaturesDialog() {\n    //close the dialog\n    this.props.onCancel();\n    //show the new feature dialog\n    this.props.openImportFeaturesDialog(\"import\");\n  }\n  _newByDigitising() {\n    //hide this dialog\n    this.onOk();\n    //show the drawing controls\n    this.props.initialiseDigitising();\n  }\n  clickFeature(event, rowInfo) {\n    //if adding or removing features from a project\n    if (this.props.addingRemovingFeatures) {\n      //if the shift key is pressed then select/deselect the features in between\n      if (event.shiftKey){\n        //get the selected feature ids\n        let selectedIds = this.getFeaturesBetweenRows(this.state.previousRow, rowInfo);\n        //update the selected ids\n        this.props.selectFeatures(selectedIds);\n      }else{ //single feature has been clicked\n        this.props.clickFeature(rowInfo.original, event.shiftKey, this.state.previousRow);\n      }\n      this.setState({previousRow: rowInfo});\n    } else {\n      this.setState({selectedFeature: rowInfo.original});\n    }\n  }\n  \n  //gets the features ids between the two passed rows and toggles their selection state\n  getFeaturesBetweenRows(previousRow, thisRow){\n    let selectedIds = this.props.selectedFeatureIds;\n    let idx1 = (previousRow.index < thisRow.index) ? previousRow.index + 1 : thisRow.index;\n    let idx2 = (previousRow.index < thisRow.index) ? thisRow.index + 1 : previousRow.index;\n    //get the features between the two indices\n    let spannedFeatures = this.props.allFeatures.slice(idx1, idx2); \n    //iterate through the spanned features and toggle their selected state\n    spannedFeatures.forEach((feature) => {\n      if (selectedIds.includes(feature.id)){\n        selectedIds.splice(selectedIds.indexOf(feature.id),1);\n      }else{\n        selectedIds.push(feature.id);\n      }\n    });\n    return selectedIds;   \n  }\n  onOk(evt) {\n    if (this.props.addingRemovingFeatures) {\n      this.props.onOk();\n    } else {\n      this.unselectFeature();\n    }\n  }\n  unselectFeature(evt) {\n    this.setState({\n      selectedFeature: undefined\n    });\n    this.props.onCancel();\n  }\n  sortDate(a, b, desc) {\n    return (new Date(a.slice(6,8),a.slice(3,5)-1,a.slice(0,2),a.slice(9,11),a.slice(12,14),a.slice(15,17)) > new Date(b.slice(6,8),b.slice(3,5)-1,b.slice(0,2),b.slice(9,11),b.slice(12,14),b.slice(15,17))) ? 1 : -1;\n  }\n\tpreview(feature_metadata){\n\t\tthis.props.previewFeature(feature_metadata);\n\t}\n\trenderTitle(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;        \n\t}\n\trenderPreview(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title='Click to preview'>..</div>;        \n\t}\n  render() {\n    if (this.props.allFeatures) {\n      return (\n        <MarxanDialog {...this.props} autoDetectWindowHeight={ false } bodyStyle={ { padding: '0px 24px 0px 24px' } } title=\"Features\" onOk={ this.onOk.bind(this) } showCancelButton={this.props.addingRemovingFeatures} helpLink={\"docs_user.html#the-features-window\"}\n          children={ <React.Fragment key=\"k10\">\n                       <div style={ { marginBottom: '5px' } }>There are a total of \n                         {\" \" + this.props.allFeatures.length } features:</div>\n                       <div id=\"projectsTable\">\n                         <ReactTable pageSize={ this.props.allFeatures.length } className={ 'projectsReactTable noselect' } showPagination={ false } minRows={ 0 } data={ this.props.allFeatures }\n                           thisRef={ this } columns={ [{ Header: 'Name', accessor: 'alias', width: 215, headerStyle: { 'textAlign': 'left' } }, \n                           { Header: 'Description', accessor: 'description', width: 355, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, \n                           { Header: 'Date', accessor: 'creation_date', width: 115, headerStyle: { 'textAlign': 'left' }, sortMethod: this.sortDate.bind(this) },\n                           { Header: '', width: 8, headerStyle: { 'textAlign': 'center' }, Cell: this.renderPreview.bind(this) }] } getTrProps={ (state, rowInfo, column) => {\n                          return {\n                            style: {\n                              background: ((state.thisRef.props.addingRemovingFeatures && state.thisRef.props.selectedFeatureIds.includes(rowInfo.original.id)) || (!state.thisRef.props.addingRemovingFeatures && state.thisRef.state.selectedFeature && state.thisRef.state.selectedFeature.id === rowInfo.original.id)) ? \"aliceblue\" : \"\"\n                            },\n                            onClick: (e) => {\n                              state.thisRef.clickFeature(e, rowInfo);\n                            }\n                          };\n                        } }\n                        getTdProps={(state, rowInfo,column) => {\n      \t\t\t\t\t\t\t\t\t\treturn {\n      \t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n      \t\t\t\t\t\t\t\t\t\t\t\tif (column.Header === \"\") this.preview(rowInfo.original);\n      \t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t};\n      \t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t    />\n                     </div>\n                       <div id=\"projectsToolbar\">\n                         <div style={ { display: (this.props.metadata.OLDVERSION) ? \"block\" : \"none\" } } className={ 'tabTitle' }>This is an imported project. Only features from this project are shown.</div>\n                         <ToolbarButton show={ (this.props.userRole !== \"ReadOnly\") && (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) } icon={ <FontAwesomeIcon icon={ faPlusCircle } /> } title=\"New feature\" disabled={ this.props.loading } onClick={ this._new.bind(this) } label={ \"New\" }\n                         />\n                         <Popover open={ this.props.featuresDialogPopupOpen } anchorEl={ this.state.anchorEl } anchorOrigin={ { horizontal: 'left', vertical: 'bottom' } } targetOrigin={ { horizontal: 'left', vertical: 'top' } } onRequestClose={ this.props.closePopover }>\n                           <Menu desktop={ true }>\n                             <MenuItem primaryText=\"Draw on screen\" title=\"Create a new feature by digitising it on the screen\" onClick={ this._newByDigitising.bind(this) } />\n                             <MenuItem primaryText=\"Add from GBIF\" disabled={ true } />\n                             <MenuItem primaryText=\"Add from IUCN Red List\" disabled={ true } />\n                           </Menu>\n                         </Popover>\n                         <ToolbarButton show={ (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) && (this.props.userRole !== \"ReadOnly\") } icon={<Import style={{height:'20px',width:'20px'}}/>} title=\"Import features from a shapefile\" disabled={ this.props.loading } onClick={ this._openImportFeaturesDialog.bind(this) } label={ \"Import\" }/>\n                         <ToolbarButton show={ (this.props.userRole === \"Admin\") && (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) } icon={ <FontAwesomeIcon icon={ faTrashAlt } color='rgb(255, 64, 129)' /> } title=\"Delete feature\" disabled={ this.state.selectedFeature === undefined || this.props.loading  || (this.state.selectedFeature && this.state.selectedFeature.created_by === 'global admin')} onClick={ this._delete.bind(this) } label={ \"Delete\" }/>\n                         <ToolbarButton show={ this.props.addingRemovingFeatures } icon={ <FontAwesomeIcon icon={ faCircle } /> } title=\"Clear all features\" onClick={ this.props.clearAllFeatures } label={ \"Clear all\" } />\n                         <ToolbarButton show={ this.props.addingRemovingFeatures } icon={ <FontAwesomeIcon icon={ faCheckCircle } /> } title=\"Select all features\" onClick={ this.props.selectAllFeatures } label={ \"Select all\" } />\n                       </div>\n                     </React.Fragment> } />\n        );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default FeaturesDialog;\n","import React from 'react';\nimport Metadata from './Metadata';\nimport PlanningUnitsDialog from './PlanningUnitsDialog';\nimport SelectFeatures from './SelectFeatures';\nimport SelectCostFeatures from './SelectCostFeatures';\nimport MarxanDialog from './MarxanDialog';\nimport FeaturesDialog from './FeaturesDialog';\nimport ToolbarButton from './ToolbarButton';\n\nclass NewProjectDialog extends React.Component {\n\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\t\tsteps: ['Info', 'Planning units', 'Features', 'Costs'],\n\t\t\t\t\tloadingFeatures: false,\n\t\t\t\t\tfinished: false,\n\t\t\t\t\tstepIndex: 0,\n\t\t\t\t\tname: '',\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tpu: '',\n\t\t\t\t\tfeaturesDialogOpen: false,\n\t\t\t\t\tallFeatures: [],\n\t\t\t\t\tselectedFeatureIds: []\n\t\t\t};\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t\tif (prevProps.features !== this.props.features) { //this is probably an unreliable check but it seems to work!\n\t\t\t\t\tthis.setState({ allFeatures: JSON.parse(JSON.stringify(this.props.features)) }); //a copy of all the features\n\t\t\t}\n\t}\n\thandleNext = () => {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tthis.setState({\n\t\t\t\t\tstepIndex: stepIndex + 1\n\t\t\t});\n\t};\n\thandlePrev = () => {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tif (stepIndex > 0) {\n\t\t\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t\t}\n\t};\n\topenFeaturesDialog() {\n\t\t\tthis.setState({ featuresDialogOpen: true });\n\t}\n\tsetName(value) {\n\t\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\t\tthis.setState({ description: value });\n\t}\n\tchangePU(value) {\n\t\t\tthis.setState({ pu: value });\n\t}\n\tonOk(evt) {\n\t\t\tthis.gotoStart();\n\t\t\tthis.props.onOk();\n\t}\n\tgotoStart() {\n\t\t\t//reset to the beginning\n\t\t\tthis.setState({ stepIndex: 0 });\n\t}\n\tcloseFeaturesDialog() {\n\t\t\tthis.setState({ featuresDialogOpen: false });\n\t}\n\t//updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog\n\tupdateSelectedFeatures() {\n\t\t\tlet allFeatures = this.state.allFeatures;\n\t\t\tallFeatures.forEach((feature) => { \n\t\t\t\t\tif (this.state.selectedFeatureIds.includes(feature.id)) {\n\t\t\t\t\t\t\tObject.assign(feature, { selected: true });\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\tObject.assign(feature, { selected: false });\n\t\t\t\t\t}\n\t\t\t}, this);\n\t\t\t//update allFeatures to reflect those that are selected\n\t\t\tthis.setState({ allFeatures: allFeatures});\n\t\t\tthis.closeFeaturesDialog();\n\t}\n\n\tclickFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\tif (ids.includes(feature.id)) {\n\t\t\t\t\t//remove the feature if it is already selected\n\t\t\t\t\tthis.removeFeature(feature);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\t//add the feautre to the selected feature array\n\t\t\t\t\tthis.addFeature(feature);\n\t\t\t}\n\t}\n\t//selects all the features\n\tselectAllFeatures() {\n\t\t\tlet ids = [];\n\t\t\tthis.state.allFeatures.forEach((feature) => {\n\t\t\t\t\tids.push(feature.id);\n\t\t\t});\n\t\t\tthis.selectFeatures(ids);\n\t}\n\n\t//clears all the Conservation features\n\tclearAllFeatures() {\n\t\t\tthis.setState({ selectedFeatureIds: [] });\n\t}\n\n\tselectFeatures(ids){\n\t\tthis.setState({ selectedFeatureIds: ids });\n\t}\n\n\t//removes a feature from the selectedFeatureIds array\n\tremoveFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\t//remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n\t\t\tids = ids.filter(function(value, index, arr) { return value !== feature.id });\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tthis.setState({ selectedFeatureIds: ids }, function() {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t}.bind(this));\n\t}\n\n\t//adds a feature to the selectedFeatureIds array\n\taddFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\t//add the feautre to the selected feature array\n\t\t\tids.push(feature.id);\n\t\t\tthis.setState({ selectedFeatureIds: ids });\n\t}\n\n\tcreateNewProject() {\n\t\t\tthis.props.createNewProject({ name: this.state.name, description: this.state.description, planning_grid_name: this.state.pu, features: this.state.allFeatures.filter((item) => { return item.selected }) });\n\t\t\tthis.onOk();\n\t}\n\n\trender() {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tconst contentStyle = { margin: '0 16px' };\n\t\t\tconst actions = [\n\t\t\t\t\t<div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t\t\t\t{/*dynamically create the stepper\n\t\t\t\t\t\t\t<Stepper activeStep={stepIndex}>\n\t\t\t\t\t\t\t\t\t{this.state.steps.map((item) => {return <Step key={item}><StepLabel>{item}</StepLabel></Step>})}\n\t\t\t\t\t\t\t</Stepper> */}\n\t\t\t\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Back\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={stepIndex === 0}  \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handlePrev} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={stepIndex === (this.state.steps.length-1) ? this.createNewProject.bind(this) : this.handleNext} \n\t\t\t\t\t\t\t\t\t\t\t\t\tprimary={true} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t];\n\t\t\tlet c = <div key=\"k3\">\n\t\t\t\t\t\t\t\t\t{stepIndex === 0 ? <Metadata name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)} paddingBottom={'198px'}/> : null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 1 ? <PlanningUnitsDialog \n\t\t\t\t\t\t\t\t\t\tgetPlanningUnitGrids={this.props.getPlanningUnitGrids} \n\t\t\t\t\t\t\t\t\t\tplanning_unit_grids={this.props.planning_unit_grids} \n\t\t\t\t\t\t\t\t\t\tchangeItem={this.changePU.bind(this)} pu={this.state.pu} \n\t\t\t\t\t\t\t\t\t\topenImportPlanningGridDialog={this.props.openImportPlanningGridDialog}/> : null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 2 ? \n\t\t\t\t\t\t\t\t\t\t<div style={{height:'390px'}}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Select the features</div>\n\t\t\t\t\t\t\t\t\t\t\t<SelectFeatures \n\t\t\t\t\t\t\t\t\t\t\t\tfeatures={this.state.allFeatures.filter((item)=>{return item.selected;})}\n\t\t\t\t\t\t\t\t\t\t\t\topenFeaturesDialog={this.openFeaturesDialog.bind(this)}  \n\t\t\t\t\t\t\t\t\t\t\t\tsimple={true}\n\t\t\t\t\t\t\t\t\t\t\t\tshowTargetButton={false}\n\t\t\t\t\t\t\t\t\t\t\t\tleftmargin={'0px'}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 3 ? <SelectCostFeatures\n\t\t\t\t\t\t\t\t\t\t\topenCostsDialog={this.props.openCostsDialog}\n\t\t\t\t\t\t\t\t\t\t\tselectedCosts={this.props.selectedCosts}\n\t\t\t\t\t\t\t\t\t/> : null}\n\t\t\t\t\t\t\t</div>;\n\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\t\ttitle={'New project'}\n\t\t\t\t\t\t\tcontentWidth={400}\n\t\t\t\t\t\t\tchildren={c} \n\t\t\t\t\t\t\tactions={actions} \n\t\t\t\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\t\t\t\tonCancel={this.onOk.bind(this)}\n\t\t\t\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\t\t\t\thelpLink={\"docs_user.html#creating-new-projects\"}\n\t\t\t\t\t/>\n\t\t\t\t\t\t<FeaturesDialog\n\t\t\t\t\t\t\topen={this.state.featuresDialogOpen}\n\t\t\t\t\t\t\tonOk={this.updateSelectedFeatures.bind(this)}\n\t\t\t\t\t\t\tonCancel={this.closeFeaturesDialog.bind(this)}\n\t\t\t\t\t\t\tloadingFeatures={this.state.loadingFeatures}\n\t\t\t\t\t\t\tallFeatures={this.state.allFeatures}\n\t\t\t\t\t\t\tselectAllFeatures={this.selectAllFeatures.bind(this)}\n\t\t\t\t\t\t\tclearAllFeatures={this.clearAllFeatures.bind(this)}\n\t\t\t\t\t\t\tselectFeatures={this.selectFeatures.bind(this)}\n\t\t\t\t\t\t\tclickFeature={this.clickFeature.bind(this)}\n\t\t\t\t\t\t\taddingRemovingFeatures={true}\n\t\t\t\t\t\t\tselectedFeatureIds={this.state.selectedFeatureIds}\n\t\t\t\t\t\t\tmetadata={{OLDVERSION:false}}\n\t\t\t\t\t\t\tuserRole={\"User\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t);\n\t}\n}\n\nexport default NewProjectDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\n\nclass FailedToDeleteDialog extends React.Component { \n\t\trenderName(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.name}>{row.original.name}</div>;        \n\t\t}\n\t\trender() {\n\t\t\t\tlet tableColumns = [];\n\t\t\t\tif (['Admin'].includes(this.props.userRole)) {\n\t\t\t\t\ttableColumns = [{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, { Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttableColumns = [{ Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }];\n\t\t\t\t}\n\t\t\t\tif (this.props.projects) {\n\t\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\ttitle= {\"Failed to delete \" + this.props.deleteWhat} \n\t\t\t\t\tcontentWidth={500}\n\t\t\t\t\thelpLink={\"docs_user.html#deleting-features\"}\n\t\t\t\t\tchildren={\n\t\t\t\t\t\t<React.Fragment key=\"k24\">\n\t\t\t\t\t\t\t<div style={{marginBottom:'5px'}}>{\"The \" + this.props.deleteWhat + \" is used in the following projects:\"}</div>\n\t\t\t\t\t\t\t\t<div id=\"failedProjectsTable\">\n\t\t\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\t\t  pageSize={ this.props.projects.length }\n\t\t\t\t\t\t\t\t\t\tclassName={'projectsReactTable'}\n\t\t\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\tdata={this.props.projects}\n\t\t\t\t\t\t\t\t\t\tthisRef={this} \n\t\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t} \n\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default FailedToDeleteDialog;\n","import * as React from 'react';\nimport mapboxgl from 'mapbox-gl';\n//TODO: Combine this with MapContainer.js as they do similar things\nclass MapContainer2 extends React.Component {\n\tcomponentDidMount() {\n\t\tthis.map = new mapboxgl.Map({\n\t\t\tcontainer: this.mapContainer,\n\t\t\tstyle: 'mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd', //north star + marine PAs in pacific\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 2,\n            attributionControl: false,\n\t\t});\n        this.map.on(\"load\", (evt) => {\n            evt.target.addLayer({\n                'id': 'planning_grid',\n                'type': \"fill\",\n                'source': {\n                    'type': \"vector\",\n                    'url': \"mapbox://\" + this.props.planning_grid_metadata.tilesetid\n                },\n                'source-layer': this.props.planning_grid_metadata.feature_class_name,\n                'paint': {\n                    'fill-color': \"rgba(255, 0, 0, 0.4)\", \n                    'fill-outline-color': \"rgba(255, 0, 0, 0.5)\"\n                }\n            });\n        });\n        this.props.getTilesetMetadata(this.props.planning_grid_metadata.tilesetid).then((tileset)=>{\n            if (tileset.bounds != null) this.props.zoomToBounds(this.map, tileset.bounds);\n        }).catch((error) => {\n            this.props.setSnackBar(error);\n        });\n\t}\n\t\n    componentWillUnmount() {\n        //remove the map and free all resources\n        if (this.map) this.map.remove();\n    }\n    \n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'floatLeft mapContainer2'}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" style={{width:'352px',height:'300px', marginTop: '50px',marginLeft: '24px'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default MapContainer2;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MapContainer2 from './MapContainer2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons';\nimport { faAngleUp } from '@fortawesome/free-solid-svg-icons';\n\nclass PlanningGridDialog extends React.Component { \n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\texpand(){\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\trender() {\n\t\tlet areaTD = (this.props.planning_grid_metadata._area) ? <td className='metadataItemValue'>{this.props.planning_grid_metadata._area}Km<span className='superscript'>2</span></td> : <td/>;\n\t\tlet country_idTD = (this.props.planning_grid_metadata.country_id) ? <td className='metadataItemValue'>{this.props.planning_grid_metadata.country_id}</td> : <td/>;\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\ttitle={this.props.planning_grid_metadata.alias}\n\t\t\t\thelpLink={\"docs_user.html#the-planning-grid-details-window\"}\n\t\t\t\tcontentWidth={768}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k26\">\n\t\t\t\t\t\t<MapContainer2\n\t\t\t\t\t\t\tplanning_grid_metadata={this.props.planning_grid_metadata}\n\t\t\t\t\t\t\tgetTilesetMetadata={this.props.getTilesetMetadata}\n\t\t\t\t\t\t\tzoomToBounds={this.props.zoomToBounds}\n\t\t\t\t\t\t\tsetSnackBar={this.props.setSnackBar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"metadataPanel\">\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='2' className='metadataItemTitle'>Description:</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='2' className='metadataItemValue2'>{this.props.planning_grid_metadata.description}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Country:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.country}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Domain:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.domain}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Area:</td>\n\t\t\t\t\t\t\t\t\t{areaTD}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Author:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.created_by}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.creation_date}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Source:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.source}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>aoi_id:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.aoi_id}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>country_id:</td>\n\t\t\t\t\t\t\t\t\t{country_idTD}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>guid:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.feature_class_name}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>tilesetid:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.tilesetid}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={(this.state.expanded) ? faAngleUp : faAngleDown} onClick={this.expand.bind(this)} title={(this.state.expanded) ? \"Show less details\" : \"Show more details\"} className={'appBarIcon'} style={{fontSize: '20px'}}/>\n\t\t\t\t\t\t\t<div>You may need to zoom in to see the planning grid units</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default PlanningGridDialog;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\n\nclass PlanningGridsDialog extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {selectedPlanningGrid: undefined};\n\t}\n\t_delete() {\n\t\tthis.props.deletePlanningGrid(this.state.selectedPlanningGrid.feature_class_name);\n\t\tthis.setState({ selectedPlanningGrid: false });\n\t}\n\t_new() {\n\t\tthis.props.openNewPlanningGridDialog();\n\t\tthis.closeDialog();\n\t}\n\topenImportDialog() {\n\t\tthis.props.openImportPlanningGridDialog();\n\t\tthis.closeDialog();\n\t}\n\tchangePlanningGrid(event, planningGrid) {\n\t\tthis.setState({ selectedPlanningGrid: planningGrid });\n\t}\n\tcloseDialog() {\n\t\tthis.setState({ selectedPlanningGrid: undefined });\n\t\tthis.props.onOk(); \n\t}\n\tpreview(planning_grid_metadata){\n\t\tthis.props.previewPlanningGrid(planning_grid_metadata);\n\t}\n\trenderName(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.alias + \" (\" + row.original.feature_class_name + \")\"}>{row.original.alias}</div>;        \n\t}\n\trenderTitle(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;        \n\t}\n\trenderCountry(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.country}>{row.original.country}</div>;        \n\t}\n\trenderArea(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{(isNaN(row.original._area)) ? '' : row.original._area}</div>;        \n\t}\n\trenderPreview(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title='Click to preview'>..</div>;        \n\t}\n\trender() {\n\t\tlet tableColumns = [];\n\t\ttableColumns = [\n\t\t\t{ Header: 'Name', accessor: 'alias', width: 215, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, \n\t\t\t{ Header: 'Description', accessor: 'description', width: 273, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, \n\t\t\t{ Header: 'Country', accessor: 'country', width: 70, headerStyle: { 'textAlign': 'left' }, Cell: this.renderCountry.bind(this)}, \n\t\t\t{ Header: 'Domain', accessor: 'domain', width: 70, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'Area (Km2)', accessor: '_area', width: 75, headerStyle: { 'textAlign': 'left' }, Cell: this.renderArea.bind(this) },\n\t\t\t{ Header: '', width: 8, headerStyle: { 'textAlign': 'center' }, Cell: this.renderPreview.bind(this) }\n\t\t];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"docs_user.html#the-planning-grids-window\"}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\ttitle=\"Planning grids\"  \n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t<div style={{marginBottom:'5px'}}>There are a total of {this.props.planningGrids.length} planning grids:</div>\n\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\t  pageSize={ this.props.planningGrids.length }\n\t\t\t\t\t\t\t\t\tclassName={'projectsReactTable noselect'}\n\t\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\tdata={this.props.planningGrids}\n\t\t\t\t\t\t\t\t\tthisRef={this} \n\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.alias === (state.thisRef.state.selectedPlanningGrid && state.thisRef.state.selectedPlanningGrid.alias)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tstate.thisRef.changePlanningGrid(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tgetTdProps={(state, rowInfo,column) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (column.Header === \"\") this.preview(rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createPlanningUnitGrid\")} \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faPlusCircle} />} \n\t\t\t\t\t\t\t\ttitle=\"New planning grid\"\n\t\t\t\t\t\t\t\tonClick={this._new.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"New\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"importPlanningUnitGrid\")}\n\t\t\t\t\t\t\t\ticon={<Import style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\ttitle=\"Import an existing planning grid from the local machine\"\n\t\t\t\t\t\t\t\tonClick={this.openImportDialog.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Import\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"deletePlanningUnitGrid\")}\n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\ttitle=\"Delete planning grid\" \n\t\t\t\t\t\t\t\tdisabled={!this.state.selectedPlanningGrid || this.props.loading || (this.state.selectedPlanningGrid && this.state.selectedPlanningGrid.created_by === 'global admin')}\n\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default PlanningGridsDialog;\n","import * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowAltCircleUp } from '@fortawesome/free-regular-svg-icons';\nlet domains = [\"Marine\", \"Terrestrial\"];\nlet areakm2s = [10, 20, 30, 40, 50];\nlet shapes = ['Hexagon', 'Square'];\n\nclass NewPlanningGridDialog extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {iso3: '', domain:'', shape:'', areakm2: undefined};\n\t}\n\tchangeIso3(evt, value) {\n\t\tlet iso3 = this.props.countries[value].iso3;\n\t\tif (['FJI','KIR','NZL','RUS','TUV','USA','WLF'].includes(iso3)){ //no support currently for countries that span the meridian\n\t\t\tthis.setState({iso3: undefined});\n\t\t\tthis.props.setSnackBar(\"Countries that span the meridian are currently not supported. See <a href='\" + this.props.ERRORS_PAGE + \"#planning-grids-cannot-be-created-for-countries-that-span-the-meridian' target='blank'>here</a>\");\n\t\t}else{\n\t\t\tthis.setState({iso3: this.props.countries[value].iso3});\n\t\t}\n\t}\n\tchangeDomain(evt, value) {\n\t\tthis.setState({domain: domains[value]});\n\t}\n\tchangeShape(evt, value) {\n\t\tthis.setState({shape: shapes[value]});\n\t}\n\tchangeAreaKm2(evt, value) {\n\t\tthis.setState({areakm2: areakm2s[value]});\n\t}\n\tonOk(){\n\t\t//create the new planning grid\n\t\tthis.props.createNewPlanningUnitGrid(this.state.iso3, this.state.domain, this.state.areakm2, this.state.shape).then(function(response){\n\t\t\t//close the dialog\n\t\t\tthis.props.onCancel();\n\t\t}.bind(this));\n\t}\n\trender() {\n\t\tlet dropDownStyle = { width: \"240px\" };\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tokDisabled={ !this.state.iso3 ||!this.state.domain ||!this.state.areakm2 ||this.props.loading}\n\t\t\t\tcancelLabel={\"Cancel\"}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\thelpLink={\"docs_user.html#creating-new-planning-grids-using-marxan-web\"}\n\t\t\t\ttitle=\"New planning grid\"\n\t\t\t\tcontentWidth={358}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k13\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeIso3.bind(this)} value={this.state.iso3} floatingLabelText=\"Area of interest\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{this.props.countries.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.iso3}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item.original_n}\n\t\t\t\t\t\t\t\t\t\t\tkey={item.iso3}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t\t\t<ToolbarButton icon={<FontAwesomeIcon icon={faArrowAltCircleUp} />} title=\"Load a custom area of interest from a shapefile (not currently implemented)\" style={{position: 'absolute', top: '83px', right: '32px'}}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeDomain.bind(this)} value={this.state.domain} style={dropDownStyle} floatingLabelText=\"Domain\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{domains.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeShape.bind(this)} value={this.state.shape} style={dropDownStyle} floatingLabelText=\"Planning unit shape\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{shapes.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeAreaKm2.bind(this)} value={this.state.areakm2} style={dropDownStyle} floatingLabelText=\"Area of each planning unit\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{areakm2s.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item + \" Km2\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default NewPlanningGridDialog;\n","import React from 'react';\n/*eslint-disable no-unused-vars*/\nimport axios, { post } from 'axios';\n/*eslint-enable no-unused-vars*/\nimport FontAwesome from 'react-fontawesome';\n\n//From AshikNesin https://gist.github.com/AshikNesin/e44b1950f6a24cfcd85330ffc1713513\n\nclass ShapefileUpload extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { loading: false,active:false };\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.fileUpload = this.fileUpload.bind(this);\n\t}\n \n\tonClick(e){\n\t\tthis.setState({active:true});\n\t}\n\tonChange(e) {\n\t\tif (e.target.files.length) {\n\t\t\tthis.fileUpload(e.target.files[0]);\n\t\t\t//reset the file selector\n\t\t\tdocument.getElementById(this.id).value = \"\";\n\t\t}\n\t}\n\n\tfileUpload(value) {\n\t\tthis.setState({ loading: true });\n\t\tconst url = this.props.requestEndpoint + \"uploadShapefile\";\n\t\tconst formData = new FormData();\n\t\tthis.filename = value['name']; //from the open file dialog\n\t\tformData.append('value', value); \n\t\tformData.append('filename', this.filename);\n\t\tformData.append('name', this.props.name);\n\t\tformData.append('description', this.props.description); \n\t\tpost(url, formData, {withCredentials: this.props.SEND_CREDENTIALS}).then(function(response){\n\t\t\tthis.finishedLoading(response);\n\t\t}.bind(this));\n\t}\n\n\tfinishedLoading(response) {\n\t\tif (!this.props.checkForErrors(response.data)){\n\t\t\tthis.setState({ loading: false });\n\t\t\tthis.props.setFilename(this.filename);\n\t\t}\n\t\tthis.setState({active:false});\n\t} \n\trender() {\n\t\tthis.id = \"upload\" + this.props.parameter;\n\t\treturn (\n\t\t\t<form >\n\t\t\t\t<div className='uploadLabel' style={{color: (this.state.active) ? 'rgb(0, 188, 212)' : 'rgba(0, 0, 0, 0.3)'}}>{this.props.label}</div> \n\t\t\t\t<div className='uploadFileField'>\n\t\t\t\t\t<div className='uploadFileFieldIcon'>\n\t\t\t\t\t\t<label htmlFor={this.id}><FontAwesome name='file' title='Click to upload a file' style={{'cursor':'pointer'}}/></label>\n\t\t\t\t\t\t<input type=\"file\" onChange={this.onChange} onClick={this.onClick.bind(this)} accept=\".zip\" style={{'display':'none', 'width':'10px'}} id={this.id} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='mandatoryIcon'>\n\t\t\t\t\t\t<FontAwesome name='exclamation-circle' title='Required field' style={{ color: 'darkslateblue', 'display': (this.props.filename  === '' && this.props.mandatory) ? 'block' : 'none'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='uploadFileFieldLabel' style={{width:'168px'}}>{this.props.filename}</div>\n\t\t\t\t</div>\n\t\t\t\t<FontAwesome name='sync' spin style={{'display': (this.state.loading ? 'inline-block' : 'none'), 'marginLeft':'6px'}}/>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nexport default ShapefileUpload;\n","import * as React from 'react';\nimport TextField from 'material-ui/TextField';\nimport MarxanDialog from \"./MarxanDialog\";\nimport ShapefileUpload from './ShapefileUpload';\n\nclass ImportPlanningGridDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {planning_grid_name:'', zipFilename: '', description:\"\"}; \n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({planning_grid_name: newValue});\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({ description: newValue });\n\t}\n\tsetzipFilename(filename) { \n\t\tthis.setState({ zipFilename: filename }); \n\t} \n\tonOk(){\n\t\tlet _description = (this.state.description === \"\") ? 'Imported using the import planning grid dialog' : this.state.description;\n\t\tthis.props.onOk(this.state.zipFilename, this.state.planning_grid_name, _description).then(function(response){\n\t\t\t//reset the state\n\t\t\tthis.setState({planning_grid_name:'', zipFilename: '', description:\"\"});\n\t\t}).catch(function(ex) {\n\t\t\t//error uploading the shapefile\n\t  });\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import planning grid'}\n\t\t\t\tcontentWidth={420}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"22\">\n\t\t\t\t\t\t<ShapefileUpload \n\t\t\t\t\t\t\trequestEndpoint={this.props.requestEndpoint} \n\t\t\t\t\t\t\tSEND_CREDENTIALS={this.props.SEND_CREDENTIALS} \n\t\t\t\t\t\t\tmandatory={true} \n\t\t\t\t\t\t\tfilename={this.state.zipFilename} \n\t\t\t\t\t\t\tsetFilename={this.setzipFilename.bind(this)} \n\t\t\t\t\t\t\tcheckForErrors={this.props.checkForErrors} \n\t\t\t\t\t\t\tlabel=\"Shapefile\" \n\t\t\t\t\t\t/> \n\t\t\t\t\t\t<TextField value={this.state.planning_grid_name} onChange={this.changeName.bind(this)} floatingLabelText=\"Name\" floatingLabelFixed={true} />\n\t\t\t\t\t\t<TextField value={this.state.description} onChange={this.changeDescription.bind(this)} style={{display:'block'}} multiLine={true} rows={2} floatingLabelText=\"Enter a description\" floatingLabelFixed={true}/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tokDisabled={this.props.loading}\n\t\t\t\tonRequestClose={this.props.onCancel.bind(this)} \n\t\t\t\thelpLink={\"docs_user.html#importing-existing-planning-grids\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportPlanningGridDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MapContainer2 from './MapContainer2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleDown } from '@fortawesome/free-solid-svg-icons';\nimport { faAngleUp } from '@fortawesome/free-solid-svg-icons';\n\nclass FeatureDialog extends React.Component { \n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\texpand(){\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\ttitle={this.props.feature_metadata.alias}\n\t\t\t\thelpLink={\"docs_user.html#the-feature-details-window\"}\n\t\t\t\tcontentWidth={768}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k26\">\n\t\t\t\t\t\t<MapContainer2\n\t\t\t\t\t\t\tplanning_grid_metadata={this.props.feature_metadata}\n\t\t\t\t\t\t\tgetTilesetMetadata={this.props.getTilesetMetadata}\n\t\t\t\t\t\t\tzoomToBounds={this.props.zoomToBounds}\n\t\t\t\t\t\t\tsetSnackBar={this.props.setSnackBar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"metadataPanel\">\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='2' className='metadataItemTitle'>Description:</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan='2' className='metadataItemValue2'>{this.props.feature_metadata.description}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Area:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.area}m<span className='superscript'>2</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Author:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.created_by}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.creation_date}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Source:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.source}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>id:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.id}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>guid:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.feature_class_name}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>tileset:</td>\n\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.tilesetid}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={(this.state.expanded) ? faAngleUp : faAngleDown} onClick={this.expand.bind(this)} title={(this.state.expanded) ? \"Show less details\" : \"Show more details\"} className={'appBarIcon'} style={{fontSize: '20px'}}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default FeatureDialog;\n","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\n\nclass NewFeatureDialog extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {name:\"\",description:\"\"};\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({name:newValue});\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({description: newValue});\n\t}\n\tcreateNewFeature(){\n\t\tthis.props.createNewFeature(this.state.name, this.state.description);\n\t}\n\trender() {\n\t\tlet c = \n\t\t\t<React.Fragment key=\"k12\">\n\t\t\t\t<div> \n\t\t\t\t\t<TextField value={this.state.name} onChange={this.changeName.bind(this)} style={{display:'block'}} floatingLabelText=\"Enter a name\" floatingLabelFixed={true}/>\n\t\t\t\t\t<TextField value={this.state.description} onChange={this.changeDescription.bind(this)} style={{display:'block'}} multiLine={true} rows={2} floatingLabelText=\"Enter a description\" floatingLabelFixed={true}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog  \n\t\t\t\t{...this.props} \n\t\t\t\tonOk={this.createNewFeature.bind(this)}\n\t\t\t\tokDisabled={!(this.state.name!=='' && this.state.description!=='' && this.props.loading===false)}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tcontentWidth={420}\n\t\t\t\ttitle=\"Create new feature\" \n\t\t\t\tchildren={c} \n\t\t\t\tonRequestClose={this.props.onOk} \n\t\t\t\thelpLink={\"docs_user.html#drawing-features-on-screen\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default NewFeatureDialog;","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport ShapefileUpload from './ShapefileUpload.js';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from './ToolbarButton';\nimport { RadioButton, RadioButtonGroup } from 'material-ui/RadioButton';\n\nlet INITIAL_STATE = { steps: ['shapefile', 'single_or_multiple', 'metadata'], stepIndex: 0, fieldnames: [], splitField: \"\", name: \"\", description: \"\" };\nclass ImportFeaturesDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = INITIAL_STATE;\n\t}\n\thandleNext(){\n\t\tconst { stepIndex } = this.state;\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\t//unzip the shapefile on the server\n\t\t\t\tthis.props.unzipShapefile(this.props.filename).then((response) => {\n\t\t\t\t\t//get the name of the shapefile in the zip file\n\t\t\t\t\tthis.shapefile = response.rootfilename + \".shp\";\n\t\t\t\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase (this.state.steps.length - 1):\n\t\t\t\tthis.importFeatures();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t\t}\n\t}\n\thandlePrev(){\n\t\tconst { stepIndex } = this.state;\n\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({ name: newValue });\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({ description: newValue });\n\t}\n\tchangeSplitField(event, index) {\n\t\tthis.setState({ splitField: this.state.fieldnames[index] });\n\t}\n\tgetShapefileFieldnames() {\n\t\t//get the field names from the unzipped shapefile on the server\n\t\tthis.props.getShapefileFieldnames(this.shapefile).then((response) => {\n\t\t\t//set the fieldnames in local state\n\t\t\tthis.setState({ fieldnames: response.fieldnames });\n\t\t});\n\t}\n\tresetFieldnames() {\n\t\tthis.setState({ fieldnames: [] });\n\t}\n\timportFeatures() {\n\t\tthis.props.importFeatures(this.props.filename, this.state.name, this.state.description, this.shapefile, this.state.splitField).then((response) => {\n\t\t\tthis.closeDialog();\n\t\t});\n\t}\n\tcloseDialog() {\n\t\t//delete the zip file and shapefile\n\t\tthis.props.deleteShapefile(this.props.filename, this.shapefile);\n\t\tthis.setState(INITIAL_STATE);\n\t\tthis.shapefile = \"\";\n\t\tthis.props.setFilename(\"\");\n\t\tthis.props.onCancel();\n\t}\n\trender() {\n\t\tlet _disabled = false;\n\t\tconst { stepIndex } = this.state;\n\t\tconst contentStyle = { margin: '0 16px' };\n\t\t//get the disabled state for the next/finish button\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\t_disabled = (this.props.filename === \"\");\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t_disabled = (this.props.loading);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// code\n\t\t}\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0 || this.props.preprocessing} onClick={this.handlePrev.bind(this)} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} disabled={_disabled || this.props.preprocessing} primary={true}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet children =\n\t\t\t<div key=\"k12\" style={{height:'120px',maxHeight:'120px'}}>\n\t\t\t\t{stepIndex === 0 ? \n\t\t\t\t\t<div className={'importFeaturesContent'}>\n\t\t\t\t\t\t<ShapefileUpload SEND_CREDENTIALS={this.props.SEND_CREDENTIALS} requestEndpoint={this.props.requestEndpoint} checkForErrors={this.props.checkForErrors} mandatory={true} filename={this.props.filename} setFilename={this.props.setFilename} label=\"Shapefile\" style={{'paddingTop':'10px'}}/> \n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{stepIndex === 1 ? \n\t\t\t\t\t<div className={'importFeaturesContent'}>\n\t\t\t\t\t    <RadioButtonGroup name=\"createFeatureType\" defaultSelected=\"single\">\n\t\t\t\t\t      <RadioButton value=\"single\" label=\"Create single feature\" style={{padding:'10px'}} onClick={this.resetFieldnames.bind(this)}/>\n\t\t\t\t\t      <RadioButton value=\"multiple\" label=\"Split into multiple features\" style={{padding:'10px'}} onClick={this.getShapefileFieldnames.bind(this)}/>\n\t\t\t\t\t    </RadioButtonGroup>\n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{(stepIndex === 2) ? \n\t\t\t\t(this.state.fieldnames.length === 0) ?\n\t\t\t\t\t<div className={'importFeaturesContent'}> \n\t\t\t\t\t\t<TextField value={this.state.name} onChange={this.changeName.bind(this)} style={{display:'block'}} floatingLabelText=\"Enter a name\" floatingLabelFixed={true}/>\n\t\t\t\t\t\t<TextField value={this.state.description} onChange={this.changeDescription.bind(this)} style={{display:'block'}} multiLine={true} rows={2} floatingLabelText=\"Enter a description\" floatingLabelFixed={true}/>\n\t\t\t\t\t</div> :\n\t\t\t\t\t<div className={'importFeaturesContent'}> \n\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeSplitField.bind(this)} value={this.state.splitField} floatingLabelText=\"Split features by\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t{this.state.fieldnames.map(item => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t</div> \n\t\t\t\t: null}\n\t\t\t</div>;\n\t\treturn (\n\t\t\t<MarxanDialog  \n\t\t\t\t{...this.props} \n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tcontentWidth={420}\n\t\t\t\ttitle= {\"Import features\"}\n\t\t\t\tchildren={children} \n\t\t\t\tactions={actions}  \n\t\t\t\tonRequestClose={this.closeDialog.bind(this)} \n\t\t\t\thelpLink={\"docs_user.html#importing-existing-features\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportFeaturesDialog;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\n\nclass CostsDialog extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t{...this.props} \n\t\t\tcontentWidth={370}\n\t\t\toffsetY={80}\n\t\t\ttitle=\"Costs\" \n\t\t\tchildren={            \n\t\t\t<React.Fragment key=\"k8\">\n\t\t\t\t<div>\n\t\t\t\t\tNot yet implemented \n\t\t\t\t</div>\n\t\t\t</React.Fragment>}/>\n\t\t);\n\t}\n}\n\nexport default CostsDialog;\n","import React from 'react';\nimport 'react-table/react-table.css';\nimport ReactTable from \"react-table\";\nimport FontAwesome from 'react-fontawesome';\nimport MarxanDialog from './MarxanDialog';\n\nclass RunSettingsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { data: [], updateEnabled: false };\n\t\tthis.renderEditable = this.renderEditable.bind(this); \n\t}\n\tcomponentDidUpdate(prevProps) {\n\t\tif (prevProps.runParams !== this.props.runParams) {\n\t\t\tthis.setState({ data: this.props.runParams });\n\t\t}\n\t}\n\topenParametersDialog(){\n\t\tthis.props.openParametersDialog();\n\t}\n\t//posts the results back to the server\n\tupdateRunParams() {\n\t\t//ui feedback \n\t\tthis.setState({ updateEnabled: false });\n\t\tif (this.props.userRole !== \"ReadOnly\")this.props.updateRunParams(this.state.data);\n\t\tthis.props.onOk();\n\t}\n\tsetUpdateEnabled() {\n\t\tthis.setState({ updateEnabled: true });\n\t}\n\trenderEditable(cellInfo) {\n\t\treturn (\n\t\t\t(this.props.userRole === \"ReadOnly\") ? \n\t\t\t<React.Fragment>\n\t\t\t\t<div>{this.state.data[cellInfo.index][\"value\"]}</div>\n\t\t\t</React.Fragment> \n\t\t\t: \n\t\t\t<React.Fragment>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{ backgroundColor: \"#fafafa\", float: ([...this.state.data][cellInfo.index]['key'] === 'BLM') ? 'left' : 'none'}}\n\t\t\t\t\tcontentEditable\n\t\t\t\t\tsuppressContentEditableWarning\n\t\t\t\t\tonFocus={this.setUpdateEnabled.bind(this)}\n\t\t\t\t\tonBlur={e => {\n\t\t\t\t\t  const data = [...this.state.data];\n\t\t\t\t\t  data[cellInfo.index][cellInfo.column.id] = e.target.innerHTML;\n\t\t\t\t\t  this.setState({ data }); \n\t\t\t\t\t}}\n\t\t\t\t  >{this.state.data[cellInfo.index][\"value\"]}</div>\n\t\t\t\t  <FontAwesome name='external-link-alt' onClick={this.props.showClumpingDialog} title='Click to open the BLM comparison dialog' style={{display: ([...this.state.data][cellInfo.index]['key'] === 'BLM') ? 'block' : 'none', 'cursor':'pointer', 'paddingTop':'6px', 'paddingLeft':'35px'}}/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={400}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={260}\n\t\t\t\tonOk={this.updateRunParams.bind(this)}\n\t\t\t\thelpLink={\"docs_user.html#run-settings\"}\n\t\t\t\ttitle=\"Run settings\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div style={{height:'275px'}} key=\"k16\">\n\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\tclassName={'summary_infoTable'}\n\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\tpageSize={this.state.data.length}\n\t\t\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t   Header: 'Parameter', \n\t\t\t\t\t\t\t   accessor: 'key',\n\t\t\t\t\t\t\t   width:165,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t   Header: 'Value',\n\t\t\t\t\t\t\t   accessor: 'value',\n\t\t\t\t\t\t\t   width:193,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t   Cell: this.renderEditable\n\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t  />\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t   />\n\t\t);\n\t}\n}\n\nexport default RunSettingsDialog;\n","import React from 'react';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass RendererSelector extends React.Component {\n\thandleChange(event, index, value) {\n\t\tthis.props.changeValue(value);\n\t}\n\trender() {\n\t\tlet primaryText;\n\t\tlet c = this.props.values.map((item) => {\n\t\t\tif (typeof(item) === 'string') {\n\t\t\t\tprimaryText = item.substr(0, 1).toUpperCase().concat(item.replace(\"_\", \" \").substr(1)); // sentence case and replace _ with space\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprimaryText = item.toString();\n\t\t\t}\n\t\t\treturn <MenuItem value={item} key={item} primaryText={primaryText}/>;\n\t\t});\n\t\treturn (\n\t\t\t<SelectField selectionRenderer={this.props.selectionRenderer} menuItemStyle={{fontSize:'12px'}} labelStyle={{fontSize:'12px'}} listStyle={{fontSize:'12px'}} style={{width:'150px', margin: '0px 10px'}} autoWidth={true} floatingLabelText={this.props.floatingLabelText} floatingLabelFixed={true} children={c} onChange={this.handleChange.bind(this)} value={this.props.property}/>\n\t\t);\n\t}\n}\n\nexport default RendererSelector;\n","import React from 'react';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport { getMaxNumberOfClasses } from './genericFunctions.js';\n\nclass ColorSelector extends React.Component {\n\thandleChange(event, index, value) {\n\t\tthis.props.changeValue(value);\n\t}\n\tselectionRenderer() {\n\t\tlet c = this.getSwatch(this.props.property, true);\n\t\treturn c;\n\t}\n\tgetSwatch(colorCode, disableHighlight) {\n\t\t//get the number of classes the user currently has selected\n\t\tlet numClasses = this.props.brew.getNumClasses();\n\t\t//get the maximum number of colors in this scheme\n\t\tlet colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n\t\t//get the color scheme\n\t\tlet colorScheme = this.props.brew.colorSchemes[colorCode];\n\t\t//get the number of colors to show as an array\n\t\tlet numClassesArray = (numClasses <= colorSchemeLength) ? Array.apply(null, { length: numClasses }).map(Number.call, Number) : Array.apply(null, { length: colorSchemeLength }).map(Number.call, Number);\n\t\tlet classesToShow = numClassesArray.length;\n\t\tlet divWidth = 112 / classesToShow;\n\t\tlet colorDivs = numClassesArray.map((item) => {\n\t\t\treturn <div key={item} style={{backgroundColor: colorScheme[classesToShow][item], width: divWidth, height:'16px', display: 'inline-block'}}/>;\n\t\t});\n\t\tlet borderColor = ((colorCode === this.props.property) && !disableHighlight) ? 'rgb(255, 64, 129)' : 'lightgray';\n\t\tcolorDivs = <div style={{display:'inline-flex', marginTop:'12px', border:'1px solid ' + borderColor}}>{colorDivs}</div>;\n\t\treturn colorDivs;\n\t}\n\trender() {\n\t\tlet primaryText;\n\t\tlet c = this.props.values.map(function(colorCode) {\n\t\t\t(colorCode !== 'opacity') ? primaryText = '': primaryText = \"Opacity\";\n\t\t\tlet _c = (colorCode !== 'opacity') ? this.getSwatch(colorCode, false) : null;\n\t\t\treturn <MenuItem value={colorCode} primaryText={primaryText} key={colorCode} children={_c} title={colorCode}/>;\n\t\t}, this);\n\t\treturn (\n\t\t\t<SelectField selectionRenderer={this.selectionRenderer.bind(this)} menuItemStyle={{fontSize:'12px'}} labelStyle={{fontSize:'12px'}} listStyle={{fontSize:'12px'}} style={{width:'150px', margin: '0px 10px'}} autoWidth={true} floatingLabelText={this.props.floatingLabelText} floatingLabelFixed={true} children={c} onChange={this.handleChange.bind(this)} value={this.props.property}/>\n\t\t);\n\t}\n}\n\nexport default ColorSelector;\n","import React from 'react';\nimport 'react-table/react-table.css';\nimport MarxanDialog from './MarxanDialog';\nimport RendererSelector from './RendererSelector.js'; \nimport ColorSelector from './ColorSelector.js';\nimport { BarChart, ReferenceLine, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Label } from 'recharts';\n\nlet RENDERERS = [\"equal_interval\", \"jenks\", \"std_deviation\", \"quantile\"];\nlet COLORCODES = [\"opacity\", \"OrRd\", \"PuBu\", \"BuPu\", \"Oranges\", \"BuGn\", \"YlOrBr\", \"YlGn\", \"Reds\", \"RdPu\", \"Greens\", \"YlGnBu\", \"Purples\", \"GnBu\", \"Greys\", \"YlOrRd\", \"PuRd\", \"Blues\", \"PuBuGn\", \"Spectral\", \"RdYlGn\", \"RdBu\", \"PiYG\", \"PRGn\", \"RdYlBu\", \"BrBG\", \"RdGy\", \"PuOr\", \"Set2\", \"Accent\", \"Set1\", \"Set3\", \"Dark2\", \"Paired\", \"Pastel2\", \"Pastel1\"];\nlet NUMCLASSES = [\"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\nlet TOPCLASSES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n\nclass ClassificationDialog extends React.Component {\n\n\trender() { \n\t\tlet breaks = this.props.dataBreaks.map((item, index) => {\n\t\t\t//dont include the bottom line as we will use the y axis\n\t\t\treturn <ReferenceLine x={item} key={index} stroke=\"#00BCD4\" />;\n\t\t});\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={390}\n\t\t\t\trightX={0}\n\t\t\t\toffsetY={80}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"docs_user.html#changing-how-the-results-are-displayed\"}\n\t\t\t\ttitle=\"Classification\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div style={{height:'275px'}} key=\"k6\">\n\t\t\t\t\t\t<BarChart width={250} height={150} data={this.props.summaryStats}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"1\" stroke=\"#f4f4f4\"/>\n\t\t\t\t\t\t\t<XAxis dataKey=\"number\" tick={{fontSize:11}} type={'number'}>\n\t\t\t\t\t\t\t\t<Label value=\"Sum solutions\" offset={0} position=\"insideBottom\" style={{fontSize:'11px',color:'#222222'}} />\n\t\t\t\t\t\t\t</XAxis> \n\t\t\t\t\t\t\t<YAxis tick={{fontSize:11}}>\n\t\t\t\t\t\t\t\t<Label value='Count' angle={-90} position='insideLeft' style={{fontSize:'11px',color:'#222222'}}/>\n\t\t\t\t\t\t\t</YAxis>\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Bar dataKey=\"count\" fill=\"#E14081\" />\n\t\t\t\t\t\t\t{breaks}\n\t\t\t\t\t\t</BarChart>\n\t\t\t\t\t\t<div className={'renderers'}>\n\t\t\t\t\t\t\t<ColorSelector values={COLORCODES} changeValue={this.props.changeColorCode} property={this.props.renderer.COLORCODE} floatingLabelText={\"Colour scheme\"} brew={this.props.brew} />\n\t\t\t\t\t\t\t<RendererSelector values={RENDERERS} changeValue={this.props.changeRenderer} property={this.props.renderer.CLASSIFICATION} floatingLabelText={\"Classification\"}/>\n\t\t\t\t\t\t\t<RendererSelector values={NUMCLASSES} changeValue={this.props.changeNumClasses} property={this.props.renderer.NUMCLASSES} floatingLabelText={\"Number of classes\"} />\n\t\t\t\t\t\t\t<RendererSelector values={TOPCLASSES} changeValue={this.props.changeShowTopClasses} property={this.props.renderer.TOPCLASSES} floatingLabelText={\"Show top n classes\"}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ClassificationDialog;\n","import React from 'react';\nimport mapboxgl from 'mapbox-gl';\n\nclass MapContainer extends React.Component {\n    componentDidMount() {\n        this.map = new mapboxgl.Map({\n            container: this.mapContainer,\n            style: 'mapbox://styles/mapbox/light-v9',\n            center: this.props.mapCentre,\n            zoom: this.props.mapZoom,\n            attributionControl: false,\n            interactive: false\n        }); \n        this.map.on(\"load\", (evt) => {\n            evt.target.addLayer({\n                'id': this.props.RESULTS_LAYER_NAME,\n                'type': \"fill\",\n                'source': {\n                    'type': \"vector\",\n                    'url': \"mapbox://\" + this.props.tileset.id\n                },\n                'source-layer': this.props.tileset.name,\n                'paint': {\n                    'fill-color': \"rgba(0, 0, 0, 0)\", \n                    'fill-outline-color': \"rgba(0, 0, 0, 0)\"\n                }\n            });\n            this.map.setCenter(this.props.mapCentre);\n            this.setMapZoom();\n            // this.map.setCenter(this.props.tileset.center);\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.paintProperty !== prevProps.paintProperty) {\n            if (this.props.paintProperty.length === 0){\n                //resetting the paint property\n                this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-color\", \"rgba(0, 0, 0, 0)\");\n                this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-outline-color\", \"rgba(0, 0, 0, 0)\");\n            }else{\n                //the solution has been loaded and the paint properties have been calculated\n                this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-color\", this.props.paintProperty.fillColor);\n                this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-outline-color\", this.props.paintProperty.oulineColor);\n                this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-opacity\", 0.5);\n            }\n        }\n        if (this.props.mapCentre !== prevProps.mapCentre){\n            this.map.setCenter(this.props.mapCentre);\n        }\n        if (this.props.mapZoom !== prevProps.mapZoom){\n            this.setMapZoom();\n        }\n    }\n\n    componentWillUnmount() {\n        //remove the map and free all resources\n        if (this.map) this.map.remove();\n    }\n    \n    setMapZoom(){\n        // this.map.setZoom(this.props.mapZoom - 3);\n        this.map.setZoom(this.props.mapZoom);\n    }\n    \n    render() {\n        return (\n            <div style={{display:'inline-block', margin:'5px'}} onClick={(this.props.disabled) ? null : this.props.selectBlm.bind(this, this.props.blmValue)}>\n                <div style={{'fontSize':'14px'}}>BLM: {this.props.blmValue}</div>\n                <div ref={el => this.mapContainer = el} style={{width:'200px',height:'200px', cursor: (this.props.disabled) ? 'default' : 'pointer'}} className={'hoverMapContainer'} title={(this.props.disabled) ? '': 'Click to select this BLM value'}/>\n            </div>\n        );\n    }\n}\n\nexport default MapContainer;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport MapContainer from './MapContainer.js';\nimport TextField from 'material-ui/TextField';\n\nlet CLUMP_COUNT = 5;\nlet INITIAL_PAINT_PROPERTIES = { map0_paintProperty: [], map1_paintProperty: [], map2_paintProperty: [], map3_paintProperty: [], map4_paintProperty: [] };\n\nclass ClumpingDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { blmValues: [0.001, 0.01, 0.1, 1, 10], blmMin: 0.001, blmMax: 10, blmChanged: false, INITIAL_PAINT_PROPERTIES };\n\t}\n\n\t//when the dialog is shown, create the project group and run the projects with different blm values\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif ((this.props.open !== prevProps.open) && (this.props.open)) {\n\t\t\t//create the project group and run\n\t\t\tthis.createProjectGroupAndRun();\n\t\t}\n\t\tif ((this.props.open !== prevProps.open) && (!this.props.open)) {\n\t\t\t//reset the paint properties \n\t\t\tthis.resetPaintProperties();\n\t\t\t//delete the projects\n\t\t\tthis.deleteProjects();\n\t\t}\n\t}\n\n\t//creates a group of 5 projects with UUIDs in the _clumping folder\n\tcreateProjectGroupAndRun() {\n\t\t//clear any exists projects\n\t\tif (this.projects) this.deleteProjects();\n\t\tthis.props._get(\"createProjectGroup?user=\" + this.props.owner + \"&project=\" + this.props.project + \"&copies=5&blmValues=\" + this.state.blmValues.join(\",\")).then((response) => {\n\t\t\t//set the local variable for the projects\n\t\t\tthis.projects = response.data;\n\t\t\t//run the projects\n\t\t\tthis.runProjects(response.data);\n\t\t}).catch((error) => {\n\t\t\t//do something\n\t\t});\n\t}\n\n\t//deletes the projects from the _clumping folder\n\tdeleteProjects() {\n\t\tif (this.projects) {\n\t\t\tvar projectNames = this.projects.map((item) => {\n\t\t\t\treturn item.projectName;\n\t\t\t});\n\t\t\t//clear the local variable\n\t\t\tthis.projects = undefined;\n\t\t\tthis.props._get(\"deleteProjects?projectNames=\" + projectNames.join(\",\")).then((response) => {\n\t\t\t\t//do something\n\t\t\t}).catch((error) => {\n\t\t\t\t//do something\n\t\t\t});\n\t\t}\n\t}\n\n\trunProjects(projects) {\n\t\t//reset the counter\n\t\tthis.projectsRun = 0;\n\t\t//set the intitial state\n\t\tthis.props.setClumpingRunning(true);\n\t\t//run the projects\n\t\tprojects.forEach((project) => {\n\t\t\tthis.props.startMarxanJob(\"_clumping\", project.projectName, false).then((response) => {\n\t\t\t\t//run completed - get a single solution\n\t\t\t\tthis.loadOtherSolution(response.user, response.project, 1);\n\t\t\t\t//increment the project counter\n\t\t\t\tthis.projectsRun = this.projectsRun + 1;\n\t\t\t\t//set the state\n\t\t\t\tif (this.projectsRun === 5) this.props.setClumpingRunning(false);\n\t\t\t}).catch((error) => {\n\t\t\t\t//do something\n\t\t\t});\n\t\t});\n\t}\n\n\t//load the solution \n\tloadOtherSolution(user, project, solution) {\n\t\tthis.props.getSolution(user, project, solution).then((response) => {\n\t\t\tvar paintProperties = this.props.getPaintProperties(response.solution, false, false);\n\t\t\t//get the project that matches the project name from the this.projects property - this was set when the projectGroup was created\n\t\t\tif (this.projects) {\n\t\t\t\tvar _projects = this.projects.filter((item) => { return item.projectName === project });\n\t\t\t\t//get which clump it is\n\t\t\t\tvar clump = _projects[0].clump;\n\t\t\t\tswitch (clump) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tthis.setState({ map0_paintProperty: paintProperties });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tthis.setState({ map1_paintProperty: paintProperties });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tthis.setState({ map2_paintProperty: paintProperties });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tthis.setState({ map3_paintProperty: paintProperties });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tthis.setState({ map4_paintProperty: paintProperties });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeBlmMin(event, newValue) {\n\t\t//get the new blmValues\n\t\tthis.getBlmValues(newValue, this.state.blmMax);\n\t\t//set the new blmMin\n\t\tthis.setState({ blmMin: newValue });\n\t}\n\n\tchangeBlmMax(event, newValue) {\n\t\t//get the new blmValues\n\t\tthis.getBlmValues(this.state.blmMin, newValue);\n\t\t//set the new blmMax\n\t\tthis.setState({ blmMax: newValue });\n\t}\n\n\t//calculates the 5 blm values based on the min and max\n\tgetBlmValues(min, max) {\n\t\tvar blmValues = [];\n\t\t//get the increment\n\t\tvar increment = (max - min) / (CLUMP_COUNT - 1);\n\t\t//make the array of blmValues\n\t\tfor (var i = 0; i < CLUMP_COUNT; i++) {\n\t\t\tblmValues[i] = ((i * increment) + Number(min)).toFixed(3);\n\t\t}\n\t\tthis.setState({ blmValues: blmValues });\n\t\t//flag that the blmValues have changed\n\t\tthis.setState({ blmChanged: true });\n\t}\n\n\tparseBlmValue(value) {\n\t\tif (!isNaN(parseFloat(value)) && isFinite(value)) {\n\t\t\treturn value;\n\t\t}\n\t\telse {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tselectBlm(blmValue) {\n\t\t//set the blmValue for the project\n\t\tthis.props.setBlmValue(blmValue);\n\t\t//close the dialog\n\t\tthis.props.onOk();\n\t}\n\n\tresetPaintProperties() {\n\t\t//reset the paint properties\n\t\tthis.setState(INITIAL_PAINT_PROPERTIES);\n\t}\n\n\trerunProjects(blmChanged, blmValues) {\n\t\t//reset the paint properties in the clumping dialog\n\t\tthis.resetPaintProperties();\n\t\t//if the blmValues have changed then recreate the project group and run\n\t\tif (blmChanged) {\n\t\t\tthis.createProjectGroupAndRun();\n\t\t}\n\t\telse {\n\t\t\t//rerun the projects\n\t\t\tthis.runProjects(this.projects);\n\t\t}\n\t\t//reset the flag\n\t\tthis.setState({ blmChanged: false });\n\t}\n\n\tonRequestClose() {\n\t\tif (!this.props.clumpingRunning) this.props.onOk();\n\t}\n\n\trender() {\n\t\tlet mapContainers = [...Array(CLUMP_COUNT).keys()].map((clump) => {\n\t\t\tlet paintProperty;\n\t\t\tswitch (clump) {\n\t\t\t\tcase 0:\n\t\t\t\t\tpaintProperty = this.state.map0_paintProperty;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tpaintProperty = this.state.map1_paintProperty;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tpaintProperty = this.state.map2_paintProperty;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tpaintProperty = this.state.map3_paintProperty;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tpaintProperty = this.state.map4_paintProperty;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// code\n\t\t\t}\n\t\t\treturn <MapContainer key={clump} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={this.props.RESULTS_LAYER_NAME} paintProperty={paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[clump])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>;\n\t\t});\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tshowSpinner={this.props.clumpingRunning}\n\t\t\t\tcontentWidth={680}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={80}\n\t\t\t\tonOk={this.onRequestClose.bind(this)}\n\t\t\t\tokDisabled={this.props.clumpingRunning}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\thelpLink={\"docs_user.html#clumping-window\"}\n\t\t\t\tactions={[\n\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\tlabel=\"Refresh\" \n\t\t\t\t\t\tprimary={true} \n\t\t\t\t\t\tonClick={this.rerunProjects.bind(this)} \n\t\t\t\t\t\tdisabled={this.props.clumpingRunning || (!this.state.blmChanged)}\n\t\t\t\t\t/>]\n\t}\n\ttitle = \"Clumping\"\n\tchildren = {\n\t\t<div key=\"k7\">\n\t\t\t\t\t\t{mapContainers}\n\t\t\t\t\t\t<div style={{display:'inline-block', margin:'5px','verticalAlign':'top','paddingTop':'60px','textAlign':'center','fontSize':'14px',width:'200px', height:'224px'}}>\n\t\t\t\t\t\t\t\t<div>Move and zoom the main map to preview the clumping</div>\n\t\t\t\t\t\t\t\t<div style={{'paddingTop':'30px'}}>\n\t\t\t\t\t\t\t\t\t<span>BLM from </span>\n\t\t\t\t\t\t\t\t\t<TextField value={this.state.blmMin} onChange={this.changeBlmMin.bind(this)} style={{width:'36px'}} inputStyle={{'textAlign':'center', 'fontSize':'14px'}} id=\"blmmin\" disabled={this.props.clumpingRunning}/>\n\t\t\t\t\t\t\t\t\t<span> to </span>\n\t\t\t\t\t\t\t\t\t<TextField value={this.state.blmMax} onChange={this.changeBlmMax.bind(this)} style={{width:'36px'}} inputStyle={{'textAlign':'center', 'fontSize':'14px'}} id=\"blmmax\" disabled={this.props.clumpingRunning}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t}\n\t/>\n);\n}\n}\n\nexport default ClumpingDialog;\n","import React from 'react';\nimport FontAwesome from 'react-fontawesome';\n\nclass UploadFolder extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {folderUploadText : '', active: false};\n\t}\n\tonClick(e){\n\t\tthis.setState({active: true});\n\t}\n\tonChange(e) {\n\t\t\n\t\tthis.props.filesListed(e.target.files); \n\t\tthis.setState({folderUploadText: e.target.files.length + \" files\"});\n\t\tthis.setState({active: false});\n\t}\n\t_addDirectory(node) {\n\t\tif (node) { \n\t\t\tnode.directory = true;\n\t\t\tnode.webkitdirectory = true;\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className='uploadLabel' style={{color: (this.state.active) ? 'rgb(0, 188, 212)' : 'rgba(0, 0, 0, 0.3)'}}>{this.props.label}</div>\n\t\t\t\t<div className='uploadFileField'>\n\t\t\t\t\t<div className='uploadFileFieldIcon'>\n\t\t\t\t\t\t<div style={{display: 'inline-flex'}}>\n\t\t\t\t\t\t\t<label htmlFor={'folderSelector'}>\n\t\t\t\t\t\t\t\t<FontAwesome name='folder' title='Click to select a Marxan project folder' style={{'cursor':'pointer', display: 'inline-flex'}}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input id='folderSelector' ref={node => this._addDirectory(node)} type='file' onChange={this.onChange.bind(this)} onClick={this.onClick.bind(this)} style={{'display':'none', 'width':'10px'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='uploadFileFieldLabel'>{this.state.folderUploadText}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default UploadFolder;\n","import * as React from 'react';\nimport UploadFolder from './UploadFolder';\nimport ShapefileUpload from './ShapefileUpload';\nimport TextField from 'material-ui/TextField';\n\nclass UploadMarxanFiles extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {planning_grid_name:'', zipFilename: ''}; \n\t}\n\tsetzipFilename(filename) { \n\t\tthis.setState({ zipFilename: filename });\n\t\tthis.props.setZipFilename(filename); \n\t} \n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{marginTop:'14px'}}>\n\t\t\t\t\t<UploadFolder label=\"Marxan project folder\" filesListed={this.props.filesListed}/> \n\t\t\t\t\t<ShapefileUpload requestEndpoint={this.props.requestEndpoint} SEND_CREDENTIALS={this.props.SEND_CREDENTIALS} mandatory={true} filename={this.state.zipFilename} setFilename={this.setzipFilename.bind(this)} checkForErrors={this.props.checkForErrors} label=\"Planning grid zipped shapefile\" style={{'paddingTop':'20px'}}/> \n\t\t\t\t\t<TextField value={this.props.planning_grid_name} onChange={this.props.setPlanningGridName} floatingLabelText=\"Planning grid name\" floatingLabelFixed={true} style={{marginTop:'20px'}}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default UploadMarxanFiles;\n","import React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport Metadata from './Metadata';\nimport UploadMarxanFiles from './UploadMarxanFiles'; \n\n//some of the code in this component should be moved up to app.js like the POSTs but I have limited time\n\nclass ImportProjectDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { steps: ['Files and planning grid','Info' ], loading: false, stepIndex: 0, name: '', description: '', zipFilename: '', files:[], planning_grid_name:'' };\n\t}\n\thandleNext = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex === 1) {\n\t\t\tthis.setState({loading: true});\n\t\t\t//create the new project \n\t\t\tthis.props.importProject(this.state.name, this.state.description, this.state.zipFilename, this.state.files, this.state.planning_grid_name).then((response) => {\n\t\t\t\t//close the import wizard\n\t\t\t\tthis.onOk();\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.setState({loading: false});\n\t\t\t\tthis.props.log(error + \"Import stopped\");\n\t\t\t\tthis.props.setSnackBar(error);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t};\n\thandlePrev = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex > 0) {\n\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t}\n\t};\n\tfilesListed(files){\n\t\t//TODO filter the files to exclude all of the output files - these are unnecessary and will be creating on the first run anyway\n\t\tthis.setState({files: files});\n\t}\n\tsetZipFilename(filename){\n\t\tthis.setState({zipFilename: filename});\n\t}\n\tsetPlanningGridName(event, planning_grid_name){\n\t\tthis.setState({planning_grid_name: planning_grid_name});\n\t}\n\tsetName(value) {\n\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\tthis.setState({ description: value });\n\t}\n\tonOk(){\n\t\t//return the wizard back to zero\n\t\tthis.setState({loading: false, stepIndex: 0 });\n\t\tthis.props.onOk();\n\t}\n\trender() {\n\t\tconst { stepIndex } = this.state; \n\t\tconst contentStyle = { margin: '0 16px' };\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: 700, margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0} onClick={this.handlePrev} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} primary={true} disabled={this.state.loading} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet c = <React.Fragment key=\"k4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{stepIndex === 0 ? <UploadMarxanFiles \n\t\t\t\t\t\t\tfilesListed={this.filesListed.bind(this)}\n\t\t\t\t\t\t\tsetZipFilename={this.setZipFilename.bind(this)}\n\t\t\t\t\t\t\trequestEndpoint={this.props.requestEndpoint}  \n\t\t\t\t\t\t\tSEND_CREDENTIALS={this.props.SEND_CREDENTIALS}\n\t\t\t\t\t\t\tcheckForErrors={this.props.checkForErrors} \n\t\t\t\t\t\t\tsetPlanningGridName={this.setPlanningGridName.bind(this)}\n\t\t\t\t\t\t\tplanning_grid_name={this.state.planning_grid_name}\n\t\t\t\t\t\t/> : null}\n\t\t\t\t\t\t{stepIndex === 1 ? <Metadata name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)} paddingBottom={'50px'}/> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import existing Marxan project'}\n\t\t\t\tcontentWidth={390}\n\t\t\t\tchildren={c} \n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tactions={actions} \n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\thelpLink={\"docs_user.html#importing-existing-marxan-projects\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportProjectDialog;\n","import React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faRedoAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nclass RunLogDialog extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {selectedRun: undefined, runningJobs: false};\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t//if this browser isnt running a marxan job (i.e. this.props.preprocessing === false) but there are jobs which are running then we still want to be able to stop those jobs - here we set a flag to allow the STOP button to be enabled even if this.props.preprocessing === false\n\t\tif (this.props.runLogs !== prevProps.runLogs){\n\t\t\t//see of any of the run logs are running\n\t\t\tlet runningLogs = this.props.runLogs.filter((item) => {return item.status === 'Running'});\n\t\t\tthis.setState({runningJobs: (runningLogs.length > 0)});\n\t\t}\n\t}\n\tcloseDialog() {\n\t\tthis.setState({ selectedRun: undefined });\n\t\tthis.props.onOk(); \n\t}\n\tstopRun(evt){\n\t\t//stop the run\n\t\tthis.props.stopMarxan(\"m\" + this.state.selectedRun.pid);\n\t\t//refresh the run log - this may be done when the process stops on the server and it sends the results back in the websocket - but in case the client is not connected to the server explicitly request it\n\t\tthis.refreshRunLogs();\n\t}\n\tclearRunLogs(evt){\n\t\tthis.props.clearRunLogs();\n\t}\n\trefreshRunLogs(evt){\n\t\tthis.props.getRunLogs();\n\t\t//unselect the selected run\n\t\tthis.setState({ selectedRun: undefined });\n\t}\n\tchangeSelectedRun(event, run) {\n\t\tthis.setState({ selectedRun: run });\n\t}\n\trenderUser(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.user}>{row.original.user}</div>;        \n\t}\n\trenderProject(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.project}>{row.original.project}</div>;        \n\t}\n\trenderStatus(row){\n\t\tvar icon;\n    switch (row.original.status) {\n      case 'Completed': \n      \ticon = <FontAwesomeIcon icon={faCheckCircle} style={{color:'green'}} title={'Run completed'}/>;\n        break;\n      case 'Stopped': \n      \ticon = <FontAwesomeIcon icon={faTimesCircle} style={{color:'darkgray'}} title={'Run stopped by the user'}/>;\n        break;\n      case 'Killed': \n      \ticon = <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red'}} title={'Run stopped by the operating system'}/>;\n        break;\n      case 'Running': \n      \ticon = <Sync className='spin' style={{height: '16px', width: '16px', verticalAlign: 'sub', color: 'rgb(255, 64, 129)'}}/>;\n        break;\n      default:\n        break;\n    }\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.status}>{icon}{\"  \" + row.original.status}</div>;        \n\t}\n\trenderEnded(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{(row.original.endtime) ? row.original.endtime : ''}</div>;        \n\t}\n\trenderRuntime(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{(row.original.runtime) ? row.original.runtime : ''}</div>;        \n\t}\n\trender() {\n\t\tlet tableColumns = [];\n\t\ttableColumns = [\n\t\t\t{ Header: 'pid', accessor: 'pid', width: 60, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'User', accessor: 'user', width: 60, headerStyle: { 'textAlign': 'left' }, Cell: this.renderUser.bind(this)}, \n\t\t\t{ Header: 'Project', accessor: 'project', width: 150, headerStyle: { 'textAlign': 'left' }, Cell: this.renderProject.bind(this)}, \n\t\t\t{ Header: 'Started', accessor: 'starttime', width: 112, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'Ended', accessor: 'endtime', width: 112, headerStyle: { 'textAlign': 'left' }, Cell: this.renderEnded.bind(this)}, \n\t\t\t{ Header: 'Runtime', accessor: 'runtime', width: 60, headerStyle: { 'textAlign': 'right' }, className: 'table_column_right_align', Cell: this.renderRuntime.bind(this)}, \n\t\t\t{ Header: 'Runs', accessor: 'runs', width: 60, headerStyle: { 'textAlign': 'right' }, className: 'table_column_right_align'}, \n\t\t\t{ Header: 'Status', accessor: 'status', width: 80, headerStyle: { 'textAlign': 'left' }, Cell: this.renderStatus.bind(this) }\n\t\t];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tonCancel={this.closeDialog.bind(this)}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"docs_user.html#the-run-log\"}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\ttitle=\"Runs\"  \n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t<div style={{marginBottom:'5px'}}>There are a total of {this.props.runLogs.length} runs in the log:</div>\n\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\t  pageSize={ this.props.runLogs.length }\n\t\t\t\t\t\t\t\t\tclassName={'projectsReactTable noselect'}\n\t\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\tdata={this.props.runLogs}\n\t\t\t\t\t\t\t\t\tthisRef={this} \n\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.pid === (state.thisRef.state.selectedRun && state.thisRef.state.selectedRun.pid)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tstate.thisRef.changeSelectedRun(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"stopMarxan\")}\n\t\t\t\t\t\t\t\ttitle=\"Stop run\" \n\t\t\t\t\t\t\t\tdisabled={(this.state.selectedRun === undefined) ? true : (!this.props.preprocessing && !this.state.runningJobs) ? true : (this.state.selectedRun.status !== 'Running')}\n\t\t\t\t\t\t\t\tonClick={this.stopRun.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Stop\"}\n\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"getRunLogs\")}\n\t\t\t\t\t\t\t\ttitle=\"Refresh run logs\" \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faRedoAlt}/>} \n\t\t\t\t\t\t\t\tonClick={this.refreshRunLogs.bind(this)} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"clearRunLogs\")}\n\t\t\t\t\t\t\t\ttitle=\"Clear run logs\" \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\tonClick={this.clearRunLogs.bind(this)} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default RunLogDialog;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ToolbarButton from './ToolbarButton';\n\nclass ServerDetailsDialog extends React.Component {\n  render() {\n    // add the following if necessary\n    // <div className=\"tabTitle\">Release: {this.props.marxanServer&&this.props.marxanServer.release}</div>\n    // <div className=\"tabTitle\">Version: {this.props.marxanServer&&this.props.marxanServer.version}</div>\n    // <div className=\"tabTitle\">Processor: {this.props.marxanServer&&this.props.marxanServer.processor}</div>\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"Server Details\"\n        helpLink={\"docs_user.html#server-details\"}\n        children={\n          <div key=\"k5\">\n            <div className=\"tabTitle\">Name:</div><div className=\"serverDetails\">{this.props.marxanServer&&this.props.marxanServer.name}</div>\n            <div className=\"tabTitle\">Host:</div><div className=\"serverDetails\">{this.props.marxanServer&&this.props.marxanServer.host}</div>\n            <div className=\"tabTitle\">Description:</div><div className=\"serverDetails\">{this.props.marxanServer&&this.props.marxanServer.description}</div>\n            <div className=\"tabTitle\">System:</div><div className=\"serverDetails\">{this.props.marxanServer&&this.props.marxanServer.system}</div>\n            <div className=\"tabTitle\">Marxan Server version:</div><div className=\"serverDetails\">{this.props.marxanServer&&this.props.marxanServer.server_version}</div>\n            <div className=\"tabTitle\">WDPA version:</div><div className=\"serverDetails\">{this.props.marxanServer&&this.props.marxanServer.wdpa_version}</div>\n            <div style={{display: (this.props.newWDPAVersion ? 'block' : 'none')}}>\n              <br/>\n              <div className=\"tabTitle\" dangerouslySetInnerHTML={{ __html: window.WDPA.latest_version + \" is available. Details <a href='\" + window.WDPA.metadataUrl + \"' target='_blank'>here</a>. Click below to update. \"}}/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<ToolbarButton title=\"Update WDPA\" onClick={this.props.updateWDPA} label=\"Update\" disabled={this.props.loading}/>\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default ServerDetailsDialog;\n","//a dialog box that is shown when the user first logs in to alert them to anything, e.g. A new version of the WDPA is available for admin users\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\n\nclass AlertDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"Alert\"\n        children={\n          <div key=\"k23\">\n              <div className={'description'}>A new version of the WDPA is available. <br/>Click on Help | Server Details for more information.</div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AlertDialog;\n","import React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport TextField from 'material-ui/TextField';\n\nclass ChangePasswordDialog extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {currentPassword: '', newPassword1: '', newPassword2: '', };\n  }\n  setCurrentPassword(event, newValue){\n    this.setState({currentPassword: newValue});\n  }\n  setNewPassword1(event, newValue){\n    this.setState({newPassword1: newValue});\n  }\n  setNewPassword2(event, newValue){\n    this.setState({newPassword2: newValue});\n  }\n  onOk(evt){\n    if (this.state.newPassword2 !== this.state.newPassword1) {\n      this.passwordsDontMatch();\n      return;\n    }\n    this.props.checkPassword(this.props.user, this.state.currentPassword).then((response) => {\n      this.props.updateUser({PASSWORD: this.state.newPassword1}).then((response) => {\n        this.props.setSnackBar(\"Password updated\");\n        this.props.onOk();\n      }).catch((error) =>{\n        this.props.setSnackBar(\"Password not updated\");\n      });\n    }).catch((response) => {\n      this.props.setSnackBar(\"Invalid password\");\n    });\n  }\n  passwordsDontMatch(){\n    this.props.setSnackBar(\"Passwords don't match\");\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.onOk.bind(this)}\n        showCancelButton={true}\n        onCancel={this.props.onOk}\n        helpLink={\"docs_user.html#change-password\"}\n        contentWidth={358}\n        offsetY={80}\n        title=\"Change Password\"\n        children={\n          <div key=\"k5\">\n\t\t\t\t\t\t<TextField floatingLabelText=\"Current password\" floatingLabelFixed={true} onChange = {this.setCurrentPassword.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} type=\"password\"/>\n\t\t\t\t\t\t<TextField floatingLabelText=\"New password\" floatingLabelFixed={true} onChange = {this.setNewPassword1.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} type=\"password\"/>\n\t\t\t\t\t\t<TextField floatingLabelText=\"Repeat password\" floatingLabelFixed={true} onChange = {this.setNewPassword2.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} style={{fontSize:'13px'}} type=\"password\"/>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default ChangePasswordDialog;\n","import React from 'react';\nimport ReactTable from \"react-table\";\n\nclass Popup extends React.Component {\n\t\trender() {\n\t\t\t\tlet data = this.props.active_pu ? Object.keys(this.props.active_pu).map(key => ({ key, value: this.props.active_pu[key] })) : [];\n\t\t\t\tlet left = this.props.xy.x + 25 + 'px';\n\t\t\t\tlet top = this.props.xy.y - 25 + 'px';\n\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{'display': data.length>0 ? 'block' : 'none','left': left,'top':top}} id=\"popup\">\n\t\t\t\t\t\t\t\t<div className={'popupHeader'}>Planning unit properties</div>\n\t\t\t\t\t\t\t\t<ReactTable\n\t\t\t\t\t\t\t\t\tshowPagination={false}\n\t\t\t\t\t\t\t\t\tpageSize={data.length}\n\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t\t Header: 'Property',\n\t\t\t\t\t\t\t\t\t\t accessor: 'key' \n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t Header: 'Value',\n\t\t\t\t\t\t\t\t\t\t accessor: 'value' \n\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t}\n}\n\nexport default Popup;\n","import React from 'react';\nimport ReactTable from \"react-table\";\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nclass PopupFeatureList extends React.Component {\n\trender() {\n\t\tlet left = this.props.xy.x + 25 + 'px';\n\t\tlet top = this.props.xy.y - 25 + 'px';\n\t\treturn (\n\t\t\t<div style={{'display': this.props.features && this.props.features.length > 0 ? 'block' : 'none', 'left': left,'top':top}} id=\"popup\">\n\t\t\t\t<div className={'popupHeader'}>Features</div>\n\t\t\t\t<Sync className='spin' style={{display: this.props.loading ? \"inline-block\" : \"none\", color: 'rgb(255, 64, 129)', position: 'absolute', top: '5px', right: '7px'}} key={\"spinner\"}/>\n\t\t\t\t<ReactTable\n\t\t\t\t\tshowPagination={false}\n\t\t\t\t\tpageSize={(this.props.loading) ? 0 : this.props.features && this.props.features.length}\n\t\t\t\t\tminRows={0}\n\t\t\t\t\tnoDataText=''\n\t\t\t\t\tdata={this.props.features}\n\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t Header: 'Feature',\n\t\t\t\t\t\t accessor: 'alias',\n\t\t\t\t\t\t width: 220,\n\t\t\t\t\t\t headerStyle: { display:'none'}\n\t\t\t\t\t}]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PopupFeatureList;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\n\nclass Notification extends React.Component {\n\trender() {\n\t\tlet icon = (this.props.type === \"Hardware Issue\") ? <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', paddingRight:'5px'}}/> : null;\n\t\treturn (\n\t\t\t<div className={\"notification\"}>\n\t\t\t\t<div className={\"notificationType\"}>{icon}{this.props.type}<span className={\"removeNotification\"} onClick={this.props.removeNotification} title={\"Dismiss\"}>x</span></div>\n\t\t    \t<div dangerouslySetInnerHTML={{__html: this.props.html}}></div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Notification;\n","import React from 'react';\nimport Notification from './Notification.js';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBell} from '@fortawesome/free-solid-svg-icons';\n\nclass Notifications extends React.Component {\n\trender() {\n\t\t//get the visible notifications\n\t\tlet notifications = this.props.notifications && this.props.notifications.filter(item => item.visible);\n\t    notifications = notifications.map((item)=>{\n\t        return <Notification html={item.html} type={item.type} key={item.id} removeNotification={this.props.removeNotification.bind(this, item)}></Notification>;\n\t    });\n\t\treturn (\n\t\t    <div className={\"notifications\"} style={{display: (this.props.open && notifications.length > 0) ? 'block' : 'none'}}>\n\t            <div className=\"notificationsTitle\"><FontAwesomeIcon icon={faBell} style={{fontSize: '16px'}}/><span className={\"notificationsTitleText\"}>Notifications</span><span className={\"closeWindow\"} onClick={this.props.hideNotifications} title={\"Close\"}>x</span></div>\n\t\t        {notifications}\n\t\t        <div className={\"notificationPointer\"}></div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Notifications;\n","import React from 'react';\n\nclass PopupPAList extends React.Component {\n\trender() {\n\t\tlet left = this.props.xy.x + 25 + 'px';\n\t\tlet top = this.props.xy.y - 25 + 'px';\n\t\tlet children = this.props.features.map((item)=>{\n\t\t\treturn <div className={'wdpaPopup'} key={item.wdpaid}><a href={\"https://www.protectedplanet.net/\" + item.wdpaid} target='_blank'  rel=\"noopener noreferrer\" title='Click to open the protected area in the Protected Planet website'>{item.name}<span style={{paddingRight:'5px'}}/>({item.iucn_cat})</a></div>;\n\t\t});\n\t\treturn (\n\t\t\t<div style={{'display': this.props.features && this.props.features.length > 0 ? 'block' : 'none', 'left': left,'top':top}} id=\"popup\" onMouseOver={this.props.onMouseEnter} onMouseLeave={this.props.onMouseLeave}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PopupPAList;","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport { isValidTargetValue } from './genericFunctions.js';\n\nclass TargetDialog extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = { target_value: 17, validTarget: true };\n    }\n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.validateTarget(); \n\t} \n    validateTarget() {\n        let _validTarget = isValidTargetValue(this.state.target_value);\n        this.setState({ validTarget: _validTarget });\n        if (_validTarget) {\n            this.props.updateTargetValueForFeatures(this.state.target_value);\n            this.props.onOk();\n        }\n    }\n    onOk() {\n        this.validateTarget();\n    }\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={240}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={260}\n                title=\"Target\"\n                onOk={this.onOk.bind(this)}\n                children={\n                <React.Fragment>\n                    <TextField \n                        floatingLabelFixed={true} \n                        onChange = {(event,newValue) => this.setState({\"target_value\":newValue})} \n                        defaultValue ={this.state.target_value} \n                        onKeyPress={this.handleKeyPress.bind(this)}\n                        floatingLabelShrinkStyle={{fontSize:'16px'}} \n                        floatingLabelFocusStyle={{fontSize:'16px'}} \n                        style={{fontSize:'13px',width:'70px'}} \n                        errorText={this.state.validTarget ?  '' : \"Invalid target\"} \n                    /> \n                </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default TargetDialog;\n","import * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport TextField from 'material-ui/TextField';\nimport ToolbarButton from './ToolbarButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faClipboard } from '@fortawesome/free-solid-svg-icons';\n\nclass ShareableLinkDialog extends React.PureComponent {\n    copyToClipboard(evt){\n        window.navigator.clipboard.writeText(this.props.shareableLinkUrl).then(function() {\n            \n        }, function() {\n            alert(\"Browser not supported\");\n        });\n\t}\n\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={600}\n                height={100}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={360}\n                title=\"Shareable link\"\n                children={\n                <React.Fragment>\n                    <TextField \n                        multiLine={true} rows={2} \n                        floatingLabelFixed={true} \n                        onChange = {(event,newValue) => this.setState({\"target_value\":newValue})} \n                        defaultValue ={this.props.shareableLinkUrl} \n                        floatingLabelShrinkStyle={{fontSize:'16px'}} \n                        floatingLabelFocusStyle={{fontSize:'16px'}} \n                        style={{fontSize:'13px',width:'550px'}} \n                    /> \n\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faClipboard}/>} \n\t\t\t\t\t\ttitle=\"Copy\"\n\t\t\t\t\t\tonClick={this.copyToClipboard.bind(this)} \n\t\t\t\t\t/>\n            </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default ShareableLinkDialog;\n","/*global fetch*/\n/*global URLSearchParams*/\nimport React from 'react';\nimport packageJson from '../package.json';\nimport fetchJsonp from 'fetch-jsonp';\n/*eslint-disable no-unused-vars*/ \nimport axios, { post } from 'axios';\n/*eslint-enable no-unused-vars*/\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\n//mapbox imports\nimport MapboxDraw from '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.js';\nimport mapboxgl from 'mapbox-gl';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport jsonp from 'jsonp-promise';\nimport classyBrew from 'classybrew';\nimport { getMaxNumberOfClasses } from './genericFunctions.js';\n//material-ui components and icons\nimport Popover from 'material-ui/Popover';\nimport Menu from 'material-ui/Menu';\nimport Snackbar from 'material-ui/Snackbar';\nimport Properties from 'material-ui/svg-icons/alert/error-outline';\nimport RemoveFromProject from 'material-ui/svg-icons/content/remove';\nimport AddToMap from 'material-ui/svg-icons/action/visibility';\nimport RemoveFromMap from 'material-ui/svg-icons/action/visibility-off';\nimport ZoomIn from 'material-ui/svg-icons/action/zoom-in';\nimport Preprocess from 'material-ui/svg-icons/action/autorenew';\n//project components\nimport AppBar from './AppBar';\nimport LoadingDialog from './LoadingDialog';\nimport LoginDialog from './LoginDialog';\nimport RegisterDialog from './RegisterDialog.js';\nimport ResendPasswordDialog from './ResendPasswordDialog.js';\nimport UserMenu from './UserMenu';\nimport HelpMenu from './HelpMenu';\nimport OptionsDialog from './OptionsDialog';\nimport ProfileDialog from './ProfileDialog';\nimport UsersDialog from './UsersDialog';\nimport AboutDialog from './AboutDialog';\nimport MenuItemWithButton from './MenuItemWithButton';\nimport InfoPanel from './InfoPanel';\nimport ResultsPanel from './ResultsPanel';\nimport FeatureInfoDialog from './FeatureInfoDialog';\nimport ProjectsDialog from './ProjectsDialog';\nimport NewProjectDialog from './NewProjectDialog';\nimport FailedToDeleteDialog from './FailedToDeleteDialog';\nimport PlanningGridDialog from './PlanningGridDialog';\nimport PlanningGridsDialog from './PlanningGridsDialog';\nimport NewPlanningGridDialog from './NewPlanningGridDialog';\nimport ImportPlanningGridDialog from './ImportPlanningGridDialog';\nimport FeatureDialog from './FeatureDialog';\nimport FeaturesDialog from './FeaturesDialog';\nimport NewFeatureDialog from './NewFeatureDialog';\nimport ImportFeaturesDialog from './ImportFeaturesDialog';\nimport CostsDialog from './CostsDialog';\nimport RunSettingsDialog from './RunSettingsDialog';\nimport ClassificationDialog from './ClassificationDialog';\nimport ClumpingDialog from './ClumpingDialog';\nimport ImportProjectDialog from './ImportProjectDialog';\nimport RunLogDialog from './RunLogDialog';\nimport ServerDetailsDialog from './ServerDetailsDialog';\nimport AlertDialog from './AlertDialog';\nimport ChangePasswordDialog from './ChangePasswordDialog';\nimport Popup from './Popup';\nimport PopupFeatureList from './PopupFeatureList';\nimport Notifications from './Notifications';\nimport PopupPAList from './PopupPAList';\nimport TargetDialog from './TargetDialog';\nimport ShareableLinkDialog from './ShareableLinkDialog';\n\n//CONSTANTS\nlet MARXAN_CLIENT_VERSION = packageJson.version; //TODO UPDATE PACKAGE.JSON WHEN THERE IS A NEW VERSION\nlet DOCS_ROOT = \"https://andrewcottam.github.io/marxan-web/documentation/\";\nlet ERRORS_PAGE = DOCS_ROOT + \"docs_errors.html\";\nlet SEND_CREDENTIALS = true; //if true all post requests will send credentials\nlet TORNADO_PATH = \"/marxan-server/\";\nlet TIMEOUT = 0; //disable timeout setting\nlet MAPBOX_USER = \"blishten\";\nlet MAPBOX_STYLE_PREFIX = 'mapbox://styles/';\nlet PLANNING_UNIT_STATUSES = [1, 2, 3];\n//layer source names\nlet PLANNING_UNIT_SOURCE_NAME = \"planning_units_source\";\nlet WDPA_SOURCE_NAME = \"wdpa_source\";\n//layer names\nlet PU_LAYER_NAME = \"planning_units_layer\"; //layer showing the planning units\nlet STATUS_LAYER_NAME = \"planning_units_status_layer\"; //layer showing the status of planning units \nlet COSTS_LAYER_NAME = \"costs_layer\"; //layer showing the cost of planning units\nlet PUVSPR_LAYER_NAME = \"planning_units_puvspr_layer\"; //layer showing the planning units for a particular feature\nlet RESULTS_LAYER_NAME = \"results_layer\"; //layer for either the sum of solutions or the individual solutions\nlet WDPA_LAYER_NAME = \"wdpa\"; //layer showing the protected areas from the WDPA\n//layer default styles\nlet PU_LAYER_OPACITY = 0.4;\nlet STATUS_LAYER_LINE_WIDTH = 1.5;\nlet PUVSPR_LAYER_LINE_WIDTH = 1.5;\nlet PUVSPR_LAYER_OUTLINE_COLOR = 'rgba(255, 0, 0, 1)';\nlet RESULTS_LAYER_FILL_OPACITY_ACTIVE = 0.9;\nlet RESULTS_LAYER_FILL_OPACITY_INACTIVE = 0;\nlet WDPA_FILL_LAYER_OPACITY = 0.2;\nlet HIDE_PUVSPR_LAYER_TEXT = \"Remove planning unit outlines\";\nlet SHOW_PUVSPR_LAYER_TEXT = \"Outline planning units where the feature occurs\";\n\n//an array of feature property information that is used in the Feature Information dialog box - showForOld sets whether that property is shown for old versions of marxan\nlet FEATURE_PROPERTIES = [{ name: 'id', key: 'ID',hint: 'The unique identifier for the feature', showForOld: false, showForNew: false},\n  { name: 'alias', key: 'Alias',hint: 'A human readable name for the feature', showForOld: false, showForNew: false},\n  { name: 'feature_class_name', key: 'Feature class name',hint: 'The internal name for the feature in the PostGIS database', showForOld: false, showForNew: false},\n  { name: 'description', key: 'Description',hint: 'Full description of the feature', showForOld: false, showForNew: false},\n  { name: 'creation_date', key: 'Creation date',hint: 'The date the feature was created or imported', showForOld: false, showForNew: false},\n  { name: 'tilesetid', key: 'Mapbox ID',hint: 'The unique identifier of the feature tileset in Mapbox', showForOld: false, showForNew: false},\n  { name: 'area', key: 'Total area',hint: 'The total area for the feature in Km2 (i.e. globally)', showForOld: false, showForNew: false},\n  { name: 'target_value', key: 'Target percent',hint: 'The target percentage for the feature within the planning grid', showForOld: true, showForNew: true},\n  { name: 'spf', key: 'Species Penalty Factor',hint: 'The species penalty factor is used to weight the likelihood of getting a species in the results', showForOld: true, showForNew: true},\n  { name: 'preprocessed', key: 'Preprocessed',hint: 'Whether or not the feature has been intersected with the planning units', showForOld: false, showForNew: true},\n  { name: 'pu_count', key: 'Planning unit count',hint: 'The number of planning units that intersect the feature (calculated during pre-processing)', showForOld: true, showForNew: true},\n  { name: 'pu_area', key: 'Planning grid area',hint: 'The area of the feature within the planning grid in Km2 (calculated during pre-processing)', showForOld: true, showForNew: true},\n  { name: 'target_area', key: 'Target area',hint: 'The total area that needs to be protected to achieve the target percentage in Km2 (calculated during a Marxan Run)', showForOld: true, showForNew: true},\n  { name: 'protected_area', key: 'Area protected',hint: 'The total area protected in the current solution in Km2 (calculated during a Marxan Run)', showForOld: true, showForNew: true}];\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      marxanServers: [],\n      marxanServer: {},\n      usersDialogOpen: false,\n      alertDialogOpen: false,\n      featureMenuOpen: false,\n      profileDialogOpen: false,\n      aboutDialogOpen: false,\n      helpDialogOpen: false,\n      importProjectDialogOpen: false,\n      optionsDialogOpen: false,\n      CostsDialogOpen: false,\n      registerDialogOpen: false,\n      clumpingDialogOpen: false,\n      settingsDialogOpen: false,\n      projectsDialogOpen: false,\n      openInfoDialogOpen: false,\n      newProjectDialogOpen: false, \n      shareableLinkDialogOpen: false,\n      classificationDialogOpen: false,\n      resendPasswordDialogOpen: false,\n      NewPlanningGridDialogOpen: false, \n      importPlanningGridDialogOpen: false,\n      FailedToDeleteDialogOpen: false,\n      changePasswordDialogOpen: false,\n      importFeaturesDialogOpen: false,\n      serverDetailsDialogOpen: false,\n      planningGridsDialogOpen: false,\n      planningGridDialogOpen: false,\n      NewFeatureDialogOpen: false,\n      featuresDialogOpen: false,\n      featureDialogOpen: false,\n      runLogDialogOpen: false,\n      infoPanelOpen: false,\n      resultsPanelOpen: false,\n      targetDialogOpen: false,\n      notificationsOpen: false,\n      guestUserEnabled: true,\n      userMenuOpen: false,\n      helpMenuOpen: false,\n      users: [],\n      user: '', \n      password: '',\n      project: '',\n      failedToDeleteProjects: [],\n      owner: '', // the owner of the project - may be different to the user, e.g. if logged on as guest (user) and accessing someone elses project (owner)\n      loggedIn: false,\n      shareableLink: false,\n      userData: {},\n      unauthorisedMethods: [],\n      metadata: {},\n      renderer: {},\n      runParams: [],\n      files: {},\n      popup_point: { x: 0, y: 0 },\n      snackbarOpen: false,\n      snackbarMessage: '',\n      tilesets: [],\n      puFeatures: [],\n      paFeatures: [],\n      loading: false,\n      preprocessing: false,\n      pa_layer_visible: false,\n      currentFeature:{},\n      puvsprLayerText: '',\n      featureDatasetFilename: '',\n      dataBreaks: [],\n      allFeatures: [], //all of the interest features in the metadata_interest_features table\n      projectFeatures: [], //the features for the currently loaded project\n      selectedFeatureIds :[],\n      addingRemovingFeatures: false,\n      results_layer_opacity: RESULTS_LAYER_FILL_OPACITY_ACTIVE, //initial value\n      wdpa_layer_opacity: WDPA_FILL_LAYER_OPACITY, //initial value\n      costs: [],\n      selectedCosts: [],\n      countries: [],\n      planning_units: [],\n      planning_unit_grids: [],\n      planning_grid_metadata:{},\n      feature_metadata:{},\n      activeTab: \"project\",\n      activeResultsTab: \"legend\",\n      logMessages: [],\n      map0_paintProperty: [],\n      map1_paintProperty: [],\n      map2_paintProperty: [],\n      map3_paintProperty: [],\n      map4_paintProperty: [],\n      clumpingRunning: false,\n      deleteWhat:'',\n      pid: 0,\n      basemaps: [],\n      basemap: 'North Star',\n      mapCentre: {lng: 0, lat: 0},\n      mapZoom: 12,\n      runLogs:[],\n      puEditing: false,\n      wdpaAttribution: \"\",\n      shareableLinkUrl: \"\",\n      notifications:[]\n    };\n  }\n\n  componentDidMount() {\n    //if this is a shareable link, then dont show the login form\n    if (window.location.search !== \"\") this.setState({loggedIn:true, shareableLink:true});\n    //parse the application level variables from the Marxan Registry\n    this.getGlobalVariables().then(()=>{\n      //automatically login if this is a shareable link\n      if (window.location.search !== \"\") {\n        //get the query parameters\n        var searchParams = new URLSearchParams(window.location.search);\n        //open the shareable link\n        this.openShareableLink(searchParams);\n      }\n    });\n    //instantiate the classybrew to get the color ramps for the renderers\n    this.setState({ brew: new classyBrew() });\n  }\n  \n  //gets various global variables from the marxan registry\n  getGlobalVariables(){\n    return new Promise((resolve, reject) => {\n      mapboxgl.accessToken = window.MBAT_PUBLIC; //this is my public access token \n      //initialise the basemaps\n      this.setState({basemaps: window.MAPBOX_BASEMAPS});\n      //get all the information for the marxan servers by polling them\n      this.initialiseServers(window.MARXAN_SERVERS).then((response)=>{\n        resolve(response);\n      });\n    });\n  }\n  \n  //automatically logs in and loads a project as a guest user\n  openShareableLink(searchParams){\n    try {\n      if (searchParams.has(\"server\") && searchParams.has(\"user\") && searchParams.has(\"project\")){\n        //get the server data from the servers object\n        let serverData = this.state.marxanServers.find(server => server.name === searchParams.get(\"server\"));\n        if (serverData === undefined) throw new Error(\"Invalid server parameter on shareable link\");\n        if (serverData && serverData.offline) throw new Error(\"Server is offline\");\n        if (serverData && !serverData.guestUserEnabled) throw new Error(\"Guest user is not enabled on the server\");\n        //set the server\n        this.selectServer(serverData);\n        //switch to the guest user\n        this.switchToGuestUser().then(()=>{\n          //login\n          this.validateUser().then((response)=>{\n            this.loadProject(searchParams.get(\"project\"),searchParams.get(\"user\")).then(()=>{\n              //hide the loading dialog\n              this.setState({shareableLink:false});\n            });\n          });\n        });\n      }else{\n        throw new Error(\"Invalid query parameters on shareable link\");\n      }\n    }\n\t\tcatch (err) {\n\t\t  alert(err);\n\t\t}\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// REQUEST HELPERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //makes a GET request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _get(params, timeout = TIMEOUT){\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({loading: true});\n      jsonp(this.state.marxanServer.endpoint + params, { timeout: timeout }).promise.then((response) => {\n        this.setState({loading: false});\n        if (!this.checkForErrors(response)) {\n          resolve(response);\n        }\n        else {\n          reject(response.error);\n        }\n      }, (err) => {\n        this.setState({loading: false});\n        this.setSnackBar(\"Request timeout - See <a href='\" + ERRORS_PAGE + \"#request-timeout' target='blank'>here</a>\");\n        reject(err);\n      });\n    });\n  }\n \n  //makes a POST request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _post(method, formData, timeout = TIMEOUT, withCredentials = SEND_CREDENTIALS){\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({loading: true});\n      post(this.state.marxanServer.endpoint + method, formData, {withCredentials: withCredentials}).then((response) => {\n        if (!this.checkForErrors(response.data)) {\n          this.setState({loading: false});\n          resolve(response.data);\n        }\n        else {\n          this.setState({loading: false});\n          reject(response.data.error);\n        }\n      }, (err) => {//TODO - If the request is unauthorised it returns the Status Code of 200 with the error: \"HTTP 403: Forbidden (The 'ReadOnly' role does not have permission to access the 'updateSpecFile' service)\" - but for some reason this error handling is used\n        this.setState({loading: false});\n        this.setSnackBar(err.message);\n        reject(err);\n      });\n    });\n  }\n \n  //web socket requests\n  _ws(params, msgCallback){\n    return new Promise((resolve, reject) => {\n      let ws = new WebSocket(this.state.marxanServer.websocketEndpoint + params);\n      //get the message and pass it to the msgCallback function\n      ws.onmessage = (evt) => {\n        let message = JSON.parse(evt.data);\n        //check for errors\n        if (!this.checkForErrors(message)){\n          if (message.status === \"Finished\"){\n            //pass the message back to the callback\n            msgCallback(message);\n            //reset state\n            this.setState({preprocessing: false});\n            //if the web socket has finished then resolve the promise\n            resolve(message);\n          }else{\n            msgCallback(message);\n          }\n        }else{\n          //pass the message back to the callback\n          msgCallback(message);\n          //reset state\n          this.setState({preprocessing: false});\n          reject(message.error);\n        }\n      };\n      ws.onopen = (evt) => {\n        //do something if necessary\n      };\n      ws.onerror = (evt) => {\n        //reset state\n        this.setState({preprocessing: false});\n        reject(evt);\n      };\n      ws.onclose = (evt) => {\n        //reset state\n        this.setState({preprocessing: false});\n        if (!evt.wasClean) {\n          msgCallback({status:'SocketClosed'});\n        }else{\n          reject(evt);\n        }\n      };\n    });\n  }\n  \n  //checks the reponse for errors\n  checkForErrors(response, showSnackbar = true) {\n    let networkError = this.responseIsTimeoutOrEmpty(response, showSnackbar);\n    //check the response from the server for an error property - if it has one then show it in the snackbar\n    let serverError = this.isServerError(response, showSnackbar);\n    let isError = (networkError || serverError);\n    if (isError) {\n      //write the full trace to the console if available\n      let error = (response.hasOwnProperty('trace')) ? response.trace : (response.hasOwnProperty('error')) ? response.error : \"No error message returned\";\n      console.error(\"Error message from server: \" + error);\n    }\n    return isError;\n  }\n\n  //checks the response from a REST call for timeout errors or empty responses\n  responseIsTimeoutOrEmpty(response, showSnackbar = true) {\n    if (!response) {\n      let msg = \"No response received from server\";\n      if (showSnackbar) this.setSnackBar(msg);\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  //checks to see if the rest server raised an error and if it did then show in the snackbar\n  isServerError(response, showSnackbar) {\n    //errors may come from the marxan server or from the rest server which have slightly different json responses\n    if ((response && response.error) || (response && response.hasOwnProperty('metadata') && response.metadata.hasOwnProperty('error') && response.metadata.error != null)) {\n      var err = (response.error) ? (response.error) : response.metadata.error;\n      if (showSnackbar) this.setSnackBar(err);\n      return true;\n    }\n    else {\n      //some server responses are warnings and will not stop the function from running as normal\n      if (response.warning) {\n        if (showSnackbar) this.setSnackBar( response.warning);\n      }\n      return false;\n    }\n  }\n\n  //called when any websocket message is received - this logic removes duplicate messages\n  wsMessageCallback(message){\n    //dont log any clumping projects\n    if (this.state.clumpingRunning) return;\n    //log the message if necessary\n    this.logMessage(message);\n    switch (message.status) {\n      case 'Started': //from both asynchronous queries and marxan runs\n      case \"Updating WDPA\":\n        //set the processing state when the websocket starts\n        this.setState({preprocessing: true});\n        break;\n      case 'pid': //from marxan runs and preprocessing - the pid is an identifer and the pid, e.g. m1234 is a marxan run process with a pid of 1234\n        this.setState({pid: message.pid});\n        break;\n      case \"FeatureCreated\":\n        this.newFeatureCreated(message.id);\n        break;\n      case 'Finished': //from both asynchronous queries and marxan runs\n        //reset the pid\n        this.setState({pid: 0});\n        break;\n      default:\n        break;\n    }\n  }\n  \n  //logs the message if necessary - this removes duplicates\n  logMessage(message){\n    //log the message from the websocket\n    if (message.status === 'SocketClosed'){ //server closed WebSocket unexpectedly - uncaught server error, server crash or WebSocket timeout)\n      this.log({method:message.method, status:'Finished', error:\"The WebSocket connection closed unexpectedly\"});\n    }else{\n      //see if the message has a pid and if it does then see if the status has changed from the last message - if it has then log the message\n      if (message.hasOwnProperty('pid')) {\n        //get the existing status\n        let _messages = this.state.logMessages.filter((_message) => {\n          if (_message.hasOwnProperty('pid')) {\n            return _message.pid === message.pid;\n          }else{\n            return false;\n          }\n        });\n        //if there is already a message for that pid\n        if (_messages.length > 0){\n          //compare with the latest status\n          if (message.status !== _messages[_messages.length-1].status) {\n            //if the new status is different and the message status is finished, then remove the processing message\n            if (message.status === 'Finished') this.removeMessageFromLog('RunningQuery', message.pid);\n            this.log(message);\n          }\n        }else{ //log the first message for that pid\n          this.log(message);\n        }\n      }else{\n        //for downloading we dont want to show every downloading message\n        if (message.status === 'Downloading'){\n          //see if we already have a message which is downloading \n          let _messages = this.state.logMessages.filter((_message) => {\n            return (_message.status === 'Downloading');\n          });\n          if (_messages.length === 0) this.log(message);\n        }else{\n          //if the message is downloaded then remove the downloading message\n          if (message.status === 'Downloaded') this.removeMessageFromLog('Downloading');\n          this.log(message);\n        }\n      }\n    }\n  }\n  \n  //removes a message from the log by matching on the status and if it is passed, the pid\n  removeMessageFromLog(status, pid){\n    let _messages = this.state.logMessages;\n    //filter the messages to remove those that match on status (and pid)\n    _messages = _messages.filter((_message) => {\n      if (pid !== undefined){\n        if (_message.hasOwnProperty('pid')) {\n          return (!(_message.pid === pid && _message.status === status));\n        }else{\n          return true;\n        }\n      }else{ //match just on the status\n        return (!(_message.status === status));\n      }\n    });\n    this.setState({logMessages: _messages});\n  }\n  \n  //can be called from other components\n  setSnackBar(message, silent = false){\n    if (!silent) this.setState({snackbarOpen: true, snackbarMessage: message});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING MARXAN SERVERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //initialises the servers by requesting their capabilities and then filtering the list of available servers\n  initialiseServers(marxanServers){\n    return new Promise((resolve, reject) => {\n      //get a list of server hosts from the marxan.js registry\n      let hosts = marxanServers.map((server) => {\n        return server.host;  \n      });\n      //add the current domain - this may be a local/local network install\n      let name = (window.location.hostname === \"localhost\") ? \"localhost\" : window.location.hostname;\n      marxanServers.push(({name: name, protocol: window.location.protocol, host: window.location.hostname, port: 8080, description:'Local machine', type:'local', }));\n      //get all the server capabilities - when all the servers have responded, finalise the marxanServer array\n      this.getAllServerCapabilities(marxanServers).then((server) => {\n        //remove the current domain if either the marxan server is not installed, or it is already in the list of servers from the marxan registry\n        marxanServers = marxanServers.filter((item) => {\n          return (item.type===\"remote\" || (item.type===\"local\" && !item.offline && hosts.indexOf(item.host) === -1) || (item.host === 'localhost'));\n        });\n        //sort the servers by the name \n        marxanServers.sort((a, b) => {\n          if ((a.name.toLowerCase() < b.name.toLowerCase())||(a.type === \"local\"))\n            return -1;\n          if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n          return 0;\n        });\n        this.setState({marxanServers: marxanServers}, ()=>{\n          resolve(\"ServerData retrieved\");\n        });\n      });\n    });\n  }  \n\n  //gets the capabilities of all servers\n  getAllServerCapabilities(marxanServers){\n    let promiseArray = [];\n    //iterate through the servers and get their capabilities\n    for (var i = 0; i < marxanServers.length; ++i) {\n      promiseArray.push(this.getServerCapabilities(marxanServers[i]));\n    }\n    //return a promise\n    return Promise.all(promiseArray);\n  }\n\n  //gets the capabilities of the server by making a request to the getServerData method\n  getServerCapabilities(server){\n    return new Promise((resolve, reject) => {\n      //get the endpoint for all http/https requests\n      let endpoint = server.protocol + \"//\" + server.host + \":\" + server.port + TORNADO_PATH;\n      //get the WebService endpoint\n      let websocketEndpoint = (server.protocol ==='http:') ? \"ws://\" + server.host + \":\" + server.port + TORNADO_PATH : \"wss://\" + server.host + \":\" + server.port + TORNADO_PATH;\n      //set the default properties for the server - by default the server is offline, has no guest access and CORS is not enabled\n      server = Object.assign(server, {endpoint: endpoint, websocketEndpoint: websocketEndpoint, offline: true, guestUserEnabled: false, corsEnabled: false});\n      //poll the server to make sure tornado is running - this uses fetchJsonp which can catch http errors\n      fetchJsonp(endpoint + \"getServerData\",{timeout: 1000}).then((response) => {\n        return response.json();\n      }).then((json) => {\n        if (json.hasOwnProperty('info')){\n          //see if CORS is enabled from this domain - either the domain has been added as an allowable domain on the server, or the client and server are on the same machine\n          let corsEnabled = ((json.serverData.PERMITTED_DOMAINS.indexOf(window.location.hostname)>-1)||(server.host === window.location.hostname)) ? true : false;\n          //set the flags for the server capabilities\n          server = Object.assign(server, {guestUserEnabled: json.serverData.ENABLE_GUEST_USER, corsEnabled: corsEnabled, offline: false, machine: json.serverData.MACHINE, client_version: json.serverData.MARXAN_CLIENT_VERSION, server_version: json.serverData.MARXAN_SERVER_VERSION, node: json.serverData.NODE, processor: json.serverData.PROCESSOR, release: json.serverData.RELEASE, system:json.serverData.SYSTEM, version: json.serverData.VERSION, wdpa_version: json.serverData.WDPA_VERSION, planning_grid_units_limit: Number(json.serverData.PLANNING_GRID_UNITS_LIMIT), disk_space: Number(json.serverData.DISK_FREE_SPACE)});\n          //if the server defines its own name then set it \n          if(json.serverData.SERVER_NAME!==\"\") {\n            server = Object.assign(server, {name:json.serverData.SERVER_NAME});\n          }\n          //if the server defines its own description then set it \n          if(json.serverData.SERVER_DESCRIPTION!==\"\") {\n            server = Object.assign(server, {description:json.serverData.SERVER_DESCRIPTION});\n          }\n        }\n        //return the server capabilities\n        resolve(server);\n        }).catch((ex) => {\n          //the server does not exist or did not respond before the timeout - return the default properties\n          resolve(server);\n      });\n    });\n  }\n  \n  //sets the layer name for the WDPA vector tiles based on the WDPA version\n  setWDPAVectorTilesLayerName(wdpa_version){\n    //get the short version of the wdpa_version, e.g. August 2019 to aug_2019\n    let version = wdpa_version.toLowerCase().substr(0,3) + \"_\" + wdpa_version.substr(-4);\n    //set the value of the vector_tile_layer based on which version of the wdpa the server has in the PostGIS database\n    this.wdpa_vector_tile_layer = \"wdpa_\" + version + \"_polygons\";\n  }\n  //called when the user selects a server\n  selectServer(value){\n    this.setState({marxanServer: value});\n    //set the link to the WDPA vector tiles based on the version that is included in the server in the PostGIS database\n    this.setWDPAVectorTilesLayerName(value.wdpa_version);\n    //if the server is ready only then change the user/password to the guest user\n    if (!value.offline && !value.corsEnabled && value.guestUserEnabled){\n      this.switchToGuestUser();\n    }\n  }\n  \n  closeSnackbar() {\n    this.setState({ snackbarOpen: false });\n  }\n\n  startLogging(clearLog = false){\n    //switches the results pane to the log tab\n    this.log_tab_active();\n    //clear the log if needs be\n    if (clearLog) this.clearLog();\n  }\n\n  //clears the log\n  clearLog(){\n    this.setState({logMessages: []});\n  }\n  \n  //can be called from components to update the log\n  log(message){\n    let _messages = this.state.logMessages;\n    _messages.push(message);\n    this.setState({logMessages: _messages});\n  }\n\n  //utiliy method for getting all puids from normalised data, e.g. from [[\"VI\", [7, 8, 9]], [\"IV\", [0, 1, 2, 3, 4]], [\"V\", [5, 6]]]\n  getPuidsFromNormalisedData(normalisedData) {\n    let puids = [];\n    normalisedData.forEach((item) => {\n      puids = puids.concat(item[1]);\n    });\n    return puids;\n  }\n\n  changeUserName(user) {\n    this.setState({ user: user });\n  }\n\n  changePassword(password) {\n    this.setState({ password: password });\n  }\n  \n  //checks the users credentials\n  checkPassword(user, password) {\n    return new Promise((resolve, reject) => {\n      this._get(\"validateUser?user=\" +user + \"&password=\" + password, 10000).then((response) => {\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n  //validates the user and then logs in if successful\n  validateUser() {\n    return new Promise((resolve, reject) => {\n      this.checkPassword(this.state.user, this.state.password).then(() => {\n        //user validated - log them in\n        this.login().then((response)=>{\n          resolve(\"User validated\");\n        });\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  //the user is validated so login\n  login() {\n    return new Promise((resolve, reject) => {\n      this._get(\"getUser?user=\" + this.state.user).then((response) => {\n        this.setState({userData: response.userData, unauthorisedMethods: response.unauthorisedMethods, project: response.userData.LASTPROJECT, dismissedNotifications: (response.dismissedNotifications ? response.dismissedNotifications : [])}, ()=>{\n          //show any notifications \n          this.showNotifications();\n        });\n        //set the basemap\n        var basemap = this.state.basemaps.filter((item) => {return (item.name === response.userData.BASEMAP);})[0];\n        this.setBasemap(basemap).then(() => {\n          //get all features\n          this.getAllFeatures().then(() => {\n            //get the users last project and load it \n            this.loadProject(response.userData.LASTPROJECT, this.state.user).then((response)=>{\n              resolve(\"Logged in\");\n            });\n          });\n          //get all planning grids\n          this.getPlanningUnitGrids();\n        });\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  //log out and reset some state \n  logout() {\n    this.hideUserMenu();\n    this.setState({ loggedIn: false, user: '', password: '', project: '',owner: '', runParams: [], files: {}, metadata: {}, renderer: {}, planning_units: [], projectFeatures:[], infoPanelOpen: false, resultsPanelOpen: false, brew: new classyBrew(), notifications:[]  });\n    this.resetResults();\n    //clear the currently set cookies\n    this._get(\"logout\").then((response) => {\n        //do something\n    });\n  }\n  \n  switchToGuestUser(){\n    return new Promise((resolve, reject) => {\n      this.setState({user: \"guest\", password:\"password\"}, ()=> {\n        resolve(\"Switched to guest user\");\n      });\n    });\n  }\n  \n  changeEmail(value) { \n      this.setState({ resendEmail: value });\n  }\n\n  resendPassword() {\n    this._get(\"resendPassword?user=\" + this.state.user).then((response) => {\n      //ui feedback\n      this.setSnackBar(response.info);\n      //close the resend password dialog\n      this.closeResendPasswordDialog();\n    }).catch((error) => {\n      //do something\n  \t});\n  }\n\n  //gets data for all users\n  getUsers() {\n    this._get(\"getUsers\").then((response) => {\n      this.setState({ users: response.users });\n    }).catch((error) => {\n      this.setState({ users: [] });\n    });\n  }\n\n  //deletes a user\n  deleteUser(user) {\n    this._get(\"deleteUser?user=\" + user).then((response) => {\n      this.setSnackBar(\"User deleted\");\n      //remove it from the users array\n      let usersCopy = this.state.users;\n      //remove the user \n      usersCopy = usersCopy.filter((item) => {return item.user !== user});\n      //update the users state   \n      this.setState({users: usersCopy});\n      //see if the current project belongs to the deleted user\n      if (this.state.owner === user) {\n        this.setSnackBar(\"Current project no longer exists. Loading next available.\");\n        //load the next available project\n        this.state.projects.some((project) => {\n          if (project.user !== user) this.loadProject(project.name, project.user);\n          return project.name !== this.state.project;\n        });\n        //delete all the projects belonging to that user\n        this.deleteProjectsForUser(user);\n      }\n    });\n  }\n  \n  //deletes all of the projects belonging to the passed user from the state\n  deleteProjectsForUser(user){\n    let projects = this.state.projects.map((project) => {\n      return (project.user !== user);\n    });\n    this.setState({projects: projects});\n  }\n  \n  //changes a users role\n  changeRole(user, role){\n    this.updateUser({ROLE: role}, user);\n    //copy the users state\n    let usersCopy = this.state.users;\n    //change the users role\n    usersCopy = usersCopy.map((item) => {\n      if (item.user === user){\n        return Object.assign(item, {'ROLE': role});\n      }else{\n        return item;\n      }      \n    });\n    //update the users state   \n    this.setState({users: usersCopy});\n  }\n\n  //toggles if the guest user is enabled on the server or not\n  toggleEnableGuestUser(){\n    this._get(\"toggleEnableGuestUser\").then((response) => {\n      //if succesfull set the state\n      this.setState({ guestUserEnabled: response.enabled });\n    });\n  }\n  \n  //toggles the projects privacy\n  toggleProjectPrivacy(newValue){\n    this.updateProjectParameter(\"PRIVATE\", newValue).then((response) => {\n      this.setState({ metadata: Object.assign(this.state.metadata, { PRIVATE: (newValue === \"True\") })});\n    });\n  }\n  \n  //shows the notifications in the UI\n  showNotifications(){\n    //see if there are any new notifications from the marxan-registry\n    if (window.NOTIFICATIONS.length>0){\n      this.addNotifications(window.NOTIFICATIONS);\n      this.setState({notificationsOpen: true});\n    }\n    //see if there is a new version of the wdpa data - this comes from the Marxan Registry WDPA object - if there is then show a notification to admin users\n    if (this.state.marxanServer.wdpa_version !== window.WDPA.latest_version) {\n      this.setState({newWDPAVersion: true});\n      this.addNotifications([{id:'wdpa_update_' + window.WDPA.latest_version, html:\"A new version of the WDPA is available. <br/>Click on Help | Server Details for more information.\", type:\"Data Update\", showForRoles: [\"Admin\"]}]);\n    }else{\n      this.setState({newWDPAVersion: false});\n    }\n    //see if there is a new version of the marxan-client software\n    if (MARXAN_CLIENT_VERSION !== window.CLIENT_VERSION) this.addNotifications([{id:'marxan_client_update_' + window.CLIENT_VERSION, html:\"A new version of marxan-client is available (\" + window.CLIENT_VERSION + \"). <br/>Click on Help | About for more information.\", type:\"Software Update\", showForRoles: [\"Admin\"]}]);\n    //see if there is a new version of the marxan-server software\n    if (this.state.marxanServer.server_version !== window.SERVER_VERSION) this.addNotifications([{id:'marxan_server_update_' + window.SERVER_VERSION, html:\"A new version of marxan-server is available (\" + window.SERVER_VERSION + \"). <br/>Click on Help | Server Details for more information.\", type:\"Software Update\", showForRoles: [\"Admin\"]}]);\n    //check that there is enough disk space\n    if (this.state.marxanServer.disk_space < 1000)  {\n      this.addNotifications([{id:'hardware_1000', html:\"Disk space < 1Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n    }else{\n      if (this.state.marxanServer.disk_space < 2000)  {\n        this.addNotifications([{id:'hardware_2000', html:\"Disk space < 2Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n      }else{\n        if (this.state.marxanServer.disk_space < 3000) this.addNotifications([{id:'hardware_3000', html:\"Disk space < 3Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n      }\n    }\n  }\n  \n  //hides the notifications from the UI\n  hideNotifications(){\n    this.setState({notificationsOpen: false});\n  }\n  \n  //add the passed notifications to the notifications state\n  addNotifications(notifications){\n    let _notifications = this.state.notifications;\n    //set the visibility of the notifications based on the users role, whether they have already been dismissed or if it has expired\n    notifications = notifications.map(item => {\n      let allowedForRole = (item.showForRoles.indexOf(this.state.userData.ROLE)>-1);\n      let notDismissed = (this.state.dismissedNotifications.indexOf(String(item.id)) === -1);\n      let notExpired = true;\n      //if an expiry date is set, then get this as a Date\n      if ((item.hasOwnProperty(\"expires\")) && (item.hasOwnProperty(\"expires\") && (item.expires !== \"\"))){\n    \t\ttry {\n          var d = Date.parse(item.expires); \n          if (new Date() > d) notExpired = false;\n    \t\t}\n    \t\tcatch (err) {\n    \t\t\t//invalid date so not expiry date\n    \t\t}\n      }\n      let visible = allowedForRole && notDismissed && notExpired;\n      return Object.assign(item, {visible: visible});  \n    });\n    _notifications.push.apply(_notifications, notifications);\n    this.setState({notifications: _notifications});\n  }\n  \n  //removes a notification\n  removeNotification(notification){\n    //remove the notification from the state\n    let _notifications  = this.state.notifications.filter(_notification => _notification.id !== notification.id);\n    //remove it in the users notifications.dat file\n    this.dismissNotification(notification);\n    //set the state\n    this.setState({notifications: _notifications});\n  }\n  \n  //dismisses a notification on the server\n  dismissNotification(notification){\n    this._get(\"dismissNotification?user=\" + this.state.user + \"&notificationid=\" + notification.id);\n  }\n  \n  //clears all of the dismissed notifications on the server\n  resetNotifications(){\n    this._get(\"resetNotifications?user=\" + this.state.user).then(()=>{\n      this.setState({notifications:[]});\n      this.showNotifications();  \n    });\n  }\n  \n  appendToFormData(formData, obj) {\n    //iterate through the object and add each key/value pair to the formData to post to the server\n    for (var key in obj) {\n      //only add non-prototype objects\n      if (obj.hasOwnProperty(key)) {\n        formData.append(key, obj[key]);\n      }\n    }\n    return formData;\n  }\n\n  //removes the keys from the object\n  removeKeys(obj, keys) {\n    keys.map((key) => {\n      delete obj[key];\n      return null;\n    });\n    return obj;\n  }\n\n  //updates all parameter in the user.dat file then updates the state (in userData)\n  updateUser(parameters, user = this.state.user) {\n    return new Promise((resolve, reject) => {\n      //remove the keys that are not part of the users information\n      parameters = this.removeKeys(parameters, [\"updated\", \"validEmail\"]);\n      //initialise the form data\n      let formData = new FormData();\n      //add the current user\n      formData.append(\"user\", user);\n      //append all the key/value pairs\n      this.appendToFormData(formData, parameters);\n      //post to the server\n      this._post(\"updateUserParameters\", formData).then((response) => {\n        // if succesfull write the state back to the userData key\n        if (this.state.user === user) this.setState({ userData: this.newUserData});\n        this.setState({optionsDialogOpen: false });\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n      //if we have updated the current user then save a local property so that if the changes are saved to the server then we can update the local state\n      if (this.state.user === user) this.newUserData = Object.assign(this.state.userData, parameters);\n    });\n  }\n\n  //saveOptions - the options are in the users data so we use the updateUser REST call to update them\n  saveOptions(options) {\n    //hide the popup \n    this.hidePopup();\n    this.updateUser(options);\n  }\n  //updates the project from the old version to the new version\n  upgradeProject(project){\n    return this._get(\"upgradeProject?user=\" + this.state.user + \"&project=\" + project);\n  }\n  \n  //updates the project parameters back to the server (i.e. the input.dat file)\n  updateProjectParams(project, parameters) {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", project);\n    //append all the key/value pairs\n    this.appendToFormData(formData, parameters);\n    //post to the server and return a promise\n    return this._post(\"updateProjectParameters\", formData);\n  }\n\n  //updates a single parameter in the input.dat file directly\n  updateProjectParameter(parameter, value) {\n    let obj = {};\n    obj[parameter] = value;\n    //update the parameter and return a promise\n    return this.updateProjectParams(this.state.project, obj);\n  }\n\n  //updates the run parameters for the current project\n  updateRunParams(array) {\n    //convert the run parameters array into an object\n    let parameters = {};\n    array.map((obj) => { parameters[obj.key] = obj.value; return null; });\n    //update the project parameters\n    this.updateProjectParams(this.state.project, parameters).then((response) => {\n      //if succesfull write the state back \n      this.setState({ runParams: this.runParams});\n    });\n    //save the local state to be able to update the state on callback\n    this.runParams = array;\n  }\n\n  //gets the planning unit grids\n  getPlanningUnitGrids() {\n    this._get(\"getPlanningUnitGrids\").then((response) => {\n      this.setState({ planning_unit_grids: response.planning_unit_grids });\n    });\n  }\n\n  //loads a project\n  loadProject(project, user) {\n    return new Promise((resolve, reject) => {\n      //reset the results from any previous projects\n      this.resetResults();\n      this._get(\"getProject?user=\" + user + \"&project=\" + project).then((response) => {\n        //set the state for the app based on the data that is returned from the server\n        this.setState({ loggedIn: true, project: response.project, owner: user, runParams: response.runParameters, files: Object.assign(response.files), metadata: response.metadata, renderer: response.renderer, planning_units: response.planning_units, infoPanelOpen: true, resultsPanelOpen: true  });\n        //if there is a PLANNING_UNIT_NAME passed then change to this planning grid and load the results if there are any available\n        if (response.metadata.PLANNING_UNIT_NAME) {\n          this.changePlanningGrid(MAPBOX_USER + \".\" + response.metadata.PLANNING_UNIT_NAME).then(()=>{\n            //poll the server to see if results are available for this project - if there are these will be loaded\n            this.getResults(user, response.project).then((response)=> {\n              resolve(\"Project loaded\");\n            });\n          });\n        }\n        //set a local variable for the feature preprocessing - this is because we dont need to track state with these variables as they are not bound to anything\n        this.feature_preprocessing = response.feature_preprocessing;\n        //set a local variable for the protected area intersections - this is because we dont need to track state with these variables as they are not bound to anything\n        this.protected_area_intersections = response.protected_area_intersections;\n        //set a local variable for the selected iucn category\n        this.previousIucnCategory = response.metadata.IUCN_CATEGORY;\n        //initialise all the interest features with the interest features for this project\n        this.initialiseInterestFeatures(response.metadata.OLDVERSION, response.features);\n      }).catch((error) => {\n          if (error.indexOf('Logged on as read-only guest user')>-1){\n            this.setState({loggedIn: true});\n            resolve(\"No project loaded - logged on as read-only guest user'\");\n          }\n          if (error.indexOf(\"does not exist\")>-1){\n            //probably the last loaded project has been deleted - send some feedback and load another project\n            this.setSnackBar(\"Loading first available project\");\n            //passing an empty project to loadProject will load the first project\n            this.loadProject('', this.state.user);\n          }\n      });\n    });\n  }\n\n  //matches and returns an item in an object array with the passed id - this assumes the first item in the object is the id identifier\n  getArrayItem(arr, id) {\n    let tmpArr = arr.filter((item) => { return item[0] === id });\n    let returnValue = (tmpArr.length > 0) ? tmpArr[0] : undefined;\n    return returnValue;\n  }\n\n  //initialises the interest features based on the currently loading project\n  initialiseInterestFeatures(oldVersion, projectFeatures) {\n    //if the project is from an old version of marxan then the interest features can only come from the list of features in the current project\n    let features = (oldVersion) ? JSON.parse(JSON.stringify(projectFeatures)) : this.state.allFeatures; //make a copy of the projectFeatures\n    //get a list of the ids for the features that are in this project\n    var ids = projectFeatures.map((item) => {\n      return item.id;\n    });\n    //iterate through features to add the required attributes to be used in the app and to populate them based on the current project features\n    var outFeatures = features.map((item) => {\n      //see if the feature is in the current project\n      var projectFeature = (ids.indexOf(item.id) > -1) ? projectFeatures[ids.indexOf(item.id)] : null;\n      //get the preprocessing for that feature from the feature_preprocessing.dat file\n      let preprocessing = this.getArrayItem(this.feature_preprocessing, item.id);\n      //add the required attributes to the features - these will be populated in the function calls preprocessFeature (pu_area, pu_count) and pollResults (protected_area, target_area)\n      this.addFeatureAttributes(item, oldVersion);\n      //if the interest feature is in the current project then populate the data from that feature\n      if (projectFeature) {\n        item['selected'] = true;\n        item['preprocessed'] = preprocessing ? true : false;\n        item['pu_area'] = preprocessing ? preprocessing[1] : -1;\n        item['pu_count'] = preprocessing ? preprocessing[2] : -1;\n        item['spf'] = projectFeature['spf'];\n        item['target_value'] = projectFeature['target_value'];\n        item['occurs_in_planning_grid'] = item['pu_count'] > 0;\n      }\n      return item;\n    });\n    //get the selected feature ids\n    this.getSelectedFeatureIds();\n    //set the state\n    this.setState({ allFeatures: outFeatures, projectFeatures: outFeatures.filter((item) => { return item.selected }) });\n  }\n\n  //adds the required attributes for the features to work in the marxan web app - these are the default values\n  addFeatureAttributes(item, oldVersion){\n      // the -1 flag indicates that the values are unknown\n      item['selected'] = false;\n      item['preprocessed'] = false;\n      item['pu_area'] = -1;\n      item['pu_count'] = -1;\n      item['spf'] = 40;\n      item['target_value'] = 17;\n      item['target_area'] = -1;\n      item['protected_area'] = -1;\n      item['feature_layer_loaded'] = false;\n      item['old_version'] = oldVersion;\n      item['occurs_in_planning_grid'] = false;\n  }\n\n  //resets various variables and state in between users\n  resetResults() {\n    this.runMarxanResponse = {};\n    this.setState({ solutions: []});\n    //reset any feature layers that are shown\n    this.hideFeatureLayer();\n    //reset the puvspr layer\n    this.hideLayer(PUVSPR_LAYER_NAME);\n  }\n\n  //create a new user on the server\n  createNewUser(user, password, name, email) {\n    let formData = new FormData();\n    formData.append('user', user);\n    formData.append('password', password);\n    formData.append('fullname', name);\n    formData.append('email', email);\n    this._post(\"createUser\", formData).then((response) => {\n      //ui feedback\n      this.setSnackBar(response.info);\n      //close the register dialog\n      this.closeRegisterDialog();\n      //enter the new users name in the username box and a blank password\n      this.setState({user: user, password:''});\n    });\n  }\n\n  //REST call to create a new project from the wizard\n  createNewProject(project) {\n    let formData = new FormData();\n    formData.append('user', this.state.user);\n    formData.append('project', project.name);\n    formData.append('description', project.description);\n    formData.append('planning_grid_name', project.planning_grid_name);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    project.features.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(17);\n      spf_values.push(40);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append('interest_features', interest_features.join(\",\"));\n    formData.append('target_values', target_values.join(\",\"));\n    formData.append('spf_values', spf_values.join(\",\"));\n    this._post(\"createProject\", formData).then((response) => {\n      this.setSnackBar(response.info);\n      this.setState({projectsDialogOpen: false });\n      this.loadProject(response.name, response.user);\n    });\n  }\n\n  //REST call to create a new import project from the wizard\n  createImportProject(project) {\n    let formData = new FormData();\n    formData.append('user', this.state.user);\n    formData.append('project', project);\n    return this._post(\"createImportProject\", formData);\n  }\n\n  //REST call to delete a specific project\n  deleteProject(user, project, silent = false) {\n    this._get(\"deleteProject?user=\" + user + \"&project=\" + project).then((response) => {\n      //refresh the projects list\n      this.getProjects();\n      //ui feedback\n      this.setSnackBar(response.info, silent); //we may not want to show the snackbar if we are deleting a project silently, e.g. on a rollback after an unsuccesful import\n      //see if the user deleted the current project\n      if (response.project === this.state.project) {\n        //ui feedback\n        this.setSnackBar(\"Current project deleted - loading first available\");\n        //load the next available project\n        this.state.projects.some((project) => {\n          if (project.name !== this.state.project) this.loadProject(project.name, this.state.user);\n          return project.name !== this.state.project;\n        });\n      }\n    });\n  }\n\n  cloneProject(user, project) {\n    this._get(\"cloneProject?user=\" + user + \"&project=\" + project).then((response) => {\n      //refresh the projects list\n      this.getProjects();\n      //ui feedback\n      this.setSnackBar(response.info);\n    }).catch((error) => {\n        //do something\n    });\n  }\n\n  //rename a specific project on the server\n  renameProject(newName) {\n    return new Promise((resolve, reject) => {\n      if (newName !== '' && newName !== this.state.project) {\n        this._get(\"renameProject?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&newName=\" + newName).then((response) => {\n          this.setState({ project: newName});\n          this.setSnackBar(response.info);\n          resolve(\"Project renamed\");\n        }).catch((error) => {\n          //do something\n        });\n      }\n    });\n  }\n  //rename the description for a specific project on the server\n  renameDescription(newDesc) {\n    return new Promise((resolve, reject) => {\n      this.updateProjectParameter(\"DESCRIPTION\", newDesc).then((response) => {\n        this.setState({ metadata: Object.assign(this.state.metadata, { DESCRIPTION: newDesc })});\n        resolve(\"Description renamed\");\n      });\n    });\n  }\n\n  getProjects() {\n    this._get(\"getProjects?user=\" + this.state.user).then((response) => {\n      let projects = [];\n      //filter the projects so that private ones arent shown\n      response.projects.forEach((project) => {\n        if (!(project.private && project.user !== this.state.user && this.state.userData.ROLE !== \"Admin\")) projects.push(project);\n      });\n      this.setState({ projects: projects});\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////CODE TO PREPROCESS AND RUN MARXAN\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //run a marxan job on the server\n  runMarxan(e) {\n    //start the logging\n    this.startLogging();\n    //reset all of the protected and target areas for all features\n    this.resetProtectedAreas();\n    //update the spec.dat file with any that have been added or removed or changed target or spf\n    this.updateSpecFile().then((value)=> {\n      //when the species file has been updated, update the planning unit file \n      this.updatePuFile();\n      //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using websockets\n      this.updatePuvsprFile().then((value) => {\n        //start the marxan job\n        this.startMarxanJob(this.state.owner, this.state.project).then((response) => {\n          //update the run log\n          this.getRunLogs();\n          if (!this.checkForErrors(response)) {\n            //run completed - get the results\n            this.getResults(response.user, response.project);\n          }else{\n            //set state with no solutions\n            this.runFinished([]);\n          }\n        }).catch((error) => {\n            //reset the running state\n            this.marxanStopped(error);\n        }); //startMarxanJob\n      }).catch((error) => { //updatePuvsprFile error\n        console.error(error);\n      }); \n    }).catch((error) => { //updateSpecFile error\n      console.error(error);\n    });\n  }\n\n  //stops a process running on the server\n  stopProcess(pid) {\n    this._get(\"stopProcess?pid=\" + pid, 10000).catch((error) => {\n      //if the pid no longer exists then the state needs to be reset anyway\n      this.getRunLogs();\n    });\n  }\n\n  //ui feedback when marxan is stopped by the user\n  marxanStopped(error){\n    //update the run log\n    this.getRunLogs();\n  }\n  \n  resetProtectedAreas() {\n    //reset all of the results for allFeatures to set their protected_area and target_area to -1\n    this.state.allFeatures.forEach((feature) => {\n      feature.protected_area = -1;\n      feature.target_area = -1;\n    });\n  }\n\n  //updates the species file with any target values that have changed\n  updateSpecFile() {\n    let formData = new FormData();\n    formData.append('user', this.state.owner);\n    formData.append('project', this.state.project);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    this.state.projectFeatures.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(item.target_value);\n      spf_values.push(item.spf);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append('interest_features', interest_features.join(\",\"));\n    formData.append('target_values', target_values.join(\",\"));\n    formData.append('spf_values', spf_values.join(\",\"));\n    return this._post(\"updateSpecFile\", formData);\n  }\n\n  //updates the planning unit file with any changes - not implemented yet\n  updatePuFile() {\n\n  }\n\n  updatePuvsprFile() {\n    //preprocess the features to create the puvspr.dat file on the server - this is done on demand when the project is run because the user may add/remove Conservation features willy nilly\n    let promise = this.preprocessAllFeatures();\n    return promise;\n  }\n\n  //preprocess a single feature\n  async preprocessSingleFeature(feature){\n    this.closeFeatureMenu();\n    this.startLogging();\n    this.preprocessFeature(feature);\n  }\n  \n  //preprocess synchronously, i.e. one after another\n  async preprocessAllFeatures() {\n    var feature;\n    //iterate through the features and preprocess the ones that need preprocessing\n    for (var i = 0; i < this.state.projectFeatures.length; ++i) {\n      feature = this.state.projectFeatures[i];\n      if (!feature.preprocessed){\n        await this.preprocessFeature(feature);\n      }else{\n        //\n      }\n    }\n  }\n\n  //preprocesses a feature using websockets - i.e. intersects it with the planning units grid and writes the intersection results into the puvspr.dat file ready for a marxan run - this will have no server timeout as its running using websockets\n  preprocessFeature(feature) {\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.log_tab_active();\n      //call the websocket \n      this._ws(\"preprocessFeature?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&planning_grid_name=\" + this.state.metadata.PLANNING_UNIT_NAME + \"&feature_class_name=\" + feature.feature_class_name + \"&alias=\" + feature.alias + \"&id=\" + feature.id, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished\n        this.updateFeature(feature, {preprocessed: true, pu_count: Number(message.pu_count), pu_area: Number(message.pu_area), occurs_in_planning_grid: (Number(message.pu_count) >0)});\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //calls the marxan executeable and runs it getting the output streamed through websockets\n  startMarxanJob(user, project) {\n    return new Promise((resolve, reject) => {\n      //update the ui to reflect the fact that a job is running\n      this.setState({active_pu: undefined});\n      //make the request to get the marxan data\n      this._ws(\"runMarxan?user=\" + user + \"&project=\" + project, this.wsMessageCallback.bind(this)).then((message) => {\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //gets the results for a project\n  getResults(user, project){\n    return new Promise((resolve, reject) => {\n      this._get(\"getResults?user=\" + user + \"&project=\" + project).then((response) => {\n        this.runCompleted(response);\n        resolve(\"Results retrieved\");\n      }).catch((error) => {\n        reject(\"Unable to get results\");\n      });\n    });\n  }\n  \n  //run completed\n  runCompleted(response) {\n    var solutions;\n    //get the response and store it in this component\n    this.runMarxanResponse = response;\n    //if we have some data to map then set the state to reflect this\n    if (this.runMarxanResponse.ssoln && this.runMarxanResponse.ssoln.length > 0) {\n      this.setSnackBar(response.info);\n      //render the sum solution map\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //create the array of solutions to pass to the InfoPanels table\n      solutions = response.summary;\n      //the array data are in the format \"Run_Number\",\"Score\",\"Cost\",\"Planning_Units\" - so create an array of objects to pass to the outputs table\n      solutions = solutions.map((item) => {\n        return { \"Run_Number\": item[0], \"Score\": Number(item[1]).toFixed(1), \"Cost\": Number(item[2]).toFixed(1), \"Planning_Units\": item[3], \"Missing_Values\": item[12] };\n      });\n      //add in the row for the summed solutions\n      solutions.splice(0, 0, { 'Run_Number': 'Sum', 'Score': '', 'Cost': '', 'Planning_Units': '', 'Missing_Values': '' });\n      //select the first row in the solutions table\n      \n      //update the amount of each target that is protected in the current run from the output_mvbest.txt file\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n    }else{\n      solutions = [];\n    }\n    //set state\n    this.runFinished(solutions);\n  }\n\n  runFinished(solutions){\n    this.setState({ solutions: solutions });\n  }\n  \n  //gets the protected area information in m2 from the marxan run and populates the interest features with the values\n  updateProtectedAmount(mvData) {\n    //copy the current project features state\n    let features = this.state.allFeatures;\n    //iterate through the features and set the protected amount\n    features.forEach((feature) => {\n      //get the matching item in the mvbest data\n      let mvbestItemIndex = mvData.findIndex((item) => { return item[0] === feature.id; });\n      if (mvbestItemIndex>-1){ //the mvbest file may not contain the data for the feature if the project has not been run since the feature was added\n        //get the missing values item for the specific feature\n        let mvItem = mvData[mvbestItemIndex];\n        Object.assign(feature, {target_area: mvItem[2], protected_area: mvItem[3]});\n      }\n    });\n    //update allFeatures and projectFeatures with the new value\n    this.setFeaturesState(features);\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////IMPORT PROJECT ROUTINES\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  importProject(project, description, zipFilename, files, planning_grid_name){\n    return new Promise((resolve, reject) => {\n      let feature_class_name = \"\", uploadId;\n      //start the logging\n      this.startLogging();\n      //set the spinner and lot states\n      this.log({method:'importProject',status:'Importing',info:'Starting import..'});\n      //create a new project\n      //TODO: SORT OUT ROLLING BACK IF AN IMPORT FAILS - AND DONT PROVIDE REST CALLS TO DELETE PLANNING UNITS\n      this.createImportProject(project).then((response) => {\n        this.log({method:'importProject',status:'Importing',info:\"Project '\" + project + \"' created\"});\n        //create the planning unit file\n        this.importZippedShapefileAsPu(zipFilename, planning_grid_name, \"Imported with the project '\" + project + \"'\").then((response) => {\n          //get the planning unit feature_class_name\n          feature_class_name = response.feature_class_name;\n          //get the uploadid\n          uploadId = response.uploadId;\n          this.log({method:'importProject',status:'Importing',info:\"Planning grid imported\"});\n          //upload all of the files from the local system\n          this.uploadFiles(files, project).then((response) => {\n            this.log({method:'importProject',status:'Importing',info:\"All files uploaded\"});\n            //upgrade the project to the new version of Marxan - this adds the necessary settings in the project file and calculates the statistics for species in the puvspr.dat and puts them in the feature_preprocessing.dat file\n            this.upgradeProject(project).then((response) => {\n              this.log({method:'importProject',status:'Importing',info:\"Project updated to new version\"});\n              //update the project file with the new settings - we also have to set the OUTPUTDIR to the standard 'output' as some imported projects may have set different output folders, e.g. output_BLMBEST\n              let d = new Date();\n              let formattedDate = (\"00\" + d.getDate()).slice(-2) + \"/\" + (\"00\" + (d.getMonth() + 1)).slice(-2) + \"/\" + d.getFullYear().toString().slice(-2) + \" \" + (\"00\" + d.getHours()).slice(-2) + \":\" + (\"00\" + d.getMinutes()).slice(-2) + \":\" + (\"00\" + d.getSeconds()).slice(-2);\n              this.updateProjectParams(project, {DESCRIPTION: description + \" (imported from an existing Marxan project)\", CREATEDATE: formattedDate, OLDVERSION: 'True', PLANNING_UNIT_NAME: feature_class_name, OUTPUTDIR: 'output'}).then((response) => {\n                // wait for the tileset to upload to mapbox\n                this.pollMapbox(uploadId).then((response) => {\n                  //refresh the planning grids\n                  this.getPlanningUnitGrids();\n                  this.log({method:'importProject',status:'Finished',info:\"Import complete\"});\n                  //now open the project\n                  this.loadProject(project, this.state.user);\n                  resolve(\"Import complete\");\n                });\n              }).catch((error) => { //updateProjectParams error\n                  reject(error);\n              });\n            }).catch((error) => { //upgradeProject error\n              reject(error);\n            }); \n          }).catch((error) => { //uploadFiles error\n              reject(error);\n          }); \n        }).catch((error) => { //importZippedShapefileAsPu error - delete the project\n          this.deleteProject(this.state.user, project, true);\n          reject(error);\n        });\n      }).catch((error) => { //createImportProject failed - the project already exists\n        reject(error);\n      });\n    });\n  }\n  \n  //uploads a list of files\n  async uploadFiles(files, project) {\n    var file, filepath;\n    for (var i = 0; i < files.length; i++) {\n      file = files.item(i);\n      //see if it is a marxan data file\n      if (file.name.slice(-4) === '.dat'){\n        const formData = new FormData();\n        formData.append('user', this.state.owner);\n        formData.append('project', project);\n        //the webkitRelativePath will include the folder itself so we have to remove this, e.g. 'Marxan project/input/puvspr.dat' -> '/input/puvspr.dat'\n        filepath = file.webkitRelativePath.split(\"/\").slice(1).join(\"/\");\n        formData.append('filename', filepath);\n        formData.append('value', file);\n        this.log({method:'uploadFiles',status:'Uploading',info:\"Uploading: \" + file.webkitRelativePath});\n        await this.uploadFile(formData);\n      }\n    }\n    return 'All files uploaded';\n  }\n  \n  //uploads a single file\n  uploadFile(formData){\n    return this._post(\"uploadFile\", formData);\n  }\n  \n  //pads a number with zeros to a specific size, e.g. pad(9,5) => 00009\n  pad(num, size) {\n    var s = num + \"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n  }\n\n  //load a specific solution for the current project\n  loadSolution(solution) {\n    if (solution === \"Sum\") {\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n      //load the sum of solutions which will already be loaded\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n    }\n    else {\n      this.getSolution(this.state.owner, this.state.project, solution).then((response) => {\n          this.updateProtectedAmount(response.mv);\n          this.renderSolution(response.solution, false);\n      });\n    }\n  }\n\n  //load a solution from another project - used in the clumping dialog - when the solution is loaded the paint properties are set on the individual maps through state changes\n  loadOtherSolution(user, project, solution) {\n    this.getSolution(user, project, solution).then((response) => {\n      var paintProperties = this.getPaintProperties(response.solution, false, false);\n      //get the project that matches the project name from the this.projects property - this was set when the projectGroup was created\n      if (this.projects){\n        var _projects = this.projects.filter((item) => {return item.projectName === project});\n        //get which clump it is\n        var clump = _projects[0].clump;\n        switch (clump) {\n          case 0:\n            this.setState({map0_paintProperty: paintProperties});\n            break;\n          case 1:\n            this.setState({map1_paintProperty: paintProperties});\n            break;\n          case 2:\n            this.setState({map2_paintProperty: paintProperties});\n            break;\n          case 3:\n            this.setState({map3_paintProperty: paintProperties});\n            break;\n          case 4:\n            this.setState({map4_paintProperty: paintProperties});\n            break;\n          default:\n            break;\n        }\n      }\n    });\n  }\n  \n  //gets a solution and returns a promise\n  getSolution(user, project, solution){\n    return this._get(\"getSolution?user=\" + user + \"&project=\" + project + \"&solution=\" + solution);\n  }\n  \n  //gets the total number of planning units in the ssoln and outputs the statistics of the distribution to state, e.g. 2 PUs with a value of 1, 3 with a value of 2 etc.\n  getssolncount(data) {\n    let total = 0;\n    let summaryStats = [];\n    data.map((item) => {\n      summaryStats.push({ number: item[0], count: item[1].length });\n      total += item[1].length;\n      return null;\n    });\n    this.setState({ summaryStats: summaryStats });\n    return total;\n  }\n  //gets a sample of the data to be able to do a classification, e.g. natural breaks, jenks etc.\n  getssolnSample(data, sampleSize) {\n    let sample = [],\n      num = 0;\n    let ssolnLength = this.getssolncount(data);\n    data.map((item) => {\n      //use the ceiling function to force outliers to be in the classification, i.e. those planning units that were only selected in 1 solution\n      num = Math.ceil((item[1].length / ssolnLength) * sampleSize);\n      sample.push(Array(num, ).fill(item[0]));\n      return null;\n    });\n    return [].concat.apply([], sample);\n  }\n\n  //get all data from the ssoln arrays\n  getSsolnData(data) {\n    let arrays = data.map((item) => {\n      return item[1];\n    });\n    return [].concat.apply([], arrays);\n  }\n  //gets the classification and colorbrewer object for doing the rendering\n  classifyData(data, numClasses, colorCode, classification) {\n    //get a sample of the data to make the renderer classification\n    let sample = this.getssolnSample(data, 1000); //samples dont work\n    // let sample = this.getSsolnData(data); //get all the ssoln data\n    //set the data \n    this.state.brew.setSeries(sample);\n    //if the colorCode is opacity then calculate the rgba values dynamically and add them to the color schemes\n    if (colorCode === 'opacity') {\n      //see if we have already created a brew color scheme for opacity with NUMCLASSES\n      if ((this.state.brew.colorSchemes.opacity === undefined)  || (this.state.brew.colorSchemes.opacity && !this.state.brew.colorSchemes.opacity[this.state.renderer.NUMCLASSES])) {\n        //get a copy of the brew state\n        let brewCopy = this.state.brew;\n        let newBrewColorScheme = Array(Number(this.state.renderer.NUMCLASSES)).fill(\"rgba(255,0,136,\").map((item, index) => { return item + ((1 / this) * (index + 1)) + \")\"; }, this.state.renderer.NUMCLASSES);\n        //add the new color scheme\n        if (brewCopy.colorSchemes.opacity === undefined) brewCopy.colorSchemes.opacity = [];\n        brewCopy.colorSchemes.opacity[this.state.renderer.NUMCLASSES] = newBrewColorScheme;\n        //set the state\n        this.setState({brew: brewCopy});\n      }\n    }\n    //set the color code - see the color theory section on Joshua Tanners page here https://github.com/tannerjt/classybrew - for all the available colour codes\n    this.state.brew.setColorCode(colorCode);\n    //get the maximum number of colors in this scheme\n    let colorSchemeLength = getMaxNumberOfClasses(this.state.brew, colorCode);\n    //check the color scheme supports the passed number of classes\n    if (numClasses > colorSchemeLength) {\n      //set the numClasses to the max for the color scheme\n      numClasses = colorSchemeLength;\n      //reset the renderer\n      this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: numClasses }) });\n    }\n    //set the number of classes\n    this.state.brew.setNumClasses(numClasses);\n    //set the classification method - one of equal_interval, quantile, std_deviation, jenks (default)\n    this.state.brew.classify(classification);\n    this.setState({ dataBreaks: this.state.brew.getBreaks()});\n  }\n\n  //called when the renderer state has been updated - renders the solution and saves the renderer back to the server\n  rendererStateUpdated(parameter, value) {\n    this.renderSolution(this.runMarxanResponse.ssoln, true);\n    if (this.state.userData.ROLE !== \"ReadOnly\") this.updateProjectParameter(parameter, value);\n  }\n  //change the renderer, e.g. jenks, natural_breaks etc.\n  changeRenderer(renderer) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { CLASSIFICATION: renderer }) }, () => {\n      this.rendererStateUpdated(\"CLASSIFICATION\", renderer);\n    });\n  }\n  //change the number of classes of the renderer\n  changeNumClasses(numClasses) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: numClasses }) }, () => {\n      this.rendererStateUpdated(\"NUMCLASSES\", numClasses);\n    });\n  }\n  //change the color code of the renderer\n  changeColorCode(colorCode) {\n    //set the maximum number of classes that can be selected in the other select boxes\n    if (this.state.renderer.NUMCLASSES > this.state.brew.getNumClasses()) {\n      this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: this.state.brew.getNumClasses() }) });\n    }\n    this.setState({ renderer: Object.assign(this.state.renderer, { COLORCODE: colorCode }) }, () => {\n      this.rendererStateUpdated(\"COLORCODE\", colorCode);\n    });\n  }\n  //change how many of the top classes only to show\n  changeShowTopClasses(numClasses) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { TOPCLASSES: numClasses }) }, () => {\n      this.rendererStateUpdated(\"TOPCLASSES\", numClasses);\n    });\n  }\n  //renders the solution - data is the REST response and sum is a flag to indicate if the data is the summed solution (true) or an individual solution (false)\n  renderSolution(data, sum) {\n    if (!data) return;\n    var paintProperties = this.getPaintProperties(data, sum, true);\n    //set the render paint property\n    this.map.setPaintProperty(RESULTS_LAYER_NAME, \"fill-color\", paintProperties.fillColor);\n    this.map.setPaintProperty(RESULTS_LAYER_NAME, \"fill-outline-color\", paintProperties.oulineColor);\n    this.map.setPaintProperty(RESULTS_LAYER_NAME, \"fill-opacity\", this.state.results_layer_opacity);\n  }\n\n  //gets the various paint properties for the planning unit layer - if setRenderer is true then it will also update the renderer in the Legend panel\n  getPaintProperties(data, sum, setRenderer){\n    //build an expression to get the matching puids with different numbers of 'numbers' in the marxan results\n    var fill_color_expression = this.initialiseFillColorExpression(\"puid\");\n    var fill_outline_color_expression = this.initialiseFillColorExpression(\"puid\");\n    if (data.length>0) {\n      var color, visibleValue, value;\n      //create the renderer using Joshua Tanners excellent library classybrew - available here https://github.com/tannerjt/classybrew\n      if (setRenderer) this.classifyData(data, Number(this.state.renderer.NUMCLASSES), this.state.renderer.COLORCODE, this.state.renderer.CLASSIFICATION);\n      //if only the top n classes will be rendered then get the visible value at the boundary\n      if (this.state.renderer.TOPCLASSES < this.state.renderer.NUMCLASSES) {\n        let breaks = this.state.brew.getBreaks();\n        visibleValue = breaks[this.state.renderer.NUMCLASSES - this.state.renderer.TOPCLASSES + 1];\n      }\n      else {\n        visibleValue = 0;\n      }\n      // the rest service sends the data grouped by the 'number', e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      data.forEach((row, index) => {\n        if (sum) { //multi value rendering\n          value = row[0];\n          //for each row add the puids and the color to the expression, e.g. [35,36,37],\"rgba(255, 0, 136,0.1)\"\n          color = this.state.brew.getColorInRange(value);\n          //add the color to the expression - transparent if the value is less than the visible value\n          if (value >= visibleValue) {\n            fill_color_expression.push(row[1], color);\n            fill_outline_color_expression.push(row[1], \"rgba(150, 150, 150, 0.6)\"); //gray outline\n          }\n          else {\n            fill_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n            fill_outline_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n          }\n        }\n        else { //single value rendering\n          fill_color_expression.push(row[1], \"rgba(255, 0, 136,1)\");\n          fill_outline_color_expression.push(row[1], \"rgba(150, 150, 150, 0.6)\"); //gray outline\n        }\n      });\n      // Last value is the default, used where there is no data\n      fill_color_expression.push(\"rgba(0,0,0,0)\");\n      fill_outline_color_expression.push(\"rgba(0,0,0,0)\");\n    }else{\n      fill_color_expression = \"rgba(0, 0, 0, 0)\";\n      fill_outline_color_expression = \"rgba(0, 0, 0, 0)\";\n    }\n    return {fillColor: fill_color_expression, oulineColor: fill_outline_color_expression};\n  }\n  \n  //initialises the fill color expression for matching on attributes values\n  initialiseFillColorExpression(attribute){\n    return [\"match\", [\"get\", attribute]];\n  }\n  \n  //renders the planning units edit layer according to the type of layer and pu status \n  renderPuEditLayer() {\n    let expression;\n    if (this.state.planning_units.length > 0) {\n      //build an expression to get the matching puids with different statuses in the planning units data\n      expression = [\"match\", [\"get\", \"puid\"]];\n      // the rest service sends the data grouped by the status, e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      this.state.planning_units.forEach((row, index) => {\n        var color;\n        //get the status\n        switch (row[0]) {\n          // case 1: //The PU will be included in the initial reserve system but may or may not be in the final solution.\n          //   color = \"rgba(63, 191, 63, 1)\";\n          //   break;\n          case 2: //The PU is fixed in the reserve system (“locked in”). It starts in the initial reserve system and cannot be removed.\n            color = \"rgba(63, 63, 191, 1)\";\n            break;\n          case 3: //The PU is fixed outside the reserve system (“locked out”). It is not included in the initial reserve system and cannot be added.\n            color = \"rgba(191, 63, 63, 1)\";\n            break;\n          default:\n            break;\n        }\n        //add the color to the expression \n        expression.push(row[1], color);\n      });\n      // Last value is the default, used where there is no data - i.e. for all the planning units with a status of 0\n      expression.push(\"rgba(150, 150, 150, 0)\");\n    }\n    else {\n      //there are no statuses apart from the default 0 status so have a single renderer\n      expression = \"rgba(150, 150, 150, 0)\";\n    }\n    //set the render paint property\n    this.map.setPaintProperty(STATUS_LAYER_NAME, \"line-color\", expression);\n    this.map.setPaintProperty(STATUS_LAYER_NAME, \"line-width\", STATUS_LAYER_LINE_WIDTH);\n  }\n\n  //renders the planning units cost layer according to the cost for each planning unit\n  renderPuCostLayer(cost_data) {\n    let expression;\n    if (cost_data.length > 0) {\n      //build an expression to get the matching puids with different costs\n      expression = [\"match\", [\"get\", \"puid\"]];\n      // the rest service sends the data grouped by the cost, e.g. [2000000,[23,34,36,43,98]],[4744616,[16,19]],[4932674,[21,233]]\n      cost_data.forEach((row, index) => {\n        var color;\n        //get the status\n        switch (row[0]) {\n          case 2000000: \n            color = \"rgba(63, 191, 63, 1)\";\n            break;\n          case 4744616: \n            color = \"rgba(63, 63, 191, 1)\";\n            break;\n          case 4932674: \n            color = \"rgba(191, 63, 63, 1)\";\n            break;\n          default:\n            color = \"rgba(191, 63, 63, 0)\";\n            break;\n        }\n        //add the color to the expression \n        expression.push(row[1], color);\n      });\n      // Last value is the default\n      expression.push(\"rgba(150, 150, 150, 0)\");\n    }\n    else {\n      //there are no costs apart from the default 0 status so have a single renderer\n      expression = \"rgba(150, 150, 150, 0.7)\";\n    }\n    //set the render paint property\n    this.map.setPaintProperty(COSTS_LAYER_NAME, \"fill-color\", expression);\n    // this.map.setPaintProperty(COSTS_LAYER_NAME, \"fill-outline-color\", STATUS_LAYER_LINE_WIDTH);\n  }\n\n  mouseMove(e) {\n    //hide the popup feature list if it is visible\n    if (this.state.puFeatures && this.state.puFeatures.length > 0) this.setState({puFeatures:[]});\n    //return if the user does not want to show popups\n    if (!this.state.userData.SHOWPOPUP) return;\n    //get the features under the mouse\n    var features = this.map.queryRenderedFeatures(e.point, { layers: [RESULTS_LAYER_NAME] });\n    //see if there are any features under the mouse\n    if (features.length) {\n      //set the location for the popup\n      if (!this.state.active_pu || (this.state.active_pu && this.state.active_pu.puid !== features[0].properties.puid)) this.setState({ popup_point: e.point });\n      //get the properties from the vector tile\n      let vector_tile_properties = features[0].properties;\n      //get the properties from the marxan results - these will include the number of solutions that that planning unit is found in\n      let marxan_results = this.runMarxanResponse && this.runMarxanResponse.ssoln ? this.runMarxanResponse.ssoln.filter(item => item[1].indexOf(vector_tile_properties.puid) > -1)[0] : {};\n      if (marxan_results) {\n        //convert the marxan results from an array to an object\n        let marxan_results_dict = { \"puid\": vector_tile_properties.puid, \"Number\": marxan_results[0] };\n        //combine the 2 sets of properties\n        let active_pu = Object.assign(marxan_results_dict, vector_tile_properties);\n        //set the state to re-render the popup\n        this.setState({ active_pu: active_pu });\n      }\n      else {\n        this.hidePopup();\n      }\n    }\n    else {\n      this.hidePopup();\n    }\n  }\n\n  hidePopup() {\n    this.setState({ active_pu: undefined });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///MAP INSTANTIATION, LAYERS ADDING/REMOVING AND INTERACTION\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //instantiates the mapboxgl map\n  createMap(url){\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: url,\n      center: [0, 0],\n      zoom: 2\n    });\n    //add event handlers for the load and error events\n    this.map.on(\"load\", this.mapLoaded.bind(this));\n    this.map.on(\"error\", this.mapError.bind(this));\n    this.map.on(\"click\", this.mapClick.bind(this));\n    this.map.on('mouseenter', WDPA_LAYER_NAME, this.mouseEnterPA.bind(this));\n    this.map.on('mouseleave', WDPA_LAYER_NAME, this.mouseLeavePA.bind(this,2500));\n  }\n  mouseEnterPA(e) {\n    this.map.getCanvas().style.cursor = 'pointer';\n    var coordinates = e.lngLat;\n    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n      coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n    }\n    this.showProtectedAreasPopup(e.features, e);\n  }\n\n mouseLeavePA(ms, e) {\n    setTimeout(()=>{\n      if (!this.timerCancelled){\n        this.map.getCanvas().style.cursor = '';\n        this.setState({paFeatures:[]});\n      }\n    }, ms);            \n  }\n\n  cancelTimer(e){\n    this.timerCancelled = true;  \n  }\n  \n  startTimer(e){\n    this.timerCancelled = false;  \n    this.mouseLeavePA(5);\n  }\n  \n  //shows the list of protected areas that the user is mousing over\n  showProtectedAreasPopup(features, e){\n    let paFeatures =[];\n    let wdpaIds = [];\n    features.forEach((feature) => {\n      //to get unique protected areas\n      if (wdpaIds.indexOf(feature.properties.wdpaid) < 0){\n         paFeatures.push(feature.properties);\n         wdpaIds.push(feature.properties.wdpaid);\n      }\n    });  \n    this.setState({paFeatures: paFeatures, popup_point: e.point});\n  }\n\n  mapLoaded(e) {\n    // this.map.addControl(new mapboxgl.FullscreenControl(), 'bottom-right'); // currently full screen hides the info panel and setting position:absolute and z-index: 10000000000 doesnt work properly\n    this.map.addControl(new mapboxgl.ScaleControl());\n    this.map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');\n    //create the draw controls for the map\n    this.mapboxDrawControls = new MapboxDraw({\n      displayControlsDefault: false,\n      controls: {\n        polygon: true,\n        trash: true\n      },\n      defaultMode: 'draw_polygon'\n    });\n    this.map.on(\"mousemove\", this.mouseMove.bind(this));\n    this.map.on(\"moveend\", (evt) => {\n      if (this.state.clumpingDialogOpen) this.updateMapCentreAndZoom(); //only update the state if the clumping dialog is open\n    });\n    this.map.on('draw.create', this.polygonDrawn.bind(this));\n  }\n\n  updateMapCentreAndZoom(){\n    this.setState({mapCentre: this.map.getCenter(), mapZoom: this.map.getZoom()}); \n  }\n\n  //catch all event handler for map errors\n  mapError(e){\n    var message = \"\";\n    switch (e.error.message) {\n      case 'Not Found':\n        message = \"The tileset '\" + e.source.url + \"' was not found\";\n        break;\n      case \"Bad Request\":\n        message = \"The tileset from source '\" + e.sourceId + \"' was not found. See <a href='\" + ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\";\n        break;\n      default:\n        message = e.error.message;\n        break;\n    }\n    if (message!==\"http status 200 returned without content.\"){\n      this.setSnackBar(\"MapError: \" + message);\n      console.error(message);\n    }  \n  }\n  \n  //\n  mapClick(e){\n    if ((!this.state.puEditing)&&(!this.map.getSource('mapbox-gl-draw-cold'))){ //if the user is not editing planning units or creating a new feature then show what features were in the planning unit for the clicked point\n      var features = this.map.queryRenderedFeatures(e.point, { layers: [RESULTS_LAYER_NAME] });\n      //set the popup point\n      this.setState({ popup_point: e.point });\n      //see if there are any planning unit features under the mouse\n      if (features.length && features[0].properties.puid) this.getPUFeatureList(features[0].properties.puid);\n    }\n  }\n  \n  //gets a list of features for the planning unit\n  getPUFeatureList(puid){\n    this._get(\"getPUSpeciesList?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&puid=\" + puid).then((response) => {\n      this.setState({puFeatures: response.data});\n    });\n  }\n  \n  //gets a Mapbox Style Specification JSON object from the passed ESRI style endpoint\n  getESRIStyle(styleUrl){\n    return new Promise((resolve, reject) => {\n      fetch(styleUrl) //fetch the style json\n        .then(response => {\n          return response.json()\n            .then(style => {\n              // next fetch metadata for the raw tiles\n              const TileJSON = style.sources.esri.url;\n              fetch(TileJSON)\n                .then(response => {\n                    return response.json()\n                    .then(metadata => {\n                      let tilesurl = (metadata.tiles[0].substr(0,1) === \"/\") ? TileJSON + metadata.tiles[0] : TileJSON + '/' + metadata.tiles[0];\n                      style.sources.esri = {\n                        type: 'vector',\n                        scheme: 'xyz',\n                        tilejson: metadata.tilejson || '2.0.0',\n                        format: (metadata.tileInfo && metadata.tileInfo.format) || 'pbf',\n                        /* mapbox-gl-js does not respect the indexing of esri tiles because we cache to different zoom levels depending on feature density, in rural areas 404s will still be encountered. more info: https://github.com/mapbox/mapbox-gl-js/pull/1377*/\n                        // index: metadata.tileMap ? style.sources.esri.url + '/' + metadata.tileMap : null,\n                        maxzoom: 15,  \n                        tiles: [\n                          tilesurl\n                        ],\n                        description: metadata.description,\n                        name: metadata.name\n                      };\n                      resolve(style);\n                    });\n                });\n            });\n        });\n    });\n  }\n\n  //sets the basemap\n  setBasemap(basemap){\n    return new Promise((resolve, reject) => {\n      //change the state\n      this.setState({basemap: basemap.name});\n      //get a valid map style\n      this.getValidStyle(basemap).then((style)=>{\n        //load the style\n        this.loadMapStyle(style).then((evt) => {\n          //add the WDPA layer \n          this.addWDPASource();\n          this.addWDPALayer();\n          //add the planning unit layers (if a project has already been loaded)\n          if (this.state.tileset) {\n            this.addPlanningGridLayers(this.state.tileset);\n            //get the results, if any\n            this.getResults(this.state.owner, this.state.project);\n            //filter the wdpa vector tiles\n            this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n            //turn on/off layers depending on which tab is selected\n            if (this.state.activeTab === \"planning_units\") this.pu_tab_active();\n            resolve();\n          }else{\n            resolve();\n          }\n        });\n      });\n    });\n  }\n\n  //gets the style JSON either as a valid TileJSON object or as a url to a valid TileJSON object\n  getValidStyle(basemap){\n    return new Promise((resolve, reject) => {\n      if (basemap.provider !== 'esri'){ // the style is a url - just return the url\n        resolve(MAPBOX_STYLE_PREFIX + basemap.id);\n      }else{ //the style json will be loaded dynamically from an esri endpoint and parsed to produce a valid TileJSON object\n        this.getESRIStyle(basemap.id).then((styleJson)=>{\n          resolve(styleJson);\n        });  \n      }\n    });\n  }\n  \n  //loads the maps style using either a url to a Mapbox Style Specification file or a JSON object\n  loadMapStyle(style){\n    return new Promise((resolve, reject) => {\n      if (!this.map) {\n        this.createMap(style);\n      }else{\n        //request the style\n        this.map.setStyle(style, {diff:false});\n      }\n      this.map.on('style.load', (evt) => {\n        resolve(\"Map style loaded\");\n      });\n    });\n  }\n  \n  //called when the planning grid layer has changed, i.e. the project has changed\n  changePlanningGrid(tilesetid) {\n    return new Promise((resolve, reject) => {\n      //get the tileset metadata\n      this.getMetadata(tilesetid).then((tileset) => {\n        //remove the results layer, planning unit layer etc.\n        this.removePlanningGridLayers();\n        //add the results layer, planning unit layer etc.\n        this.addPlanningGridLayers(tileset);\n        //zoom to the layers extent\n        if (tileset.bounds != null) this.zoomToBounds(this.map, tileset.bounds);\n        //set the state\n        this.setState({ tileset: tileset });\n        //filter the wdpa vector tiles as the map doesn't respond to state changes\n        this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n        resolve();\n      }).catch((error) => {\n        this.setSnackBar(error);\n        reject(error);\n      });\n    });\n  }\n\n  //gets all of the metadata for the tileset\n  getMetadata(tilesetId) {\n    return new Promise((resolve, reject) => {\n      fetch(\"https://api.mapbox.com/v4/\" + tilesetId + \".json?secure&access_token=\" + window.MBAT_PUBLIC)\n      .then(response => response.json())\n      .then((response2) => {\n        if ((response2.message != null) && (response2.message.indexOf('does not exist') > 0)){\n          reject(\"The tileset '\" + tilesetId + \"' was not found. See <a href='\" + ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\");\n        }else{\n          resolve(response2);\n        }\n      });\n    });\n  }\n\n  //adds the results, planning unit, planning unit edit etc layers to the map\n  addPlanningGridLayers(tileset) {\n    var beforeLayer = (this.state.basemap === \"North Star\" ? \"\" : \"\");\n    //add the source for the planning unit layers\n    this.map.addSource(PLANNING_UNIT_SOURCE_NAME,{\n        'type': \"vector\",\n        'url': \"mapbox://\" + tileset.id\n      }\n    );\n    //add the results layer\n    this.map.addLayer({\n      'id': RESULTS_LAYER_NAME,\n      'type': \"fill\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(0, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(0, 0, 0, 0)\"\n      }\n    }, beforeLayer);\n    //set the result layer in app state so that it can update the Legend component and its opacity control\n    this.setState({resultsLayer: this.map.getLayer(RESULTS_LAYER_NAME)});\n    //add the planning unit layer \n    this.map.addLayer({\n      'id': PU_LAYER_NAME,\n      'type': \"fill\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(0, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(150, 150, 150, \" + PU_LAYER_OPACITY + \")\"\n      }\n    }, beforeLayer);\n    //add the planning units manual edit layer - this layer shows which individual planning units have had their status changed\n    this.map.addLayer({\n      'id': STATUS_LAYER_NAME,\n      'type': \"line\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'line-color': \"rgba(150, 150, 150, 0)\",\n        'line-width': STATUS_LAYER_LINE_WIDTH\n      }\n    }, beforeLayer);\n    //add the planning units costs layer\n    this.map.addLayer({\n      'id': COSTS_LAYER_NAME,\n      'type': \"fill\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(255, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(150, 150, 150, 0)\"\n      }\n    }, beforeLayer);\n    //add the puvspr planning unit layer - this layer shows the planning unit distribution of a feature from the puvspr file\n    this.map.addLayer({\n      'id': PUVSPR_LAYER_NAME,\n      'type': \"line\",\n      'source': PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'line-color': \"rgba(255, 255, 255, 1)\",\n        'line-width': PUVSPR_LAYER_LINE_WIDTH\n      }\n    }, beforeLayer);\n  }\n\n  removePlanningGridLayers() {\n    let layers = this.map.getStyle().layers;\n    //get the dynamically added layers\n    let dynamicLayers = layers.filter((item) => {\n      return (item.source === PLANNING_UNIT_SOURCE_NAME);\n    });\n    //remove them from the map\n    dynamicLayers.forEach((item) => {\n      this.map.removeLayer(item.id);\n    });\n    //remove the sources if present\n    if (this.map.getSource(PLANNING_UNIT_SOURCE_NAME) !== undefined) this.map.removeSource(PLANNING_UNIT_SOURCE_NAME);\n  }\n  \n  //adds the WDPA vector tile layer source - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPASource(){\n    //add the source for the wdpa\n    let yr = this.state.marxanServer.wdpa_version.substr(-4); //get the year from the wdpa_version\n    let attribution = \"IUCN and UNEP-WCMC (\" + yr + \"), The World Database on Protected Areas (WDPA) \" + this.state.marxanServer.wdpa_version + \", Cambridge, UK: UNEP-WCMC. Available at: <a href='http://www.protectedplanet.net'>www.protectedplanet.net</a>\";\n    let tiles = [window.WDPA.tilesUrl + \"layer=marxan:\" + this.wdpa_vector_tile_layer + \"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}\"];\n    this.setState({wdpaAttribution: attribution});\n    this.map.addSource(WDPA_SOURCE_NAME,{\n        \"attribution\": attribution,\n        \"type\": \"vector\",\n        \"tiles\": tiles \n      }\n    ); \n  }\n  \n  //adds the WDPA vector tile layer - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPALayer(){\n    this.map.addLayer({\n      \"id\": WDPA_LAYER_NAME,\n      \"type\": \"fill\",\n      \"source\": WDPA_SOURCE_NAME,\n      \"source-layer\": this.wdpa_vector_tile_layer,\n      \"layout\": {\n        \"visibility\": \"visible\"\n      },\n      \"filter\": [\"==\", \"wdpaid\", -1],\n      \"paint\": {\n        \"fill-color\": {\n          \"type\": \"categorical\",\n          \"property\": \"marine\",\n          \"stops\": [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"]\n          ]\n        },\n        \"fill-outline-color\": {\n          \"type\": \"categorical\",\n          \"property\": \"marine\",\n          \"stops\": [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"]\n          ]\n        },\n        \"fill-opacity\": this.state.wdpa_layer_opacity\n      }\n    });\n    //set the wdpa layer in app state so that it can update the Legend component and its opacity control\n    this.setState({wdpaLayer: this.map.getLayer(WDPA_LAYER_NAME)});\n  }\n  \n  showLayer(id) {\n    if (this.map&&this.map.getLayer(id)) this.map.setLayoutProperty(id, 'visibility', 'visible');\n  }\n  hideLayer(id) {\n    if (this.map&&this.map.getLayer(id)) this.map.setLayoutProperty(id, 'visibility', 'none');\n  }\n\n  isLayerVisible(layername){\n    return (this.map && this.map.getLayer(layername) && this.map.getLayoutProperty(layername, 'visibility') === 'visible');\n  }\n  \n  //changes the layers opacity\n  changeOpacity(layerId, opacity){\n    if (this.map && this.map.getLayer(layerId)){\n      this.map.setPaintProperty(layerId, 'fill-opacity', opacity);\n      //set the state\n      if (layerId === RESULTS_LAYER_NAME) this.setState({results_layer_opacity: opacity});\n      if (layerId === WDPA_LAYER_NAME) this.setState({wdpa_layer_opacity: opacity});\n    }\n  }\n\n  //zooms to the extent of the project, i.e. the tileset bounds for the planning grid\n  zoomToProjectBounds(){\n    if (this.state.tileset && this.state.tileset.bounds) this.zoomToBounds(this.map, this.state.tileset.bounds);\n  }\n  \n  //zooms the passed map to the passed bounds\n  zoomToBounds(_map, bounds) {\n    let minLng = (bounds[0] < -180) ? -180 : bounds[0];\n    let minLat = (bounds[1] < -90) ? -90 : bounds[1];\n    let maxLng = (bounds[2] > 180) ? 180 : bounds[2];\n    let maxLat = (bounds[3] > 90) ? 90 : bounds[3];\n    _map.fitBounds([minLng, minLat, maxLng, maxLat], { padding: { top: 10, bottom: 10, left: 10, right: 10 }, easing: (num) => { return 1; } });\n  }\n\n  toggleCosts(show){\n    //show/hide the planning units cost layer \n    if (show){\n      this.getPlanningUnitsCostData().then((cost_data)=>{\n        this.renderPuCostLayer(cost_data);\n        this.showLayer(COSTS_LAYER_NAME);\n      })\n    }else{\n      this.hideLayer(COSTS_LAYER_NAME);\n    }\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///ACTIVATION/DEACTIVATION OF TABS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //fired when the projects tab is selected\n  project_tab_active() {\n    this.setState({ activeTab: \"project\" });\n    this.pu_tab_inactive();\n  }\n\n  //fired when the features tab is selected\n  features_tab_active() {\n    if (this.state.activeTab !== \"features\"){\n      this.setState({ activeTab: \"features\" });\n      //render the sum solution map\n      // this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //hide the planning unit layers\n      this.pu_tab_inactive();\n    }\n  }\n\n  //fired when the planning unit tab is selected\n  pu_tab_active() {\n    this.setState({ activeTab: \"planning_units\" });\n    //set a flag to capture if the outlined planning units layer needs to be reshown when switching back to any other tab\n    this.reinstatePuvsprLayer = this.isLayerVisible(PUVSPR_LAYER_NAME);\n    //hide the outlined planning units layer\n    this.hideLayer(PUVSPR_LAYER_NAME);\n    //show the planning units layer \n    this.showLayer(PU_LAYER_NAME);\n    //hide the results layer\n    this.changeOpacity(RESULTS_LAYER_NAME, RESULTS_LAYER_FILL_OPACITY_INACTIVE);\n    //store the values for the result layers opacities\n    this.previousResultsOpacity = this.state.results_layer_opacity;\n    //show the planning units status layer \n    this.showLayer(STATUS_LAYER_NAME);\n    //render the planning units status layer_edit layer\n    this.renderPuEditLayer(STATUS_LAYER_NAME);\n  }\n\n  //fired whenever another tab is selected\n  pu_tab_inactive() {\n    //reinstate the outlined planning units layer if needs be\n    if (this.reinstatePuvsprLayer) this.showLayer(PUVSPR_LAYER_NAME);\n    //change the opacity on the results layer to back to what it was\n    this.changeOpacity(RESULTS_LAYER_NAME, (this.previousResultsOpacity) ? this.previousResultsOpacity : RESULTS_LAYER_FILL_OPACITY_ACTIVE);\n    //hide the planning units layer \n    this.hideLayer(PU_LAYER_NAME);\n    //hide the planning units edit layer \n    this.hideLayer(STATUS_LAYER_NAME);\n  }\n\n  //fired when the legend tab is selected\n  legend_tab_active() {\n    this.setState({activeResultsTab: \"legend\" });\n  }\n\n  //fired when the solutions tab is selected\n  solutions_tab_active() {\n    this.setState({activeResultsTab: \"solutions\" });\n  }\n\n  //fired when the log tab is selected\n  log_tab_active() {\n    this.setState({activeResultsTab: \"log\" });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///PLANNING UNIT WORKFLOW AND FUNCTIONS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  startPuEditSession() {\n    //set the state\n    this.setState({puEditing: true});\n    //set the cursor to a crosshair\n    this.map.getCanvas().style.cursor = \"crosshair\";\n    //add the left mouse click event to the planning unit layer\n    this.onClickRef = this.moveStatusUp.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"click\", PU_LAYER_NAME, this.onClickRef); \n    //add the mouse right click event to the planning unit layer \n    this.onContextMenu = this.resetStatus.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"contextmenu\", PU_LAYER_NAME, this.onContextMenu); \n  }\n\n  stopPuEditSession() {\n    //set the state\n    this.setState({puEditing: false});\n    //reset the cursor\n    this.map.getCanvas().style.cursor = \"pointer\";\n    //remove the mouse left click event\n    this.map.off(\"click\", PU_LAYER_NAME, this.onClickRef);\n    //remove the mouse right click event\n    this.map.off(\"contextmenu\", PU_LAYER_NAME, this.onContextMenu);\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n\n  //clears all of the manual edits from the pu edit layer (except the protected area units)\n  clearManualEdits(){\n    //clear all the planning unit statuses\n      this.setState({ planning_units: [] }, () => {\n        //get the puids for the current iucn category\n        let puids = this.getPuidsFromIucnCategory(this.state.metadata.IUCN_CATEGORY);\n        //update the planning units\n        this.updatePlanningUnits([], puids);\n      });\n  }\n  \n  //sends a list of puids that should be excluded from the run to upddate the pu.dat file\n  updatePuDatFile() {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", this.state.project);\n    //add the planning unit manual exceptions\n    if (this.state.planning_units.length > 0) {\n      this.state.planning_units.forEach((item) => {\n        //get the name of the status parameter\n        let param_name = \"status\" + item[0];\n        //add the planning units\n        formData.append(param_name, item[1]);\n      });\n    }\n    //post to the server\n    this._post(\"updatePUFile\", formData).then((response) => {\n      //do something\n    });\n  }\n\n  //fired when the user left clicks on a planning unit to move its status up\n  moveStatusUp(e) {\n    this.changeStatus(e, \"up\");\n  }\n\n  //fired when the user left clicks on a planning unit to reset its status \n  resetStatus(e) {\n    this.changeStatus(e, \"reset\");\n  }\n\n  changeStatus(e, direction) {\n    //get the feature that the user has clicked \n    var features = this.map.queryRenderedFeatures(e.point, { layers: [PU_LAYER_NAME] });\n    //get the featureid\n    if (features.length > 0) {\n      //get the puid\n      let puid = features[0].properties.puid;\n      //get its current status \n      let status = this.getStatusLevel(puid);\n      //get the next status level\n      let next_status = this.getNextStatusLevel(status, direction);\n      //copy the current planning unit statuses \n      let statuses = this.state.planning_units;\n      //if the planning unit is not at level 0 (in which case it will not be in the planning_units state) - then remove it from the puids array for that status\n      if (status !== 0) this.removePuidFromArray(statuses, status, puid);\n      //add it to the new status array\n      if (next_status !== 0) this.addPuidToArray(statuses, next_status, puid);\n      //set the state\n      this.setState({ planning_units: statuses });\n      //re-render the planning unit edit layer\n      this.renderPuEditLayer();\n    }\n  }\n\n  getStatusLevel(puid) {\n    //iterate through the planning unit statuses to see which status the clicked planning unit belongs to, i.e. 1, 2 or 3\n    let status_level = 0; //default level as the getPlanningUnits REST call only returns the planning units with non-default values\n    PLANNING_UNIT_STATUSES.forEach((item) => {\n      let planning_units = this.getPlanningUnitsByStatus(item);\n      if (planning_units.indexOf(puid) > -1) {\n        status_level = item;\n      }\n    });\n    return status_level;\n  }\n\n  //gets the array index position for the passed status in the planning_units state\n  getStatusPosition(status) {\n    let position = -1;\n    this.state.planning_units.forEach((item, index) => {\n      if (item[0] === status) position = index;\n    });\n    return position;\n  }\n\n  //returns the planning units with a particular status, e.g. 1,2,3 \n  getPlanningUnitsByStatus(status) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    //get the array of planning units\n    let returnValue = (position > -1) ? this.state.planning_units[position][1] : [];\n    return returnValue;\n  }\n  \n  //returns the next status level for a planning unit depending on the direction\n  getNextStatusLevel(status, direction) {\n    let nextStatus;\n    switch (status) {\n      case 0:\n        nextStatus = (direction === \"up\") ? 3 : 0;\n        break;\n      case 1: //no longer used\n        nextStatus = (direction === \"up\") ? 0 : 0;\n        break;\n      case 2:\n        nextStatus = (direction === \"up\") ? 0 : 0; //used to be 1 going down\n        break;\n      case 3:\n        nextStatus = (direction === \"up\") ? 2 : 0;\n        break;\n      default:\n        break;\n    }\n    return nextStatus;\n  }\n\n  //removes in individual puid value from an array of puid statuses \n  removePuidFromArray(statuses, status, puid) {\n    return this.removePuidsFromArray(statuses, status, [puid]);\n  }\n\n  addPuidToArray(statuses, status, puid) {\n    return this.appPuidsToPlanningUnits(statuses, status, [puid]);\n  }\n\n  //adds all the passed puids to the planning_units state\n  appPuidsToPlanningUnits(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units, i.e. the index\n    let position = this.getStatusPosition(status);\n    if (position === -1) {\n      //create a new status and empty puid array\n      statuses.push([status, []]);\n      position = statuses.length - 1;\n    }\n    //add the puids to the puid array ensuring that they are unique\n    statuses[position][1] = Array.from(new Set(statuses[position][1].concat(puids)));\n    return statuses;\n  }\n\n  //removes all the passed puids from the planning_units state\n  removePuidsFromArray(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    if (position > -1) {\n      let puid_array = statuses[position][1];\n      let new_array = puid_array.filter((item) => {\n        return puids.indexOf(item) < 0;\n      }); \n      statuses[position][1] = new_array;\n      //if there are no more items in the puid array then remove it\n      if (new_array.length === 0) statuses.splice(position, 1);\n    }\n    return statuses;\n  }\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //ROUTINES FOR WORKING WITH COSTS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  getPlanningUnitsCostData(){\n    return new Promise((resolve, reject) => {\n      this._get(\"getPlanningUnitsCostData?user=\" + this.state.owner + \"&project=\" + this.state.project).then((response) => {\n        resolve(response.data);\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //ROUTINES FOR CREATING A NEW PROJECT AND PLANNING UNIT GRIDS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //previews the planning grid\n  previewPlanningGrid(planning_grid_metadata){\n    this.setState({planning_grid_metadata:planning_grid_metadata});\n    this.openPlanningGridDialog();\n  }\n  \n  //creates a new planning grid unit \n  createNewPlanningUnitGrid(iso3, domain, areakm2, shape) {\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this._ws(\"createPlanningUnitGrid?iso3=\" + iso3 + \"&domain=\" + domain + \"&areakm2=\" + areakm2 + \"&shape=\" + shape, this.wsMessageCallback.bind(this)).then((message) => {\n        this.newPlanningGridCreated(message).then(()=>{\n          this.closeNewPlanningGridDialog();\n          //websocket has finished \n          resolve(message);\n        });\n      }).catch((error) => {\n        //do something\n        reject(error);\n      });\n    });\n  }\n\n  //imports a zipped shapefile as a new planning grid\n  importPlanningUnitGrid(zipFilename, alias, description){\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this.log({method:'importPlanningUnitGrid',status:'Started',info:\"Importing planning grid..\"});\n      this.importZippedShapefileAsPu(zipFilename, alias, description).then((response) => {\n        this.log({method:'importPlanningUnitGrid',status:'Finished',info: response.info});\n        this.newPlanningGridCreated(response).then(()=> {\n          this.closeImportPlanningGridDialog();\n        });\n      }).catch((error) => { //importZippedShapefileAsPu error\n        this.deletePlanningUnitGrid(alias, true);\n        this.log({method:'importPlanningUnitGrid',status:'Finished',error:error});\n        reject(error);\n      });\n    });\n  }\n  \n  //called when a new planning grid has been created\n  newPlanningGridCreated(response){\n    return new Promise((resolve, reject) => {\n      //start polling to see when the upload is done\n      this.pollMapbox(response.uploadId).then(() => {\n        //update the planning unit items\n        this.getPlanningUnitGrids();\n        resolve(\"Planning grid created\");\n      });\n    });\n  }\n\n  //deletes a planning unit grid\n  deletePlanningUnitGrid(feature_class_name, silent = false){\n    if (silent){ //used to roll back failed imports of planning grids\n      this.deletePlanningGrid(feature_class_name, true);\n    }else{\n      //get a list of the projects for the planning grid\n      this._get(\"listProjectsForPlanningGrid?feature_class_name=\" + feature_class_name).then((response)=>{\n        //if the planning grid is not being used then delete it\n        if (response.projects.length === 0){\n          this.deletePlanningGrid(feature_class_name, false);\n        }else{\n          //show the failed to delete dialog\n          this.setState({failedToDeleteProjects: response.projects, deleteWhat: 'planning grid'}, ()=> {\n            this.openFailedToDeleteDialog();\n          });\n        }\n      });\n    }\n  }\n  \n  //deletes a planning grid\n  deletePlanningGrid(feature_class_name, silent){\n      this._get(\"deletePlanningUnitGrid?planning_grid_name=\" + feature_class_name).then((response) => {\n        //update the planning unit grids\n        this.getPlanningUnitGrids();\n        this.setSnackBar(response.info, silent);  \n      }).catch((error) => {\n        //additional stuff\n      });\n  }\n  \n  getCountries() {\n    this._get(\"getCountries\").then((response) => {\n      this.setState({ countries: response.records });\n    });\n  }\n\n  //uploads the named feature class to mapbox on the server\n  uploadToMapBox(feature_class_name, mapbox_layer_name) {\n    return new Promise((resolve, reject) => {\n      this._get(\"uploadTilesetToMapBox?feature_class_name=\" + feature_class_name + \"&mapbox_layer_name=\" + mapbox_layer_name, 300000).then((response) => {\n        this.setState({loading: true});\n        //poll mapbox to see when the upload has finished\n        this.pollMapbox(response.uploadid).then((response2) => {\n          resolve(\"Uploaded to Mapbox\");\n        });\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //polls mapbox to see when an upload has finished - returns as promise\n  pollMapbox(uploadid){\n    this.setState({loading: true});\n    this.log({info: 'Uploading to Mapbox..',status:'Uploading'});\n    return new Promise((resolve, reject) => {\n      this.timer = setInterval(() => {\n        fetch(\"https://api.mapbox.com/uploads/v1/\" + MAPBOX_USER + \"/\" + uploadid + \"?access_token=\" + window.MBAT)\n          .then(response => response.json())\n          .then((response) => {\n            if (response.complete){\n              this.log({info: 'Uploaded',status:'UploadComplete'});\n              //clear the timer\n              clearInterval(this.timer);\n              this.timer = null;\n              //reset state\n              this.setState({loading: false });\n              resolve(\"Uploaded to Mapbox\");\n            }\n          })\n          .catch((error) => {\n            this.setState({loading: false });\n            reject(error);\n          });\n      }, 3000);\n    });\n  }\n  \n  openFeaturesDialog(showClearSelectAll) {\n    this.setState({ featuresDialogOpen: true, addingRemovingFeatures: showClearSelectAll});\n    if (showClearSelectAll) this.getSelectedFeatureIds();\n  }\n  closeFeaturesDialog() {\n    this.setState({ featuresDialogOpen: false, featuresDialogPopupOpen: false });\n  }\n  openNewFeatureDialog(){\n    this.setState({ NewFeatureDialogOpen: true });\n  }\n  closeNewFeatureDialog() {\n    this.setState({ NewFeatureDialogOpen: false });\n    //finalise digitising \n    this.finaliseDigitising();\n  }\n  openImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: true});\n  }\n  closeImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: false});\n  }\n  openPlanningGridsDialog(){\n    this.setState({planningGridsDialogOpen: true});\n  }\n  closePlanningGridsDialog(){\n    this.setState({planningGridsDialogOpen: false});\n  }\n  openPlanningGridDialog(){\n    this.setState({planningGridDialogOpen: true});\n  }\n  closePlanningGridDialog(){\n    this.setState({planningGridDialogOpen: false});\n  }\n  openFeatureDialog(){\n    this.setState({featureDialogOpen: true});\n  }\n  closeFeatureDialog(){\n    this.setState({featureDialogOpen: false});\n  }\n  showNewFeaturesDialogPopover(){\n    this.setState({ featuresDialogPopupOpen: true });\n  }\n  closePopover(){\n    this.setState({ featuresDialogPopupOpen: false });\n  }\n  openCostsDialog() {\n    this.setState({ CostsDialogOpen: true });\n  }\n  closeCostsDialog() {\n    this.setState({ CostsDialogOpen: false });\n  }\n  setNewFeatureDatasetFilename(filename) {\n    this.setState({ featureDatasetFilename: filename });\n  }\n  //used by the import wizard to import a users zipped shapefile as the planning units\n  importZippedShapefileAsPu(zipname, alias, description) {\n    //the zipped shapefile has been uploaded to the MARXAN folder - it will be imported to PostGIS and a record will be entered in the metadata_planning_units table\n    return this._get(\"importPlanningUnitGrid?filename=\" + zipname + \"&name=\" + alias + \"&description=\" + description);\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // MANAGING INTEREST FEATURES SECTION\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //updates the properties of a feature and then updates the features state\n  updateFeature(feature, newProps){\n    let features = this.state.allFeatures;\n    //get the position of the feature \n    var index = features.findIndex((element) => { return element.id === feature.id; });\n    if (index!==-1) {\n      Object.assign(features[index], newProps);\n      //update allFeatures and projectFeatures with the new value\n      this.setFeaturesState(features);\n    }\n  }\n\n  //gets the ids of the selected features\n  getSelectedFeatureIds(){\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      if (feature.selected) ids.push(feature.id);\n    });\n    this.setState({selectedFeatureIds: ids});\n  }\n\n  //when a user clicks a feature in the FeaturesDialog\n  clickFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    if (ids.includes(feature.id)){\n      //remove the feature if it is already selected\n      this.removeFeature(feature);\n    }else{\n      //add the feature to the selected feature array\n      this.addFeature(feature);\n    }\n  }\n  \n  //removes a feature from the selectedFeatureIds array\n  removeFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    //remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n    ids = ids.filter((value, index, arr) => {return value !== feature.id});\n    return new Promise((resolve, reject) => {\n      this.setState({ selectedFeatureIds: ids }, () => {\n        resolve(\"Feature removed\");  \n      });\n    });\n  }\n  \n  //adds a feature to the selectedFeatureIds array\n  addFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    //add the feautre to the selected feature array\n    ids.push(feature.id);\n    this.setState({ selectedFeatureIds: ids });\n  }\n  \n  //starts a digitising session\n  initialiseDigitising(){\n    //show the digitising controls if they are not already present, mapbox-gl-draw-cold and mapbox-gl-draw-hot\n    if (!this.map.getSource('mapbox-gl-draw-cold')) this.map.addControl(this.mapboxDrawControls);\n  }\n  \n  //finalises the digitising\n  finaliseDigitising(){\n    //hide the drawing controls\n    this.map.removeControl(this.mapboxDrawControls);\n  }\n  //called when the user has drawn a polygon on screen\n  polygonDrawn(evt){\n    //open the new feature dialog for the metadata\n    this.openNewFeatureDialog();\n    //save the feature in a local variable\n    this.digitisedFeatures = evt.features;\n  }\n  \n  //selects all the features\n  selectAllFeatures() {\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      ids.push(feature.id);\n    });\n    this.selectFeatures(ids);\n  }\n\n  //clears all the Conservation features\n  clearAllFeatures() {\n    this.setState({selectedFeatureIds: []});\n  }\n\n  //selects features \n  selectFeatures(ids) {\n    this.setState({selectedFeatureIds: ids});\n  }\n\n  //updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog\n  updateSelectedFeatures(){\n    let allFeatures = this.state.allFeatures;\n    allFeatures.forEach((feature) => {\n      if (this.state.selectedFeatureIds.includes(feature.id)) {\n        Object.assign(feature, {selected: true});\n      }else{\n        if (this.state.metadata.OLDVERSION){\n          //for imported projects we cannot preprocess them any longer as we dont have access to the features spatial data - therefore dont set preprocessed to false or any of the other stats fields\n          Object.assign(feature, {selected: false});\n        }else{\n          Object.assign(feature, {selected: false, preprocessed: false, protected_area: -1, pu_area: -1, pu_count: -1, target_area: -1, occurs_in_planning_grid: false});\n        }\n        //remove the feature layer if it is loaded\n        if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n        //remove the planning unit layer if it is loaded\n        if (feature.id === this.puvsprLayerId) this.toggleFeaturePuvsprLayer(feature);\n      }\n    });\n    //when the project features have been saved to state, update the spec.dat file\n    this.setFeaturesState(allFeatures, ()=>{\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile(); \n      //close the dialog\n      this.closeFeaturesDialog();\n    });\n  }\n\n  //updates the target values for all features in the project to the passed value\n  updateTargetValueForFeatures(target_value){\n    let allFeatures = this.state.allFeatures;\n    //iterate through all features\n    allFeatures.forEach((feature) => {\n      Object.assign(feature, {target_value: target_value});\n    });\n    //set the features in app state\n    this.setFeaturesState(allFeatures, ()=> {\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile(); \n    });\n  }\n  \n  //the callback is optional and will be called when the state has updated\n  setFeaturesState(newFeatures, callback){\n    //update allFeatures and projectFeatures with the new value\n    this.setState({ allFeatures: newFeatures, projectFeatures: newFeatures.filter((item) => { return item.selected }) }, callback);\n  }\n  \n  //unselects a single Conservation feature\n  unselectItem(feature) {\n    //remove it from the selectedFeatureIds array\n    this.removeFeature(feature).then(() => {\n      //refresh the selected features\n      this.updateSelectedFeatures();\n    });\n  }\n\n  //previews the feature\n  previewFeature(feature_metadata){\n    this.setState({feature_metadata:feature_metadata});\n    this.openFeatureDialog();\n  }\n\n  //unzips a shapefile on the server\n  unzipShapefile(filename){\n    return new Promise((resolve, reject) => {\n      this._get(\"unzipShapefile?filename=\" + filename).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //deletes a zip file and shapefile (with the *.shp extension) \n  deleteShapefile(zipfile, shapefile){\n    return new Promise((resolve, reject) => {\n      this._get(\"deleteShapefile?zipfile=\" + zipfile + \"&shapefile=\" + shapefile).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //gets a list of fieldnames from the passed shapefile - this must exist in the servers root directory\n  getShapefileFieldnames(filename){\n    return new Promise((resolve, reject) => {\n      this._get(\"getShapefileFieldnames?filename=\" + filename).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //create new features from the already uploaded zipped shapefile \n  importFeatures(zipfile, name, description, shapefile,  spiltfield){\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      let url = (name !== \"\") ? \"importFeatures?zipfile=\" + zipfile + \"&shapefile=\" + shapefile + \"&name=\" + name + \"&description=\" + description : \"importFeatures?zipfile=\" + zipfile + \"&shapefile=\" + shapefile + \"&splitfield=\" + spiltfield;\n      this._ws(url, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished \n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n\n  //create the new feature from the feature that has been digitised on the map\n  createNewFeature(name, description){\n    //start the logging\n    this.startLogging();\n    this.log({method:'createNewFeature',status:'Started',info:\"Creating feature..\"});\n    //post the geometry to the server with the metadata\n    let formData = new FormData();\n    formData.append('name', name);\n    formData.append('description', description);\n    //convert the coordinates into a linestring to create the polygon in postgis\n    let coords = this.digitisedFeatures[0].geometry.coordinates[0].map((coordinate) => {\n      return coordinate[0] + \" \" + coordinate[1];\n    }).join(\",\");\n    formData.append('linestring', \"Linestring(\" + coords + \")\");\n    this._post(\"createFeatureFromLinestring\", formData).then((response) => {\n        this.log({method:'createNewFeature',status:'Finished', info: response.info});\n        //start polling to see when the upload is done\n        this.pollMapbox(response.uploadId).then(() => {\n          this.newFeatureCreated(response.id);\n          //close the dialog\n          this.closeNewFeatureDialog();\n        });\n    }).catch((error) => {\n      this.log({status:'Finished', error: error});\n    });\n  }\n  \n  //gets the new feature information and updates the state\n  newFeatureCreated(id){\n    this.getInterestFeature(id);\n  }\n  \n  getInterestFeature(id) {\n    //load the interest feature from the marxan web database\n    this._get(\"getFeature?oid=\" + id + \"&format=json\").then((response) => {\n      //add the required attributes to use it in Marxan Web\n      this.addFeatureAttributes(response.data[0]);\n      //update the allFeatures array\n      this.addNewFeature(response.data[0]);\n    });\n  }\n\n  //adds a new feature to the allFeatures array\n  addNewFeature(feature){\n    //update the allFeatures array\n    var featuresCopy = this.state.allFeatures;\n    featuresCopy.push(feature);\n    this.setState({allFeatures: featuresCopy});\n  }\n  \n  //attempts to delete a feature - if the feature is in use in a project then it will not be deleted and the list of projects will be shown\n  deleteFeature(feature) {\n    this._get(\"listProjectsForFeature?feature_class_id=\" + feature.id).then((response) => {\n      if (response.projects.length === 0){\n        this._deleteFeature(feature);\n      }else{\n        this.setState({failedToDeleteProjects: response.projects, deleteWhat: 'feature'}, ()=> {\n          this.openFailedToDeleteDialog();\n        });\n      }\n    });\n  }\n\n  //deletes a feature\n  _deleteFeature(feature){\n    this._get(\"deleteFeature?feature_name=\" + feature.feature_class_name).then((response) => {\n      this.setSnackBar(\"Feature deleted\");\n      //remove it from the current project if necessary\n      this.removeFeature(feature);\n      //remove it from the allFeatures array\n      this.removeFeatureFromAllFeatures(feature);\n    });\n  }\n\n  //shows the failed to delete feature dialog\n  showFailedToDeleteDialog(feature, projects){\n    console.log(projects)  ;\n  }\n  \n  //removes a feature from the allFeatures array\n  removeFeatureFromAllFeatures(feature){\n    let featuresCopy = this.state.allFeatures;\n    //remove the feature \n    featuresCopy = featuresCopy.filter((item) => {return item.id !== feature.id});\n    //update the allFeatures state   \n    this.setState({allFeatures: featuresCopy});\n  }\n  \n  //gets all the features \n  getAllFeatures(){\n    return new Promise((resolve, reject) => {\n      this._get(\"getAllSpeciesData\").then((response) => {\n        //set the allfeatures state\n        this.setState({allFeatures: response.data});\n        resolve(\"Features returned\");\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  openFeatureMenu(evt, feature){\n    //set the menu text\n    let puvsprLayerText = this.getMenuTextForPuvsprLayer(feature);\n    this.setState({featureMenuOpen: true, currentFeature: feature, menuAnchor: evt.currentTarget, puvsprLayerText: puvsprLayerText});\n  }\n  closeFeatureMenu(evt){\n    this.setState({featureMenuOpen: false});\n  }\n\n  //get feature menu text for puvspr layer\n  getMenuTextForPuvsprLayer(feature){\n    //see if the layer that shows the planning units for a feature is currently visible on the map\n    let visible = this.isLayerVisible(PUVSPR_LAYER_NAME);\n    //see if the feature layer is different from the one that is already being shown on the map\n    let newFeature = ((feature.id !== this.puvsprLayerId) || (this.puvsprLayerId === undefined));\n    //really confusing line!\n    let puvsprLayerText = (visible) ? (newFeature) ? (feature.preprocessed) ? SHOW_PUVSPR_LAYER_TEXT : HIDE_PUVSPR_LAYER_TEXT : (feature.preprocessed) ? HIDE_PUVSPR_LAYER_TEXT : SHOW_PUVSPR_LAYER_TEXT : SHOW_PUVSPR_LAYER_TEXT;\n    return puvsprLayerText;\n  }\n  \n  //hides the feature layer\n  hideFeatureLayer(){\n    this.state.projectFeatures.forEach((feature) => {\n      if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n    });\n  }\n  \n  //toggles the feature layer on the map\n  toggleFeatureLayer(feature){\n    // this.closeFeatureMenu();\n    let layerName = feature.tilesetid.split(\".\")[1];\n    if (this.map.getLayer(layerName)){\n      this.map.removeLayer(layerName);\n      this.map.removeSource(layerName);\n      this.updateFeature(feature, {feature_layer_loaded: false});\n    }else{\n      this.map.addLayer({\n        'id': layerName,\n        'type': \"fill\",\n        'source': {\n          'type': \"vector\",\n          'url': \"mapbox://\" + feature.tilesetid\n        },\n        'source-layer': layerName,\n        'paint': {\n          'fill-color': \"rgba(255, 0, 0, 1)\",\n          'fill-outline-color': \"rgba(255, 0, 0, 1)\"\n        }\n      }, PUVSPR_LAYER_NAME); //add it before the layer that shows the planning unit outlines for the feature\n      this.updateFeature(feature, {feature_layer_loaded: true});\n    }\n  }\n  \n  toggleFeaturePuvsprLayer(feature){\n    // this.closeFeatureMenu();\n    if (this.state.puvsprLayerText === HIDE_PUVSPR_LAYER_TEXT){\n      this.hideLayer(PUVSPR_LAYER_NAME);\n      //set the text\n      this.setState({puvsprLayerText: SHOW_PUVSPR_LAYER_TEXT});\n      //reset the id of the currently shown pu layer\n      this.puvsprLayerId = -1;\n    }else{\n      //set the text\n      this.setState({puvsprLayerText: HIDE_PUVSPR_LAYER_TEXT});\n      //get the planning units where the feature occurs from the puvspr.dat file\n      this.getFeaturePlanningUnits(feature.id);\n    }\n  }\n\n  //get the planning unit ids where the feature occurs\n  getFeaturePlanningUnits(oid){\n    this._get(\"getFeaturePlanningUnits?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&oid=\" + oid).then((response) => {\n      //update the paint property for the layer\n      var line_color_expression = this.initialiseFillColorExpression(\"puid\");\n      response.data.forEach((puid) => {\n          line_color_expression.push(puid, PUVSPR_LAYER_OUTLINE_COLOR); \n      });\n      // Last value is the default, used where there is no data\n      line_color_expression.push(\"rgba(0,0,0,0)\");\n      this.map.setPaintProperty(PUVSPR_LAYER_NAME, \"line-color\", line_color_expression);\n      //show the layer\n      this.showLayer(PUVSPR_LAYER_NAME);\n      //set the puvsprLayerId value - this is used to see which puvspr layer is currently being shown on the map to be able to set the text for the menu item\n      this.puvsprLayerId = oid;\n    });\n  }\n\n  //removes the current feature from the project\n  removeFromProject(feature){\n    this.closeFeatureMenu();\n    this.unselectItem(feature);\n  }\n  \n  //zooms to a features extent\n  zoomToFeature(feature){\n    this.closeFeatureMenu();\n    //transform from BOX(-174.173506487 -18.788241791,-173.86528589 -18.5190063499999) to [[-73.9876, 40.7661], [-73.9397, 40.8002]]\n    let points = feature.extent.substr(4, feature.extent.length-5).replace(/ /g,\",\").split(\",\");\n    //get the points as numbers\n    let nums = points.map((item) => {return Number(item)});\n    //zoom to the feature\n    this.map.fitBounds([[nums[0], nums[1]],[nums[2], nums[3]]], { padding: 100});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// DIALOG OPENING/CLOSING FUNCTIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  showUserMenu(e) {\n    e.preventDefault();\n    this.setState({ userMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideUserMenu(e) {\n    this.setState({ userMenuOpen: false });\n  }\n  showHelpMenu(e) {\n    e.preventDefault();\n    this.setState({ helpMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideHelpMenu(e) {\n    this.setState({ helpMenuOpen: false });\n  }\n  openRegisterDialog() {\n    this.setState({ registerDialogOpen: true });\n  }\n  closeRegisterDialog() {\n    this.setState({ registerDialogOpen: false });\n  }\n  openResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: true });\n  }\n  closeResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: false });\n  }\n  openProjectsDialog() {\n    this.setState({ projectsDialogOpen: true });\n    this.getProjects();\n  }\n  closeProjectsDialog() {\n    this.setState({ projectsDialogOpen: false });\n  }\n  openNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: true });\n  }\n  closeNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: false });\n  }\n  openNewPlanningGridDialog() {\n    this.getCountries();\n    this.setState({ NewPlanningGridDialogOpen: true });\n  }\n  closeNewPlanningGridDialog() {\n    this.setState({ NewPlanningGridDialogOpen: false });\n  }\n  openImportPlanningGridDialog(){\n    this.setState({ importPlanningGridDialogOpen: true });\n  }\n  closeImportPlanningGridDialog(){\n    this.setState({ importPlanningGridDialogOpen: false });\n  }\n  openInfoDialog() {\n      this.setState({ openInfoDialogOpen: true, featureMenuOpen: false });\n  }\n  closeInfoDialog() {\n      this.setState({ openInfoDialogOpen: false });\n  }\n\n  openOptionsDialog() {\n    this.setState({ optionsDialogOpen: true });\n    this.hideUserMenu();\n  }\n\n  closeOptionsDialog() {\n    this.setState({ optionsDialogOpen: false });\n  }\n\n  openProfileDialog() {\n    this.setState({ profileDialogOpen: true });\n    this.hideUserMenu();\n  }\n  closeProfileDialog() {\n    this.setState({ profileDialogOpen: false });\n  }\n  \n  openAboutDialog(){\n    this.setState({ aboutDialogOpen: true });\n    this.hideHelpMenu();\n  }\n\n  closeAboutDialog() {\n    this.setState({ aboutDialogOpen: false });\n  }\n  \n  showRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: true });\n  }\n  \n  closeRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: false });\n  }\n\n  openClassificationDialog() {\n    this.setState({ classificationDialogOpen: true });\n  }\n  closeClassificationDialog() {\n    this.setState({ classificationDialogOpen: false });\n  }\n\n  openImportProjectDialog() {\n    this.setState({ importProjectDialogOpen: true });\n  }\n  closeImportDialog() {\n    this.setState({ importProjectDialogOpen: false });\n  }\n  openUsersDialog() {\n    this.getUsers();\n    this.setState({ usersDialogOpen: true });\n  }\n  closeUsersDialog() {\n    this.setState({ usersDialogOpen: false });\n  }\n  closeAlertDialog(){\n    this.setState({alertDialogOpen: false});\n  }\n  hideResults() {\n    this.setState({ resultsPanelOpen: false });\n  }\n  showResults() {\n    this.setState({ resultsPanelOpen: true });\n  }\n  \n  toggleInfoPanel() {\n    this.setState({ infoPanelOpen: !this.state.infoPanelOpen });\n  }\n  toggleResultsPanel() {\n    this.setState({ resultsPanelOpen: !this.state.resultsPanelOpen });\n  }\n  \n  openRunLogDialog(){\n    this.getRunLogs();\n    this.setState({runLogDialogOpen: true});\n  }\n  closeRunLogDialog(){\n    this.setState({runLogDialogOpen: false});\n  }\n  openServerDetailsDialog(){\n    this.setState({serverDetailsDialogOpen: true});\n    this.hideHelpMenu();\n  }\n  closeServerDetailsDialog(){\n    this.setState({serverDetailsDialogOpen: false});\n  }\n  openChangePasswordDialog(){\n    this.hideUserMenu();\n    this.setState({changePasswordDialogOpen: true});\n  }\n  closeChangePasswordDialog(){\n    this.setState({changePasswordDialogOpen: false});\n  }\n  \n  openFailedToDeleteDialog(){\n    this.setState({FailedToDeleteDialogOpen: true});\n  }\n  closeFailedToDeleteDialog(){\n    this.setState({FailedToDeleteDialogOpen: false});\n  }\n  openTargetDialog(){\n    this.setState({targetDialogOpen:true});\n  }\n  closeTargetDialog(){\n    this.setState({targetDialogOpen:false});\n  }\n\n  openShareableLinkDialog(){\n    this.setState({shareableLinkDialogOpen: true});\n  }\n  closeShareableLinkDialog(){\n    this.setState({shareableLinkDialogOpen: false});\n  }\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// PROTECTED AREAS LAYERS STUFF\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  changeIucnCategory(iucnCategory) {\n    //update the state\n    let _metadata = this.state.metadata;\n    _metadata.IUCN_CATEGORY = iucnCategory;\n    this.setState({ metadata: _metadata });\n    //update the input.dat file\n    this.updateProjectParameter(\"IUCN_CATEGORY\", iucnCategory);\n    //filter the wdpa vector tiles\n    this.filterWdpaByIucnCategory(iucnCategory);\n    //render the wdpa intersections on the grid\n    this.renderPAGridIntersections(iucnCategory);\n  }\n\n  filterWdpaByIucnCategory(iucnCategory) {\n    //get the individual iucn categories\n    let iucnCategories = this.getIndividualIucnCategories(iucnCategory);\n    //TODO FILTER THE WDPA CLIENT SIDE BY INTERSECTING IT WITH THE PLANNING GRID\n    //filter the vector tiles for those iucn categories - and if the planning unit name has an iso3 country code - then use that as well. e.g. pu_ton_marine_hexagon_50 (has iso3 code) or pu_a4402723a92444ff829e9411f07e7 (no iso3 code)\n    //let filterExpr = (this.state.metadata.PLANNING_UNIT_NAME.match(/_/g).length> 1) ? ['all', ['in', 'IUCN_CAT'].concat(iucnCategories), ['==', 'PARENT_ISO', this.state.metadata.PLANNING_UNIT_NAME.substr(3, 3).toUpperCase()]] : ['all', ['in', 'IUCN_CAT'].concat(iucnCategories)];\n    let filterExpr = ['all', ['in', 'iucn_cat'].concat(iucnCategories)]; // no longer filter by ISO code\n    this.map.setFilter(WDPA_LAYER_NAME, filterExpr);\n    //turn on/off the protected areas legend\n    (iucnCategory === \"None\") ? this.hidePALegend() : this.showPALegend();\n  }\n\n  getIndividualIucnCategories(iucnCategory) {\n    let retValue = [];\n    switch (iucnCategory) {\n      case 'None':\n        retValue = [''];\n        break;\n      case 'IUCN I-II':\n        retValue = ['Ia', 'Ib', 'II'];\n        break;\n      case 'IUCN I-IV':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV'];\n        break;\n      case 'IUCN I-V':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V'];\n        break;\n      case 'IUCN I-VI':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V', 'VI'];\n        break;\n      case 'All':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V', 'VI','Not Reported'];\n        break;\n      default:\n    }\n    return retValue;\n  }\n\n  //gets the puids for those protected areas that intersect the planning grid in the passed iucn category\n  getPuidsFromIucnCategory(iucnCategory) {\n    let intersections_by_category = this.getIntersections(iucnCategory);\n    //get all the puids in this iucn category \n    let puids = this.getPuidsFromNormalisedData(intersections_by_category);\n    return puids;\n  }\n\n  //called when the iucn category changes - gets the puids that need to be added/removed, adds/removes them and updates the PuEdit layer\n  async renderPAGridIntersections(iucnCategory) {\n    await this.preprocessProtectedAreas(iucnCategory).then((intersections) => {\n      //get all the puids of the intersecting protected areas in this iucn category \n      let puids = this.getPuidsFromIucnCategory(iucnCategory);\n      //see if any of them will overwrite existing manually edited planning units - these will be in status 1 and 3\n      let manuallyEditedPuids = this.getPlanningUnitsByStatus(1).concat(this.getPlanningUnitsByStatus(3));\n      let clashingPuids = manuallyEditedPuids.filter(value => -1 !== puids.indexOf(value));\n      if (clashingPuids.length > 0){\n        //remove them from the puids\n        puids = puids.filter((item) => !clashingPuids.includes(item));\n        this.setSnackBar(\"Not all planning units have been added. See <a href='\" + ERRORS_PAGE + \"#not-all-planning-units-have-been-added' target='blank'>here</a>\");\n      }\n      //get all the puids for the existing iucn category - these will come from the previousPuids rather than getPuidsFromIucnCategory as there may have been some clashes and not all of the puids from getPuidsFromIucnCategory may actually be renderered\n      //if the previousPuids are undefined then get them from the projects previousIucnCategory\n      let previousPuids = (this.previousPuids !== undefined) ? this.previousPuids : this.getPuidsFromIucnCategory(this.previousIucnCategory);\n      //set the previously selected puids\n      this.previousPuids = puids;\n      //and previousIucnCategory\n      this.previousIucnCategory = iucnCategory;\n      //rerender\n      this.updatePlanningUnits(previousPuids, puids);\n    }).catch((error) => {\n      this.setSnackBar(error);\n    });\n  }\n\n  //updates the planning units by reconciling the passed arrays of puids\n  updatePlanningUnits(previousPuids, puids){\n    //copy the current planning units state\n    let statuses = this.state.planning_units;\n    //get the new puids that need to be added\n    let newPuids = this.getNewPuids(previousPuids, puids);\n    if (newPuids.length === 0) {\n      //get the puids that need to be removed\n      let oldPuids = this.getNewPuids(puids, previousPuids);\n      this.removePuidsFromArray(statuses, 2, oldPuids);\n    }\n    else {\n      //add all the new protected area intersections into the planning units as status 2\n      this.appPuidsToPlanningUnits(statuses, 2, newPuids);\n    }\n    //update the state\n    this.setState({ planning_units: statuses });\n    //re-render the layer\n    this.renderPuEditLayer();\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n  \n  getNewPuids(previousPuids, puids) {\n    return puids.filter((i) => {\n      return previousPuids.indexOf(i) === -1;\n    });\n  }\n\n  //turns on the legend for the protected areas\n  showPALegend(){\n    this.setState({pa_layer_visible:true});\n  }\n  \n  //hides the protected area legend\n  hidePALegend(){\n    this.setState({pa_layer_visible:false});  \n  }\n  preprocessProtectedAreas(iucnCategory) {\n    //have the intersections already been calculated\n    if (this.protected_area_intersections.length>0) {\n      return Promise.resolve(this.protected_area_intersections);\n    }\n    else {\n      //do the intersection on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket \n        this._ws(\"preprocessProtectedAreas?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&planning_grid_name=\" + this.state.metadata.PLANNING_UNIT_NAME, this.wsMessageCallback.bind(this)).then((message) => {\n          //set the local variable\n          this.protected_area_intersections = message.intersections;\n          //return a value to the then() call\n          resolve(message);\n        }).catch((error) => {\n          reject(error);\n        });\n      }); //return\n    }\n  }\n\n  getIntersections(iucnCategory) {\n    //get the individual iucn categories\n    let iucn_categories = this.getIndividualIucnCategories(iucnCategory);\n    //get the planning units that intersect the protected areas with the passed iucn category\n    return this.protected_area_intersections.filter((item) => { return (iucn_categories.indexOf(item[0]) > -1); });\n  }\n\n  //downloads and updates the WDPA on the server\n  updateWDPA(){\n    //start the logging\n    this.startLogging();\n    //call the webservice\n    return new Promise((resolve, reject) => {\n      this._ws(\"updateWDPA?downloadUrl=\" + window.WDPA.downloadUrl + \"&wdpaVersion=\" + window.WDPA.latest_version, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished - set the new version of the wdpa\n        let obj = Object.assign(this.state.marxanServer, {wdpa_version: window.WDPA.latest_version});\n        //update the state and when it is finished, re-add the wdpa source and layer\n        this.setState({newWDPAVersion: false, marxanServer: obj}, ()=> {\n          //set the source for the WDPA layer to the new vector tiles\n          this.setWDPAVectorTilesLayerName(window.WDPA.latest_version);\n          //remove the existing WDPA layer and source\n          this.map.removeLayer(WDPA_LAYER_NAME);\n          if (this.map && this.map.getSource(WDPA_SOURCE_NAME) !== undefined) this.map.removeSource(WDPA_SOURCE_NAME);\n          //re-add the WDPA source and layer\n          this.addWDPASource();\n          this.addWDPALayer();\n          //reset the protected area intersections on the client\n          this.protected_area_intersections = [];\n          //recalculate the protected area intersections and refilter the vector tiles\n          this.changeIucnCategory(this.state.metadata.IUCN_CATEGORY);\n        });\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// BOUNDARY LENGTH MODIFIER AND CLUMPING\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  async preprocessBoundaryLengths(iucnCategory) {\n    if (this.state.files.BOUNDNAME){ //if the bounds.dat file already exists\n      return Promise.resolve();\n    }else{\n      //calculate the boundary lengths on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket \n        this._ws(\"preprocessPlanningUnits?user=\" + this.state.owner + \"&project=\" + this.state.project, this.wsMessageCallback.bind(this)).then((message) => {\n          //update the state\n          var currentFiles = this.state.files;\n          currentFiles.BOUNDNAME = \"bounds.dat\";\n          this.setState({files: currentFiles});\n          //return a value to the then() call\n          resolve(message);\n        }).catch((error) => {\n          reject(error);\n        });\n      }); //return\n    }\n  }\n\n  showClumpingDialog(){\n    //update the map centre and zoom state which is used by the maps in the clumping dialog\n    this.updateMapCentreAndZoom();\n    //when the boundary lengths have been calculated\n    this.preprocessBoundaryLengths().then((intersections) => {\n      //update the spec.dat file with any that have been added or removed or changed target or spf\n      this.updateSpecFile().then((value) => {\n        //when the species file has been updated, update the planning unit file \n        this.updatePuFile();\n        //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using web sockets\n        this.updatePuvsprFile().then((value) => {\n          //show the clumping dialog\n          this.setState({ clumpingDialogOpen: true, clumpingRunning: true });\n        });\n      }).catch((error) => { //updateSpecFile error\n        \n      });\n    }).catch((error) => { //preprocessBoundaryLengths error\n      console.log(error);\n    }); \n  }\n\n  hideClumpingDialog(){\n    //delete the project group\n    this.deleteProjects();\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //return state to normal\n    this.setState({ clumpingDialogOpen: false });\n  }\n\n  //creates a group of 5 projects with UUIDs in the _clumping folder\n  createProjectGroupAndRun(blmValues){\n    //clear any exists projects\n    if (this.projects) this.deleteProjects();\n    return new Promise((resolve, reject) => {\n      this._get(\"createProjectGroup?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&copies=5&blmValues=\" + blmValues.join(\",\")).then((response) => {\n        //set the local variable for the projects\n        this.projects = response.data;\n        //run the projects\n        this.runProjects(response.data);\n        resolve(\"Project group created\");\n      }).catch((error) => {\n        //do something\n        reject(error);\n      });\n    });\n  }\n  \n  //deletes the projects from the _clumping folder\n  deleteProjects(){\n    if (this.projects){\n      var projectNames = this.projects.map((item) => {\n        return item.projectName;\n      });\n      //clear the local variable\n      this.projects = undefined;\n      return new Promise((resolve, reject) => {\n        this._get(\"deleteProjects?projectNames=\" + projectNames.join(\",\")).then((response) => {\n          resolve(\"Projects deleted\");\n        }).catch((error) => {\n          reject(error);\n        });\n      });\n    }\n  }\n  \n  runProjects(projects){\n    //reset the counter\n    this.projectsRun = 0;\n    //set the intitial state\n    this.setState({clumpingRunning: true});\n    //run the projects\n    projects.forEach((project) => {\n      this.startMarxanJob(\"_clumping\", project.projectName, false).then((response) => {\n        if (!this.checkForErrors(response, false)) {\n          //run completed - get a single solution\n          this.loadOtherSolution(response.user, response.project, 1);\n        }\n        //increment the project counter\n        this.projectsRun = this.projectsRun + 1;\n        //set the state\n        if (this.projectsRun===5) this.setState({clumpingRunning: false});\n      });\n    });\n  }\n  \n  rerunProjects(blmChanged, blmValues){\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //if the blmValues have changed then recreate the project group and run\n    if (blmChanged){\n      this.createProjectGroupAndRun(blmValues);\n    }else{\n      //rerun the projects\n      this.runProjects(this.projects);\n    }\n  }\n  \n  setBlmValue(blmValue){\n    var newRunParams = [], value;\n    //iterate through the run parameters and update the value for the blm\n    this.state.runParams.forEach((item) => {\n      value = (item.key === 'BLM') ? String(blmValue) : item.value;\n      newRunParams.push({key: item.key, value: value});\n    });\n    //update this run parameters\n    this.updateRunParams(newRunParams);\n  }\n\n  resetPaintProperties(){\n    //reset the paint properties\n    this.setState({map0_paintProperty:[],map1_paintProperty:[],map2_paintProperty:[],map3_paintProperty:[],map4_paintProperty:[]});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING RUNS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //returns the log of all of the runs from the server\n  getRunLogs(){\n    if (!this.state.unauthorisedMethods.includes(\"getRunLogs\")){\n      this._get(\"getRunLogs\").then((response) => {\n          this.setState({runLogs: response.data});\n      });\n    }\n  }\n  \n  //clears the records from the run logs file\n  clearRunLogs(){\n    this._get(\"clearRunLogs\").then((response) => {\n        this.getRunLogs();\n    });\n  }\n  \n  getShareableLink(){\n    this.openShareableLinkDialog();\n  }\n  \n  render() {\n    const message = (<span id=\"snackbar-message-id\" dangerouslySetInnerHTML={{ __html: this.state.snackbarMessage }} />);    \n    return (\n      <MuiThemeProvider>\n        <React.Fragment>\n          <div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" />\n          <LoadingDialog\n            open={this.state.shareableLink}\n          />\n          <LoginDialog \n            open={!this.state.loggedIn} \n            onOk={this.validateUser.bind(this)} \n            onCancel={this.openRegisterDialog.bind(this)} \n            loading={this.state.loading} \n            user={this.state.user} \n            password={this.state.password} \n            changeUserName={this.changeUserName.bind(this)} \n            changePassword={this.changePassword.bind(this)} \n            openResendPasswordDialog={this.openResendPasswordDialog.bind(this)}\n            marxanServers={this.state.marxanServers}\n            selectServer={this.selectServer.bind(this)}\n            marxanServer={this.state.marxanServer}\n          />\n          <RegisterDialog \n            open={this.state.registerDialogOpen} \n            onOk={this.createNewUser.bind(this)}\n            onCancel={this.closeRegisterDialog.bind(this)}\n            loading={this.state.loading} \n          />\n          <ResendPasswordDialog\n            open={this.state.resendPasswordDialogOpen} \n            onOk={this.resendPassword.bind(this)}\n            onCancel={this.closeResendPasswordDialog.bind(this)}\n            loading={this.state.loading} \n            changeEmail={this.changeEmail.bind(this)} \n            email={this.state.resendEmail} \n          />\n          <UserMenu \n            open={this.state.userMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            hideUserMenu={this.hideUserMenu.bind(this)} \n            openOptionsDialog={this.openOptionsDialog.bind(this)}\n            openProfileDialog={this.openProfileDialog.bind(this)}\n            logout={this.logout.bind(this)}\n            marxanServer={this.state.marxanServer}\n            openChangePasswordDialog={this.openChangePasswordDialog.bind(this)}\n          />\n          <HelpMenu \n            open={this.state.helpMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            hideHelpMenu={this.hideHelpMenu.bind(this)} \n            openAboutDialog={this.openAboutDialog.bind(this)}\n            openServerDetailsDialog={this.openServerDetailsDialog.bind(this)}\n            DOCS_ROOT={DOCS_ROOT}\n          />\n          <OptionsDialog \n            open={this.state.optionsDialogOpen}\n            onOk={this.closeOptionsDialog.bind(this)}\n            onCancel={this.closeOptionsDialog.bind(this)}\n            loading={this.state.loading} \n            userData={this.state.userData}\n            saveOptions={this.saveOptions.bind(this)}\n            changeBasemap={this.setBasemap.bind(this)}\n            basemaps={this.state.basemaps}\n            basemap={this.state.basemap}\n            resetNotifications={this.resetNotifications.bind(this)}\n          />\n          <UsersDialog\n            open={this.state.usersDialogOpen}\n            onOk={this.closeUsersDialog.bind(this)}\n            onCancel={this.closeUsersDialog.bind(this)}\n            loading={this.state.loading}\n            user={this.state.user}\n            users={this.state.users}\n            deleteUser={this.deleteUser.bind(this)}\n            changeRole={this.changeRole.bind(this)}\n            guestUserEnabled={this.state.guestUserEnabled}\n            toggleEnableGuestUser={this.toggleEnableGuestUser.bind(this)}\n          />\n          <ProfileDialog \n            open={this.state.profileDialogOpen}\n            onOk={this.closeProfileDialog.bind(this)}\n            onCancel={this.closeProfileDialog.bind(this)}\n            loading={this.state.loading}\n            userData={this.state.userData}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AboutDialog \n            open={this.state.aboutDialogOpen}\n            onOk={this.closeAboutDialog.bind(this)}\n            marxanClientReleaseVersion={MARXAN_CLIENT_VERSION}\n            wdpaAttribution={this.state.wdpaAttribution}\n          />\n          <InfoPanel\n            open={this.state.infoPanelOpen}\n            activeTab={this.state.activeTab}\n            project={this.state.project}\n            metadata={this.state.metadata}\n            runMarxan={this.runMarxan.bind(this)} \n            stopProcess={this.stopProcess.bind(this)}\n            pid={this.state.pid}\n            renameProject={this.renameProject.bind(this)}\n            renameDescription={this.renameDescription.bind(this)}\n            features={this.state.projectFeatures}\n            project_tab_active={this.project_tab_active.bind(this)}\n            features_tab_active={this.features_tab_active.bind(this)}\n            pu_tab_active={this.pu_tab_active.bind(this)}\n            startPuEditSession={this.startPuEditSession.bind(this)}\n            stopPuEditSession={this.stopPuEditSession.bind(this)}\n            puEditing={this.state.puEditing}\n            clearManualEdits={this.clearManualEdits.bind(this)}\n            showRunSettingsDialog={this.showRunSettingsDialog.bind(this)}\n            openFeatureMenu={this.openFeatureMenu.bind(this)}\n            preprocessing={this.state.preprocessing}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            changeIucnCategory={this.changeIucnCategory.bind(this)}\n            updateFeature={this.updateFeature.bind(this)}\n            userRole={this.state.userData.ROLE}\n            toggleProjectPrivacy={this.toggleProjectPrivacy.bind(this)}\n            toggleCosts={this.toggleCosts.bind(this)}\n            openTargetDialog={this.openTargetDialog.bind(this)}\n            zoomToProjectBounds={this.zoomToProjectBounds.bind(this)}\n            getShareableLink={this.getShareableLink.bind(this)}\n            marxanServer={this.state.marxanServer}\n          />\n          <ResultsPanel\n            open={this.state.resultsPanelOpen}\n            preprocessing={this.state.preprocessing}\n            solutions={this.state.solutions}\n            loadSolution={this.loadSolution.bind(this)} \n            openClassificationDialog={this.openClassificationDialog.bind(this)}\n            hideResults={this.hideResults.bind(this)}\n            brew={this.state.brew}\n            messages={this.state.logMessages} \n            activeResultsTab={this.state.activeResultsTab}\n            legend_tab_active={this.legend_tab_active.bind(this)}\n            solutions_tab_active={this.solutions_tab_active.bind(this)}\n            log_tab_active={this.log_tab_active.bind(this)}\n            clearLog={this.clearLog.bind(this)}\n            owner={this.state.owner}\n            resultsLayer={this.state.resultsLayer}\n            wdpaLayer={ this.state.wdpaLayer }\n            pa_layer_visible={this.state.pa_layer_visible}\n            changeOpacity={this.changeOpacity.bind(this)}\n            results_layer_opacity={this.state.results_layer_opacity}\n            wdpa_layer_opacity={this.state.wdpa_layer_opacity}\n            userRole={this.state.userData.ROLE}\n          />\n          <FeatureInfoDialog\n            open={this.state.openInfoDialogOpen}\n            onOk={this.closeInfoDialog.bind(this)}\n            onCancel={this.closeInfoDialog.bind(this)}\n            loading={this.state.loading}\n            feature={this.state.currentFeature}\n            updateFeature={this.updateFeature.bind(this)}\n            FEATURE_PROPERTIES={FEATURE_PROPERTIES}\n            userRole={this.state.userData.ROLE}\n          />\n          <Popup\n            active_pu={this.state.active_pu} \n            xy={this.state.popup_point}\n          />\n          <PopupFeatureList\n            xy={this.state.popup_point}\n            features={this.state.puFeatures}\n            loading={this.state.loading}\n          />\n          <PopupPAList\n            xy={this.state.popup_point}\n            features={this.state.paFeatures}\n            loading={this.state.loading}\n            onMouseEnter={this.cancelTimer.bind(this)}\n            onMouseLeave={this.startTimer.bind(this)}\n          />\n          <ProjectsDialog \n            open={this.state.projectsDialogOpen} \n            onOk={this.closeProjectsDialog.bind(this)}\n            onCancel={this.closeProjectsDialog.bind(this)}\n            loading={this.state.loading}\n            projects={this.state.projects}\n            oldVersion={this.state.metadata.OLDVERSION}\n            deleteProject={this.deleteProject.bind(this)}\n            loadProject={this.loadProject.bind(this)}\n            cloneProject={this.cloneProject.bind(this)}\n            openNewProjectDialog={this.openNewProjectDialog.bind(this)}\n            openImportProjectDialog={this.openImportProjectDialog.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            userRole={this.state.userData.ROLE}\n            getAllFeatures={this.getAllFeatures.bind(this)}\n          />\n          <NewProjectDialog\n            open={this.state.newProjectDialogOpen}\n            onOk={this.closeNewProjectDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            planning_unit_grids={this.state.planning_unit_grids}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            features={this.state.allFeatures} \n            openCostsDialog={this.openCostsDialog.bind(this)}\n            selectedCosts={this.state.selectedCosts}\n            createNewProject={this.createNewProject.bind(this)}\n          />\n          <NewPlanningGridDialog \n            open={this.state.NewPlanningGridDialogOpen} \n            onCancel={this.closeNewPlanningGridDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing}\n            createNewPlanningUnitGrid={this.createNewPlanningUnitGrid.bind(this)}\n            countries={this.state.countries}\n            setSnackBar={this.setSnackBar.bind(this)}\n            ERRORS_PAGE={ERRORS_PAGE}\n          />\n          <ImportPlanningGridDialog\n            open={this.state.importPlanningGridDialogOpen} \n            onOk={this.importPlanningUnitGrid.bind(this)}\n            onCancel={this.closeImportPlanningGridDialog.bind(this)}\n            loading={this.state.loading}\n            requestEndpoint={this.state.marxanServer.endpoint}\n            SEND_CREDENTIALS={SEND_CREDENTIALS}\n            checkForErrors={this.checkForErrors.bind(this)} \n          />\n          <FeaturesDialog\n            open={this.state.featuresDialogOpen}\n            onOk={this.updateSelectedFeatures.bind(this)}\n            onCancel={this.closeFeaturesDialog.bind(this)}\n            loading={this.state.loading}\n            metadata={this.state.metadata}\n            allFeatures={this.state.allFeatures}\n            deleteFeature={this.deleteFeature.bind(this)}\n            openImportFeaturesDialog={this.openImportFeaturesDialog.bind(this)}\n            selectAllFeatures={this.selectAllFeatures.bind(this)}\n            clearAllFeatures={this.clearAllFeatures.bind(this)}\n            selectFeatures={this.selectFeatures.bind(this)}\n            userRole={this.state.userData.ROLE}\n            clickFeature={this.clickFeature.bind(this)}\n            addingRemovingFeatures={this.state.addingRemovingFeatures}\n            selectedFeatureIds={this.state.selectedFeatureIds}\n            initialiseDigitising={this.initialiseDigitising.bind(this)}\n            featuresDialogPopupOpen={this.state.featuresDialogPopupOpen}\n            closePopover={this.closePopover.bind(this)}\n            showNewFeaturesDialogPopover={this.showNewFeaturesDialogPopover.bind(this)}\n            previewFeature={this.previewFeature.bind(this)} \n          />\n          <FeatureDialog\n            open={this.state.featureDialogOpen}\n            onOk={this.closeFeatureDialog.bind(this)}\n            onCancel={this.closeFeatureDialog.bind(this)}\n            loading={this.state.loading}\n            feature_metadata={this.state.feature_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            zoomToBounds={this.zoomToBounds.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <NewFeatureDialog\n            open={this.state.NewFeatureDialogOpen} \n            onOk={this.closeNewFeatureDialog.bind(this)}\n            onCancel={this.closeNewFeatureDialog.bind(this)}\n            loading={this.state.loading}\n            createNewFeature={this.createNewFeature.bind(this)}\n          />\n          <ImportFeaturesDialog\n            open={this.state.importFeaturesDialogOpen} \n            importFeatures={this.importFeatures.bind(this)}\n            onCancel={this.closeImportFeaturesDialog.bind(this)}\n            loading={this.state.loading}\n            setFilename={this.setNewFeatureDatasetFilename.bind(this)}\n            SEND_CREDENTIALS={SEND_CREDENTIALS}\n            filename={this.state.featureDatasetFilename}\n            checkForErrors={this.checkForErrors.bind(this)} \n            requestEndpoint={this.state.marxanServer.endpoint}\n            preprocessing={this.state.preprocessing}\n            unzipShapefile={this.unzipShapefile.bind(this)}\n            getShapefileFieldnames={this.getShapefileFieldnames.bind(this)}\n            deleteShapefile={this.deleteShapefile.bind(this)}\n          />\n          <PlanningGridsDialog\n            open={this.state.planningGridsDialogOpen}\n            onOk={this.closePlanningGridsDialog.bind(this)}\n            onCancel={this.closePlanningGridsDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            planningGrids={this.state.planning_unit_grids}\n            openNewPlanningGridDialog={this.openNewPlanningGridDialog.bind(this)}\n            openImportPlanningGridDialog={this.openImportPlanningGridDialog.bind(this)}\n            deletePlanningGrid={this.deletePlanningUnitGrid.bind(this)}\n            previewPlanningGrid={this.previewPlanningGrid.bind(this)}\n          />\n          <FailedToDeleteDialog\n            open={this.state.FailedToDeleteDialogOpen} \n            projects={this.state.failedToDeleteProjects}\n            userRole={this.state.userData.ROLE}\n            onOk={this.closeFailedToDeleteDialog.bind(this)}\n            deleteWhat={this.state.deleteWhat}\n          />\n          <PlanningGridDialog\n            open={this.state.planningGridDialogOpen}\n            onOk={this.closePlanningGridDialog.bind(this)}\n            onCancel={this.closePlanningGridDialog.bind(this)}\n            loading={this.state.loading}\n            planning_grid_metadata={this.state.planning_grid_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            zoomToBounds={this.zoomToBounds.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <CostsDialog\n            open={this.state.CostsDialogOpen}\n            onOk={this.closeCostsDialog.bind(this)}\n            onCancel={this.closeCostsDialog.bind(this)}\n            costs={this.state.costs}\n          />\n          <RunSettingsDialog\n            open={this.state.settingsDialogOpen}\n            onOk={this.closeRunSettingsDialog.bind(this)}\n            onCancel={this.closeRunSettingsDialog.bind(this)}\n            loading={this.state.loading}\n            updateRunParams={this.updateRunParams.bind(this)}\n            runParams={this.state.runParams}\n            showClumpingDialog={this.showClumpingDialog.bind(this)}\n            userRole={this.state.userData.ROLE}\n          />\n          <ClassificationDialog \n            open={this.state.classificationDialogOpen}\n            onOk={this.closeClassificationDialog.bind(this)}\n            onCancel={this.closeClassificationDialog.bind(this)}\n            loading={this.state.loading}\n            renderer={this.state.renderer}\n            changeColorCode={this.changeColorCode.bind(this)}\n            changeRenderer={this.changeRenderer.bind(this)}\n            changeNumClasses={this.changeNumClasses.bind(this)}\n            changeShowTopClasses={this.changeShowTopClasses.bind(this)}\n            summaryStats={this.state.summaryStats}\n            brew={this.state.brew}\n            dataBreaks={this.state.dataBreaks}\n          />\n          <ClumpingDialog\n            open={this.state.clumpingDialogOpen}\n            onOk={this.hideClumpingDialog.bind(this)}\n            onCancel={this.hideClumpingDialog.bind(this)}\n            tileset={this.state.tileset}\n            RESULTS_LAYER_NAME={RESULTS_LAYER_NAME}\n            map0_paintProperty={this.state.map0_paintProperty}\n            map1_paintProperty={this.state.map1_paintProperty}\n            map2_paintProperty={this.state.map2_paintProperty}\n            map3_paintProperty={this.state.map3_paintProperty}\n            map4_paintProperty={this.state.map4_paintProperty}\n            mapCentre={this.state.mapCentre}\n            mapZoom={this.state.mapZoom}\n            createProjectGroupAndRun={this.createProjectGroupAndRun.bind(this)}\n            rerunProjects={this.rerunProjects.bind(this)}\n            setBlmValue={this.setBlmValue.bind(this)}\n            clumpingRunning={this.state.clumpingRunning}\n          />\n          <ImportProjectDialog\n            open={this.state.importProjectDialogOpen}\n            onOk={this.closeImportDialog.bind(this)}\n            loading={this.state.loading}\n            requestEndpoint={this.state.marxanServer.endpoint}\n            SEND_CREDENTIALS={SEND_CREDENTIALS}\n            importProject={this.importProject.bind(this)}\n            checkForErrors={this.checkForErrors.bind(this)} \n            log={this.log.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <RunLogDialog\n            open={this.state.runLogDialogOpen}\n            onOk={this.closeRunLogDialog.bind(this)}\n            onRequestClose={this.closeRunLogDialog.bind(this)}\n            loading={this.state.loading}\n            preprocessing={this.state.preprocessing}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            runLogs={this.state.runLogs}\n            getRunLogs={this.getRunLogs.bind(this)}\n            clearRunLogs={this.clearRunLogs.bind(this)}\n            stopMarxan={this.stopProcess.bind(this)}\n          />\n          <ServerDetailsDialog  \n            open={this.state.serverDetailsDialogOpen}\n            onOk={this.closeServerDetailsDialog.bind(this)}\n            onRequestClose={this.closeServerDetailsDialog.bind(this)}\n            newWDPAVersion={this.state.newWDPAVersion}\n            marxanServer={this.state.marxanServer}\n            updateWDPA={this.updateWDPA.bind(this)}\n            loading={this.state.preprocessing}\n          />\n          <ChangePasswordDialog  \n            open={this.state.changePasswordDialogOpen}\n            onOk={this.closeChangePasswordDialog.bind(this)}\n            user={this.state.user}\n            onRequestClose={this.closeChangePasswordDialog.bind(this)}\n            checkPassword={this.checkPassword.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AlertDialog\n            open={this.state.alertDialogOpen}\n            onOk={this.closeAlertDialog.bind(this)}\n          />\n          <Snackbar\n            open={this.state.snackbarOpen}\n            message={message}\n            onRequestClose={this.closeSnackbar.bind(this)}\n            style={{maxWidth:'800px !important'}} \n            contentStyle={{maxWidth:'800px !important'}}\n            bodyStyle={{maxWidth:'800px !important'}}\n          />\n          <Notifications\n            open={this.state.notificationsOpen && this.state.loggedIn}\n            hideNotifications={this.hideNotifications.bind(this)}\n            removeNotification={this.removeNotification.bind(this)}\n            notifications={this.state.notifications}\n          />\n          <Popover open={this.state.featureMenuOpen} anchorEl={this.state.menuAnchor} onRequestClose={this.closeFeatureMenu.bind(this)} style={{width:'307px'}}>\n            <Menu style={{width:'207px'}} onMouseLeave={this.closeFeatureMenu.bind(this)} >\n              <MenuItemWithButton leftIcon={<Properties style={{margin: '1px'}}/>} onClick={this.openInfoDialog.bind(this)}>Properties</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<RemoveFromProject style={{margin: '1px'}}/>} style={{display: ((this.state.currentFeature.old_version)||(this.state.userData.ROLE === \"ReadOnly\")) ? 'none' : 'block'}} onClick={this.removeFromProject.bind(this, this.state.currentFeature)}>Remove from project</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={(this.state.currentFeature.feature_layer_loaded) ? <RemoveFromMap style={{margin: '1px'}}/> : <AddToMap style={{margin: '1px'}}/>} style={{display: (this.state.currentFeature.tilesetid) ? 'block' : 'none'}} onClick={this.toggleFeatureLayer.bind(this, this.state.currentFeature)}>{(this.state.currentFeature.feature_layer_loaded) ? \"Remove from map\" : \"Add to map\"}</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={(this.state.puvsprLayerText === HIDE_PUVSPR_LAYER_TEXT) ? <RemoveFromMap style={{margin: '1px'}}/> : <AddToMap style={{margin: '1px'}}/>} onClick={this.toggleFeaturePuvsprLayer.bind(this, this.state.currentFeature)} disabled={!(this.state.currentFeature.preprocessed && this.state.currentFeature.occurs_in_planning_grid)}>{this.state.puvsprLayerText}</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<ZoomIn style={{margin: '1px'}}/>} style={{display: (this.state.currentFeature.extent) ? 'block' : 'none'}} onClick={this.zoomToFeature.bind(this, this.state.currentFeature)}>Zoom to feature extent</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<Preprocess style={{margin: '1px'}}/>} style={{display: ((this.state.currentFeature.old_version)||(this.state.userData.ROLE === \"ReadOnly\")) ? 'none' : 'block'}} onClick={this.preprocessSingleFeature.bind(this, this.state.currentFeature)} disabled={this.state.currentFeature.preprocessed || this.state.preprocessing}>Pre-process</MenuItemWithButton>\n            </Menu>\n          </Popover>   \n          <TargetDialog \n            open={this.state.targetDialogOpen}\n            onOk={this.closeTargetDialog.bind(this)}\n            showCancelButton={true}\n            onCancel={this.closeTargetDialog.bind(this)}\n            updateTargetValueForFeatures={this.updateTargetValueForFeatures.bind(this)}\n          />\n          <ShareableLinkDialog\n            open={this.state.shareableLinkDialogOpen}\n            onOk={this.closeShareableLinkDialog.bind(this)}\n            shareableLinkUrl={window.location + \"?server=\" + this.state.marxanServer.name + \"&user=\" + this.state.user + \"&project=\" + this.state.project}\n          />\n          <AppBar\n            open={this.state.loggedIn}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            infoPanelOpen={this.state.infoPanelOpen}\n            resultsPanelOpen={this.state.resultsPanelOpen}\n            openProjectsDialog={this.openProjectsDialog.bind(this)}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            openPlanningGridsDialog={this.openPlanningGridsDialog.bind(this)}\n            toggleInfoPanel={this.toggleInfoPanel.bind(this)}\n            toggleResultsPanel={this.toggleResultsPanel.bind(this)}\n            showUserMenu={this.showUserMenu.bind(this)}\n            showHelpMenu={this.showHelpMenu.bind(this)}\n            openUsersDialog={this.openUsersDialog.bind(this)}\n            openRunLogDialog={this.openRunLogDialog.bind(this)}\n          />\n        </React.Fragment>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'typeface-roboto';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = {\n\t// returns a boolean if it is a valid number\n\tisNumber: function (str) {\n\t\tvar pattern = /^\\d+$/;\n\t\treturn pattern.test(str); \n\t},\n\tisValidTargetValue: function (value) {\n\t\tif (module.exports.isNumber(value)){\n\t\t\tif ((value<=100)&&(value>=0)){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tgetMaxNumberOfClasses: function(brew, colorCode) {\n\t\t//get the color scheme\n\t\tlet colorScheme = brew.colorSchemes[colorCode];\n\t\t//get the names of the properties for the colorScheme\n\t\tlet properties = Object.keys(colorScheme).filter(function(key) { return (key !== 'properties'); });\n\t\t//get them as numbers\n\t\tlet numbers = properties.map((property) => { return Number(property) });\n\t\t//get the maximum number of colors in this scheme\n\t\tlet colorSchemeLength = numbers.reduce(function(a, b) {\n\t\t\treturn Math.max(a, b);\n\t\t});\n\t\treturn colorSchemeLength;\n\t}\n};"],"sourceRoot":""}